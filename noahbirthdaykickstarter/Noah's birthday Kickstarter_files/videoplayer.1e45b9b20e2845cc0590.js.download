webpackJsonp([14],{"+V2Z":function(e,t,i){"use strict";var n,r=i("I1z3"),a=(n=r)&&n.__esModule?n:{default:n};var s=i("l/Rs");i("l/Rs");s.browser=a.default},"+fgJ":function(e,t,i){i("l/Rs"),i("l/Rs");!function(e){"use strict";e(i("l/Rs"))}(function(e){"use strict";var t=0;e.ajaxTransport("iframe",function(i){if(i.async){var n,r,a,s=i.initialIframeSrc||"javascript:false;";return{send:function(o,l){(n=e('<form style="display:none;"></form>')).attr("accept-charset",i.formAcceptCharset),a=/\?/.test(i.url)?"&":"?","DELETE"===i.type?(i.url=i.url+a+"_method=DELETE",i.type="POST"):"PUT"===i.type?(i.url=i.url+a+"_method=PUT",i.type="POST"):"PATCH"===i.type&&(i.url=i.url+a+"_method=PATCH",i.type="POST"),r=e('<iframe src="'+s+'" name="iframe-transport-'+(t+=1)+'"></iframe>').bind("load",function(){var t,a=e.isArray(i.paramName)?i.paramName:[i.paramName];r.unbind("load").bind("load",function(){var t;try{if(!(t=r.contents()).length||!t[0].firstChild)throw new Error}catch(e){t=void 0}l(200,"success",{iframe:t}),e('<iframe src="'+s+'"></iframe>').appendTo(n),window.setTimeout(function(){n.remove()},0)}),n.prop("target",r.prop("name")).prop("action",i.url).prop("method",i.type),i.formData&&e.each(i.formData,function(t,i){e('<input type="hidden"/>').prop("name",i.name).val(i.value).appendTo(n)}),i.fileInput&&i.fileInput.length&&"POST"===i.type&&(t=i.fileInput.clone(),i.fileInput.after(function(e){return t[e]}),i.paramName&&i.fileInput.each(function(t){e(this).prop("name",a[t]||i.paramName)}),n.append(i.fileInput).prop("enctype","multipart/form-data").prop("encoding","multipart/form-data"),i.fileInput.removeAttr("form")),n.submit(),t&&t.length&&i.fileInput.each(function(i,n){var r=e(t[i]);e(n).prop("name",r.prop("name")).attr("form",r.attr("form")),r.replaceWith(n)})}),n.append(r).appendTo(document.body)},abort:function(){r&&r.unbind("load").prop("src",s),n&&n.remove()}}}}),e.ajaxSetup({converters:{"iframe text":function(t){return t&&e(t[0].body).text()},"iframe json":function(t){return t&&e.parseJSON(e(t[0].body).text())},"iframe html":function(t){return t&&e(t[0].body).html()},"iframe xml":function(t){var i=t&&t[0];return i&&e.isXMLDoc(i)?i:e.parseXML(i.XMLDocument&&i.XMLDocument.xml||e(i.body).html())},"iframe script":function(t){return t&&e.globalEval(e(t[0].body).text())}}})})},"/V0p":function(e,t,i){(function(n){var r;!function(){var a;function s(e){var t,i,n,r="",a=-1;if(e&&e.length)for(n=e.length;(a+=1)<n;)t=e.charCodeAt(a),i=a+1<n?e.charCodeAt(a+1):0,55296<=t&&t<=56319&&56320<=i&&i<=57343&&(t=65536+((1023&t)<<10)+(1023&i),a+=1),t<=127?r+=String.fromCharCode(t):t<=2047?r+=String.fromCharCode(192|t>>>6&31,128|63&t):t<=65535?r+=String.fromCharCode(224|t>>>12&15,128|t>>>6&63,128|63&t):t<=2097151&&(r+=String.fromCharCode(240|t>>>18&7,128|t>>>12&63,128|t>>>6&63,128|63&t));return r}function o(e,t){var i=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(i>>16)<<16|65535&i}function l(e,t){return e<<t|e>>>32-t}function u(e,t){for(var i,n=t?"0123456789ABCDEF":"0123456789abcdef",r="",a=0,s=e.length;a<s;a+=1)i=e.charCodeAt(a),r+=n.charAt(i>>>4&15)+n.charAt(15&i);return r}function c(e){var t,i=32*e.length,n="";for(t=0;t<i;t+=8)n+=String.fromCharCode(e[t>>5]>>>24-t%32&255);return n}function d(e){var t,i=32*e.length,n="";for(t=0;t<i;t+=8)n+=String.fromCharCode(e[t>>5]>>>t%32&255);return n}function h(e){var t,i=8*e.length,n=Array(e.length>>2),r=n.length;for(t=0;t<r;t+=1)n[t]=0;for(t=0;t<i;t+=8)n[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return n}function f(e){var t,i=8*e.length,n=Array(e.length>>2),r=n.length;for(t=0;t<r;t+=1)n[t]=0;for(t=0;t<i;t+=8)n[t>>5]|=(255&e.charCodeAt(t/8))<<24-t%32;return n}function p(e,t){var i,n,r,a,s,o,l,u,c=t.length,d=Array();for(a=(o=Array(Math.ceil(e.length/2))).length,i=0;i<a;i+=1)o[i]=e.charCodeAt(2*i)<<8|e.charCodeAt(2*i+1);for(;o.length>0;){for(s=Array(),r=0,i=0;i<o.length;i+=1)r=(r<<16)+o[i],r-=(n=Math.floor(r/c))*c,(s.length>0||n>0)&&(s[s.length]=n);d[d.length]=r,o=s}for(l="",i=d.length-1;i>=0;i--)l+=t.charAt(d[i]);for(u=Math.ceil(8*e.length/(Math.log(t.length)/Math.log(2))),i=l.length;i<u;i+=1)l=t[0]+l;return l}function g(e,t){var i,n,r,a="",s=e.length;for(t=t||"=",i=0;i<s;i+=3)for(r=e.charCodeAt(i)<<16|(i+1<s?e.charCodeAt(i+1)<<8:0)|(i+2<s?e.charCodeAt(i+2):0),n=0;n<4;n+=1)8*i+6*n>8*e.length?a+=t:a+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(r>>>6*(3-n)&63);return a}a={VERSION:"1.0.6",Base64:function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t="=",i=!0;this.encode=function(n){var r,a,o,l="",u=n.length;for(t=t||"=",n=i?s(n):n,r=0;r<u;r+=3)for(o=n.charCodeAt(r)<<16|(r+1<u?n.charCodeAt(r+1)<<8:0)|(r+2<u?n.charCodeAt(r+2):0),a=0;a<4;a+=1)l+=8*r+6*a>8*u?t:e.charAt(o>>>6*(3-a)&63);return l},this.decode=function(n){var r,a,s,o,l,u,c,d,h="",f=[];if(!n)return n;r=d=0,n=n.replace(new RegExp("\\"+t,"gi"),"");do{a=(c=e.indexOf(n.charAt(r+=1))<<18|e.indexOf(n.charAt(r+=1))<<12|(l=e.indexOf(n.charAt(r+=1)))<<6|(u=e.indexOf(n.charAt(r+=1))))>>16&255,s=c>>8&255,o=255&c,f[d+=1]=64===l?String.fromCharCode(a):64===u?String.fromCharCode(a,s):String.fromCharCode(a,s,o)}while(r<n.length);return h=f.join(""),h=i?function(e){var t,i,n,r,a,s,o=[];if(t=i=n=r=a=0,e&&e.length)for(s=e.length,e+="";t<s;)i+=1,(n=e.charCodeAt(t))<128?(o[i]=String.fromCharCode(n),t+=1):n>191&&n<224?(r=e.charCodeAt(t+1),o[i]=String.fromCharCode((31&n)<<6|63&r),t+=2):(r=e.charCodeAt(t+1),a=e.charCodeAt(t+2),o[i]=String.fromCharCode((15&n)<<12|(63&r)<<6|63&a),t+=3);return o.join("")}(h):h},this.setPad=function(e){return t=e||t,this},this.setTab=function(t){return e=t||e,this},this.setUTF8=function(e){return"boolean"==typeof e&&(i=e),this}},CRC32:function(e){var t,i,n,r=0,a=0;for(e=s(e),t=["00000000 77073096 EE0E612C 990951BA 076DC419 706AF48F E963A535 9E6495A3 0EDB8832 ","79DCB8A4 E0D5E91E 97D2D988 09B64C2B 7EB17CBD E7B82D07 90BF1D91 1DB71064 6AB020F2 F3B97148 ","84BE41DE 1ADAD47D 6DDDE4EB F4D4B551 83D385C7 136C9856 646BA8C0 FD62F97A 8A65C9EC 14015C4F ","63066CD9 FA0F3D63 8D080DF5 3B6E20C8 4C69105E D56041E4 A2677172 3C03E4D1 4B04D447 D20D85FD ","A50AB56B 35B5A8FA 42B2986C DBBBC9D6 ACBCF940 32D86CE3 45DF5C75 DCD60DCF ABD13D59 26D930AC ","51DE003A C8D75180 BFD06116 21B4F4B5 56B3C423 CFBA9599 B8BDA50F 2802B89E 5F058808 C60CD9B2 ","B10BE924 2F6F7C87 58684C11 C1611DAB B6662D3D 76DC4190 01DB7106 98D220BC EFD5102A 71B18589 ","06B6B51F 9FBFE4A5 E8B8D433 7807C9A2 0F00F934 9609A88E E10E9818 7F6A0DBB 086D3D2D 91646C97 ","E6635C01 6B6B51F4 1C6C6162 856530D8 F262004E 6C0695ED 1B01A57B 8208F4C1 F50FC457 65B0D9C6 ","12B7E950 8BBEB8EA FCB9887C 62DD1DDF 15DA2D49 8CD37CF3 FBD44C65 4DB26158 3AB551CE A3BC0074 ","D4BB30E2 4ADFA541 3DD895D7 A4D1C46D D3D6F4FB 4369E96A 346ED9FC AD678846 DA60B8D0 44042D73 ","33031DE5 AA0A4C5F DD0D7CC9 5005713C 270241AA BE0B1010 C90C2086 5768B525 206F85B3 B966D409 ","CE61E49F 5EDEF90E 29D9C998 B0D09822 C7D7A8B4 59B33D17 2EB40D81 B7BD5C3B C0BA6CAD EDB88320 ","9ABFB3B6 03B6E20C 74B1D29A EAD54739 9DD277AF 04DB2615 73DC1683 E3630B12 94643B84 0D6D6A3E ","7A6A5AA8 E40ECF0B 9309FF9D 0A00AE27 7D079EB1 F00F9344 8708A3D2 1E01F268 6906C2FE F762575D ","806567CB 196C3671 6E6B06E7 FED41B76 89D32BE0 10DA7A5A 67DD4ACC F9B9DF6F 8EBEEFF9 17B7BE43 ","60B08ED5 D6D6A3E8 A1D1937E 38D8C2C4 4FDFF252 D1BB67F1 A6BC5767 3FB506DD 48B2364B D80D2BDA ","AF0A1B4C 36034AF6 41047A60 DF60EFC3 A867DF55 316E8EEF 4669BE79 CB61B38C BC66831A 256FD2A0 ","5268E236 CC0C7795 BB0B4703 220216B9 5505262F C5BA3BBE B2BD0B28 2BB45A92 5CB36A04 C2D7FFA7 ","B5D0CF31 2CD99E8B 5BDEAE1D 9B64C2B0 EC63F226 756AA39C 026D930A 9C0906A9 EB0E363F 72076785 ","05005713 95BF4A82 E2B87A14 7BB12BAE 0CB61B38 92D28E9B E5D5BE0D 7CDCEFB7 0BDBDF21 86D3D2D4 ","F1D4E242 68DDB3F8 1FDA836E 81BE16CD F6B9265B 6FB077E1 18B74777 88085AE6 FF0F6A70 66063BCA ","11010B5C 8F659EFF F862AE69 616BFFD3 166CCF45 A00AE278 D70DD2EE 4E048354 3903B3C2 A7672661 ","D06016F7 4969474D 3E6E77DB AED16A4A D9D65ADC 40DF0B66 37D83BF0 A9BCAE53 DEBB9EC5 47B2CF7F ","30B5FFE9 BDBDF21C CABAC28A 53B39330 24B4A3A6 BAD03605 CDD70693 54DE5729 23D967BF B3667A2E ","C4614AB8 5D681B02 2A6F2B94 B40BBE37 C30C8EA1 5A05DF1B 2D02EF8D"].join(""),r^=-1,i=0,n=e.length;i<n;i+=1)a=255&(r^e.charCodeAt(i)),r=r>>>8^"0x"+t.substr(9*a,8);return(-1^r)>>>0},MD5:function(e){var t=!(!e||"boolean"!=typeof e.uppercase)&&e.uppercase,i=e&&"string"==typeof e.pad?e.pad:"=",n=!e||"boolean"!=typeof e.utf8||e.utf8;function r(e){return d(c(h(e=n?s(e):e),8*e.length))}function a(e,t){var i,r,a,o,l;for(e=n?s(e):e,t=n?s(t):t,(i=h(e)).length>16&&(i=c(i,8*e.length)),r=Array(16),a=Array(16),l=0;l<16;l+=1)r[l]=909522486^i[l],a[l]=1549556828^i[l];return o=c(r.concat(h(t)),512+8*t.length),d(c(a.concat(o),640))}function c(e,t){var i,n,r,a,s,l=1732584193,u=-271733879,c=-1732584194,d=271733878;for(e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t,i=0;i<e.length;i+=16)n=l,r=u,a=c,s=d,u=_(u=_(u=_(u=_(u=y(u=y(u=y(u=y(u=v(u=v(u=v(u=v(u=m(u=m(u=m(u=m(u,c=m(c,d=m(d,l=m(l,u,c,d,e[i+0],7,-680876936),u,c,e[i+1],12,-389564586),l,u,e[i+2],17,606105819),d,l,e[i+3],22,-1044525330),c=m(c,d=m(d,l=m(l,u,c,d,e[i+4],7,-176418897),u,c,e[i+5],12,1200080426),l,u,e[i+6],17,-1473231341),d,l,e[i+7],22,-45705983),c=m(c,d=m(d,l=m(l,u,c,d,e[i+8],7,1770035416),u,c,e[i+9],12,-1958414417),l,u,e[i+10],17,-42063),d,l,e[i+11],22,-1990404162),c=m(c,d=m(d,l=m(l,u,c,d,e[i+12],7,1804603682),u,c,e[i+13],12,-40341101),l,u,e[i+14],17,-1502002290),d,l,e[i+15],22,1236535329),c=v(c,d=v(d,l=v(l,u,c,d,e[i+1],5,-165796510),u,c,e[i+6],9,-1069501632),l,u,e[i+11],14,643717713),d,l,e[i+0],20,-373897302),c=v(c,d=v(d,l=v(l,u,c,d,e[i+5],5,-701558691),u,c,e[i+10],9,38016083),l,u,e[i+15],14,-660478335),d,l,e[i+4],20,-405537848),c=v(c,d=v(d,l=v(l,u,c,d,e[i+9],5,568446438),u,c,e[i+14],9,-1019803690),l,u,e[i+3],14,-187363961),d,l,e[i+8],20,1163531501),c=v(c,d=v(d,l=v(l,u,c,d,e[i+13],5,-1444681467),u,c,e[i+2],9,-51403784),l,u,e[i+7],14,1735328473),d,l,e[i+12],20,-1926607734),c=y(c,d=y(d,l=y(l,u,c,d,e[i+5],4,-378558),u,c,e[i+8],11,-2022574463),l,u,e[i+11],16,1839030562),d,l,e[i+14],23,-35309556),c=y(c,d=y(d,l=y(l,u,c,d,e[i+1],4,-1530992060),u,c,e[i+4],11,1272893353),l,u,e[i+7],16,-155497632),d,l,e[i+10],23,-1094730640),c=y(c,d=y(d,l=y(l,u,c,d,e[i+13],4,681279174),u,c,e[i+0],11,-358537222),l,u,e[i+3],16,-722521979),d,l,e[i+6],23,76029189),c=y(c,d=y(d,l=y(l,u,c,d,e[i+9],4,-640364487),u,c,e[i+12],11,-421815835),l,u,e[i+15],16,530742520),d,l,e[i+2],23,-995338651),c=_(c,d=_(d,l=_(l,u,c,d,e[i+0],6,-198630844),u,c,e[i+7],10,1126891415),l,u,e[i+14],15,-1416354905),d,l,e[i+5],21,-57434055),c=_(c,d=_(d,l=_(l,u,c,d,e[i+12],6,1700485571),u,c,e[i+3],10,-1894986606),l,u,e[i+10],15,-1051523),d,l,e[i+1],21,-2054922799),c=_(c,d=_(d,l=_(l,u,c,d,e[i+8],6,1873313359),u,c,e[i+15],10,-30611744),l,u,e[i+6],15,-1560198380),d,l,e[i+13],21,1309151649),c=_(c,d=_(d,l=_(l,u,c,d,e[i+4],6,-145523070),u,c,e[i+11],10,-1120210379),l,u,e[i+2],15,718787259),d,l,e[i+9],21,-343485551),l=o(l,n),u=o(u,r),c=o(c,a),d=o(d,s);return Array(l,u,c,d)}function f(e,t,i,n,r,a){return o(l(o(o(t,e),o(n,a)),r),i)}function m(e,t,i,n,r,a,s){return f(t&i|~t&n,e,t,r,a,s)}function v(e,t,i,n,r,a,s){return f(t&n|i&~n,e,t,r,a,s)}function y(e,t,i,n,r,a,s){return f(t^i^n,e,t,r,a,s)}function _(e,t,i,n,r,a,s){return f(i^(t|~n),e,t,r,a,s)}this.hex=function(e){return u(r(e),t)},this.b64=function(e){return g(r(e),i)},this.any=function(e,t){return p(r(e),t)},this.raw=function(e){return r(e)},this.hex_hmac=function(e,i){return u(a(e,i),t)},this.b64_hmac=function(e,t){return g(a(e,t),i)},this.any_hmac=function(e,t,i){return p(a(e,t),i)},this.vm_test=function(){return"900150983cd24fb0d6963f7d28e17f72"===hex("abc").toLowerCase()},this.setUpperCase=function(e){return"boolean"==typeof e&&(t=e),this},this.setPad=function(e){return i=e||i,this},this.setUTF8=function(e){return"boolean"==typeof e&&(n=e),this}},SHA1:function(e){var t=!(!e||"boolean"!=typeof e.uppercase)&&e.uppercase,i=e&&"string"==typeof e.pad?e.pad:"=",n=!e||"boolean"!=typeof e.utf8||e.utf8;function r(e){return c(d(f(e=n?s(e):e),8*e.length))}function a(e,t){var i,r,a,o,l;for(e=n?s(e):e,t=n?s(t):t,(i=f(e)).length>16&&(i=d(i,8*e.length)),r=Array(16),a=Array(16),o=0;o<16;o+=1)r[o]=909522486^i[o],a[o]=1549556828^i[o];return l=d(r.concat(f(t)),512+8*t.length),c(d(a.concat(l),672))}function d(e,t){var i,n,r,a,s,u,c,d,f=Array(80),p=1732584193,g=-271733879,v=-1732584194,y=271733878,_=-1009589776;for(e[t>>5]|=128<<24-t%32,e[15+(t+64>>9<<4)]=t,i=0;i<e.length;i+=16){for(a=p,s=g,u=v,c=y,d=_,n=0;n<80;n+=1)f[n]=n<16?e[i+n]:l(f[n-3]^f[n-8]^f[n-14]^f[n-16],1),r=o(o(l(p,5),h(n,g,v,y)),o(o(_,f[n]),m(n))),_=y,y=v,v=l(g,30),g=p,p=r;p=o(p,a),g=o(g,s),v=o(v,u),y=o(y,c),_=o(_,d)}return Array(p,g,v,y,_)}function h(e,t,i,n){return e<20?t&i|~t&n:e<40?t^i^n:e<60?t&i|t&n|i&n:t^i^n}function m(e){return e<20?1518500249:e<40?1859775393:e<60?-1894007588:-899497514}this.hex=function(e){return u(r(e),t)},this.b64=function(e){return g(r(e),i)},this.any=function(e,t){return p(r(e),t)},this.raw=function(e){return r(e)},this.hex_hmac=function(e,t){return u(a(e,t))},this.b64_hmac=function(e,t){return g(a(e,t),i)},this.any_hmac=function(e,t,i){return p(a(e,t),i)},this.vm_test=function(){return"900150983cd24fb0d6963f7d28e17f72"===hex("abc").toLowerCase()},this.setUpperCase=function(e){return"boolean"==typeof e&&(t=e),this},this.setPad=function(e){return i=e||i,this},this.setUTF8=function(e){return"boolean"==typeof e&&(n=e),this}},SHA256:function(e){!(!e||"boolean"!=typeof e.uppercase)&&e.uppercase;var t,i=e&&"string"==typeof e.pad?e.pad:"=",n=!e||"boolean"!=typeof e.utf8||e.utf8;function r(e,t){return c(b(f(e=t?s(e):e),8*e.length))}function a(e,t){e=n?s(e):e,t=n?s(t):t;var i,r=0,a=f(e),o=Array(16),l=Array(16);for(a.length>16&&(a=b(a,8*e.length));r<16;r+=1)o[r]=909522486^a[r],l[r]=1549556828^a[r];return i=b(o.concat(f(t)),512+8*t.length),c(b(l.concat(i),768))}function l(e,t){return e>>>t|e<<32-t}function d(e,t){return e>>>t}function h(e,t,i){return e&t^~e&i}function m(e,t,i){return e&t^e&i^t&i}function v(e){return l(e,2)^l(e,13)^l(e,22)}function y(e){return l(e,6)^l(e,11)^l(e,25)}function _(e){return l(e,7)^l(e,18)^d(e,3)}function b(e,i){var n,r,a,s,u,c,f,p,g,b,w,E,A,T=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],S=new Array(64);for(e[i>>5]|=128<<24-i%32,e[15+(i+64>>9<<4)]=i,g=0;g<e.length;g+=16){for(n=T[0],r=T[1],a=T[2],s=T[3],u=T[4],c=T[5],f=T[6],p=T[7],b=0;b<64;b+=1)S[b]=b<16?e[b+g]:o(o(o(l(A=S[b-2],17)^l(A,19)^d(A,10),S[b-7]),_(S[b-15])),S[b-16]),w=o(o(o(o(p,y(u)),h(u,c,f)),t[b]),S[b]),E=o(v(n),m(n,r,a)),p=f,f=c,c=u,u=o(s,w),s=a,a=r,r=n,n=o(w,E);T[0]=o(n,T[0]),T[1]=o(r,T[1]),T[2]=o(a,T[2]),T[3]=o(s,T[3]),T[4]=o(u,T[4]),T[5]=o(c,T[5]),T[6]=o(f,T[6]),T[7]=o(p,T[7])}return T}this.hex=function(e){return u(r(e,n))},this.b64=function(e){return g(r(e,n),i)},this.any=function(e,t){return p(r(e,n),t)},this.raw=function(e){return r(e,n)},this.hex_hmac=function(e,t){return u(a(e,t))},this.b64_hmac=function(e,t){return g(a(e,t),i)},this.any_hmac=function(e,t,i){return p(a(e,t),i)},this.vm_test=function(){return"900150983cd24fb0d6963f7d28e17f72"===hex("abc").toLowerCase()},this.setUpperCase=function(e){return"boolean"==typeof e&&e,this},this.setPad=function(e){return i=e||i,this},this.setUTF8=function(e){return"boolean"==typeof e&&(n=e),this},t=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998]},SHA512:function(e){!(!e||"boolean"!=typeof e.uppercase)&&e.uppercase;var t,i=e&&"string"==typeof e.pad?e.pad:"=",n=!e||"boolean"!=typeof e.utf8||e.utf8;function r(e){return c(o(f(e=n?s(e):e),8*e.length))}function a(e,t){e=n?s(e):e,t=n?s(t):t;var i,r=0,a=f(e),l=Array(32),u=Array(32);for(a.length>32&&(a=o(a,8*e.length));r<32;r+=1)l[r]=909522486^a[r],u[r]=1549556828^a[r];return i=o(l.concat(f(t)),1024+8*t.length),c(o(u.concat(i),1536))}function o(e,i){var n,r,a,s=new Array(80),o=new Array(16),u=[new l(1779033703,-205731576),new l(-1150833019,-2067093701),new l(1013904242,-23791573),new l(-1521486534,1595750129),new l(1359893119,-1377402159),new l(-1694144372,725511199),new l(528734635,-79577749),new l(1541459225,327033209)],c=new l(0,0),f=new l(0,0),p=new l(0,0),g=new l(0,0),w=new l(0,0),E=new l(0,0),A=new l(0,0),T=new l(0,0),S=new l(0,0),R=new l(0,0),D=new l(0,0),x=new l(0,0),C=new l(0,0),P=new l(0,0),I=new l(0,0),k=new l(0,0),L=new l(0,0);for(void 0===t&&(t=[new l(1116352408,-685199838),new l(1899447441,602891725),new l(-1245643825,-330482897),new l(-373957723,-2121671748),new l(961987163,-213338824),new l(1508970993,-1241133031),new l(-1841331548,-1357295717),new l(-1424204075,-630357736),new l(-670586216,-1560083902),new l(310598401,1164996542),new l(607225278,1323610764),new l(1426881987,-704662302),new l(1925078388,-226784913),new l(-2132889090,991336113),new l(-1680079193,633803317),new l(-1046744716,-815192428),new l(-459576895,-1628353838),new l(-272742522,944711139),new l(264347078,-1953704523),new l(604807628,2007800933),new l(770255983,1495990901),new l(1249150122,1856431235),new l(1555081692,-1119749164),new l(1996064986,-2096016459),new l(-1740746414,-295247957),new l(-1473132947,766784016),new l(-1341970488,-1728372417),new l(-1084653625,-1091629340),new l(-958395405,1034457026),new l(-710438585,-1828018395),new l(113926993,-536640913),new l(338241895,168717936),new l(666307205,1188179964),new l(773529912,1546045734),new l(1294757372,1522805485),new l(1396182291,-1651133473),new l(1695183700,-1951439906),new l(1986661051,1014477480),new l(-2117940946,1206759142),new l(-1838011259,344077627),new l(-1564481375,1290863460),new l(-1474664885,-1136513023),new l(-1035236496,-789014639),new l(-949202525,106217008),new l(-778901479,-688958952),new l(-694614492,1432725776),new l(-200395387,1467031594),new l(275423344,851169720),new l(430227734,-1194143544),new l(506948616,1363258195),new l(659060556,-544281703),new l(883997877,-509917016),new l(958139571,-976659869),new l(1322822218,-482243893),new l(1537002063,2003034995),new l(1747873779,-692930397),new l(1955562222,1575990012),new l(2024104815,1125592928),new l(-2067236844,-1578062990),new l(-1933114872,442776044),new l(-1866530822,593698344),new l(-1538233109,-561857047),new l(-1090935817,-1295615723),new l(-965641998,-479046869),new l(-903397682,-366583396),new l(-779700025,566280711),new l(-354779690,-840897762),new l(-176337025,-294727304),new l(116418474,1914138554),new l(174292421,-1563912026),new l(289380356,-1090974290),new l(460393269,320620315),new l(685471733,587496836),new l(852142971,1086792851),new l(1017036298,365543100),new l(1126000580,-1676669620),new l(1288033470,-885112138),new l(1501505948,-60457430),new l(1607167915,987167468),new l(1816402316,1246189591)]),r=0;r<80;r+=1)s[r]=new l(0,0);for(e[i>>5]|=128<<24-(31&i),e[31+(i+128>>10<<5)]=i,a=e.length,r=0;r<a;r+=32){for(d(p,u[0]),d(g,u[1]),d(w,u[2]),d(E,u[3]),d(A,u[4]),d(T,u[5]),d(S,u[6]),d(R,u[7]),n=0;n<16;n+=1)s[n].h=e[r+2*n],s[n].l=e[r+2*n+1];for(n=16;n<80;n+=1)h(I,s[n-2],19),m(k,s[n-2],29),v(L,s[n-2],6),x.l=I.l^k.l^L.l,x.h=I.h^k.h^L.h,h(I,s[n-15],1),h(k,s[n-15],8),v(L,s[n-15],7),D.l=I.l^k.l^L.l,D.h=I.h^k.h^L.h,_(s[n],x,s[n-7],D,s[n-16]);for(n=0;n<80;n+=1)C.l=A.l&T.l^~A.l&S.l,C.h=A.h&T.h^~A.h&S.h,h(I,A,14),h(k,A,18),m(L,A,9),x.l=I.l^k.l^L.l,x.h=I.h^k.h^L.h,h(I,p,28),m(k,p,2),m(L,p,7),D.l=I.l^k.l^L.l,D.h=I.h^k.h^L.h,P.l=p.l&g.l^p.l&w.l^g.l&w.l,P.h=p.h&g.h^p.h&w.h^g.h&w.h,b(c,R,x,C,t[n],s[n]),y(f,D,P),d(R,S),d(S,T),d(T,A),y(A,E,c),d(E,w),d(w,g),d(g,p),y(p,c,f);y(u[0],u[0],p),y(u[1],u[1],g),y(u[2],u[2],w),y(u[3],u[3],E),y(u[4],u[4],A),y(u[5],u[5],T),y(u[6],u[6],S),y(u[7],u[7],R)}for(r=0;r<8;r+=1)o[2*r]=u[r].h,o[2*r+1]=u[r].l;return o}function l(e,t){this.h=e,this.l=t}function d(e,t){e.h=t.h,e.l=t.l}function h(e,t,i){e.l=t.l>>>i|t.h<<32-i,e.h=t.h>>>i|t.l<<32-i}function m(e,t,i){e.l=t.h>>>i|t.l<<32-i,e.h=t.l>>>i|t.h<<32-i}function v(e,t,i){e.l=t.l>>>i|t.h<<32-i,e.h=t.h>>>i}function y(e,t,i){var n=(65535&t.l)+(65535&i.l),r=(t.l>>>16)+(i.l>>>16)+(n>>>16),a=(65535&t.h)+(65535&i.h)+(r>>>16),s=(t.h>>>16)+(i.h>>>16)+(a>>>16);e.l=65535&n|r<<16,e.h=65535&a|s<<16}function _(e,t,i,n,r){var a=(65535&t.l)+(65535&i.l)+(65535&n.l)+(65535&r.l),s=(t.l>>>16)+(i.l>>>16)+(n.l>>>16)+(r.l>>>16)+(a>>>16),o=(65535&t.h)+(65535&i.h)+(65535&n.h)+(65535&r.h)+(s>>>16),l=(t.h>>>16)+(i.h>>>16)+(n.h>>>16)+(r.h>>>16)+(o>>>16);e.l=65535&a|s<<16,e.h=65535&o|l<<16}function b(e,t,i,n,r,a){var s=(65535&t.l)+(65535&i.l)+(65535&n.l)+(65535&r.l)+(65535&a.l),o=(t.l>>>16)+(i.l>>>16)+(n.l>>>16)+(r.l>>>16)+(a.l>>>16)+(s>>>16),l=(65535&t.h)+(65535&i.h)+(65535&n.h)+(65535&r.h)+(65535&a.h)+(o>>>16),u=(t.h>>>16)+(i.h>>>16)+(n.h>>>16)+(r.h>>>16)+(a.h>>>16)+(l>>>16);e.l=65535&s|o<<16,e.h=65535&l|u<<16}this.hex=function(e){return u(r(e))},this.b64=function(e){return g(r(e),i)},this.any=function(e,t){return p(r(e),t)},this.raw=function(e){return r(e)},this.hex_hmac=function(e,t){return u(a(e,t))},this.b64_hmac=function(e,t){return g(a(e,t),i)},this.any_hmac=function(e,t,i){return p(a(e,t),i)},this.vm_test=function(){return"900150983cd24fb0d6963f7d28e17f72"===hex("abc").toLowerCase()},this.setUpperCase=function(e){return"boolean"==typeof e&&e,this},this.setPad=function(e){return i=e||i,this},this.setUTF8=function(e){return"boolean"==typeof e&&(n=e),this}},RMD160:function(e){!(!e||"boolean"!=typeof e.uppercase)&&e.uppercase;var t=e&&"string"==typeof e.pad?e.pa:"=",i=!e||"boolean"!=typeof e.utf8||e.utf8,n=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],r=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],a=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],c=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11];function d(e){return m(v(h(e=i?s(e):e),8*e.length))}function f(e,t){e=i?s(e):e,t=i?s(t):t;var n,r,a=h(e),o=Array(16),l=Array(16);for(a.length>16&&(a=v(a,8*e.length)),n=0;n<16;n+=1)o[n]=909522486^a[n],l[n]=1549556828^a[n];return r=v(o.concat(h(t)),512+8*t.length),m(v(l.concat(r),672))}function m(e){var t,i="",n=32*e.length;for(t=0;t<n;t+=8)i+=String.fromCharCode(e[t>>5]>>>t%32&255);return i}function v(e,t){var i,s,u,d,h,f,p,g,m,v,w,E,A,T,S=1732584193,R=4023233417,D=2562383102,x=271733878,C=3285377520;for(e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t,d=e.length,u=0;u<d;u+=16){for(h=v=S,f=w=R,p=E=D,g=A=x,m=T=C,s=0;s<=79;s+=1)i=o(l(i=o(i=o(i=o(h,y(s,f,p,g)),e[u+n[s]]),_(s)),a[s]),m),h=m,m=g,g=l(p,10),p=f,f=i,i=o(l(i=o(i=o(i=o(v,y(79-s,w,E,A)),e[u+r[s]]),b(s)),c[s]),T),v=T,T=A,A=l(E,10),E=w,w=i;i=o(R,o(p,A)),R=o(D,o(g,T)),D=o(x,o(m,v)),x=o(C,o(h,w)),C=o(S,o(f,E)),S=i}return[S,R,D,x,C]}function y(e,t,i,n){return 0<=e&&e<=15?t^i^n:16<=e&&e<=31?t&i|~t&n:32<=e&&e<=47?(t|~i)^n:48<=e&&e<=63?t&n|i&~n:64<=e&&e<=79?t^(i|~n):"rmd160_f: j out of range"}function _(e){return 0<=e&&e<=15?0:16<=e&&e<=31?1518500249:32<=e&&e<=47?1859775393:48<=e&&e<=63?2400959708:64<=e&&e<=79?2840853838:"rmd160_K1: j out of range"}function b(e){return 0<=e&&e<=15?1352829926:16<=e&&e<=31?1548603684:32<=e&&e<=47?1836072691:48<=e&&e<=63?2053994217:64<=e&&e<=79?0:"rmd160_K2: j out of range"}this.hex=function(e){return u(d(e))},this.b64=function(e){return g(d(e),t)},this.any=function(e,t){return p(d(e),t)},this.raw=function(e){return d(e)},this.hex_hmac=function(e,t){return u(f(e,t))},this.b64_hmac=function(e,i){return g(f(e,i),t)},this.any_hmac=function(e,t,i){return p(f(e,t),i)},this.vm_test=function(){return"900150983cd24fb0d6963f7d28e17f72"===hex("abc").toLowerCase()},this.setUpperCase=function(e){return"boolean"==typeof e&&e,this},this.setPad=function(e){return void 0!==e&&(t=e),this},this.setUTF8=function(e){return"boolean"==typeof e&&(i=e),this}}},t&&"object"==typeof n&&n&&n.global,void 0===(r=function(){return a}.call(t,i,t,e))||(e.exports=r)}()}).call(t,i("DuR2"))},"/cNa":function(e,t,i){"use strict";i("lX5T"),i("0qc1"),i("M99n"),i("E7OR"),i("XDtq"),i("ZG75"),i("B+tq"),i("dgQY"),i("hwML"),i("4RZc")},"0JET":function(e,t,i){"use strict";var n=i("l/Rs");i("l/Rs");!function(e){e.fn.preload_background_image=function(){return this.each(function(){var t=function(e){var t=e.css("backgroundImage");try{return/[("]([^()"]+)[")]/.exec(t)[1]}catch(e){return!1}}(e(this));t&&((new Image).src=t)})}}(n)},"0SSf":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.formatted_pledged_at=(0,r.format)("ll",1e3*e.pledged_at),e.formatted_survey_answered_at=(0,r.format)("ll",1e3*e.survey_answered_at),e.formatted_amount=n.default.money(e.amount,{precision:2,currency:a.default.get("currency")}),e.is_registered||(e.name=o.default.t("backer_report.row.Guest",{backer_uid:e.backer_uid})),e.isCreator=a.default.get("creator.id")===s.default.get("id"),e.showMessages=e.isCreator||e.showMessages,e};var n=l(i("L3hI")),r=i("kVy0"),a=l(i("c5nH")),s=l(i("eF8u")),o=l(i("wmCY"));function l(e){return e&&e.__esModule?e:{default:e}}},"0qc1":function(e,t,i){var n,r,a,o,l,u;i("l/Rs"),i("l/Rs");"undefined"==typeof jwplayer&&(jwplayer=function(){if(jwplayer.api)return jwplayer.api.selectPlayer.apply(this,arguments)},jwplayer.version="6.12.4956",jwplayer.vid=document.createElement("video"),jwplayer.audio=document.createElement("audio"),jwplayer.source=document.createElement("source"),function(){var e={},t=Array.prototype,i=Object.prototype,n=t.slice,r=t.concat,a=i.toString,s=i.hasOwnProperty,o=t.map,l=t.forEach,u=t.filter,c=t.every,d=t.some,h=t.indexOf,f=(i=Array.isArray,Object.keys),p=function(e){return e instanceof p?e:this instanceof p?void 0:new p(e)},g=p.each=p.forEach=function(t,i,n){if(null==t)return t;if(l&&t.forEach===l)t.forEach(i,n);else if(t.length===+t.length){for(var r=0,a=t.length;r<a;r++)if(i.call(n,t[r],r,t)===e)return}else{var s=p.keys(t);for(r=0,a=s.length;r<a;r++)if(i.call(n,t[s[r]],s[r],t)===e)return}return t};p.map=p.collect=function(e,t,i){var n=[];return null==e?n:o&&e.map===o?e.map(t,i):(g(e,function(e,r,a){n.push(t.call(i,e,r,a))}),n)},p.find=p.detect=function(e,t,i){var n;return m(e,function(e,r,a){if(t.call(i,e,r,a))return n=e,!0}),n},p.filter=p.select=function(e,t,i){var n=[];return null==e?n:u&&e.filter===u?e.filter(t,i):(g(e,function(e,r,a){t.call(i,e,r,a)&&n.push(e)}),n)},p.every=p.all=function(t,i,n){i||(i=p.identity);var r=!0;return null==t?r:c&&t.every===c?t.every(i,n):(g(t,function(t,a,s){if(!(r=r&&i.call(n,t,a,s)))return e}),!!r)};var m=p.some=p.any=function(t,i,n){i||(i=p.identity);var r=!1;return null==t?r:d&&t.some===d?t.some(i,n):(g(t,function(t,a,s){if(r||(r=i.call(n,t,a,s)))return e}),!!r)};p.size=function(e){return null==e?0:e.length===+e.length?e.length:p.keys(e).length},p.after=function(e,t){return function(){if(1>--e)return t.apply(this,arguments)}},p.sortedIndex=function(e,t,i,n){t=(i=null==i?p.identity:p.isFunction(i)?i:p.property(i)).call(n,t);for(var r=0,a=e.length;r<a;){var s=r+a>>>1;i.call(n,e[s])<t?r=s+1:a=s}return r},p.find=p.detect=function(e,t,i){var n;return m(e,function(e,r,a){if(t.call(i,e,r,a))return n=e,!0}),n},m=p.some=p.any=function(t,i,n){i||(i=p.identity);var r=!1;return null==t?r:d&&t.some===d?t.some(i,n):(g(t,function(t,a,s){if(r||(r=i.call(n,t,a,s)))return e}),!!r)},p.contains=p.include=function(e,t){return null!=e&&(e.length!==+e.length&&(e=p.values(e)),0<=p.indexOf(e,t))},p.where=function(e,t){return p.filter(e,p.matches(t))},p.difference=function(e){var i=r.apply(t,n.call(arguments,1));return p.filter(e,function(e){return!p.contains(i,e)})},p.without=function(e){return p.difference(e,n.call(arguments,1))},p.indexOf=function(e,t,i){if(null==e)return-1;var n=0,r=e.length;if(i){if("number"!=typeof i)return e[n=p.sortedIndex(e,t)]===t?n:-1;n=0>i?Math.max(0,r+i):i}if(h&&e.indexOf===h)return e.indexOf(t,i);for(;n<r;n++)if(e[n]===t)return n;return-1},p.partial=function(e){var t=n.call(arguments,1);return function(){for(var i=0,n=t.slice(),r=0,a=n.length;r<a;r++)n[r]===p&&(n[r]=arguments[i++]);for(;i<arguments.length;)n.push(arguments[i++]);return e.apply(this,n)}},p.memoize=function(e,t){var i={};return t||(t=p.identity),function(){var n=t.apply(this,arguments);return p.has(i,n)?i[n]:i[n]=e.apply(this,arguments)}},p.delay=function(e,t){var i=n.call(arguments,2);return setTimeout(function(){return e.apply(null,i)},t)},p.defer=function(e){return p.delay.apply(p,[e,1].concat(n.call(arguments,1)))},p.keys=function(e){if(!p.isObject(e))return[];if(f)return f(e);var t,i=[];for(t in e)p.has(e,t)&&i.push(t);return i},p.pick=function(e){var i={},a=r.apply(t,n.call(arguments,1));return g(a,function(t){t in e&&(i[t]=e[t])}),i},p.isArray=i||function(e){return"[object Array]"==a.call(e)},p.isObject=function(e){return e===Object(e)},g("Arguments Function String Number Date RegExp".split(" "),function(e){p["is"+e]=function(t){return a.call(t)=="[object "+e+"]"}}),p.isArguments(arguments)||(p.isArguments=function(e){return!(!e||!p.has(e,"callee"))}),"function"!=typeof/./&&(p.isFunction=function(e){return"function"==typeof e}),p.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},p.isNaN=function(e){return p.isNumber(e)&&e!=+e},p.isBoolean=function(e){return!0===e||!1===e||"[object Boolean]"==a.call(e)},p.isNull=function(e){return null===e},p.isUndefined=function(e){return void 0===e},p.has=function(e,t){return s.call(e,t)},p.identity=function(e){return e},p.constant=function(e){return function(){return e}},p.property=function(e){return function(t){return t[e]}},p.matches=function(e){return function(t){if(t===e)return!0;for(var i in e)if(e[i]!==t[i])return!1;return!0}},p.result=function(e,t){if(null!=e){var i=e[t];return p.isFunction(i)?i.call(e):i}},this._=p}.call(jwplayer),function(e){function t(e){return function(){return s(e)}}function i(e,t,i,r,a){return function(){var s,o;if(a)i(e);else{try{if((s=e.responseXML)&&(o=s.firstChild,s.lastChild&&"parsererror"===s.lastChild.nodeName))return void(r&&r("Invalid XML",t,e))}catch(e){}if(s&&o)return i(e);(s=n.parseXML(e.responseText))&&s.firstChild?(e=n.extend({},e,{responseXML:s}),i(e)):r&&r(e.responseText?"Invalid XML":t,t,e)}}}var n=e.utils={},r=e._;n.exists=function(e){switch(typeof e){case"string":return 0<e.length;case"object":return null!==e;case"undefined":return!1}return!0},n.styleDimension=function(e){return e+(0<e.toString().indexOf("%")?"":"px")},n.getAbsolutePath=function(e,t){if(n.exists(t)||(t=document.location.href),n.exists(e)){var i;if(n.exists(e)){i=e.indexOf("://");var r=e.indexOf("?");i=0<i&&(0>r||r>i)}else i=void 0;if(i)return e;i=t.substring(0,t.indexOf("://")+3);var a;r=t.substring(i.length,t.indexOf("/",i.length+1));0===e.indexOf("/")?a=e.split("/"):a=(a=(a=t.split("?")[0]).substring(i.length+r.length+1,a.lastIndexOf("/"))).split("/").concat(e.split("/"));for(var s=[],o=0;o<a.length;o++)a[o]&&n.exists(a[o])&&"."!==a[o]&&(".."===a[o]?s.pop():s.push(a[o]));return i+r+"/"+s.join("/")}},n.extend=function(){var e=Array.prototype.slice.call(arguments,0);if(1<e.length){for(var t=e[0],i=function(e,i){void 0!==i&&null!==i&&(t[e]=i)},r=1;r<e.length;r++)n.foreach(e[r],i);return t}return null};var a=window.console=window.console||{log:function(){}};n.log=function(){var e=Array.prototype.slice.call(arguments,0);"object"==typeof a.log?a.log(e):a.log.apply(a,e)};var s=r.memoize(function(e){return null!==navigator.userAgent.toLowerCase().match(e)});n.isFF=t(/firefox/i),n.isChrome=t(/chrome/i),n.isIPod=t(/iP(hone|od)/i),n.isIPad=t(/iPad/i),n.isSafari602=t(/Macintosh.*Mac OS X 10_8.*6\.0\.\d* Safari/i),n.isIETrident=function(e){return e?(e=parseFloat(e).toFixed(1),s(RegExp("trident/.+rv:\\s*"+e,"i"))):s(/trident/i)},n.isMSIE=function(e){return e?(e=parseFloat(e).toFixed(1),s(RegExp("msie\\s*"+e,"i"))):s(/msie/i)},n.isIE=function(e){return e?11<=(e=parseFloat(e).toFixed(1))?n.isIETrident(e):n.isMSIE(e):n.isMSIE()||n.isIETrident()},n.isSafari=function(){return s(/safari/i)&&!s(/chrome/i)&&!s(/chromium/i)&&!s(/android/i)},n.isIOS=function(e){return s(e?RegExp("iP(hone|ad|od).+\\sOS\\s"+e,"i"):/iP(hone|ad|od)/i)},n.isAndroidNative=function(e){return n.isAndroid(e,!0)},n.isAndroid=function(e,t){return!(t&&s(/chrome\/[123456789]/i)&&!s(/chrome\/18/))&&(e?(n.isInt(e)&&!/\./.test(e)&&(e+="."),s(RegExp("Android\\s*"+e,"i"))):s(/Android/i))},n.isMobile=function(){return n.isIOS()||n.isAndroid()},n.isIframe=function(){return window.frameElement&&"IFRAME"===window.frameElement.nodeName},n.saveCookie=function(e,t){document.cookie="jwplayer."+e+"="+t+"; path=/"},n.getCookies=function(){for(var e={},t=document.cookie.split("; "),i=0;i<t.length;i++){var n=t[i].split("=");0===n[0].indexOf("jwplayer.")&&(e[n[0].substring(9,n[0].length)]=n[1])}return e},n.isInt=function(e){return 0==parseFloat(e)%1},n.typeOf=function(e){if(null===e)return"null";var t=typeof e;return"object"===t&&r.isArray(e)?"array":t},n.translateEventResponse=function(t,i){var r=n.extend({},i);if(t!==e.events.JWPLAYER_FULLSCREEN||r.fullscreen)if("object"==typeof r.data){var a=r.data;delete r.data,r=n.extend(r,a)}else"object"==typeof r.metadata&&n.deepReplaceKeyName(r.metadata,["__dot__","__spc__","__dsh__","__default__"],["."," ","-","default"]);else r.fullscreen="true"===r.message,delete r.message;return n.foreach(["position","duration","offset"],function(e,t){r[t]&&(r[t]=Math.round(1e3*r[t])/1e3)}),r},n.flashVersion=function(){if(n.isAndroid())return 0;var e,t=navigator.plugins;try{if("undefined"!==t&&(e=t["Shockwave Flash"]))return parseInt(e.description.replace(/\D+(\d+)\..*/,"$1"),10)}catch(e){}if(void 0!==window.ActiveXObject)try{if(e=new window.ActiveXObject("ShockwaveFlash.ShockwaveFlash"))return parseInt(e.GetVariable("$version").split(" ")[1].split(",")[0],10)}catch(e){}return 0},n.getScriptPath=function(e){for(var t=document.getElementsByTagName("script"),i=0;i<t.length;i++){var n=t[i].src;if(n&&0<=n.indexOf(e))return n.substr(0,n.indexOf(e))}return""},n.deepReplaceKeyName=function(t,i,r){switch(e.utils.typeOf(t)){case"array":for(var a=0;a<t.length;a++)t[a]=e.utils.deepReplaceKeyName(t[a],i,r);break;case"object":n.foreach(t,function(n,a){var s;if(i instanceof Array&&r instanceof Array){if(i.length!==r.length)return;s=i}else s=[i];for(var o=n,l=0;l<s.length;l++)o=o.replace(RegExp(i[l],"g"),r[l]);t[o]=e.utils.deepReplaceKeyName(a,i,r),n!==o&&delete t[n]})}return t};var o=n.pluginPathType={ABSOLUTE:0,RELATIVE:1,CDN:2};n.getPluginPathType=function(e){if("string"==typeof e){var t=(e=e.split("?")[0]).indexOf("://");if(0<t)return o.ABSOLUTE;var i=e.indexOf("/");return e=n.extension(e),!(0>t&&0>i)||e&&isNaN(e)?o.RELATIVE:o.CDN}},n.getPluginName=function(e){return e.replace(/^(.*\/)?([^-]*)-?.*\.(swf|js)$/,"$2")},n.getPluginVersion=function(e){return e.replace(/[^-]*-?([^\.]*).*$/,"$1")},n.isYouTube=function(e,t){return"youtube"===t||/^(http|\/\/).*(youtube\.com|youtu\.be)\/.+/.test(e)},n.youTubeID=function(e){try{return/v[=\/]([^?&]*)|youtu\.be\/([^?]*)|^([\w-]*)$/i.exec(e).slice(1).join("").replace("?","")}catch(e){return""}},n.isRtmp=function(e,t){return 0===e.indexOf("rtmp")||"rtmp"===t},n.foreach=function(e,t){var i;for(i in e)"function"===n.typeOf(e.hasOwnProperty)?e.hasOwnProperty(i)&&t(i,e[i]):t(i,e[i])},n.isHTTPS=function(){return 0===window.location.href.indexOf("https")},n.repo=function(){var t="http://p.jwpcdn.com/"+e.version.split(/\W/).splice(0,2).join("/")+"/";try{n.isHTTPS()&&(t=t.replace("http://","https://ssl."))}catch(e){}return t},n.versionCheck=function(t){t=("0"+t).split(/\W/);var i=e.version.split(/\W/),n=parseFloat(t[0]),r=parseFloat(i[0]);return!(n>r||n===r&&parseFloat("0"+t[1])>parseFloat(i[1]))},n.ajax=function(e,t,r,a){var s,o=!1;if(0<e.indexOf("#")&&(e=e.replace(/#.*$/,"")),e&&0<=e.indexOf("://")&&e.split("/")[2]!==window.location.href.split("/")[2]&&n.exists(window.XDomainRequest))(s=new window.XDomainRequest).onload=i(s,e,t,r,a),s.ontimeout=s.onprogress=function(){},s.timeout=5e3;else{if(!n.exists(window.XMLHttpRequest))return r&&r("",e,s),s;var l=s=new window.XMLHttpRequest,u=e;s.onreadystatechange=function(){if(4===l.readyState)switch(l.status){case 200:i(l,u,t,r,a)();break;case 404:r("File not found",u,l)}}}s.overrideMimeType&&s.overrideMimeType("text/xml");var c=e,d=s;s.onerror=function(){r("Error loading file",c,d)};try{s.open("GET",e,!0)}catch(e){o=!0}return setTimeout(function(){if(o)r&&r(e,e,s);else try{s.send()}catch(t){r&&r(e,e,s)}},0),s},n.parseXML=function(e){var t;try{if(window.DOMParser){if((t=(new window.DOMParser).parseFromString(e,"text/xml")).childNodes&&t.childNodes.length&&"parsererror"===t.childNodes[0].firstChild.nodeName)return}else(t=new window.ActiveXObject("Microsoft.XMLDOM")).async="false",t.loadXML(e)}catch(e){return}return t},n.between=function(e,t,i){return Math.max(Math.min(e,i),t)},n.seconds=function(e){if(r.isNumber(e))return e;var t=(e=e.replace(",",".")).split(":"),i=0;return"s"===e.slice(-1)?i=parseFloat(e):"m"===e.slice(-1)?i=60*parseFloat(e):"h"===e.slice(-1)?i=3600*parseFloat(e):1<t.length?(i=parseFloat(t[t.length-1]),i+=60*parseFloat(t[t.length-2]),3===t.length&&(i+=3600*parseFloat(t[t.length-3]))):i=parseFloat(e),i},n.serialize=function(e){return null===e?null:"true"===e.toString().toLowerCase()||"false"!==e.toString().toLowerCase()&&(isNaN(Number(e))||5<e.length||0===e.length?e:Number(e))},n.addClass=function(e,t){var i=r.isString(e.className)?e.className.split(" "):[],a=r.isArray(t)?t:t.split(" ");r.each(a,function(e){r.contains(i,e)||i.push(e)}),e.className=n.trim(i.join(" "))},n.removeClass=function(e,t){var i=r.isString(e.className)?e.className.split(" "):[],a=r.isArray(t)?t:t.split(" ");e.className=n.trim(r.difference(i,a).join(" "))},n.emptyElement=function(e){for(;e.firstChild;)e.removeChild(e.firstChild)},n.indexOf=r.indexOf,n.noop=function(){},n.canCast=function(){var t=e.cast;return!(!t||!r.isFunction(t.available)||!t.available())}}(jwplayer),function(e){function t(e){var t=document.createElement("style");return e&&t.appendChild(document.createTextNode(e)),t.type="text/css",document.getElementsByTagName("head")[0].appendChild(t),t}function i(e,t,i){return s.exists(t)?(i=i?" !important":"","string"==typeof t&&isNaN(t)?/png|gif|jpe?g/i.test(t)&&0>t.indexOf("url")?"url("+t+")":t+i:0===t||"z-index"===e||"opacity"===e?""+t+i:/color/i.test(e)?"#"+s.pad(t.toString(16).replace(/^0x/i,""),6)+i:Math.ceil(t)+"px"+i):""}function n(e,t){for(var i=0;i<e.length;i++){var n,r,a=e[i];if(void 0!==a&&null!==a)for(n in t){r=(r=n).split("-");for(var s=1;s<r.length;s++)r[s]=r[s].charAt(0).toUpperCase()+r[s].slice(1);r=r.join(""),a.style[r]!==t[n]&&(a.style[r]=t[n])}}}function r(e){var t,i,n,r=o[e].sheet;if(r){t=r.cssRules,i=c[e];var a=l[n=e];for(var s in n+=" { ",a)n+=s+": "+a[s]+"; ";if(n+="}",void 0!==i&&i<t.length&&t[i].selectorText===e){if(n===t[i].cssText)return;r.deleteRule(i)}else i=t.length,c[e]=i;try{r.insertRule(n,i)}catch(e){}}}var a,s=e.utils,o={},l={},u=null,c={};s.cssKeyframes=function(e,i){(n=o.keyframes)||(n=t(),o.keyframes=n);var n=n.sheet,r="@keyframes "+e+" { "+i+" }";try{n.insertRule(r,n.cssRules.length)}catch(e){}r=r.replace(/(keyframes|transform)/g,"-webkit-$1");try{n.insertRule(r,n.cssRules.length)}catch(e){}};var d=s.css=function(e,n,s){l[e]||(l[e]={});var c=l[e];s=s||!1;var d,h,f=!1;for(d in n)""!==(h=i(d,n[d],s))?h!==c[d]&&(c[d]=h,f=!0):void 0!==c[d]&&(delete c[d],f=!0);f&&(o[e]||(n=a&&a.sheet&&a.sheet.cssRules&&a.sheet.cssRules.length||0,(!a||5e4<n)&&(a=t()),o[e]=a),null!==u?u.styleSheets[e]=l[e]:r(e))};d.style=function(t,r,a){if(void 0!==t&&null!==t){void 0===t.length&&(t=[t]);var s,o={};for(s in r)o[s]=i(s,r[s]);if(null===u||a)n(t,o);else{for(var l in r=(r=t.__cssRules)||{},o)r[l]=o[l];t.__cssRules=r,0>e._.indexOf(u.elements,t)&&u.elements.push(t)}}},d.block=function(e){null===u&&(u={id:e,styleSheets:{},elements:[]})},d.unblock=function(e){if(u&&(!e||u.id===e)){for(var t in u.styleSheets)r(t);for(e=0;e<u.elements.length;e++)n(t=u.elements[e],t.__cssRules);u=null}},s.clearCss=function(e){for(var t in l)0<=t.indexOf(e)&&delete l[t];for(var i in o)0<=i.indexOf(e)&&r(i)},s.transform=function(e,t){var i={};t=t||"",i.transform=t,i["-webkit-transform"]=t,i["-ms-transform"]=t,i["-moz-transform"]=t,i["-o-transform"]=t,"string"==typeof e?d(e,i):d.style(e,i)},s.dragStyle=function(e,t){d(e,{"-webkit-user-select":t,"-moz-user-select":t,"-ms-user-select":t,"-webkit-user-drag":t,"user-select":t,"user-drag":t})},s.transitionStyle=function(e,t){navigator.userAgent.match(/5\.\d(\.\d)? safari/i)||d(e,{"-webkit-transition":t,"-moz-transition":t,"-o-transition":t,transition:t})},s.rotate=function(e,t){s.transform(e,"rotate("+t+"deg)")},s.rgbHex=function(e){return 3===(e=String(e).replace("#","")).length&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),"#"+e.substr(-6)},s.hexToRgba=function(e,t){var i="rgb",n=[parseInt(e.substr(1,2),16),parseInt(e.substr(3,2),16),parseInt(e.substr(5,2),16)];return void 0!==t&&100!==t&&(i+="a",n.push(t/100)),i+"("+n.join(",")+")"}}(jwplayer),n=jwplayer.utils,r=jwplayer._,a=n.foreach,l={mp4:(o={mp4:"video/mp4",ogg:"video/ogg",oga:"audio/ogg",vorbis:"audio/ogg",webm:"video/webm",aac:"audio/mp4",mp3:"audio/mpeg",hls:"application/vnd.apple.mpegurl"}).mp4,f4v:o.mp4,m4v:o.mp4,mov:o.mp4,m4a:o.aac,f4a:o.aac,aac:o.aac,mp3:o.mp3,ogv:o.ogg,ogg:o.ogg,oga:o.vorbis,vorbis:o.vorbis,webm:o.webm,m3u8:o.hls,m3u:o.hls,hls:o.hls},u=n.extensionmap={},a(l,function(e,t){u[e]={html5:t}}),a({flv:"video",f4v:"video",mov:"video",m4a:"video",m4v:"video",mp4:"video",aac:"video",f4a:"video",mp3:"sound",smil:"rtmp",m3u8:"hls",hls:"hls"},function(e,t){u[e]||(u[e]={}),u[e].flash=t}),u.types=o,u.mimeType=function(e){var t;return r.find(o,function(i,n){if(i===e)return t=n,!0}),t},u.extType=function(e){return u.mimeType(l[e])},function(e){var t=e.loaderstatus={NEW:0,LOADING:1,ERROR:2,COMPLETE:3};e.scriptloader=function(i){function n(e){o=t.ERROR,s.sendEvent(a.ERROR,e)}function r(e){o=t.COMPLETE,s.sendEvent(a.COMPLETE,e)}var a=jwplayer.events,s=e.extend(this,new a.eventdispatcher),o=t.NEW;this.load=function(){if(o===t.NEW){var s=e.scriptloader.loaders[i];if(s&&2>(o=s.getStatus()))return s.addEventListener(a.ERROR,n),void s.addEventListener(a.COMPLETE,r);var l=document.getElementsByTagName("head")[0]||document.documentElement,u=document.createElement("script"),c=!1;u.onload=u.onreadystatechange=function(e){c||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(c=!0,r(e),u.onload=u.onreadystatechange=null,l&&u.parentNode&&l.removeChild(u))},u.onerror=n,u.src=i,l.insertBefore(u,l.firstChild),o=t.LOADING,e.scriptloader.loaders[i]=this}},this.getStatus=function(){return o}},e.scriptloader.loaders={}}(jwplayer.utils),function(e){e.trim=function(e){return e.replace(/^\s+|\s+$/g,"")},e.pad=function(e,t,i){for(i||(i="0");e.length<t;)e=i+e;return e},e.xmlAttribute=function(e,t){for(var i=0;i<e.attributes.length;i++)if(e.attributes[i].name&&e.attributes[i].name.toLowerCase()===t.toLowerCase())return e.attributes[i].value.toString();return""},e.extension=function(e){return e&&"rtmp"!==e.substr(0,4)?(t=-1<e.indexOf("(format=m3u8-")&&"m3u8")?t:-1<(e=e.substring(e.lastIndexOf("/")+1,e.length).split("?")[0].split("#")[0]).lastIndexOf(".")?e.substr(e.lastIndexOf(".")+1,e.length).toLowerCase():void 0:"";var t},e.stringToColor=function(e){return 3===(e=e.replace(/(#|0x)?([0-9A-F]{3,6})$/gi,"$2")).length&&(e=e.charAt(0)+e.charAt(0)+e.charAt(1)+e.charAt(1)+e.charAt(2)+e.charAt(2)),parseInt(e,16)}}(jwplayer.utils),function(e){var t="touchmove",i="touchstart";e.touch=function(n){function r(e){e.type===i?(l=!0,c=s(h.DRAG_START,e)):e.type===t?l&&(d||(a(h.DRAG_START,e,c),d=!0),a(h.DRAG,e)):(l&&(d?a(h.DRAG_END,e):(e.cancelBubble=!0,a(h.TAP,e))),l=d=!1,c=null)}function a(e,t,i){u[e]&&(t.preventManipulation&&t.preventManipulation(),t.preventDefault&&t.preventDefault(),t=i||s(e,t))&&u[e](t)}function s(e,t){var i=null;if(t.touches&&t.touches.length?i=t.touches[0]:t.changedTouches&&t.changedTouches.length&&(i=t.changedTouches[0]),!i)return null;var n=o.getBoundingClientRect();i={type:e,target:o,x:i.pageX-window.pageXOffset-n.left,y:i.pageY,deltaX:0,deltaY:0};return e!==h.TAP&&c&&(i.deltaX=i.x-c.x,i.deltaY=i.y-c.y),i}var o=n,l=!1,u={},c=null,d=!1,h=e.touchEvents;return document.addEventListener(t,r),document.addEventListener("touchend",function(e){l&&d&&a(h.DRAG_END,e),l=d=!1,c=null}),document.addEventListener("touchcancel",r),n.addEventListener(i,r),n.addEventListener("touchend",r),this.addEventListener=function(e,t){u[e]=t},this.removeEventListener=function(e){delete u[e]},this}}(jwplayer.utils),jwplayer.utils.touchEvents={DRAG:"jwplayerDrag",DRAG_START:"jwplayerDragStart",DRAG_END:"jwplayerDragEnd",TAP:"jwplayerTap"},function(e){e.key=function(t){var i,n,r;this.edition=function(){return r&&r.getTime()<(new Date).getTime()?"invalid":i},this.token=function(){return n},e.exists(t)||(t="");try{var a=(t=e.tea.decrypt(t,"36QXq4W@GSBV^teR")).split("/");(i=a[0])?/^(free|pro|premium|enterprise|ads)$/i.test(i)?(n=a[1],a[2]&&0<parseInt(a[2])&&(r=new Date).setTime(String(a[2]))):i="invalid":i="free"}catch(e){i="invalid"}}}(jwplayer.utils),function(e){var t=jwplayer.utils.tea={};t.encrypt=function(e,r){if(0==e.length)return"";var a=t.strToLongs(n.encode(e));1>=a.length&&(a[1]=0);for(var s,o=t.strToLongs(n.encode(r).slice(0,16)),l=a.length,u=a[l-1],c=a[0],d=Math.floor(6+52/l),h=0;0<d--;){s=(h+=2654435769)>>>2&3;for(var f=0;f<l;f++)u=(u>>>5^(c=a[(f+1)%l])<<2)+(c>>>3^u<<4)^(h^c)+(o[3&f^s]^u),u=a[f]+=u}return a=t.longsToStr(a),i.encode(a)},t.decrypt=function(e,r){if(0==e.length)return"";for(var a,s=t.strToLongs(i.decode(e)),o=t.strToLongs(n.encode(r).slice(0,16)),l=s.length,u=s[l-1],c=s[0],d=2654435769*Math.floor(6+52/l);0!=d;){a=d>>>2&3;for(var h=l-1;0<=h;h--)u=((u=s[0<h?h-1:l-1])>>>5^c<<2)+(c>>>3^u<<4)^(d^c)+(o[3&h^a]^u),c=s[h]-=u;d-=2654435769}return s=(s=t.longsToStr(s)).replace(/\0+$/,""),n.decode(s)},t.strToLongs=function(e){for(var t=Array(Math.ceil(e.length/4)),i=0;i<t.length;i++)t[i]=e.charCodeAt(4*i)+(e.charCodeAt(4*i+1)<<8)+(e.charCodeAt(4*i+2)<<16)+(e.charCodeAt(4*i+3)<<24);return t},t.longsToStr=function(e){for(var t=Array(e.length),i=0;i<e.length;i++)t[i]=String.fromCharCode(255&e[i],e[i]>>>8&255,e[i]>>>16&255,e[i]>>>24&255);return t.join("")};var i={code:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e,t){var r,a,s,o,l,u,c=[],d="",h=i.code;if(0<(l=(u=void 0!==t&&t?n.encode(e):e).length%3))for(;3>l++;)d+="=",u+="\0";for(l=0;l<u.length;l+=3)r=(o=(r=u.charCodeAt(l))<<16|(a=u.charCodeAt(l+1))<<8|(s=u.charCodeAt(l+2)))>>18&63,a=o>>12&63,s=o>>6&63,o&=63,c[l/3]=h.charAt(r)+h.charAt(a)+h.charAt(s)+h.charAt(o);return(c=c.join("")).slice(0,c.length-d.length)+d},decode:function(e,t){t=void 0!==t&&t;var r,a,s,o,l,u,c=[],d=i.code;u=t?n.decode(e):e;for(var h=0;h<u.length;h+=4)r=(s=(r=d.indexOf(u.charAt(h)))<<18|(a=d.indexOf(u.charAt(h+1)))<<12|(o=d.indexOf(u.charAt(h+2)))<<6|(l=d.indexOf(u.charAt(h+3))))>>>16&255,a=s>>>8&255,s&=255,c[h/4]=String.fromCharCode(r,a,s),64==l&&(c[h/4]=String.fromCharCode(r,a)),64==o&&(c[h/4]=String.fromCharCode(r));return o=c.join(""),t?n.decode(o):o}},n={encode:function(e){return(e=e.replace(/[\u0080-\u07ff]/g,function(e){return e=e.charCodeAt(0),String.fromCharCode(192|e>>6,128|63&e)})).replace(/[\u0800-\uffff]/g,function(e){return e=e.charCodeAt(0),String.fromCharCode(224|e>>12,128|e>>6&63,128|63&e)})},decode:function(e){return(e=e.replace(/[\u00e0-\u00ef][\u0080-\u00bf][\u0080-\u00bf]/g,function(e){return e=(15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2),String.fromCharCode(e)})).replace(/[\u00c0-\u00df][\u0080-\u00bf]/g,function(e){return e=(31&e.charCodeAt(0))<<6|63&e.charCodeAt(1),String.fromCharCode(e)})}}}(),jwplayer.events={COMPLETE:"COMPLETE",ERROR:"ERROR",API_READY:"jwplayerAPIReady",JWPLAYER_READY:"jwplayerReady",JWPLAYER_FULLSCREEN:"jwplayerFullscreen",JWPLAYER_RESIZE:"jwplayerResize",JWPLAYER_ERROR:"jwplayerError",JWPLAYER_SETUP_ERROR:"jwplayerSetupError",JWPLAYER_MEDIA_BEFOREPLAY:"jwplayerMediaBeforePlay",JWPLAYER_MEDIA_BEFORECOMPLETE:"jwplayerMediaBeforeComplete",JWPLAYER_MEDIA_BUFFER:"jwplayerMediaBuffer",JWPLAYER_MEDIA_BUFFER_FULL:"jwplayerMediaBufferFull",JWPLAYER_MEDIA_ERROR:"jwplayerMediaError",JWPLAYER_MEDIA_LOADED:"jwplayerMediaLoaded",JWPLAYER_MEDIA_COMPLETE:"jwplayerMediaComplete",JWPLAYER_MEDIA_SEEK:"jwplayerMediaSeek",JWPLAYER_MEDIA_TIME:"jwplayerMediaTime",JWPLAYER_MEDIA_VOLUME:"jwplayerMediaVolume",JWPLAYER_MEDIA_META:"jwplayerMediaMeta",JWPLAYER_MEDIA_MUTE:"jwplayerMediaMute",JWPLAYER_AUDIO_TRACKS:"jwplayerAudioTracks",JWPLAYER_AUDIO_TRACK_CHANGED:"jwplayerAudioTrackChanged",JWPLAYER_MEDIA_LEVELS:"jwplayerMediaLevels",JWPLAYER_MEDIA_LEVEL_CHANGED:"jwplayerMediaLevelChanged",JWPLAYER_CAPTIONS_CHANGED:"jwplayerCaptionsChanged",JWPLAYER_CAPTIONS_LIST:"jwplayerCaptionsList",JWPLAYER_CAPTIONS_LOADED:"jwplayerCaptionsLoaded",JWPLAYER_PLAYER_STATE:"jwplayerPlayerState",state:{BUFFERING:"BUFFERING",IDLE:"IDLE",PAUSED:"PAUSED",PLAYING:"PLAYING"},JWPLAYER_PLAYLIST_LOADED:"jwplayerPlaylistLoaded",JWPLAYER_PLAYLIST_ITEM:"jwplayerPlaylistItem",JWPLAYER_PLAYLIST_COMPLETE:"jwplayerPlaylistComplete",JWPLAYER_DISPLAY_CLICK:"jwplayerViewClick",JWPLAYER_PROVIDER_CLICK:"jwplayerProviderClick",JWPLAYER_VIEW_TAB_FOCUS:"jwplayerViewTabFocus",JWPLAYER_CONTROLS:"jwplayerViewControls",JWPLAYER_USER_ACTION:"jwplayerUserAction",JWPLAYER_INSTREAM_CLICK:"jwplayerInstreamClicked",JWPLAYER_INSTREAM_DESTROYED:"jwplayerInstreamDestroyed",JWPLAYER_AD_TIME:"jwplayerAdTime",JWPLAYER_AD_ERROR:"jwplayerAdError",JWPLAYER_AD_CLICK:"jwplayerAdClicked",JWPLAYER_AD_COMPLETE:"jwplayerAdComplete",JWPLAYER_AD_IMPRESSION:"jwplayerAdImpression",JWPLAYER_AD_COMPANIONS:"jwplayerAdCompanions",JWPLAYER_AD_SKIPPED:"jwplayerAdSkipped",JWPLAYER_AD_PLAY:"jwplayerAdPlay",JWPLAYER_AD_PAUSE:"jwplayerAdPause",JWPLAYER_AD_META:"jwplayerAdMeta",JWPLAYER_CAST_AVAILABLE:"jwplayerCastAvailable",JWPLAYER_CAST_SESSION:"jwplayerCastSession",JWPLAYER_CAST_AD_CHANGED:"jwplayerCastAdChanged"},function(e){var t=e.utils;e.events.eventdispatcher=function(i,n){function r(e,i,n){if(e)for(var r=0;r<e.length;r++){var a=e[r];if(a){null!==a.count&&0==--a.count&&delete e[r];try{a.listener(i)}catch(e){t.log('Error handling "'+n+'" event listener ['+r+"]: "+e.toString(),a.listener,i)}}}}var a,s;this.resetEventListeners=function(){a={},s=[]},this.resetEventListeners(),this.addEventListener=function(e,i,n){try{t.exists(a[e])||(a[e]=[]),"string"===t.typeOf(i)&&(i=new Function("return "+i)()),a[e].push({listener:i,count:n||null})}catch(e){t.log("error",e)}return!1},this.removeEventListener=function(e,i){var n;if(a[e]){try{if(void 0===i)return void(a[e]=[]);for(n=0;n<a[e].length;n++)if(a[e][n].listener.toString()===i.toString()){a[e].splice(n,1);break}}catch(e){t.log("error",e)}return!1}},this.addGlobalListener=function(e,i){try{"string"===t.typeOf(e)&&(e=new Function("return "+e)()),s.push({listener:e,count:i||null})}catch(e){t.log("error",e)}return!1},this.removeGlobalListener=function(e){if(e){try{for(var i=s.length;i--;)s[i].listener.toString()===e.toString()&&s.splice(i,1)}catch(e){t.log("error",e)}return!1}},this.sendEvent=function(o,l){t.exists(l)||(l={}),t.extend(l,{id:i,version:e.version,type:o}),n&&t.log(o,l),r(a[o],l,o),r(s,l,o)}}}(window.jwplayer),function(e){var t={},i={};e.plugins=function(){},e.plugins.loadPlugins=function(n,r){return i[n]=new e.plugins.pluginloader(new e.plugins.model(t),r),i[n]},e.plugins.registerPlugin=function(i,n,r,a){var s=e.utils.getPluginName(i);t[s]||(t[s]=new e.plugins.plugin(i)),t[s].registerPlugin(i,n,r,a)}}(jwplayer),function(e){e.plugins.model=function(t){this.addPlugin=function(i){var n=e.utils.getPluginName(i);return t[n]||(t[n]=new e.plugins.plugin(i)),t[n]},this.getPlugins=function(){return t}}}(jwplayer),function(e){var t=jwplayer.utils,i=jwplayer.events;e.pluginmodes={FLASH:0,JAVASCRIPT:1,HYBRID:2},e.plugin=function(n){function r(){switch(t.getPluginPathType(n)){case t.pluginPathType.ABSOLUTE:return n;case t.pluginPathType.RELATIVE:return t.getAbsolutePath(n,window.location.href)}}function a(){c=setTimeout(function(){d=t.loaderstatus.COMPLETE,h.sendEvent(i.COMPLETE)},1e3)}function s(){d=t.loaderstatus.ERROR,h.sendEvent(i.ERROR,{url:n})}var o,l,u,c,d=t.loaderstatus.NEW,h=new i.eventdispatcher;t.extend(this,h),this.load=function(){if(d===t.loaderstatus.NEW)if(0<n.lastIndexOf(".swf"))o=n,d=t.loaderstatus.COMPLETE,h.sendEvent(i.COMPLETE);else if(t.getPluginPathType(n)===t.pluginPathType.CDN)d=t.loaderstatus.COMPLETE,h.sendEvent(i.COMPLETE);else{d=t.loaderstatus.LOADING;var e=new t.scriptloader(r());e.addEventListener(i.COMPLETE,a),e.addEventListener(i.ERROR,s),e.load()}},this.registerPlugin=function(e,n,r,a){c&&(clearTimeout(c),c=void 0),u=n,r&&a?(o=a,l=r):"string"==typeof r?o=r:"function"==typeof r?l=r:!r&&!a&&(o=e),d=t.loaderstatus.COMPLETE,h.sendEvent(i.COMPLETE)},this.getStatus=function(){return d},this.getPluginName=function(){return t.getPluginName(n)},this.getFlashPath=function(){if(o)switch(t.getPluginPathType(o)){case t.pluginPathType.ABSOLUTE:return o;case t.pluginPathType.RELATIVE:return 0<n.lastIndexOf(".swf")?t.getAbsolutePath(o,window.location.href):t.getAbsolutePath(o,r())}return null},this.getJS=function(){return l},this.getTarget=function(){return u},this.getPluginmode=function(){return void 0!==o&&void 0!==l?e.pluginmodes.HYBRID:void 0!==o?e.pluginmodes.FLASH:void 0!==l?e.pluginmodes.JAVASCRIPT:void 0},this.getNewInstance=function(e,t,i){return new l(e,t,i)},this.getURL=function(){return n}}}(jwplayer.plugins),function(e){var t=e.utils,i=e.events,n=e._,r=t.foreach;e.plugins.pluginloader=function(e,a){function s(){d||(d=!0,c=t.loaderstatus.COMPLETE,g.sendEvent(i.COMPLETE))}function o(){if(!p&&((!h||0===n.keys(h).length)&&s(),!d)){var r=e.getPlugins();u=n.after(f,s),t.foreach(h,function(e){e=t.getPluginName(e),e=(n=r[e]).getJS();var n,a=n.getTarget();(n=n.getStatus())===t.loaderstatus.LOADING||n===t.loaderstatus.NEW||(e&&!t.versionCheck(a)&&g.sendEvent(i.ERROR,{message:"Incompatible player version"}),u())})}}function l(e){p||(g.sendEvent(i.ERROR,{message:"File not found"}),e.url&&t.log("File not found",e.url),o())}var u,c=t.loaderstatus.NEW,d=!1,h=a,f=n.size(h),p=!1,g=new i.eventdispatcher;t.extend(this,g),this.setupPlugins=function(i,n,a){var s={length:0,plugins:{}},o=0,l={},u=e.getPlugins();return r(n.plugins,function(e,r){var c=t.getPluginName(e),d=u[c],h=d.getFlashPath(),f=d.getJS(),p=d.getURL();h&&(s.plugins[h]=t.extend({},r),s.plugins[h].pluginmode=d.getPluginmode(),s.length++);try{if(f&&n.plugins&&n.plugins[p]){var g=document.createElement("div");g.id=i.id+"_"+c,g.style.position="absolute",g.style.top=0,g.style.zIndex=o+10,l[c]=d.getNewInstance(i,t.extend({},n.plugins[p]),g),o++,i.onReady(a(l[c],g,!0)),i.onResize(a(l[c],g))}}catch(e){t.log("ERROR: Failed to load "+c+".")}}),i.plugins=l,s},this.load=function(){if(!t.exists(a)||"object"===t.typeOf(a)){c=t.loaderstatus.LOADING,r(a,function(n){t.exists(n)&&((n=e.addPlugin(n)).addEventListener(i.COMPLETE,o),n.addEventListener(i.ERROR,l))});var n=e.getPlugins();r(n,function(e,t){t.load()})}o()},this.destroy=function(){p=!0,g&&(g.resetEventListeners(),g=null)},this.pluginFailed=l,this.getStatus=function(){return c}}}(jwplayer),function(e){e.parsers={localName:function(e){return e?e.localName?e.localName:e.baseName?e.baseName:"":""},textContent:function(t){return t?t.textContent?e.utils.trim(t.textContent):t.text?e.utils.trim(t.text):"":""},getChildNode:function(e,t){return e.childNodes[t]},numChildren:function(e){return e.childNodes?e.childNodes.length:0}}}(jwplayer),function(e){var t=e.parsers;(t.jwparser=function(){}).parseEntry=function(i,n){for(var r=[],a=[],s=e.utils.xmlAttribute,o=0;o<i.childNodes.length;o++){var l=i.childNodes[o];if("jwplayer"===l.prefix){var u=t.localName(l);"source"===u?(delete n.sources,r.push({file:s(l,"file"),default:s(l,"default"),label:s(l,"label"),type:s(l,"type")})):"track"===u?(delete n.tracks,a.push({file:s(l,"file"),default:s(l,"default"),kind:s(l,"kind"),label:s(l,"label")})):(n[u]=e.utils.serialize(t.textContent(l)),"file"===u&&n.sources&&delete n.sources)}n.file||(n.file=n.link)}if(r.length)for(n.sources=[],o=0;o<r.length;o++)0<r[o].file.length&&(r[o].default="true"===r[o].default,r[o].label.length||delete r[o].label,n.sources.push(r[o]));if(a.length)for(n.tracks=[],o=0;o<a.length;o++)0<a[o].file.length&&(a[o].default="true"===a[o].default,a[o].kind=a[o].kind.length?a[o].kind:"captions",a[o].label.length||delete a[o].label,n.tracks.push(a[o]));return n}}(jwplayer),function(e){var t=jwplayer.utils,i=t.xmlAttribute,n=e.localName,r=e.textContent,a=e.numChildren,s=e.mediaparser=function(){};s.parseGroup=function(e,o){var l,u,c=[];for(u=0;u<a(e);u++)if("media"===(l=e.childNodes[u]).prefix&&n(l))switch(n(l).toLowerCase()){case"content":i(l,"duration")&&(o.duration=t.seconds(i(l,"duration"))),0<a(l)&&(o=s.parseGroup(l,o)),i(l,"url")&&(o.sources||(o.sources=[]),o.sources.push({file:i(l,"url"),type:i(l,"type"),width:i(l,"width"),label:i(l,"label")}));break;case"title":o.title=r(l);break;case"description":o.description=r(l);break;case"guid":o.mediaid=r(l);break;case"thumbnail":o.image||(o.image=i(l,"url"));break;case"group":s.parseGroup(l,o);break;case"subtitle":var d={};if(d.file=i(l,"url"),d.kind="captions",0<i(l,"lang").length){var h=d,f={zh:"Chinese",nl:"Dutch",en:"English",fr:"French",de:"German",it:"Italian",ja:"Japanese",pt:"Portuguese",ru:"Russian",es:"Spanish"};l=f[l=i(l,"lang")]?f[l]:l,h.label=l}c.push(d)}for(o.hasOwnProperty("tracks")||(o.tracks=[]),u=0;u<c.length;u++)o.tracks.push(c[u]);return o}}(jwplayer.parsers),function(e){function t(t){for(var r={},a=0;a<t.childNodes.length;a++){var o=t.childNodes[a],l=s(o);if(l)switch(l.toLowerCase()){case"enclosure":r.file=i.xmlAttribute(o,"url");break;case"title":r.title=n(o);break;case"guid":r.mediaid=n(o);break;case"pubdate":r.date=n(o);break;case"description":r.description=n(o);break;case"link":r.link=n(o);break;case"category":r.tags=r.tags?r.tags+n(o):n(o)}}return r=e.mediaparser.parseGroup(t,r),r=e.jwparser.parseEntry(t,r),new jwplayer.playlist.item(r)}var i=jwplayer.utils,n=e.textContent,r=e.getChildNode,a=e.numChildren,s=e.localName;e.rssparser={},e.rssparser.parse=function(e){for(var i=[],n=0;n<a(e);n++){var o=r(e,n);if("channel"===s(o).toLowerCase())for(var l=0;l<a(o);l++){var u=r(o,l);"item"===s(u).toLowerCase()&&i.push(t(u))}}return i}}(jwplayer.parsers),function(e){var t=e.utils,i=e._;e.playlist=function(t){var n=[];return t=i.isArray(t)?t:[t],i.each(t,function(t){n.push(new e.playlist.item(t))}),n},e.playlist.filterPlaylist=function(e,r){var a=[];return i.each(e,function(e){if((e=t.extend({},e)).sources=n(e.sources,!1,r),e.sources.length){for(var i=0;i<e.sources.length;i++)e.sources[i].label=e.sources[i].label||i.toString();a.push(e)}}),a};var n=e.playlist.filterSources=function(n,r,a){var s,o=[],l=r?e.embed.flashCanPlay:e.embed.html5CanPlay;if(n)return i.each(n,function(e){if(e&&e.file){var i=t.trim(""+e.file),n=e.type;n||(n=t.extension(i),n=t.extensionmap.extType(n)),e=t.extend({},e,{file:i,type:n})}else e=void 0;e&&l(e.file,e.type,a)&&(s=s||e.type,e.type===s&&o.push(e))}),o}}(jwplayer),function(e){var t=e.item=function(i){var n,r,a=jwplayer.utils,s=a.extend({},t.defaults,i);for(s.tracks=i&&a.exists(i.tracks)?i.tracks:[],0===s.sources.length&&(s.sources=[new e.source(s)]),n=0;n<s.sources.length;n++)r=s.sources[n].default,s.sources[n].default=!!r&&"true"===r.toString(),s.sources[n]=new e.source(s.sources[n]);if(s.captions&&!a.exists(i.tracks)){for(i=0;i<s.captions.length;i++)s.tracks.push(s.captions[i]);delete s.captions}for(n=0;n<s.tracks.length;n++)s.tracks[n]=new e.track(s.tracks[n]);return s};t.defaults={description:void 0,image:void 0,mediaid:void 0,title:void 0,sources:[],tracks:[]}}(jwplayer.playlist),function(e){var t=e.utils,i=e.events,n=e.parsers;e.playlist.loader=function(){function r(t){try{var r=t.responseXML.childNodes;t="";for(var a=0;a<r.length&&8===(t=r[a]).nodeType;a++);if("xml"===n.localName(t)&&(t=t.nextSibling),"rss"!==n.localName(t))s("Not a valid RSS feed");else{var l=new e.playlist(n.rssparser.parse(t));o.sendEvent(i.JWPLAYER_PLAYLIST_LOADED,{playlist:l})}}catch(e){s()}}function a(e){s(e.match(/invalid/i)?"Not a valid RSS feed":"")}function s(e){o.sendEvent(i.JWPLAYER_ERROR,{message:e||"Error loading file"})}var o=new i.eventdispatcher;t.extend(this,o),this.load=function(e){t.ajax(e,r,a)}}}(jwplayer),function(e){var t=jwplayer.utils,i={file:void 0,label:void 0,type:void 0,default:void 0};e.source=function(e){var n=t.extend({},i);return t.foreach(i,function(i){t.exists(e[i])&&(n[i]=e[i],delete e[i])}),n.type&&0<n.type.indexOf("/")&&(n.type=t.extensionmap.mimeType(n.type)),"m3u8"===n.type&&(n.type="hls"),"smil"===n.type&&(n.type="rtmp"),n}}(jwplayer.playlist),function(e){var t=jwplayer.utils,i={file:void 0,label:void 0,kind:"captions",default:!1};e.track=function(e){var n=t.extend({},i);return e||(e={}),t.foreach(i,function(i){t.exists(e[i])&&(n[i]=e[i],delete e[i])}),n}}(jwplayer.playlist),function(e){function t(e,t,n){var r=e.style;r.backgroundColor="#000",r.color="#FFF",r.width=i.styleDimension(n.width),r.height=i.styleDimension(n.height),r.display="table",r.opacity=1,(r=(n=document.createElement("p")).style).verticalAlign="middle",r.textAlign="center",r.display="table-cell",r.font="15px/20px Arial, Helvetica, sans-serif",n.innerHTML=t.replace(":",":<br>"),e.innerHTML="",e.appendChild(n)}var i=e.utils,n=e.events,r=e._,a=e.embed=function(s){function o(){if(!w){var t=p.playlist;if(r.isArray(t)){if(0===t.length)return void c();if(!(1!==t.length||t[0].sources&&0!==t[0].sources.length&&t[0].sources[0].file))return void c()}if(!b)if(r.isString(t))(f=new e.playlist.loader).addEventListener(n.JWPLAYER_PLAYLIST_LOADED,function(e){p.playlist=e.playlist,b=!1,o()}),f.addEventListener(n.JWPLAYER_ERROR,function(e){b=!1,c(e)}),b=!0,f.load(p.playlist);else if(_.getStatus()===i.loaderstatus.COMPLETE){for(t=0;t<p.modes.length;t++){var u=p.modes[t],h=u.type;if(h&&a[h]){var g=i.extend({},p);if((E=new a[h](S,u,g,_,s)).supportsConfig())return E.addEventListener(n.ERROR,l),E.embed(),i.css("object.jwswf, .jwplayer:focus",{outline:"none"}),i.css(".jw-tab-focus:focus",{outline:"solid 2px #0B7EF4"}),s}}p.fallback?(d(t="No suitable players found and fallback enabled",!0),i.log(t),new a.download(S,p,c)):(d(t="No suitable players found and fallback disabled",!1),i.log(t))}}}function l(e){h(v+e.message)}function u(e){s.dispatchEvent(n.JWPLAYER_ERROR,{message:"Could not load plugin: "+e.message})}function c(e){e&&e.message?h("Error loading playlist: "+e.message):h(v+"No playable sources found")}function d(e,t){clearTimeout(A),A=setTimeout(function(){s.dispatchEvent(n.JWPLAYER_SETUP_ERROR,{message:e,fallback:t})},0)}function h(e){w||(y.parentNode.replaceChild(S,y),p.fallback?(w=!0,t(S,e,p),d(e,!0)):d(e,!1))}var f,p=new a.config(s.config),g=p.width,m=p.height,v="Error loading player: ",y=document.getElementById(s.id),_=e.plugins.loadPlugins(s.id,p.plugins),b=!1,w=!1,E=null,A=-1;p.id=s.id,p.aspectratio?s.config.aspectratio=p.aspectratio:delete s.config.aspectratio;var T=s;i.foreach(p.events,function(e,t){var i=T[e];"function"==typeof i&&i.call(T,t)});var S=document.createElement("div");return S.id=y.id,S.style.width=0<g.toString().indexOf("%")?g:g+"px",S.style.height=0<m.toString().indexOf("%")?m:m+"px",this.embed=function(){w||(_.addEventListener(n.COMPLETE,o),_.addEventListener(n.ERROR,u),_.load())},this.destroy=function(){E&&(E.destroy(),E=null),_&&(_.destroy(),_=null),f&&(f.resetEventListeners(),f=null)},this.errorScreen=h,this};e.embed.errorScreen=t}(jwplayer),function(e){function t(e){if(e.playlist)for(var t=0;t<e.playlist.length;t++)e.playlist[t]=new r(e.playlist[t]);else{var a={};n.foreach(r.defaults,function(t){i(e,a,t)}),a.sources||(e.levels?(a.sources=e.levels,delete e.levels):(i(e,t={},"file"),i(e,t,"type"),a.sources=t.file?[t]:[])),e.playlist=[new r(a)]}}function i(e,t,i){n.exists(e[i])&&(t[i]=e[i],delete e[i])}var n=e.utils,r=e.playlist.item;(e.embed.config=function(i){var r={fallback:!0,height:270,primary:"html5",width:480,base:i.base?i.base:n.getScriptPath("jwplayer.js"),aspectratio:""},a=(r={type:"html5",src:(i=n.extend({},r,e.defaults,i)).base+"jwplayer.html5.js"},{type:"flash",src:i.base+"jwplayer.flash.swf"});if(i.modes="flash"===i.primary?[a,r]:[r,a],i.listbar&&(i.playlistsize=i.listbar.size,i.playlistposition=i.listbar.position,i.playlistlayout=i.listbar.layout),i.flashplayer&&(a.src=i.flashplayer),i.html5player&&(r.src=i.html5player),t(i),"string"==typeof(a=i.aspectratio)&&n.exists(a)){var s=a.indexOf(":");-1===s?r=0:(r=parseFloat(a.substr(0,s)),a=parseFloat(a.substr(s+1)),r=0>=r||0>=a?0:a/r*100+"%")}else r=0;return-1===i.width.toString().indexOf("%")?delete i.aspectratio:r?i.aspectratio=r:delete i.aspectratio,i}).addConfig=function(e,i){return t(i),n.extend(e,i)}}(jwplayer),function(e){function t(e,t){function n(e,t){r[a].style[e]=t}for(var r=document.querySelectorAll(e),a=0;a<r.length;a++)i.foreach(t,n)}var i=e.utils;e.embed.download=function(e,n,r){function a(e,t,i){return e=document.createElement(e),t&&(e.className="jwdownload"+t),i&&i.appendChild(e),e}var s,o,l,u,c,d,h,f,p=i.extend({},n),g=p.width?p.width:480,m=p.height?p.height:320;if(n=n.logo?n.logo:{prefix:i.repo(),file:"logo.png",margin:10},u=p.playlist,p=["mp4","aac","mp3"],u&&u.length){for(d=(c=u[0]).sources,u=0;u<d.length;u++)(h=d[u]).file&&(f=h.type||i.extensionmap.extType(i.extension(h.file)),0<=i.indexOf(p,f)?(s=h.file,o=c.image):i.isYouTube(h.file,f)&&(l=h.file));s?(r=s,e&&(a("div","icon",s=a("a","display",e)),a("div","logo",s),r&&s.setAttribute("href",i.getAbsolutePath(r))),r="#"+e.id+" .jwdownload",e.style.width="",e.style.height="",t(r+"display",{width:i.styleDimension(Math.max(320,g)),height:i.styleDimension(Math.max(180,m)),background:"black center no-repeat "+(o?"url("+o+")":""),backgroundSize:"contain",position:"relative",border:"none",display:"block"}),t(r+"display div",{position:"absolute",width:"100%",height:"100%"}),t(r+"logo",{top:n.margin+"px",right:n.margin+"px",background:"top right no-repeat url("+n.prefix+n.file+")"}),t(r+"icon",{background:"center no-repeat url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAgNJREFUeNrs28lqwkAYB/CZqNVDDj2r6FN41QeIy8Fe+gj6BL275Q08u9FbT8ZdwVfotSBYEPUkxFOoks4EKiJdaDuTjMn3wWBO0V/+sySR8SNSqVRKIR8qaXHkzlqS9jCfzzWcTCYp9hF5o+59sVjsiRzcegSckFzcjT+ruN80TeSlAjCAAXzdJSGPFXRpAAMYwACGZQkSdhG4WCzehMNhqV6vG6vVSrirKVEw66YoSqDb7cqlUilE8JjHd/y1MQefVzqdDmiaJpfLZWHgXMHn8F6vJ1cqlVAkEsGuAn83J4gAd2RZymQygX6/L1erVQt+9ZPWb+CDwcCC2zXGJaewl/DhcHhK3DVj+KfKZrMWvFarcYNLomAv4aPRSFZVlTlcSPA5fDweW/BoNIqFnKV53JvncjkLns/n/cLdS+92O7RYLLgsKfv9/t8XlDn4eDyiw+HA9Jyz2eyt0+kY2+3WFC5hluej0Ha7zQQq9PPwdDq1Et1sNsx/nFBgCqWJ8oAK1aUptNVqcYWewE4nahfU0YQnk4ntUEfGMIU2m01HoLaCKbTRaDgKtaVLk9tBYaBcE/6Artdr4RZ5TB6/dC+9iIe/WgAMYADDpAUJAxjAAAYwgGFZgoS/AtNNTF7Z2bL0BYPBV3Jw5xFwwWcYxgtBP5OkE8i9G7aWGOOCruvauwADALMLMEbKf4SdAAAAAElFTkSuQmCC)"})):l?(n=l,(e=a("iframe","",e)).src="http://www.youtube.com/embed/"+i.youTubeID(n),e.width=g,e.height=m,e.style.border="none"):r()}}}(jwplayer),function(e){var t=e.utils,i=e.events,n={};(e.embed.flash=function(a,s,o,l,u){function c(e,t,i){var n=document.createElement("param");n.setAttribute("name",t),n.setAttribute("value",i),e.appendChild(n)}function d(e,t,i){return function(){try{i&&document.getElementById(u.id+"_wrapper").appendChild(t);var n=document.getElementById(u.id).getPluginConfig("display");"function"==typeof e.resize&&e.resize(n.width,n.height),t.style.left=n.x,t.style.top=n.h}catch(e){}}}var h=new e.events.eventdispatcher,f=t.flashVersion();t.extend(this,h),this.embed=function(){if(o.id=u.id,10>f)return h.sendEvent(i.ERROR,{message:"Flash version must be 10.0 or greater"}),!1;var e,r,p=a.id,g=u.config.listbar,m=t.extend({},o);if((e=document.getElementById(u.id)).parentNode.replaceChild(a,e),p+"_wrapper"===a.parentNode.id)e=document.getElementById(p+"_wrapper");else{if(e=document.createElement("div"),(r=document.createElement("div")).style.display="none",r.id=p+"_aspect",e.id=p+"_wrapper",e.style.position="relative",e.style.display="block",e.style.width=t.styleDimension(m.width),e.style.height=t.styleDimension(m.height),u.config.aspectratio){var v=parseFloat(u.config.aspectratio);r.style.display="block",r.style.marginTop=u.config.aspectratio,e.style.height="auto",e.style.display="inline-block",g&&("bottom"===g.position?r.style.paddingBottom=g.size+"px":"right"===g.position&&(r.style.marginBottom=-1*g.size*(v/100)+"px"))}a.parentNode.replaceChild(e,a),e.appendChild(a),e.appendChild(r)}for(0<(g=l.setupPlugins(u,m,d)).length?t.extend(m,function(e){if(!e)return{};var i={},n=[];return t.foreach(e,function(e,r){var a=t.getPluginName(e);n.push(e),t.foreach(r,function(e,t){i[a+"."+e]=t})}),i.plugins=n.join(","),i}(g.plugins)):delete m.plugins,void 0!==m["dock.position"]&&"false"===m["dock.position"].toString().toLowerCase()&&(m.dock=m["dock.position"],delete m["dock.position"]),g=m.wmode||(m.height&&40>=m.height?"transparent":"opaque"),r="height width modes events primary base fallback volume".split(" "),v=0;v<r.length;v++)delete m[r[v]];r=t.getCookies(),t.foreach(r,function(e,t){void 0===m[e]&&(m[e]=t)}),(r=window.location.href.split("/")).splice(r.length-1,1),r=r.join("/"),m.base=r+"/",n[p]=m,t.isMSIE()?(a.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="100%" height="100%" id="'+p+'" name="'+p+'" tabindex="0"><param name="movie" value="'+s.src+'"><param name="allowfullscreen" value="true"><param name="allowscriptaccess" value="always"><param name="seamlesstabbing" value="true"><param name="wmode" value="'+g+'"><param name="bgcolor" value="#000000"></object>',(e=e.getElementsByTagName("object")[0]).style.outline="none"):((e=document.createElement("object")).setAttribute("type","application/x-shockwave-flash"),e.setAttribute("data",s.src),e.setAttribute("width","100%"),e.setAttribute("height","100%"),e.setAttribute("bgcolor","#000000"),e.setAttribute("id",p),e.setAttribute("name",p),e.className="jwswf",c(e,"allowfullscreen","true"),c(e,"allowscriptaccess","always"),c(e,"seamlesstabbing","true"),c(e,"wmode",g),a.parentNode.replaceChild(e,a)),u.config.aspectratio&&(e.style.position="absolute",e.style.left="0"),u.container=e,u.setPlayer(e,"flash")},this.supportsConfig=function(){if(f){if(!o)return!0;if("string"===t.typeOf(o.playlist))return!0;try{var e=o.playlist[0].sources;if(void 0===e)return!0;for(var i=0;i<e.length;i++)if(e[i].file&&r(e[i].file,e[i].type))return!0}catch(e){}}return!1},this.destroy=function(){}}).getVars=function(e){return n[e]};var r=e.embed.flashCanPlay=function(e,i){if(t.isYouTube(e,i)||t.isRtmp(e,i)||"hls"===i)return!0;var n=t.extensionmap[i||t.extension(e)];return!!n&&!!n.flash}}(jwplayer),function(e){var t,i=e.utils,n=i.extensionmap,r=e.events;e.embed.html5=function(n,a,s,o,l){function u(e,t,i){return function(){try{var r=document.querySelector("#"+n.id+" .jwmain");i&&r.appendChild(t),"function"==typeof e.resize&&(e.resize(r.clientWidth,r.clientHeight),setTimeout(function(){e.resize(r.clientWidth,r.clientHeight)},400)),t.left=r.style.left,t.top=r.style.top}catch(e){}}}var c=new r.eventdispatcher;i.extend(this,c),this.embed=function(){if(e.html5){o.setupPlugins(l,s,u),i.emptyElement(n);var t=e.utils.extend({},s);delete t.volume,t=new e.html5.player(t),l.setPlayer(t,"html5")}else this.loadEmbedder()},this.loadEmbedder=function(){(t=t||new i.scriptloader(a.src)).addEventListener(r.ERROR,this.loadError),t.addEventListener(r.COMPLETE,this.embed),t.load()},this.loadError=function(e){this.sendEvent(e.type,{message:"HTML5 player not found"})},this.supportsConfig=function(){if(e.vid.canPlayType)try{if("string"===i.typeOf(s.playlist))return!0;for(var t=s.playlist[0].sources,n=0;n<t.length;n++)if(e.embed.html5CanPlay(t[n].file,t[n].type,s.androidhls))return!0}catch(e){}return!1},this.destroy=function(){t&&(t.resetEventListeners(),t=null)}},e.embed.html5CanPlay=function(t,r,a){if(null!==navigator.userAgent.match(/BlackBerry/i)||i.isIE(9))return!1;if(i.isYouTube(t,r))return!0;var s,o=i.extension(t);if("hls"===(r=r||n.extType(o)))if(a){if((a=i.isAndroidNative)(2)||a(3)||a("4.0"))return!1;if(i.isAndroid())return!0}else if(i.isAndroid())return!1;if(i.isRtmp(t,r))return!1;if(!(t=n[r]||n[o])||t.flash&&!t.html5)return!1;e:if(t=t.html5){try{s=!!e.vid.canPlayType(t);break e}catch(e){}s=!1}else s=!0;return s}}(jwplayer),function(e){var t=e.embed,i=e.embed.html5CanPlay,n=e.utils,r=e._,a=/\.(js|swf)$/;e.cast=e.cast||{},e.embed=n.extend(function(i){function r(){s="Adobe SiteCatalyst Error: Could not find Media Module"}var s,o=n.repo(),l=n.extend({},e.defaults),u=n.extend({},l,i.config),c=i.config,d=u.plugins,h=u.analytics,f=o+"jwpsrv.js",p=o+"sharing.js",g=o+"related.js",m=o+"gapro.js",v=(l=e.key?e.key:l.key,new e.utils.key(l).edition());d=d||{};switch("ads"==v&&u.advertising&&(a.test(u.advertising.client)?d[u.advertising.client]=u.advertising:d[o+u.advertising.client+".js"]=u.advertising),delete c.advertising,c.key=l,u.analytics&&a.test(u.analytics.client)&&(f=u.analytics.client),delete c.analytics,h&&"ads"!==v&&"enterprise"!==v&&delete h.enabled,"free"!=v&&h&&!1===h.enabled||(d[f]=h||{}),delete d.sharing,delete d.related,v){case"ads":case"enterprise":if(c.sitecatalyst)try{window.s&&window.s.hasOwnProperty("Media")?new e.embed.sitecatalyst(i):r()}catch(e){r()}case"premium":u.related&&(a.test(u.related.client)&&(g=u.related.client),d[g]=u.related),u.ga&&(a.test(u.ga.client)&&(m=u.ga.client),d[m]=u.ga);case"pro":u.sharing&&(a.test(u.sharing.client)&&(p=u.sharing.client),d[p]=u.sharing),u.skin&&(c.skin=u.skin.replace(/^(beelden|bekle|five|glow|modieus|roundster|stormtrooper|vapor)$/i,n.repo()+"skins/$1.xml"))}return c.plugins=d,i.config=c,i=new t(i),s&&i.errorScreen(s),i},e.embed),e.embed.html5CanPlay=function(t,n){var a={file:t,type:n};return!!(e.html5&&e.html5.chooseProvider?e.html5.chooseProvider(a)!==e.html5.VideoProvider:r.any(e.unregisteredProviders,function(e){return e.supports(a)}))||i.apply(this,arguments)}}(jwplayer),function(e){var t=jwplayer.utils;e.sitecatalyst=function(e){function i(e){h.debug&&t.log(e)}function n(e){return(e=(e=(e=e.split("/"))[e.length-1]).split("?"))[0]}function r(){if(!p){p=!0;var e=d.getPosition();i("stop: "+o+" : "+e),s.Media.stop(o,e)}}function a(){g||(r(),g=!0,i("close: "+o),s.Media.close(o),c=!0,u=0)}var o,l,u,c,d=e,h=t.extend({},d.config.sitecatalyst),f={onPlay:function(){if(!c){var e=d.getPosition();p=!1,i("play: "+o+" : "+e),s.Media.play(o,e)}},onPause:r,onBuffer:r,onIdle:a,onPlaylistItem:function(e){try{var i;if(c=!0,a(),u=0,h.mediaName)i=h.mediaName;else{var r=d.getPlaylistItem(e.index);i=r.title?r.title:r.file?n(r.file):r.sources&&r.sources.length?n(r.sources[0].file):""}o=i,l=h.playerName?h.playerName:d.id}catch(e){t.log(e)}},onTime:function(){if(c){var e=d.getDuration();if(-1==e)return;g=p=c=!1,i("open: "+o+" : "+e+" : "+l),s.Media.open(o,e,l),i("play: "+o+" : 0"),s.Media.play(o,0)}if(e=d.getPosition(),3<=Math.abs(e-u)){var t=u;i("seek: "+t+" to "+e),i("stop: "+o+" : "+t),s.Media.stop(o,t),i("play: "+o+" : "+e),s.Media.play(o,e)}u=e},onComplete:a},p=!0,g=!0;t.foreach(f,function(e){d[e](f[e])})}}(jwplayer.embed),function(e){function t(e,t){e[t]&&(e[t]=i.getAbsolutePath(e[t]))}var i=e.utils,n=e._,r=window.location.href;e.cast.setupCastConfig=function(n,a){var s=i.extend({},n.config);s.cast=i.extend({pageUrl:r},a);for(var o="base autostart controls fallback fullscreen width height mobilecontrols modes playlistlayout playlistposition playlistsize primary stretching sharing related ga skin logo listbar events".split(" "),l=o.length;l--;)delete s[o[l]];for(var u in o=s.plugins,delete s.plugins,o)if(o.hasOwnProperty(u)){var c=o[u];if(c.client&&(/[\.\/]/.test(c.client)&&t(c,"client"),-1<c.client.indexOf("vast"))){if(l=s,(c=i.extend({},c)).client="vast",delete c.companiondiv,c.schedule){var d=void 0;for(d in c.schedule)c.schedule.hasOwnProperty(d)&&t(c.schedule[d].ad||c.schedule[d],"tag")}t(c,"tag"),l.advertising=c}}return n.position&&(s.position=n.position),0<n.item&&(s.item=n.item),s.captionLabel=i.getCookies().captionLabel,s.playerVersion=e.version,s},e.cast.setupFlashCastConfig=function(t){var r,a=t.config;return a.playlist=t.getPlaylist(),(r=n.find(a.plugins,function(e,t){return 0<t.indexOf("vast.js")}))?(r.client="vast",r={advertising:r}):r={},(a=n.pick(a,"id captionLabel cast key playlist repeat".split(" "))).cast.pageUrl=window.location.href,i.extend(a,{playerVersion:e.version,captionLabel:i.getCookies().captionLabel,volume:t.getVolume(),mute:t.getMute(),id:t.id,position:t.getPosition(),item:t.getPlaylistIndex()},r),a}}(window.jwplayer),function(e,t){function i(e,t){e[t]&&(e[t]=r.getAbsolutePath(e[t]))}var n=t.cast,r=t.utils,a=t.events,s=a.state,o={};n.NS="urn:x-cast:com.longtailvideo.jwplayer",n.debug=!1,n.availability=null,n.available=function(t){t=t||n.availability;var i=e.chrome,r="available";return i.cast&&i.cast.ReceiverAvailability&&(r=i.cast.ReceiverAvailability.AVAILABLE),t===r},n.controller=function(l,u){var c,d;function h(e,t){n.log("send command",e,t);var i={command:e};void 0!==t&&(i.args=t),k.sendMessage(n.NS,i,P,function(e){n.log("error message",e),"Invalid namespace"===e.description&&y()})}function f(e,i){var r=JSON.parse(i);if(!r)throw"Message not proper JSON";if(r.reconcile){B.removeMessageListener(n.NS,f);var s=r.diff,o=B;s.id&&r.appid&&r.pageUrl||(s.id=t().id,r.appid=I.appid,r.pageUrl=M,B=k=null),s.id===l.id&&r.appid===I.appid&&r.pageUrl===M&&(k||(l.jwInstreamState()&&l.jwInstreamDestroy(!0),b(o),u.sendEvent(a.JWPLAYER_PLAYER_STATE,{oldstate:s.oldstate,newstate:s.newstate})),S(r)),B=null}}function p(e){var t;L.active=!!e,e=L,t=k&&k.receiver?k.receiver.friendlyName:"",e.deviceName=t,g(a.JWPLAYER_CAST_SESSION)}function g(e){var t=r.extend({},L);u.sendEvent(e,t)}function m(t){var i=e.chrome;t.code!==i.cast.ErrorCode.CANCEL&&(n.log("Cast Session Error:",t,k),t.code===i.cast.ErrorCode.SESSION_ERROR&&y())}function v(t){var i=e.chrome;t.code!==i.cast.ErrorCode.CANCEL&&(n.log("Cast Session Error:",t,k),t.code===i.cast.ErrorCode.SESSION_ERROR&&y())}function y(){k?(A(),k.stop(E,_),R({item:0}),S({type:"state",diff:{buffer:0,position:0,duration:0}})):E()}function _(e){n.error("Cast Session Stop error:",e,k),E()}function b(i){if(n.log("Session started:",i),k)y(),U=i;else{(k=i).addMessageListener(n.NS,T),k.addUpdateListener(w),l.jwPause(!0),l.jwSetFullscreen(!1),j=u.getVideo(),c=u.volume,d=u.mute,(N=new n.provider(h)).init(),u.setVideoProvider(N),l.jwPlay=function(e){!1===e?N.pause():N.play()},l.jwPause=function(e){l.jwPlay(!!e)},l.jwLoad=function(e){"number"===r.typeOf(e)&&u.setItem(e),N.load(e)},l.jwPlaylistItem=function(e){"number"===r.typeOf(e)&&u.setItem(e),N.playlistItem(e)},l.jwPlaylistNext=function(){l.jwPlaylistItem(u.item+1)},l.jwPlaylistPrev=function(){l.jwPlaylistItem(u.item-1)},l.jwSetVolume=function(e){r.exists(e)&&(x(e=0|Math.min(Math.max(0,e),100))&&(e=Math.max(0,Math.min(e/100,1)),k.setReceiverVolumeLevel(e,D,function(e){n.error("set volume error",e),D()})))},l.jwSetMute=function(e){r.exists(e)||(e=!O.mute),C(e)&&k.setReceiverMuted(!!e,D,function(e){n.error("set muted error",e),D()})},l.jwGetVolume=function(){return 0|O.volume},l.jwGetMute=function(){return!!O.mute},l.jwIsBeforePlay=function(){return!1};var o=l.jwSetCurrentCaptions;l.jwSetCurrentCaptions=function(e){o(e),N.sendCommand("caption",e)},l.jwSkipAd=function(e){F&&(F.skipAd(e),(e=F.getAdModel()).complete=!0,u.sendEvent(a.JWPLAYER_CAST_AD_CHANGED,e))},l.jwClickAd=function(i){if(F&&300<F.timeSinceClick()&&(F.clickAd(i),u.state!==s.PAUSED)){var n={tag:i.tag};i.sequence&&(n.sequence=i.sequence),i.podcount&&(n.podcount=i.podcount),t(l.id).dispatchEvent(a.JWPLAYER_AD_CLICK,n),e.open(i.clickthrough)}},l.jwPlayAd=l.jwPauseAd=l.jwSetControls=l.jwForceState=l.jwReleaseState=l.jwSetFullscreen=l.jwDetachMedia=l.jwAttachMedia=P;var f=t(l.id).plugins;f.vast&&f.vast.jwPauseAd!==P&&(G={jwPlayAd:f.vast.jwPlayAd,jwPauseAd:f.vast.jwPauseAd},f.vast.jwPlayAd=f.vast.jwPauseAd=P),D(),p(!0),i!==B&&(N.setup(t.cast.setupCastConfig(u,I),u),t.cast.loader.sendDummyMedia(i))}}function w(e){n.log("Cast Session status",e),e?D():(N.sendEvent(a.JWPLAYER_PLAYER_STATE,{oldstate:u.state,newstate:s.BUFFERING}),E())}function E(){if(n.log("_sessionStopped"),k&&(A(),k=null),j){delete l.jwSkipAd,delete l.jwClickAd,l.initializeAPI();var e=t(l.id).plugins;e.vast&&r.extend(e.vast,G),u.volume=c,u.mute=d,u.setVideoProvider(j),u.duration=0,N&&(N.destroy(),N=null),F&&(F.destroy(),F=null),u.state!==s.IDLE?r.isIPad()||r.isIPod()?(l.jwStop(!0),j.sendEvent(a.JWPLAYER_PLAYER_STATE,{oldstate:s.BUFFERING,newstate:s.IDLE})):(u.state=s.IDLE,l.jwPlay(!0),l.jwSeek(u.position)):j.sendEvent(a.JWPLAYER_PLAYER_STATE,{oldstate:s.BUFFERING,newstate:s.IDLE}),j=null}p(!1),null!==U&&(b(U),U=null)}function A(){k.removeUpdateListener(w),k.removeMessageListener(n.NS,T)}function T(e,t){var i=JSON.parse(t);if(!i)throw"Message not proper JSON";S(i)}function S(e){if("state"===e.type)F&&(e.diff.newstate||e.diff.position)&&(F.destroy(),F=null,u.setVideoProvider(N),u.sendEvent(a.JWPLAYER_CAST_AD_CHANGED,{done:!0})),N.updateModel(e.diff,e.type),R(e.diff);else if("ad"===e.type){null===F&&((F=new n.adprovider(n.NS,k)).init(),u.setVideoProvider(F)),F.updateModel(e.diff,e.type);var t=F.getAdModel();e.diff.clickthrough&&(t.onClick=l.jwClickAd),e.diff.skipoffset&&(t.onSkipAd=l.jwSkipAd),u.sendEvent(a.JWPLAYER_CAST_AD_CHANGED,t),e.diff.complete&&F.resetAdModel()}else"connection"===e.type?!0===e.closed&&y():n.error("received unhandled message",e.type,e)}function R(e){void 0!==e.item&&u.item!==e.item&&(u.item=e.item,u.sendEvent(a.JWPLAYER_PLAYLIST_ITEM,{index:u.item}))}function D(){if(k&&k.receiver){var e=k.receiver.volume;if(e){var t=100*e.level|0;C(!!e.muted),x(t)}}}function x(e){var t=O.volume!==e;return t&&(O.volume=e,N.sendEvent(a.JWPLAYER_MEDIA_VOLUME,{volume:e})),t}function C(e){var t=O.mute!==e;return t&&(O.mute=e,N.sendEvent(a.JWPLAYER_MEDIA_MUTE,{mute:e})),t}function P(){}var I,k=null,L={available:!1,active:!1,deviceName:""},O={volume:null,mute:null},M=r.getAbsolutePath(e.location.href),N=null,F=null,j=null;c=u.volume,d=u.mute;var B=null,U=null,G=null;i(I=r.extend({},o,u.cast),"loadscreen"),i(I,"endscreen"),i(I,"logo"),!I.appid||e.cast&&e.cast.receiver||(n.loader.addEventListener("availability",function(e){e=!!n.available(e.availability),L.available!==e&&(L.available=e,g(a.JWPLAYER_CAST_AVAILABLE))}),n.loader.addEventListener("session",function(e){n.log("existing session",e),!k&&!B&&(B=e.session).addMessageListener(n.NS,f)}),n.loader.initialize(I.appid)),this.startCasting=function(){k||l.jwInstreamState()||e.chrome.cast.requestSession(b,m)},this.stopCasting=y,this.openExtension=function(){l.jwInstreamState()||e.chrome.cast.requestSession(b,v)}},n.log=function(){if(n.debug){var e=Array.prototype.slice.call(arguments,0);console.log.apply(console,e)}},n.error=function(){var e=Array.prototype.slice.call(arguments,0);console.error.apply(console,e)}}(window,jwplayer),function(e){function t(e){m.log("existing session",e),!g&&!f&&(f=e.session).addMessageListener(m.NS,i)}function i(t,n){var r=JSON.parse(n),s=f;if(!r)throw"Message not proper JSON";r.reconcile&&(f.removeMessageListener(m.NS,i),r.receiverFriendlyName=f.receiver.friendlyName,r.pageUrl&&r.diff.id&&r.appid||(r.pageUrl=E,r.diff.id=e().id,r.appid=h,f=g=null),b[r.diff.id]&&h===r.appid&&r.pageUrl===E&&(d=r.diff.id,h=r.appid,u(d,"jwInstreamDestroy"),a(s),u(d,w.message,r),f=null))}function n(){g&&(g.removeUpdateListener(l),g.removeMessageListener(m.NS,s),g.stop(function(){void 0!==p&&null!==p&&(a(p),p=null)}.bind(this),o.bind(this)),g=null),u(d,w.cleanup)}function r(e,t){g.sendMessage(m.NS,{command:e,args:t},v.noop,function(e){m.error("message send error",e)})}function a(t){var i=e(d);g?(n(),p=t):((g=t).addMessageListener(m.NS,s),g.addUpdateListener(l),i=e.cast.setupFlashCastConfig(i),f!==g&&(r("setup",i),e.cast.loader.sendDummyMedia(g)),u(d,w.connected,{receiverFriendlyName:t.receiver.friendlyName}))}function s(e,t){if(t){var i=JSON.parse(t);if(!i)throw"Message not proper JSON";u(d,w.message,i)}}function o(e){u(d,w.error,e||{})}function l(e){e?c():n()}function u(t,i,n){n?e(t).callInternal(i,n):e(t).callInternal(i)}function c(){if(g&&g.receiver&&(i=g.receiver.volume)){var t=100*i.level|0,i=!!i.muted;e(d).setVolume(t).setMute(i)}}var d,h,f,p,g,m=e.cast,v=e.utils,y=e._,_=window.chrome||{},b={},w={},E=v.getAbsolutePath(window.location.href);m.NS="urn:x-cast:com.longtailvideo.jwplayer",m.flash={checkAvailability:function(e,i,n){w=n,h=i,b[e]=!0,m.loader.addEventListener("availability",function(t){"available"===t.availability&&u(e,w.available,t)}),m.loader.addEventListener("session",t),m.loader.initialize(i)},startCasting:function(e){d=e,_.cast.requestSession(a.bind(this),o.bind(this))},stopCasting:n,openExtension:function(e){d=e,_.cast.requestSession(a.bind(this),o.bind(this))},mute:function(e){g.setReceiverMuted(e,c,function(e){m.error("set muted error",e)})},volume:function(e){e=Math.max(0,Math.min(e/100,1)),g.setReceiverVolumeLevel(e,c,function(e){m.error("set volume error",e)})},messageReceiver:r,canCastItem:function(t){return y.any(t.levels,function(t){return e.embed.html5CanPlay(t.file,t.type)||"hls"===t.type})}}}(window.jwplayer),function(e,t){function i(e){var i=new t.cast.media.MediaInfo("");i.contentType="video/mp4",(i=new t.cast.media.LoadRequest(i)).autoplay=!1,e.loadMedia(i)}function n(){t&&t.cast&&t.cast.isAvailable&&!c.apiConfig?(c.apiConfig=new t.cast.ApiConfig(new t.cast.SessionRequest(p),o,l,t.cast.AutoJoinPolicy.ORIGIN_SCOPED),t.cast.initialize(c.apiConfig,s,a)):15>f++&&setTimeout(n,1e3)}function r(){u&&(u.resetEventListeners(),u=null)}function a(){c.apiConfig=null}function s(){}function o(e){g.sendEvent("session",{session:e}),e.sendMessage(c.NS,{whoami:1}),0===e.media.length&&i(e)}function l(e){c.availability=e,g.sendEvent("availability",{availability:e})}window.chrome=t;var u,c=e.cast,d=e.utils,h=e.events,f=0,p=null,g=d.extend({initialize:function(e){p=e,null!==c.availability?g.sendEvent("availability",{availability:c.availability}):t&&t.cast?n():u||((u=new d.scriptloader("https://www.gstatic.com/cv/js/sender/v1/cast_sender.js")).addEventListener(h.ERROR,r),u.addEventListener(h.COMPLETE,n),u.load())}},new h.eventdispatcher("cast.loader"));e.cast.loader=g,e.cast.loader.sendDummyMedia=i}(window.jwplayer,window.chrome||{}),function(e,t){var i=[],n=e.utils,r=e.events,a=e._,s=0,o=r.state,l="getBuffer getCaptionsList getControls getCurrentCaptions getCurrentQuality getCurrentAudioTrack getDuration getFullscreen getHeight getLockState getMute getPlaylistIndex getSafeRegion getPosition getQualityLevels getState getVolume getWidth isBeforeComplete isBeforePlay releaseState".split(" "),u="playlistNext stop forceState playlistPrev seek setCurrentCaptions setControls setCurrentQuality setVolume setCurrentAudioTrack".split(" "),c={onBufferChange:r.JWPLAYER_MEDIA_BUFFER,onBufferFull:r.JWPLAYER_MEDIA_BUFFER_FULL,onError:r.JWPLAYER_ERROR,onSetupError:r.JWPLAYER_SETUP_ERROR,onFullscreen:r.JWPLAYER_FULLSCREEN,onMeta:r.JWPLAYER_MEDIA_META,onMute:r.JWPLAYER_MEDIA_MUTE,onPlaylist:r.JWPLAYER_PLAYLIST_LOADED,onPlaylistItem:r.JWPLAYER_PLAYLIST_ITEM,onPlaylistComplete:r.JWPLAYER_PLAYLIST_COMPLETE,onReady:r.API_READY,onResize:r.JWPLAYER_RESIZE,onComplete:r.JWPLAYER_MEDIA_COMPLETE,onSeek:r.JWPLAYER_MEDIA_SEEK,onTime:r.JWPLAYER_MEDIA_TIME,onVolume:r.JWPLAYER_MEDIA_VOLUME,onBeforePlay:r.JWPLAYER_MEDIA_BEFOREPLAY,onBeforeComplete:r.JWPLAYER_MEDIA_BEFORECOMPLETE,onDisplayClick:r.JWPLAYER_DISPLAY_CLICK,onControls:r.JWPLAYER_CONTROLS,onQualityLevels:r.JWPLAYER_MEDIA_LEVELS,onQualityChange:r.JWPLAYER_MEDIA_LEVEL_CHANGED,onCaptionsList:r.JWPLAYER_CAPTIONS_LIST,onCaptionsChange:r.JWPLAYER_CAPTIONS_CHANGED,onAdError:r.JWPLAYER_AD_ERROR,onAdClick:r.JWPLAYER_AD_CLICK,onAdImpression:r.JWPLAYER_AD_IMPRESSION,onAdTime:r.JWPLAYER_AD_TIME,onAdComplete:r.JWPLAYER_AD_COMPLETE,onAdCompanions:r.JWPLAYER_AD_COMPANIONS,onAdSkipped:r.JWPLAYER_AD_SKIPPED,onAdPlay:r.JWPLAYER_AD_PLAY,onAdPause:r.JWPLAYER_AD_PAUSE,onAdMeta:r.JWPLAYER_AD_META,onCast:r.JWPLAYER_CAST_SESSION,onAudioTrackChange:r.JWPLAYER_AUDIO_TRACK_CHANGED,onAudioTracks:r.JWPLAYER_AUDIO_TRACKS},d={onBuffer:o.BUFFERING,onPause:o.PAUSED,onPlay:o.PLAYING,onIdle:o.IDLE};e.api=function(s){function h(e,t){n.foreach(e,function(e,i){_[e]=function(e){return t(i,e)}})}function f(e,t){var i="jw"+t.charAt(0).toUpperCase()+t.slice(1);_[t]=function(){var t=m.apply(this,[i].concat(Array.prototype.slice.call(arguments,0)));return e?_:t}}function p(e,t){try{e.jwAddEventListener(t,'function(dat) { jwplayer("'+_.id+'").dispatchEvent("'+t+'", dat); }')}catch(e){if("flash"===_.renderingMode){var i=document.createElement("a");i.href=v.data,i.protocol!==location.protocol&&n.log("Warning: Your site ["+location.protocol+"] and JWPlayer ["+i.protocol+"] are hosted using different protocols")}n.log("Could not add internal listener")}}function g(e,t){return b[e]||(b[e]=[],v&&E&&p(v,e)),b[e].push(t),_}function m(){if(E){if(v){var e=Array.prototype.slice.call(arguments,0),t=e.shift();if("function"==typeof v[t]){switch(e.length){case 6:return v[t](e[0],e[1],e[2],e[3],e[4],e[5]);case 5:return v[t](e[0],e[1],e[2],e[3],e[4]);case 4:return v[t](e[0],e[1],e[2],e[3]);case 3:return v[t](e[0],e[1],e[2]);case 2:return v[t](e[0],e[1]);case 1:return v[t](e[0])}return v[t]()}}return null}A.push(arguments)}var v,y,_=this,b={},w={},E=!1,A=[],T={},S={};return _.container=s,_.id=s.id,_.setup=function(t){if(e.embed){e.api.destroyPlayer(_.id);var i=new e.api(_.container);return e.api.addPlayer(i),i.config=t,i._embedder=new e.embed(i),i._embedder.embed(),i}return _},_.getContainer=function(){return _.container},_.addButton=function(e,t,i,r){try{S[r]=i,m("jwDockAddButton",e,t,'jwplayer("'+_.id+'").callback("'+r+'")',r)}catch(e){n.log("Could not add dock button"+e.message)}},_.removeButton=function(e){m("jwDockRemoveButton",e)},_.callback=function(e){S[e]&&S[e]()},_.getMeta=function(){return _.getItemMeta()},_.getPlaylist=function(){var e=m("jwGetPlaylist");return"flash"===_.renderingMode&&n.deepReplaceKeyName(e,["__dot__","__spc__","__dsh__","__default__"],["."," ","-","default"]),e},_.getPlaylistItem=function(e){return n.exists(e)||(e=_.getPlaylistIndex()),_.getPlaylist()[e]},_.getRenderingMode=function(){return _.renderingMode},_.setFullscreen=function(e){return n.exists(e)?m("jwSetFullscreen",e):m("jwSetFullscreen",!m("jwGetFullscreen")),_},_.setMute=function(e){return n.exists(e)?m("jwSetMute",e):m("jwSetMute",!m("jwGetMute")),_},_.lock=function(){return _},_.unlock=function(){return _},_.load=function(t){return m("jwInstreamDestroy"),e(_.id).plugins.googima&&m("jwDestroyGoogima"),m("jwLoad",t),_},_.playlistItem=function(e){return m("jwPlaylistItem",parseInt(e,10)),_},_.resize=function(e,t){if("flash"!==_.renderingMode)m("jwResize",e,t);else{var i=document.getElementById(_.id+"_wrapper"),r=document.getElementById(_.id+"_aspect");r&&(r.style.display="none"),i&&(i.style.display="block",i.style.width=n.styleDimension(e),i.style.height=n.styleDimension(t))}return _},_.play=function(e){if(e!==t)return m("jwPlay",e),_;e=_.getState();var i=y&&y.getState();return i&&(i===o.IDLE||i===o.PLAYING||i===o.BUFFERING?m("jwInstreamPause"):m("jwInstreamPlay")),e===o.PLAYING||e===o.BUFFERING?m("jwPause"):m("jwPlay"),_},_.pause=function(e){return e===t?(e=_.getState())===o.PLAYING||e===o.BUFFERING?m("jwPause"):m("jwPlay"):m("jwPause",e),_},_.createInstream=function(){return new e.api.instream(this,v)},_.setInstream=function(e){return y=e},_.loadInstream=function(e,t){return(y=_.setInstream(_.createInstream()).init(t)).loadItem(e),y},_.destroyPlayer=function(){E=!0,m("jwPlayerDestroy")},_.playAd=function(t){var i=e(_.id).plugins;i.vast?i.vast.jwPlayAd(t):m("jwPlayAd",t)},_.pauseAd=function(){var t=e(_.id).plugins;t.vast?t.vast.jwPauseAd():m("jwPauseAd")},h(d,function(e,t){return w[e]||(w[e]=[],g(r.JWPLAYER_PLAYER_STATE,function(t){var i=t.newstate;if(t=t.oldstate,i===e){var n=w[i];if(n)for(var r=0;r<n.length;r++){var a=n[r];"function"==typeof a&&a.call(this,{oldstate:t,newstate:i})}}})),w[e].push(t),_}),h(c,g),n.foreach(l,function(e,t){f(!1,t)}),n.foreach(u,function(e,t){f(!0,t)}),_.remove=function(){this._embedder&&this._embedder.destroy&&this._embedder.destroy(),A=[];var e=1<a.size(a.where(i,{id:_.id}));e||n.clearCss("#"+_.id);var t=document.getElementById(_.id+("flash"===_.renderingMode?"_wrapper":""));if(t){if("html5"===_.renderingMode)_.destroyPlayer();else if(n.isMSIE(8)){var r=document.getElementById(_.id);if(r&&r.parentNode){for(var s in r.style.display="none",r)"function"==typeof r[s]&&(r[s]=null);r.parentNode.removeChild(r)}}e||((e=document.createElement("div")).id=_.id,t.parentNode.replaceChild(e,t))}i=a.filter(i,function(e){return e.uniqueId!==_.uniqueId})},_.registerPlugin=function(t,i,n,r){e.plugins.registerPlugin(t,i,n,r)},_.setPlayer=function(e,t){v=e,_.renderingMode=t},_.detachMedia=function(){if("html5"===_.renderingMode)return m("jwDetachMedia")},_.attachMedia=function(e){if("html5"===_.renderingMode)return m("jwAttachMedia",e)},_.getAudioTracks=function(){return m("jwGetAudioTracks")},_.removeEventListener=function(e,t){var i=b[e];if(i)for(var n=i.length;n--;)i[n]===t&&i.splice(n,1)},_.dispatchEvent=function(e,t){if(i=b[e])for(var i=i.slice(0),a=n.translateEventResponse(e,t),s=0;s<i.length;s++){var o=i[s];if("function"==typeof o)try{e===r.JWPLAYER_PLAYLIST_LOADED&&n.deepReplaceKeyName(a.playlist,["__dot__","__spc__","__dsh__","__default__"],["."," ","-","default"]),o.call(this,a)}catch(e){n.log("There was an error calling back an event handler",e)}}},_.dispatchInstreamEvent=function(e){y&&y.dispatchEvent(e,arguments)},_.callInternal=m,_.playerReady=function(e){for(E=!0,v||_.setPlayer(document.getElementById(e.id)),_.container=document.getElementById(_.id),n.foreach(b,function(e){p(v,e)}),g(r.JWPLAYER_PLAYLIST_ITEM,function(){T={}}),g(r.JWPLAYER_MEDIA_META,function(e){n.extend(T,e.metadata)}),g(r.JWPLAYER_VIEW_TAB_FOCUS,function(e){var t=_.getContainer();!0===e.hasFocus?n.addClass(t,"jw-tab-focus"):n.removeClass(t,"jw-tab-focus")}),_.dispatchEvent(r.API_READY);0<A.length;)m.apply(_,A.shift())},_.getItemMeta=function(){return T},_},e.playerReady=function(t){var i=e.api.playerById(t.id);i||(i=e.api.selectPlayer(t.id)),i.playerReady(t)},e.api.selectPlayer=function(t){var r;return n.exists(t)||(t=0),t.nodeType?r=t:"string"==typeof t&&(r=document.getElementById(t)),r?(t=e.api.playerById(r.id))?t:new e.api(r):"number"==typeof t?i[t]:null},e.api.playerById=function(e){for(var t=0;t<i.length;t++)if(i[t].id===e)return i[t];return null},e.api.addPlayer=function(e){for(var t=0;t<i.length;t++)if(i[t]===e)return e;return s++,e.uniqueId=s,i.push(e),e},e.api.destroyPlayer=function(e){e=a.where(i,{id:e}),a.each(e,a.partial(a.result,a,"remove"))}}(window.jwplayer),function(e){var t=e.events,i=e.utils,n=t.state;e.api.instream=function(e,r){function a(t,i){return u[t]||(u[t]=[],r.jwInstreamAddEventListener(t,'function(dat) { jwplayer("'+e.id+'").dispatchInstreamEvent("'+t+'", dat); }')),u[t].push(i),this}function s(e,i){return c[e]||(c[e]=[],a(t.JWPLAYER_PLAYER_STATE,function(t){var i=t.newstate,n=t.oldstate;if(i===e){var r=c[i];if(r)for(var a=0;a<r.length;a++){var s=r[a];"function"==typeof s&&s.call(this,{oldstate:n,newstate:i,type:t.type})}}})),c[e].push(i),this}var o,l,u={},c={},d=this;d.type="instream",d.init=function(){return e.callInternal("jwInitInstream"),d},d.loadItem=function(t,n){o=t,l=n||{},"array"===i.typeOf(t)?e.callInternal("jwLoadArrayInstream",o,l):e.callInternal("jwLoadItemInstream",o,l)},d.removeEvents=function(){u=c={}},d.removeEventListener=function(e,t){var i=u[e];if(i)for(var n=i.length;n--;)i[n]===t&&i.splice(n,1)},d.dispatchEvent=function(e,t){if(n=u[e])for(var n=n.slice(0),r=i.translateEventResponse(e,t[1]),a=0;a<n.length;a++){var s=n[a];"function"==typeof s&&s.call(this,r)}},d.onError=function(e){return a(t.JWPLAYER_ERROR,e)},d.onMediaError=function(e){return a(t.JWPLAYER_MEDIA_ERROR,e)},d.onFullscreen=function(e){return a(t.JWPLAYER_FULLSCREEN,e)},d.onMeta=function(e){return a(t.JWPLAYER_MEDIA_META,e)},d.onMute=function(e){return a(t.JWPLAYER_MEDIA_MUTE,e)},d.onComplete=function(e){return a(t.JWPLAYER_MEDIA_COMPLETE,e)},d.onPlaylistComplete=function(e){return a(t.JWPLAYER_PLAYLIST_COMPLETE,e)},d.onPlaylistItem=function(e){return a(t.JWPLAYER_PLAYLIST_ITEM,e)},d.onTime=function(e){return a(t.JWPLAYER_MEDIA_TIME,e)},d.onBuffer=function(e){return s(n.BUFFERING,e)},d.onPause=function(e){return s(n.PAUSED,e)},d.onPlay=function(e){return s(n.PLAYING,e)},d.onIdle=function(e){return s(n.IDLE,e)},d.onClick=function(e){return a(t.JWPLAYER_INSTREAM_CLICK,e)},d.onInstreamDestroyed=function(e){return a(t.JWPLAYER_INSTREAM_DESTROYED,e)},d.onAdSkipped=function(e){return a(t.JWPLAYER_AD_SKIPPED,e)},d.play=function(e){r.jwInstreamPlay(e)},d.pause=function(e){r.jwInstreamPause(e)},d.hide=function(){e.callInternal("jwInstreamHide")},d.destroy=function(){d.removeEvents(),e.callInternal("jwInstreamDestroy")},d.setText=function(e){r.jwInstreamSetText(e||"")},d.getState=function(){return r.jwInstreamState()},d.setClick=function(e){r.jwInstreamClick&&r.jwInstreamClick(e)}}}(jwplayer),function(e){var t=e.api,i=t.selectPlayer,n=e._;t.selectPlayer=function(t){var n=i.apply(this,arguments);return n||{registerPlugin:function(t,i,n){"jwpsrv"!==t&&e.plugins.registerPlugin(t,i,n)}}},e.unregisteredProviders=[],t.registerProvider=function(t){e&&e.html5&&n.isFunction(e.html5.registerProvider)?e.html5.registerProvider(t):e.unregisteredProviders.push(t)}}(jwplayer))},"16WZ":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setupScrollLocking=t.rebindScroll=t.combineHeight=void 0;var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},r=s(i("l/Rs")),a=s(i("shXp"));function s(e){return e&&e.__esModule?e:{default:e}}var o=[],l=function(e){var t=e.element,i=e.offsets,n=void 0===i?[]:i,a=e.styles,s=void 0===a?function(){return{onLock:{},offLock:{}}}:a,o=(0,r.default)(t);return o.length?{styles:s,options:e,element:o,offsetTop:o.parent().offset().top,eventName:"scroll."+o.selector,offset:c(n)}:null},u=function(e){var t=e.element,i=e.eventName,a=e.offsetTop,s=e.offset,o=!1,l=(0,e.styles)();(0,r.default)(window).off(i).on(i,function(){var e=this.scrollY;!o&&e>=a-s?(t.addClass("fixed").css(n({top:s+"px"},l.onLock)),o=!0):o&&e<a-s&&(t.removeClass("fixed").css(n({top:""},l.offLock)),o=!1)}).trigger(i)},c=t.combineHeight=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map(function(e){return(0,r.default)(e).height()}).reduce(function(e,t){return e+t})},d=t.rebindScroll=function(){return o.forEach(function(e){return u(l(e.options))})};t.setupScrollLocking=function(e){(0,r.default)(document).on("ready",function(){var t=l(e);t&&(o=o.concat(t),u(t))})};(0,r.default)(window).on("resize",a.default.debounce(d,250))},18:function(e,t,i){i("YBD5"),i("wmCY"),e.exports=i("/cNa")},"1i/z":function(e,t,i){var n,r,a,s;s=function(e){var t=Object.prototype.toString,i=Array.isArray||function(e){return"[object Array]"===t.call(e)};function n(e){return"function"==typeof e}function r(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function a(e,t){return null!=e&&"object"==typeof e&&t in e}var s=RegExp.prototype.test;var o=/\S/;function l(e){return!function(e,t){return s.call(e,t)}(o,e)}var u={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};var c=/\s*/,d=/\s+/,h=/\s*=/,f=/\s*\}/,p=/#|\^|\/|>|\{|&|=|!/;function g(e){this.string=e,this.tail=e,this.pos=0}function m(e,t){this.view=e,this.cache={".":this.view},this.parent=t}function v(){this.cache={}}g.prototype.eos=function(){return""===this.tail},g.prototype.scan=function(e){var t=this.tail.match(e);if(!t||0!==t.index)return"";var i=t[0];return this.tail=this.tail.substring(i.length),this.pos+=i.length,i},g.prototype.scanUntil=function(e){var t,i=this.tail.search(e);switch(i){case-1:t=this.tail,this.tail="";break;case 0:t="";break;default:t=this.tail.substring(0,i),this.tail=this.tail.substring(i)}return this.pos+=t.length,t},m.prototype.push=function(e){return new m(e,this)},m.prototype.lookup=function(e){var t,i=this.cache;if(i.hasOwnProperty(e))t=i[e];else{for(var r,s,o=this,l=!1;o;){if(e.indexOf(".")>0)for(t=o.view,r=e.split("."),s=0;null!=t&&s<r.length;)s===r.length-1&&(l=a(t,r[s])),t=t[r[s++]];else t=o.view[e],l=a(o.view,e);if(l)break;o=o.parent}i[e]=t}return n(t)&&(t=t.call(this.view)),t},v.prototype.clearCache=function(){this.cache={}},v.prototype.parse=function(t,n){var a=this.cache,s=a[t];return null==s&&(s=a[t]=function(t,n){if(!t)return[];var a,s,o,u=[],m=[],v=[],y=!1,_=!1;function b(){if(y&&!_)for(;v.length;)delete m[v.pop()];else v=[];y=!1,_=!1}function w(e){if("string"==typeof e&&(e=e.split(d,2)),!i(e)||2!==e.length)throw new Error("Invalid tags: "+e);a=new RegExp(r(e[0])+"\\s*"),s=new RegExp("\\s*"+r(e[1])),o=new RegExp("\\s*"+r("}"+e[1]))}w(n||e.tags);for(var E,A,T,S,R,D,x=new g(t);!x.eos();){if(E=x.pos,T=x.scanUntil(a))for(var C=0,P=T.length;C<P;++C)l(S=T.charAt(C))?v.push(m.length):_=!0,m.push(["text",S,E,E+1]),E+=1,"\n"===S&&b();if(!x.scan(a))break;if(y=!0,A=x.scan(p)||"name",x.scan(c),"="===A?(T=x.scanUntil(h),x.scan(h),x.scanUntil(s)):"{"===A?(T=x.scanUntil(o),x.scan(f),x.scanUntil(s),A="&"):T=x.scanUntil(s),!x.scan(s))throw new Error("Unclosed tag at "+x.pos);if(R=[A,T,E,x.pos],m.push(R),"#"===A||"^"===A)u.push(R);else if("/"===A){if(!(D=u.pop()))throw new Error('Unopened section "'+T+'" at '+E);if(D[1]!==T)throw new Error('Unclosed section "'+D[1]+'" at '+E)}else"name"===A||"{"===A||"&"===A?_=!0:"="===A&&w(T)}if(D=u.pop())throw new Error('Unclosed section "'+D[1]+'" at '+x.pos);return function(e){for(var t,i=[],n=i,r=[],a=0,s=e.length;a<s;++a)switch((t=e[a])[0]){case"#":case"^":n.push(t),r.push(t),n=t[4]=[];break;case"/":r.pop()[5]=t[2],n=r.length>0?r[r.length-1][4]:i;break;default:n.push(t)}return i}(function(e){for(var t,i,n=[],r=0,a=e.length;r<a;++r)(t=e[r])&&("text"===t[0]&&i&&"text"===i[0]?(i[1]+=t[1],i[3]=t[3]):(n.push(t),i=t));return n}(m))}(t,n)),s},v.prototype.render=function(e,t,i){var n=this.parse(e),r=t instanceof m?t:new m(t);return this.renderTokens(n,r,i,e)},v.prototype.renderTokens=function(e,t,i,n){for(var r,a,s,o="",l=0,u=e.length;l<u;++l)s=void 0,"#"===(a=(r=e[l])[0])?s=this.renderSection(r,t,i,n):"^"===a?s=this.renderInverted(r,t,i,n):">"===a?s=this.renderPartial(r,t,i,n):"&"===a?s=this.unescapedValue(r,t):"name"===a?s=this.escapedValue(r,t):"text"===a&&(s=this.rawValue(r)),void 0!==s&&(o+=s);return o},v.prototype.renderSection=function(e,t,r,a){var s=this,o="",l=t.lookup(e[1]);if(l){if(i(l))for(var u=0,c=l.length;u<c;++u)o+=this.renderTokens(e[4],t.push(l[u]),r,a);else if("object"==typeof l||"string"==typeof l||"number"==typeof l)o+=this.renderTokens(e[4],t.push(l),r,a);else if(n(l)){if("string"!=typeof a)throw new Error("Cannot use higher-order sections without the original template");null!=(l=l.call(t.view,a.slice(e[3],e[5]),function(e){return s.render(e,t,r)}))&&(o+=l)}else o+=this.renderTokens(e[4],t,r,a);return o}},v.prototype.renderInverted=function(e,t,n,r){var a=t.lookup(e[1]);if(!a||i(a)&&0===a.length)return this.renderTokens(e[4],t,n,r)},v.prototype.renderPartial=function(e,t,i){if(i){var r=n(i)?i(e[1]):i[e[1]];return null!=r?this.renderTokens(this.parse(r),t,i,r):void 0}},v.prototype.unescapedValue=function(e,t){var i=t.lookup(e[1]);if(null!=i)return i},v.prototype.escapedValue=function(t,i){var n=i.lookup(t[1]);if(null!=n)return e.escape(n)},v.prototype.rawValue=function(e){return e[1]},e.name="mustache.js",e.version="2.3.0",e.tags=["{{","}}"];var y=new v;return e.clearCache=function(){return y.clearCache()},e.parse=function(e,t){return y.parse(e,t)},e.render=function(e,t,n){if("string"!=typeof e)throw new TypeError('Invalid template! Template should be a "string" but "'+(i(r=e)?"array":typeof r)+'" was given as the first argument for mustache#render(template, view, partials)');var r;return y.render(e,t,n)},e.to_html=function(t,i,r,a){var s=e.render(t,i,r);if(!n(a))return s;a(s)},e.escape=function(e){return String(e).replace(/[&<>"'`=\/]/g,function(e){return u[e]})},e.Scanner=g,e.Context=m,e.Writer=v,e},"object"==typeof t&&t&&"string"!=typeof t.nodeName?s(t):(r=[t],void 0===(a="function"==typeof(n=s)?n.apply(t,r):n)||(e.exports=a))},"2TxY":function(e,t,i){var n=i("l/Rs");i("l/Rs");!function(e){e.fn.livesearch_multi_selector=function(t){return t=e.extend({url:!1,cancel_copy:"Remove",sortable:!1,update_input:!1},t),e(this).each(function(){var i=e(this),n=i.find(".field_with_icon"),r=n.find("input.text"),a=i.find("ol.search-selected,ul.search-selected"),s=r.siblings(".ss-search"),o=i.find(".template"),l=t;l.url=t.url||i.closest("form").attr("action"),r.livesearch_input_dropdown(l),t.sortable&&a.sortable({containment:"document",axis:"y",update:function(){a.find("input.position").each(function(t){e(this).val(t)})}}),i.addClass("search"),a.find("li").each(function(){var i,n;i=e(this),n=e('<a class="ss-icon ss-delete cancel-link" href="#">'+t.cancel_copy+"</a>"),i.append(n)}),i.on("click","a.cancel-link",function(t){var i=e(this).closest("li"),n=i.find(".destroy");t.preventDefault(),i.fadeOut(function(){n.length?n.val("1"):i.remove()})}),r.on("livesearch:searching",function(){s.removeClass("ss-search").addClass("icon-loading-small")}),r.on("livesearch:results livesearch:ajax_error",function(){s.removeClass("icon-loading-small").addClass("ss-search")}),i.on("livesearch:selected",function(i,s){if(s){var l=o.clone_form_template();l.find("input.destroy").val(!1),l.find(".name").html(s[0]),l.find(".value").val(s[1]),a.append(l),t.sortable&&a.find("input.position").each(function(t){e(this).val(t)}),r.val(""),n.siblings(".results").slideUp(),r.trigger("livesearch:cancel")}})})}}(n)},"2fYv":function(e,t,i){"use strict";var n=s(i("l/Rs")),r=s(i("8NzR")),a=s(i("UQDk"));function s(e){return e&&e.__esModule?e:{default:e}}(0,r.default)(".NS_banners__social_prompt",function(e){var t=e.data("url");t&&n.default.ajax({url:(0,a.default)(t),type:"get",success:function(t){var i=t.remotely_followed_count;i>0&&(e.find(".js-friend-count").html(i),e.removeClass("banner--is-hidden"))}})})},"3txR":function(e,t,i){"use strict";var n,r=i("l/Rs"),a=(n=r)&&n.__esModule?n:{default:n};i("yYdC");var s=i("4RZc");(0,a.default)(function(){var e,t,i,n,r,o=(0,a.default)(".js-mega-footer");o.length&&(t=0,i=["icon-scissors-1","icon-scissors-2","icon-scissors-3"],n=0,(r=(0,a.default)("span.scissors",o)).click(function(){e||(e=(0,a.default)(".js-mega-footer__content").width()/3),t+=1,function e(t){t>9||(r.removeClass(i[n]),(n+=1)===i.length&&(n=0),r.addClass(i[n]),setTimeout(function(){e(t+1)},100))}(0),r.animate({marginLeft:e*t},1e3,function(){3===t&&(r.hide(),o.height(o.height()),o.addClass("gone"),(0,a.default)("html").addClass("gone"),(0,a.default)(".js-mini-footer").hide(),o.find(".js-mega-footer__content").animate({marginTop:[o.height(),"easeInOutExpo"],opacity:0},1e3,function(){(0,a.default)(".js-mega-footer__newsletter-signup").fadeIn()}))})}),(0,a.default)(document).on("change",".js-change-language",function(e){var t=e.target.value,i=(0,a.default)("body").attr("id");(0,s.track)("Selected Chosen Language",{property:t,context:i}),(0,a.default)(this).submit()}),(0,a.default)(document).on("change",".js-change-currency",function(e){var t=(0,a.default)(this),i=e.target.value,n=(0,a.default)("body").attr("id");(0,a.default)("#currency-modal").modal_dialog({event:e}),(0,a.default)(".currency-submit").on("click",function(){(0,s.track)("Selected Chosen Currency",{property:i,context:n}),t.submit()})}))})},"45vE":function(e,t,i){var n=i("l/Rs");i("l/Rs");!function(e){"use strict";e.extend(e.fn.cycle.defaults,{tmplRegex:"{{((.)?.*?)}}"}),e.extend(e.fn.cycle.API,{tmpl:function(t,i){var n=new RegExp(i.tmplRegex||e.fn.cycle.defaults.tmplRegex,"g"),r=e.makeArray(arguments);return r.shift(),t.replace(n,function(t,i){var n,a,s,o,l=i.split(".");for(n=0;n<r.length;n++)if(s=r[n]){if(l.length>1)for(o=s,a=0;a<l.length;a++)s=o,o=o[l[a]]||i;else o=s[i];if(e.isFunction(o))return o.apply(s,r);if(void 0!==o&&null!==o&&o!=i)return o}return i})}})}(n)},"4C6Z":function(e,t,i){i("l/Rs"),i("l/Rs");!function(e){"use strict";!function(e){function t(t){var i="dragover"===t;return function(n){n.dataTransfer=n.originalEvent&&n.originalEvent.dataTransfer;var r=n.dataTransfer;r&&-1!==e.inArray("Files",r.types)&&!1!==this._trigger(t,e.Event(t,{delegatedEvent:n}))&&(n.preventDefault(),i&&(r.dropEffect="copy"))}}e.support.fileInput=!(new RegExp("(Android (1\\.[0156]|2\\.[01]))|(Windows Phone (OS 7|8\\.0))|(XBLWP)|(ZuneWP)|(WPDesktop)|(w(eb)?OSBrowser)|(webOS)|(Kindle/(1\\.0|2\\.[05]|3\\.0))").test(window.navigator.userAgent)||e('<input type="file">').prop("disabled")),e.support.xhrFileUpload=!(!window.ProgressEvent||!window.FileReader),e.support.xhrFormDataFileUpload=!!window.FormData,e.support.blobSlice=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice),e.widget("blueimp.fileupload",{options:{dropZone:e(document),pasteZone:void 0,fileInput:void 0,replaceFileInput:!0,paramName:void 0,singleFileUploads:!0,limitMultiFileUploads:void 0,limitMultiFileUploadSize:void 0,limitMultiFileUploadSizeOverhead:512,sequentialUploads:!1,limitConcurrentUploads:void 0,forceIframeTransport:!1,redirect:void 0,redirectParamName:void 0,postMessage:void 0,multipart:!0,maxChunkSize:void 0,uploadedBytes:void 0,recalculateProgress:!0,progressInterval:100,bitrateInterval:500,autoUpload:!0,messages:{uploadedBytes:"Uploaded bytes exceed file size"},i18n:function(t,i){return t=this.messages[t]||t.toString(),i&&e.each(i,function(e,i){t=t.replace("{"+e+"}",i)}),t},formData:function(e){return e.serializeArray()},add:function(t,i){if(t.isDefaultPrevented())return!1;(i.autoUpload||!1!==i.autoUpload&&e(this).fileupload("option","autoUpload"))&&i.process().done(function(){i.submit()})},processData:!1,contentType:!1,cache:!1,timeout:0},_specialOptions:["fileInput","dropZone","pasteZone","multipart","forceIframeTransport"],_blobSlice:e.support.blobSlice&&function(){var e=this.slice||this.webkitSlice||this.mozSlice;return e.apply(this,arguments)},_BitrateTimer:function(){this.timestamp=Date.now?Date.now():(new Date).getTime(),this.loaded=0,this.bitrate=0,this.getBitrate=function(e,t,i){var n=e-this.timestamp;return(!this.bitrate||!i||n>i)&&(this.bitrate=(t-this.loaded)*(1e3/n)*8,this.loaded=t,this.timestamp=e),this.bitrate}},_isXHRUpload:function(t){return!t.forceIframeTransport&&(!t.multipart&&e.support.xhrFileUpload||e.support.xhrFormDataFileUpload)},_getFormData:function(t){var i;return"function"===e.type(t.formData)?t.formData(t.form):e.isArray(t.formData)?t.formData:"object"===e.type(t.formData)?(i=[],e.each(t.formData,function(e,t){i.push({name:e,value:t})}),i):[]},_getTotal:function(t){var i=0;return e.each(t,function(e,t){i+=t.size||1}),i},_initProgressObject:function(t){var i={loaded:0,total:0,bitrate:0};t._progress?e.extend(t._progress,i):t._progress=i},_initResponseObject:function(e){var t;if(e._response)for(t in e._response)e._response.hasOwnProperty(t)&&delete e._response[t];else e._response={}},_onProgress:function(t,i){if(t.lengthComputable){var n,r=Date.now?Date.now():(new Date).getTime();if(i._time&&i.progressInterval&&r-i._time<i.progressInterval&&t.loaded!==t.total)return;i._time=r,n=Math.floor(t.loaded/t.total*(i.chunkSize||i._progress.total))+(i.uploadedBytes||0),this._progress.loaded+=n-i._progress.loaded,this._progress.bitrate=this._bitrateTimer.getBitrate(r,this._progress.loaded,i.bitrateInterval),i._progress.loaded=i.loaded=n,i._progress.bitrate=i.bitrate=i._bitrateTimer.getBitrate(r,n,i.bitrateInterval),this._trigger("progress",e.Event("progress",{delegatedEvent:t}),i),this._trigger("progressall",e.Event("progressall",{delegatedEvent:t}),this._progress)}},_initProgressListener:function(t){var i=this,n=t.xhr?t.xhr():e.ajaxSettings.xhr();n.upload&&(e(n.upload).bind("progress",function(e){var n=e.originalEvent;e.lengthComputable=n.lengthComputable,e.loaded=n.loaded,e.total=n.total,i._onProgress(e,t)}),t.xhr=function(){return n})},_isInstanceOf:function(e,t){return Object.prototype.toString.call(t)==="[object "+e+"]"},_initXHRData:function(t){var i,n=this,r=t.files[0],a=t.multipart||!e.support.xhrFileUpload,s="array"===e.type(t.paramName)?t.paramName[0]:t.paramName;t.headers=e.extend({},t.headers),t.contentRange&&(t.headers["Content-Range"]=t.contentRange),a&&!t.blob&&this._isInstanceOf("File",r)||(t.headers["Content-Disposition"]='attachment; filename="'+encodeURI(r.name)+'"'),a?e.support.xhrFormDataFileUpload&&(t.postMessage?(i=this._getFormData(t),t.blob?i.push({name:s,value:t.blob}):e.each(t.files,function(n,r){i.push({name:"array"===e.type(t.paramName)&&t.paramName[n]||s,value:r})})):(n._isInstanceOf("FormData",t.formData)?i=t.formData:(i=new FormData,e.each(this._getFormData(t),function(e,t){i.append(t.name,t.value)})),t.blob?i.append(s,t.blob,r.name):e.each(t.files,function(r,a){(n._isInstanceOf("File",a)||n._isInstanceOf("Blob",a))&&i.append("array"===e.type(t.paramName)&&t.paramName[r]||s,a,a.uploadName||a.name)})),t.data=i):(t.contentType=r.type||"application/octet-stream",t.data=t.blob||r),t.blob=null},_initIframeSettings:function(t){var i=e("<a></a>").prop("href",t.url).prop("host");t.dataType="iframe "+(t.dataType||""),t.formData=this._getFormData(t),t.redirect&&i&&i!==location.host&&t.formData.push({name:t.redirectParamName||"redirect",value:t.redirect})},_initDataSettings:function(e){this._isXHRUpload(e)?(this._chunkedUpload(e,!0)||(e.data||this._initXHRData(e),this._initProgressListener(e)),e.postMessage&&(e.dataType="postmessage "+(e.dataType||""))):this._initIframeSettings(e)},_getParamName:function(t){var i=e(t.fileInput),n=t.paramName;return n?e.isArray(n)||(n=[n]):(n=[],i.each(function(){for(var t=e(this),i=t.prop("name")||"files[]",r=(t.prop("files")||[1]).length;r;)n.push(i),r-=1}),n.length||(n=[i.prop("name")||"files[]"])),n},_initFormSettings:function(t){t.form&&t.form.length||(t.form=e(t.fileInput.prop("form")),t.form.length||(t.form=e(this.options.fileInput.prop("form")))),t.paramName=this._getParamName(t),t.url||(t.url=t.form.prop("action")||location.href),t.type=(t.type||"string"===e.type(t.form.prop("method"))&&t.form.prop("method")||"").toUpperCase(),"POST"!==t.type&&"PUT"!==t.type&&"PATCH"!==t.type&&(t.type="POST"),t.formAcceptCharset||(t.formAcceptCharset=t.form.attr("accept-charset"))},_getAJAXSettings:function(t){var i=e.extend({},this.options,t);return this._initFormSettings(i),this._initDataSettings(i),i},_getDeferredState:function(e){return e.state?e.state():e.isResolved()?"resolved":e.isRejected()?"rejected":"pending"},_enhancePromise:function(e){return e.success=e.done,e.error=e.fail,e.complete=e.always,e},_getXHRPromise:function(t,i,n){var r=e.Deferred(),a=r.promise();return i=i||this.options.context||a,!0===t?r.resolveWith(i,n):!1===t&&r.rejectWith(i,n),a.abort=r.promise,this._enhancePromise(a)},_addConvenienceMethods:function(t,i){var n=this,r=function(t){return e.Deferred().resolveWith(n,t).promise()};i.process=function(t,a){return(t||a)&&(i._processQueue=this._processQueue=(this._processQueue||r([this])).then(function(){return i.errorThrown?e.Deferred().rejectWith(n,[i]).promise():r(arguments)}).then(t,a)),this._processQueue||r([this])},i.submit=function(){return"pending"!==this.state()&&(i.jqXHR=this.jqXHR=!1!==n._trigger("submit",e.Event("submit",{delegatedEvent:t}),this)&&n._onSend(t,this)),this.jqXHR||n._getXHRPromise()},i.abort=function(){return this.jqXHR?this.jqXHR.abort():(this.errorThrown="abort",n._trigger("fail",null,this),n._getXHRPromise(!1))},i.state=function(){return this.jqXHR?n._getDeferredState(this.jqXHR):this._processQueue?n._getDeferredState(this._processQueue):void 0},i.processing=function(){return!this.jqXHR&&this._processQueue&&"pending"===n._getDeferredState(this._processQueue)},i.progress=function(){return this._progress},i.response=function(){return this._response}},_getUploadedBytes:function(e){var t=e.getResponseHeader("Range"),i=t&&t.split("-"),n=i&&i.length>1&&parseInt(i[1],10);return n&&n+1},_chunkedUpload:function(t,i){t.uploadedBytes=t.uploadedBytes||0;var n,r,a=this,s=t.files[0],o=s.size,l=t.uploadedBytes,u=t.maxChunkSize||o,c=this._blobSlice,d=e.Deferred(),h=d.promise();return!(!(this._isXHRUpload(t)&&c&&(l||u<o))||t.data)&&(!!i||(l>=o?(s.error=t.i18n("uploadedBytes"),this._getXHRPromise(!1,t.context,[null,"error",s.error])):(r=function(){var i=e.extend({},t),h=i._progress.loaded;i.blob=c.call(s,l,l+u,s.type),i.chunkSize=i.blob.size,i.contentRange="bytes "+l+"-"+(l+i.chunkSize-1)+"/"+o,a._initXHRData(i),a._initProgressListener(i),n=(!1!==a._trigger("chunksend",null,i)&&e.ajax(i)||a._getXHRPromise(!1,i.context)).done(function(n,s,u){l=a._getUploadedBytes(u)||l+i.chunkSize,h+i.chunkSize-i._progress.loaded&&a._onProgress(e.Event("progress",{lengthComputable:!0,loaded:l-i.uploadedBytes,total:l-i.uploadedBytes}),i),t.uploadedBytes=i.uploadedBytes=l,i.result=n,i.textStatus=s,i.jqXHR=u,a._trigger("chunkdone",null,i),a._trigger("chunkalways",null,i),l<o?r():d.resolveWith(i.context,[n,s,u])}).fail(function(e,t,n){i.jqXHR=e,i.textStatus=t,i.errorThrown=n,a._trigger("chunkfail",null,i),a._trigger("chunkalways",null,i),d.rejectWith(i.context,[e,t,n])})},this._enhancePromise(h),h.abort=function(){return n.abort()},r(),h)))},_beforeSend:function(e,t){0===this._active&&(this._trigger("start"),this._bitrateTimer=new this._BitrateTimer,this._progress.loaded=this._progress.total=0,this._progress.bitrate=0),this._initResponseObject(t),this._initProgressObject(t),t._progress.loaded=t.loaded=t.uploadedBytes||0,t._progress.total=t.total=this._getTotal(t.files)||1,t._progress.bitrate=t.bitrate=0,this._active+=1,this._progress.loaded+=t.loaded,this._progress.total+=t.total},_onDone:function(t,i,n,r){var a=r._progress.total,s=r._response;r._progress.loaded<a&&this._onProgress(e.Event("progress",{lengthComputable:!0,loaded:a,total:a}),r),s.result=r.result=t,s.textStatus=r.textStatus=i,s.jqXHR=r.jqXHR=n,this._trigger("done",null,r)},_onFail:function(e,t,i,n){var r=n._response;n.recalculateProgress&&(this._progress.loaded-=n._progress.loaded,this._progress.total-=n._progress.total),r.jqXHR=n.jqXHR=e,r.textStatus=n.textStatus=t,r.errorThrown=n.errorThrown=i,this._trigger("fail",null,n)},_onAlways:function(e,t,i,n){this._trigger("always",null,n)},_onSend:function(t,i){i.submit||this._addConvenienceMethods(t,i);var n,r,a,s,o=this,l=o._getAJAXSettings(i),u=function(){return o._sending+=1,l._bitrateTimer=new o._BitrateTimer,n=n||((r||!1===o._trigger("send",e.Event("send",{delegatedEvent:t}),l))&&o._getXHRPromise(!1,l.context,r)||o._chunkedUpload(l)||e.ajax(l)).done(function(e,t,i){o._onDone(e,t,i,l)}).fail(function(e,t,i){o._onFail(e,t,i,l)}).always(function(e,t,i){if(o._onAlways(e,t,i,l),o._sending-=1,o._active-=1,l.limitConcurrentUploads&&l.limitConcurrentUploads>o._sending)for(var n=o._slots.shift();n;){if("pending"===o._getDeferredState(n)){n.resolve();break}n=o._slots.shift()}0===o._active&&o._trigger("stop")})};return this._beforeSend(t,l),this.options.sequentialUploads||this.options.limitConcurrentUploads&&this.options.limitConcurrentUploads<=this._sending?(this.options.limitConcurrentUploads>1?(a=e.Deferred(),this._slots.push(a),s=a.then(u)):(this._sequence=this._sequence.then(u,u),s=this._sequence),s.abort=function(){return r=[void 0,"abort","abort"],n?n.abort():(a&&a.rejectWith(l.context,r),u())},this._enhancePromise(s)):u()},_onAdd:function(t,i){var n,r,a,s,o=this,l=!0,u=e.extend({},this.options,i),c=i.files,d=c.length,h=u.limitMultiFileUploads,f=u.limitMultiFileUploadSize,p=u.limitMultiFileUploadSizeOverhead,g=0,m=this._getParamName(u),v=0;if(!d)return!1;if(f&&void 0===c[0].size&&(f=void 0),(u.singleFileUploads||h||f)&&this._isXHRUpload(u))if(u.singleFileUploads||f||!h)if(!u.singleFileUploads&&f)for(a=[],n=[],s=0;s<d;s+=1)g+=c[s].size+p,(s+1===d||g+c[s+1].size+p>f||h&&s+1-v>=h)&&(a.push(c.slice(v,s+1)),(r=m.slice(v,s+1)).length||(r=m),n.push(r),v=s+1,g=0);else n=m;else for(a=[],n=[],s=0;s<d;s+=h)a.push(c.slice(s,s+h)),(r=m.slice(s,s+h)).length||(r=m),n.push(r);else a=[c],n=[m];return i.originalFiles=c,e.each(a||c,function(r,s){var u=e.extend({},i);return u.files=a?s:[s],u.paramName=n[r],o._initResponseObject(u),o._initProgressObject(u),o._addConvenienceMethods(t,u),l=o._trigger("add",e.Event("add",{delegatedEvent:t}),u)}),l},_replaceFileInput:function(t){var i=t.fileInput,n=i.clone(!0),r=i.is(document.activeElement);t.fileInputClone=n,e("<form></form>").append(n)[0].reset(),i.after(n).detach(),r&&n.focus(),e.cleanData(i.unbind("remove")),this.options.fileInput=this.options.fileInput.map(function(e,t){return t===i[0]?n[0]:t}),i[0]===this.element[0]&&(this.element=n)},_handleFileTreeEntry:function(t,i){var n,r=this,a=e.Deferred(),s=function(e){e&&!e.entry&&(e.entry=t),a.resolve([e])},o=function(){n.readEntries(function(e){e.length?(l=l.concat(e),o()):function(e){r._handleFileTreeEntries(e,i+t.name+"/").done(function(e){a.resolve(e)}).fail(s)}(l)},s)},l=[];return i=i||"",t.isFile?t._file?(t._file.relativePath=i,a.resolve(t._file)):t.file(function(e){e.relativePath=i,a.resolve(e)},s):t.isDirectory?(n=t.createReader(),o()):a.resolve([]),a.promise()},_handleFileTreeEntries:function(t,i){var n=this;return e.when.apply(e,e.map(t,function(e){return n._handleFileTreeEntry(e,i)})).then(function(){return Array.prototype.concat.apply([],arguments)})},_getDroppedFiles:function(t){var i=(t=t||{}).items;return i&&i.length&&(i[0].webkitGetAsEntry||i[0].getAsEntry)?this._handleFileTreeEntries(e.map(i,function(e){var t;return e.webkitGetAsEntry?((t=e.webkitGetAsEntry())&&(t._file=e.getAsFile()),t):e.getAsEntry()})):e.Deferred().resolve(e.makeArray(t.files)).promise()},_getSingleFileInputFiles:function(t){var i,n,r=(t=e(t)).prop("webkitEntries")||t.prop("entries");if(r&&r.length)return this._handleFileTreeEntries(r);if((i=e.makeArray(t.prop("files"))).length)void 0===i[0].name&&i[0].fileName&&e.each(i,function(e,t){t.name=t.fileName,t.size=t.fileSize});else{if(!(n=t.prop("value")))return e.Deferred().resolve([]).promise();i=[{name:n.replace(/^.*\\/,"")}]}return e.Deferred().resolve(i).promise()},_getFileInputFiles:function(t){return t instanceof e&&1!==t.length?e.when.apply(e,e.map(t,this._getSingleFileInputFiles)).then(function(){return Array.prototype.concat.apply([],arguments)}):this._getSingleFileInputFiles(t)},_onChange:function(t){var i=this,n={fileInput:e(t.target),form:e(t.target.form)};this._getFileInputFiles(n.fileInput).always(function(r){n.files=r,i.options.replaceFileInput&&i._replaceFileInput(n),!1!==i._trigger("change",e.Event("change",{delegatedEvent:t}),n)&&i._onAdd(t,n)})},_onPaste:function(t){var i=t.originalEvent&&t.originalEvent.clipboardData&&t.originalEvent.clipboardData.items,n={files:[]};i&&i.length&&(e.each(i,function(e,t){var i=t.getAsFile&&t.getAsFile();i&&n.files.push(i)}),!1!==this._trigger("paste",e.Event("paste",{delegatedEvent:t}),n)&&this._onAdd(t,n))},_onDrop:function(t){t.dataTransfer=t.originalEvent&&t.originalEvent.dataTransfer;var i=this,n=t.dataTransfer,r={};n&&n.files&&n.files.length&&(t.preventDefault(),this._getDroppedFiles(n).always(function(n){r.files=n,!1!==i._trigger("drop",e.Event("drop",{delegatedEvent:t}),r)&&i._onAdd(t,r)}))},_onDragOver:t("dragover"),_onDragEnter:t("dragenter"),_onDragLeave:t("dragleave"),_initEventHandlers:function(){this._isXHRUpload(this.options)&&(this._on(this.options.dropZone,{dragover:this._onDragOver,drop:this._onDrop,dragenter:this._onDragEnter,dragleave:this._onDragLeave}),this._on(this.options.pasteZone,{paste:this._onPaste})),e.support.fileInput&&this._on(this.options.fileInput,{change:this._onChange})},_destroyEventHandlers:function(){this._off(this.options.dropZone,"dragenter dragleave dragover drop"),this._off(this.options.pasteZone,"paste"),this._off(this.options.fileInput,"change")},_setOption:function(t,i){var n=-1!==e.inArray(t,this._specialOptions);n&&this._destroyEventHandlers(),this._super(t,i),n&&(this._initSpecialOptions(),this._initEventHandlers())},_initSpecialOptions:function(){var t=this.options;void 0===t.fileInput?t.fileInput=this.element.is('input[type="file"]')?this.element:this.element.find('input[type="file"]'):t.fileInput instanceof e||(t.fileInput=e(t.fileInput)),t.dropZone instanceof e||(t.dropZone=e(t.dropZone)),t.pasteZone instanceof e||(t.pasteZone=e(t.pasteZone))},_getRegExp:function(e){var t=e.split("/"),i=t.pop();return t.shift(),new RegExp(t.join("/"),i)},_isRegExpOption:function(t,i){return"url"!==t&&"string"===e.type(i)&&/^\/.*\/[igm]{0,3}$/.test(i)},_initDataAttributes:function(){var t=this,i=this.options,n=this.element.data();e.each(this.element[0].attributes,function(e,r){var a,s=r.name.toLowerCase();/^data-/.test(s)&&(s=s.slice(5).replace(/-[a-z]/g,function(e){return e.charAt(1).toUpperCase()}),a=n[s],t._isRegExpOption(s,a)&&(a=t._getRegExp(a)),i[s]=a)})},_create:function(){this._initDataAttributes(),this._initSpecialOptions(),this._slots=[],this._sequence=this._getXHRPromise(!0),this._sending=this._active=0,this._initProgressObject(this),this._initEventHandlers()},active:function(){return this._active},progress:function(){return this._progress},add:function(t){var i=this;t&&!this.options.disabled&&(t.fileInput&&!t.files?this._getFileInputFiles(t.fileInput).always(function(e){t.files=e,i._onAdd(null,t)}):(t.files=e.makeArray(t.files),this._onAdd(null,t)))},send:function(t){if(t&&!this.options.disabled){if(t.fileInput&&!t.files){var i,n,r=this,a=e.Deferred(),s=a.promise();return s.abort=function(){return n=!0,i?i.abort():(a.reject(null,"abort","abort"),s)},this._getFileInputFiles(t.fileInput).always(function(e){n||(e.length?(t.files=e,(i=r._onSend(null,t)).then(function(e,t,i){a.resolve(e,t,i)},function(e,t,i){a.reject(e,t,i)})):a.reject())}),this._enhancePromise(s)}if(t.files=e.makeArray(t.files),t.files.length)return this._onSend(null,t)}return this._getXHRPromise(!1,t&&t.context)}})}(i("l/Rs"),i("v4vi"))}()},"5GF7":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.ancestor_locations=e.ancestor_locations||[],e.ancestor_locations=e.ancestor_locations.reverse(),e.nearby_locations=e.nearby_locations||[],e}},"5RPx":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.formatted_created_at=(0,s.format)("ll",1e3*e.created_at),e.is_recipient=void 0!==a.default&&a.default.get("id")===e.recipient_id,e.sender_is_registered=e.sender.is_registered,e};var n,r=i("eF8u"),a=(n=r)&&n.__esModule?n:{default:n},s=i("kVy0")},"5Sqs":function(e,t,i){i("l/Rs"),i("l/Rs");!function(){"use strict";var e=0,t={};function i(n){if(!n)throw new Error("No options passed to Waypoint constructor");if(!n.element)throw new Error("No element option passed to Waypoint constructor");if(!n.handler)throw new Error("No handler option passed to Waypoint constructor");this.key="waypoint-"+e,this.options=i.Adapter.extend({},i.defaults,n),this.element=this.options.element,this.adapter=new i.Adapter(this.element),this.callback=n.handler,this.axis=this.options.horizontal?"horizontal":"vertical",this.enabled=this.options.enabled,this.triggerPoint=null,this.group=i.Group.findOrCreate({name:this.options.group,axis:this.axis}),this.context=i.Context.findOrCreateByElement(this.options.context),i.offsetAliases[this.options.offset]&&(this.options.offset=i.offsetAliases[this.options.offset]),this.group.add(this),this.context.add(this),t[this.key]=this,e+=1}i.prototype.queueTrigger=function(e){this.group.queueTrigger(this,e)},i.prototype.trigger=function(e){this.enabled&&this.callback&&this.callback.apply(this,e)},i.prototype.destroy=function(){this.context.remove(this),this.group.remove(this),delete t[this.key]},i.prototype.disable=function(){return this.enabled=!1,this},i.prototype.enable=function(){return this.context.refresh(),this.enabled=!0,this},i.prototype.next=function(){return this.group.next(this)},i.prototype.previous=function(){return this.group.previous(this)},i.invokeAll=function(e){var i=[];for(var n in t)i.push(t[n]);for(var r=0,a=i.length;r<a;r++)i[r][e]()},i.destroyAll=function(){i.invokeAll("destroy")},i.disableAll=function(){i.invokeAll("disable")},i.enableAll=function(){for(var e in i.Context.refreshAll(),t)t[e].enabled=!0;return this},i.refreshAll=function(){i.Context.refreshAll()},i.viewportHeight=function(){return window.innerHeight||document.documentElement.clientHeight},i.viewportWidth=function(){return document.documentElement.clientWidth},i.adapters=[],i.defaults={context:window,continuous:!0,enabled:!0,group:"default",horizontal:!1,offset:0},i.offsetAliases={"bottom-in-view":function(){return this.context.innerHeight()-this.adapter.outerHeight()},"right-in-view":function(){return this.context.innerWidth()-this.adapter.outerWidth()}},window.Waypoint=i}(),function(){"use strict";function e(e){window.setTimeout(e,1e3/60)}var t=0,i={},n=window.Waypoint,r=window.onload;function a(e){this.element=e,this.Adapter=n.Adapter,this.adapter=new this.Adapter(e),this.key="waypoint-context-"+t,this.didScroll=!1,this.didResize=!1,this.oldScroll={x:this.adapter.scrollLeft(),y:this.adapter.scrollTop()},this.waypoints={vertical:{},horizontal:{}},e.waypointContextKey=this.key,i[e.waypointContextKey]=this,t+=1,n.windowContext||(n.windowContext=!0,n.windowContext=new a(window)),this.createThrottledScrollHandler(),this.createThrottledResizeHandler()}a.prototype.add=function(e){var t=e.options.horizontal?"horizontal":"vertical";this.waypoints[t][e.key]=e,this.refresh()},a.prototype.checkEmpty=function(){var e=this.Adapter.isEmptyObject(this.waypoints.horizontal),t=this.Adapter.isEmptyObject(this.waypoints.vertical),n=this.element==this.element.window;e&&t&&!n&&(this.adapter.off(".waypoints"),delete i[this.key])},a.prototype.createThrottledResizeHandler=function(){var e=this;function t(){e.handleResize(),e.didResize=!1}this.adapter.on("resize.waypoints",function(){e.didResize||(e.didResize=!0,n.requestAnimationFrame(t))})},a.prototype.createThrottledScrollHandler=function(){var e=this;function t(){e.handleScroll(),e.didScroll=!1}this.adapter.on("scroll.waypoints",function(){e.didScroll&&!n.isTouch||(e.didScroll=!0,n.requestAnimationFrame(t))})},a.prototype.handleResize=function(){n.Context.refreshAll()},a.prototype.handleScroll=function(){var e={},t={horizontal:{newScroll:this.adapter.scrollLeft(),oldScroll:this.oldScroll.x,forward:"right",backward:"left"},vertical:{newScroll:this.adapter.scrollTop(),oldScroll:this.oldScroll.y,forward:"down",backward:"up"}};for(var i in t){var n=t[i],r=n.newScroll>n.oldScroll?n.forward:n.backward;for(var a in this.waypoints[i]){var s=this.waypoints[i][a];if(null!==s.triggerPoint){var o=n.oldScroll<s.triggerPoint,l=n.newScroll>=s.triggerPoint;(o&&l||!o&&!l)&&(s.queueTrigger(r),e[s.group.id]=s.group)}}}for(var u in e)e[u].flushTriggers();this.oldScroll={x:t.horizontal.newScroll,y:t.vertical.newScroll}},a.prototype.innerHeight=function(){return this.element==this.element.window?n.viewportHeight():this.adapter.innerHeight()},a.prototype.remove=function(e){delete this.waypoints[e.axis][e.key],this.checkEmpty()},a.prototype.innerWidth=function(){return this.element==this.element.window?n.viewportWidth():this.adapter.innerWidth()},a.prototype.destroy=function(){var e=[];for(var t in this.waypoints)for(var i in this.waypoints[t])e.push(this.waypoints[t][i]);for(var n=0,r=e.length;n<r;n++)e[n].destroy()},a.prototype.refresh=function(){var e,t=this.element==this.element.window,i=t?void 0:this.adapter.offset(),r={};for(var a in this.handleScroll(),e={horizontal:{contextOffset:t?0:i.left,contextScroll:t?0:this.oldScroll.x,contextDimension:this.innerWidth(),oldScroll:this.oldScroll.x,forward:"right",backward:"left",offsetProp:"left"},vertical:{contextOffset:t?0:i.top,contextScroll:t?0:this.oldScroll.y,contextDimension:this.innerHeight(),oldScroll:this.oldScroll.y,forward:"down",backward:"up",offsetProp:"top"}}){var s=e[a];for(var o in this.waypoints[a]){var l,u,c,d,h=this.waypoints[a][o],f=h.options.offset,p=h.triggerPoint,g=0,m=null==p;h.element!==h.element.window&&(g=h.adapter.offset()[s.offsetProp]),"function"==typeof f?f=f.apply(h):"string"==typeof f&&(f=parseFloat(f),h.options.offset.indexOf("%")>-1&&(f=Math.ceil(s.contextDimension*f/100))),l=s.contextScroll-s.contextOffset,h.triggerPoint=Math.floor(g+l-f),u=p<s.oldScroll,c=h.triggerPoint>=s.oldScroll,d=!u&&!c,!m&&(u&&c)?(h.queueTrigger(s.backward),r[h.group.id]=h.group):!m&&d?(h.queueTrigger(s.forward),r[h.group.id]=h.group):m&&s.oldScroll>=h.triggerPoint&&(h.queueTrigger(s.forward),r[h.group.id]=h.group)}}return n.requestAnimationFrame(function(){for(var e in r)r[e].flushTriggers()}),this},a.findOrCreateByElement=function(e){return a.findByElement(e)||new a(e)},a.refreshAll=function(){for(var e in i)i[e].refresh()},a.findByElement=function(e){return i[e.waypointContextKey]},window.onload=function(){r&&r(),a.refreshAll()},n.requestAnimationFrame=function(t){(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||e).call(window,t)},n.Context=a}(),function(){"use strict";function e(e,t){return e.triggerPoint-t.triggerPoint}function t(e,t){return t.triggerPoint-e.triggerPoint}var i={vertical:{},horizontal:{}},n=window.Waypoint;function r(e){this.name=e.name,this.axis=e.axis,this.id=this.name+"-"+this.axis,this.waypoints=[],this.clearTriggerQueues(),i[this.axis][this.name]=this}r.prototype.add=function(e){this.waypoints.push(e)},r.prototype.clearTriggerQueues=function(){this.triggerQueues={up:[],down:[],left:[],right:[]}},r.prototype.flushTriggers=function(){for(var i in this.triggerQueues){var n=this.triggerQueues[i],r="up"===i||"left"===i;n.sort(r?t:e);for(var a=0,s=n.length;a<s;a+=1){var o=n[a];(o.options.continuous||a===n.length-1)&&o.trigger([i])}}this.clearTriggerQueues()},r.prototype.next=function(t){this.waypoints.sort(e);var i=n.Adapter.inArray(t,this.waypoints);return i===this.waypoints.length-1?null:this.waypoints[i+1]},r.prototype.previous=function(t){this.waypoints.sort(e);var i=n.Adapter.inArray(t,this.waypoints);return i?this.waypoints[i-1]:null},r.prototype.queueTrigger=function(e,t){this.triggerQueues[t].push(e)},r.prototype.remove=function(e){var t=n.Adapter.inArray(e,this.waypoints);t>-1&&this.waypoints.splice(t,1)},r.prototype.first=function(){return this.waypoints[0]},r.prototype.last=function(){return this.waypoints[this.waypoints.length-1]},r.findOrCreate=function(e){return i[e.axis][e.name]||new r(e)},n.Group=r}(),function(){"use strict";var e=window.jQuery,t=window.Waypoint;function i(t){this.$element=e(t)}e.each(["innerHeight","innerWidth","off","offset","on","outerHeight","outerWidth","scrollLeft","scrollTop"],function(e,t){i.prototype[t]=function(){var e=Array.prototype.slice.call(arguments);return this.$element[t].apply(this.$element,e)}}),e.each(["extend","inArray","isEmptyObject"],function(t,n){i[n]=e[n]}),t.adapters.push({name:"jquery",Adapter:i}),t.Adapter=i}(),function(){"use strict";var e=window.Waypoint;function t(t){return function(){var i=[],n=arguments[0];return t.isFunction(arguments[0])&&((n=t.extend({},arguments[1])).handler=arguments[0]),this.each(function(){var r=t.extend({},n,{element:this});"string"==typeof r.context&&(r.context=t(this).closest(r.context)[0]),i.push(new e(r))}),i}}window.jQuery&&(window.jQuery.fn.waypoint=t(window.jQuery)),window.Zepto&&(window.Zepto.fn.waypoint=t(window.Zepto))}()},"6CtT":function(e,t,i){"use strict";var n,r=i("shXp"),a=(n=r)&&n.__esModule?n:{default:n};var s=i("l/Rs");i("l/Rs");!function(e){e.fn.serialize_without_blank=function(){var t,i=[];return this.find(":input").each(function(){""!==e.trim(this.value)||this.disabled||(i.push(this),this.disabled=!0)}),t=this.serialize(),a.default.each(i,function(e){e.disabled=!1}),t}}(s)},"6TZa":function(e,t,i){"use strict";var n=i("Tvaj"),r=i("l/Rs");i("l/Rs");!function(e){function t(t){t.each(function(){var t=e(this),i=t.find("option:selected");t.siblings(".js-title, .title").text(i.data("altLabel")||i.text())})}e.fn.ksrSelect=function(){var i=e(this);i.find(".js-ksr-select").livequery(function(){t(e(this).find("select"))}),i.on("focus blur",".js-ksr-select select",function(){e(this).parent().toggleClass("is-focus")}),i.on("change",".js-ksr-select select",function(){t(e(this))}),i.on("keydown",".ksr-icon__arrow-down, .ss-delete, .js-filter-arrow, .js-filter-delete",function(t){var i=e(this),r=t.keyCode;r!==n.ENTER&&r!==n.SPACE||(t.preventDefault(),(i.hasClass("ss-delete")||i.hasClass("js-filter-delete"))&&i.parent().find(".ksr-icon__arrow-down, .js-filter-arrow").focus(),i.click())})},e.fn.ksr_val=function(i){var n=e(this);if(void 0!==i){var r=n.val(i);return t(n),r}return n.val()}}(r)},"6djF":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={pageX:function(e){return e.originalEvent&&e.originalEvent.targetTouches?e.originalEvent.targetTouches[0].pageX:e.pageX}};t.default=n},"7HQH":function(e,t,i){var n=i("l/Rs");i("l/Rs");!function(e){"use strict";e.extend(e.fn.cycle.defaults,{next:"> .cycle-next",nextEvent:"click.cycle",disabledClass:"disabled",prev:"> .cycle-prev",prevEvent:"click.cycle",swipe:!1}),e(document).on("cycle-initialized",function(e,t){if(t.API.getComponent("next").on(t.nextEvent,function(e){e.preventDefault(),t.API.next()}),t.API.getComponent("prev").on(t.prevEvent,function(e){e.preventDefault(),t.API.prev()}),t.swipe){var i=t.swipeVert?"swipeUp.cycle":"swipeLeft.cycle swipeleft.cycle",n=t.swipeVert?"swipeDown.cycle":"swipeRight.cycle swiperight.cycle";t.container.on(i,function(e){t.API.next()}),t.container.on(n,function(){t.API.prev()})}}),e(document).on("cycle-update-view",function(e,t,i,n){if(!t.allowWrap){var r=t.disabledClass,a=t.API.getComponent("next"),s=t.API.getComponent("prev"),o=t._prevBoundry||0,l=void 0!==t._nextBoundry?t._nextBoundry:t.slideCount-1;t.currSlide==l?a.addClass(r).prop("disabled",!0):a.removeClass(r).prop("disabled",!1),t.currSlide===o?s.addClass(r).prop("disabled",!0):s.removeClass(r).prop("disabled",!1)}}),e(document).on("cycle-destroyed",function(e,t){t.API.getComponent("prev").off(t.nextEvent),t.API.getComponent("next").off(t.prevEvent),t.container.off("swipeleft.cycle swiperight.cycle swipeLeft.cycle swipeRight.cycle swipeUp.cycle swipeDown.cycle")})}(n)},"84+x":function(e,t,i){var n=i("l/Rs");i("l/Rs");!function(e){var t;function i(t,i){this.$elem=t,this.$form=t.closest("form"),this.options=e.extend({delay:400,minimum_characters:3,serialize:this.$form,client_side_cache:!0,process_data:!1,dataType:"json"},i),this.url=this.options.url||this.$form.attr("action"),this.options.file_extension?this.ajax_url=this.ensure_file_extension(this.options.file_extension):this.ajax_url=this.url,this.last_search=!1,this.search_xhr=!1,this.options.client_side_cache?this.cache={}:this.cache=!1,this.active=!0,this._attach()}e.fn.livesearch=function(t){return t=t||{},e(this).each(function(){var n=e(this).data("livesearch");n||(n=new i(e(this),t),e(this).data("livesearch",n))})},e.extend(i.prototype,{_attach:function(){var e=this;this.$elem.attr("autocomplete","off"),this.$elem.on("keypress cut paste input",function(){e.active&&(clearTimeout(t),t=setTimeout(function(){e.search()},e.options.delay))}),this.options.process_data||this.options.serialize.on("change",function(){e.search()}),this.$elem.on("livesearch:suspend",function(){e.active=!1}),this.$elem.on("livesearch:activate",function(){e.active=!0}),this.$elem.on("livesearch:cancel",function(){e.search_xhr&&e.search_xhr.abort(),e.last_search=!1})},ensure_file_extension:function(e){var t=window.location.host.replace(/[^\w\d]/g,function(e){return"\\"+e}),i=new RegExp("((?:"+t+")?[^\\.$#\\?]+)(\\.\\w*|)($|#|\\?)");return this.url.replace(i,function(t,i,n,r){return i+"."+e+r})},suspend_while:function(e){this.active=!1,e();var t=this;setTimeout(function(){t.active=!0},100)},search:function(){var t=this,i=this.options.serialize.serialize();this.options.process_data&&"object"==typeof(i=this.options.process_data.apply(this,[i]))&&(i=e.param(i)),i!==this.last_search&&(this.$elem.val().length<this.options.minimum_characters||(this.search_xhr&&this.search_xhr.abort(),this.cache&&this.cache[i]&&"function"!=typeof this.cache[i]?this.$elem.trigger("livesearch:results",[this.cache[i]]):(this.$elem.trigger("livesearch:searching"),this.$elem.addClass("searching"),this.search_xhr=e.ajax({type:"get",url:this.ajax_url,dataType:this.options.dataType,data:i,global:!1,success:function(e){null!==e&&(t.$elem.trigger("livesearch:results",[e]),t.$elem.removeClass("searching"),t.cache&&(t.cache[i]=e))},error:function(){t.$elem.trigger("livesearch:ajax_error"),t.$elem.removeClass("searching")},statusCode:{304:function(){}}})),this.last_search=i))}})}(n)},"8NzR":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,r=i("l/Rs"),a=(n=r)&&n.__esModule?n:{default:n};function s(e,t){(0,a.default)(function(){var i=(0,a.default)(e);i.length&&t(i)})}window.define_namespace=s,t.default=s},"8bXp":function(e,t,i){"use strict";var n=s(i("l/Rs")),r=s(i("wmCY"));i("hsYx");var a=i("4RZc");function s(e){return e&&e.__esModule?e:{default:e}}(0,n.default)(function(){var e,t=(0,n.default)(".NS_layouts__user_dropdown"),i=!1,s=!1;function o(){t.find("#menu-me-backed").length&&t.find(".user-dropdown").addClass("backer"),t.find("#menu-me-created").length&&t.find(".user-dropdown").addClass("creator")}function l(e){var i=t.find("#menu-me-children");KSR.store.setItem("user_dropdown_backer_creator_columns_html",e),i.children(".NS_layouts__user_dropdown_backer_creator_columns").remove(),i.append(e),o()}function u(e){s||(s=n.default.ajax({url:t.data("user_dropdown_backer_creator_columns_path"),type:"get",dataType:"html",data:{i18n:r.default.enabled},beforeSend:function(e){e.setRequestHeader("Accept","text/javascript, */*")},success:function(e){l(e),i=!0},complete:function(){e&&e(),s=!1}}))}(e=KSR.store.getItem("user_dropdown_backer_creator_columns_html"))&&(l(e),i=!0),o(),(0,n.default)(".js-user-menu-tab").on("user_dropdown:open",function(){var e=(0,n.default)(this);i?e.addClass("selected"):u(function(){e.addClass("selected")})}),(0,n.default)(".js-user-menu-tab, .js-user-menu-tab > a").one("click",function(){(0,a.track)("Account Menu Dropdown",{new_indicator_visible:(0,n.default)(this).find(".indicator").is(":visible")}),u()}),(0,n.default)(document).on("user_dropdown:refresh_from_remote",function(){u()}),(0,n.default)("body").is(".just_logged_out")&&KSR.store.removeItem("user_dropdown_backer_creator_columns_html")})},"91We":function(e,t,i){var n=i("l/Rs");i("l/Rs");!function(e){"use strict";function t(t,i,n){var r;t.API.getComponent("pager").each(function(){var a=e(this);if(i.pagerTemplate){var s=t.API.tmpl(i.pagerTemplate,i,t,n[0]);r=e(s).appendTo(a)}else r=a.children().eq(t.slideCount-1);r.on(t.pagerEvent,function(e){e.preventDefault(),t.API.page(a,e.currentTarget)})})}function i(e,t){var i=this.opts();if(!i.busy||i.manualTrump){var n=e.children().index(t),r=i.currSlide<n;i.currSlide!=n&&(i.nextSlide=n,i.API.prepareTx(!0,r),i.API.trigger("cycle-pager-activated",[i,e,t]))}}e.extend(e.fn.cycle.defaults,{pager:"> .cycle-pager",pagerActiveClass:"cycle-pager-active",pagerEvent:"click.cycle",pagerTemplate:"<span>&bull;</span>"}),e(document).on("cycle-bootstrap",function(e,i,n){n.buildPagerLink=t}),e(document).on("cycle-slide-added",function(e,t,n,r){t.pager&&(t.API.buildPagerLink(t,n,r),t.API.page=i)}),e(document).on("cycle-slide-removed",function(t,i,n,r){i.pager&&i.API.getComponent("pager").each(function(){var t=e(this);e(t.children()[n]).remove()})}),e(document).on("cycle-update-view",function(t,i,n){i.pager&&i.API.getComponent("pager").each(function(){e(this).children().removeClass(i.pagerActiveClass).eq(i.currSlide).addClass(i.pagerActiveClass)})}),e(document).on("cycle-destroyed",function(e,t){var i=t.API.getComponent("pager");i&&(i.children().off(t.pagerEvent),t.pagerTemplate&&i.empty())})}(n)},"98MR":function(e,t,i){"use strict";var n,r=i("L3hI"),a=(n=r)&&n.__esModule?n:{default:n};var s=i("l/Rs");i("l/Rs");!function(e){function t(t,i){var n;for(this.$elem=t,this.val=0,this.options=e.extend({},{frame_count:10,frame_step:40,frame_duration:30,format_numbers:!0,max_digits:5,keyframes:["","0","1","2","3","4","5","6","7","8","9",","],framesets:null},i),this.val=this.$elem.attr("rel"),this.keyframes=this.options.keyframes,this.framesets=this.options.framesets,this.framesets||this.init_framesets(),n=0;n<this.options.max_digits;n+=1)this.init_digit(n);this.write(this.val,!0)}e.fn.ticker=function(i){return i=i||{},e(this).each(function(){var n=e(this).data("ticker");n||(n=new t(e(this),i),e(this).data("ticker",n))})},e.extend(t.prototype,{read:function(){return this.val},write:function(t,i){this.val=String(t||""),this.$elem.attr("rel",this.val);var n,r,s,o,l,u,c,d,h=(this.options.format_numbers?a.default.format_number(this.val,{precision:0}):this.val).split(""),f=this.$elem.find(".ticker_digit");for(d=0;d<h.length-f.length;d+=1)this.init_digit(d+f.length);for(f=this.$elem.find(".ticker_digit"),d=0;d<f.length;d+=1){if(r=(n=e(f[d])).html(),s=h[d]?String(h[d]):"",o=e.inArray(s,this.keyframes),l=this.framesets[o][0],u=e.inArray(n.html(),this.keyframes),c=[],n.html(s).data("tween_id",n.data("tween_id")+1),!s||s===r||i)c=c.concat(l);else for(;u!==o;)c=c.concat(this.framesets[u]),u=(u+=1)>=this.keyframes.length?1:u;this.tween(n.data("tween_id"),n,c)}},init_framesets:function(){var e,t;for(this.framesets=[],e=0;e<this.keyframes.length;e+=1)for(this.framesets.push([]),t=0;t<this.options.frame_count;t+=1)this.framesets[e].push(e*this.options.frame_count*this.options.frame_step+t*this.options.frame_step)},init_digit:function(t){var i=e(this.$elem.find(".ticker_digit").get(t));i.length||(i=e('<span class="ticker_digit">&nbsp;</span>').prependTo(this.$elem)),i.data("tween_id",1)},digit_count:function(){return this.$elem.find(".ticker_digit").length},remove_digit:function(e){e.remove(),this.pad_digits()},tween:function(e,t,i){if(i.length){if(t.data("tween_id")!==e)return!1;var n=this;setTimeout(function(){var r=i.shift();t.css({"background-position":"0px "+-1*r+"px"}),n.tween(e,t,i)},this.options.frame_duration)}}})}(s)},"9VV1":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,r=i("l/Rs"),a=(n=r)&&n.__esModule?n:{default:n},s=i("Tvaj");i("s94J");var o,l=(0,a.default)("#growl_section");function u(){l.fadeOut("fast"),o&&o.length&&o.focus()}l.on("click",function(e){var t;(0,a.default)(e.target).is((0,a.default)(this))&&((t=(0,a.default)(this)).fadeOut("fast"),t.removeClass("sticky"),t.find("div.jGrowl-notification:parent").each(function(){(0,a.default)(this).data("jGrowl")&&((0,a.default)(this).data("jGrowl").sticky=!1)}))}),(0,a.default)(document).on("keydown",function(e){e.which===s.ESC&&l.is(":visible")&&u()});var c=function(e,t){a.default.each(e,function(e,i){void 0===t&&(t={}),"error"===e&&(t.sticky=!0,l.addClass("sticky")),l.jGrowl(i,a.default.extend(t,{theme:e,closeTemplate:'<button class="jGrowl-close-x" aria-label="close notification"><span class="ksr-icon__close" aria-hidden="true"></span></button>',beforeOpen:function(){l.fadeIn("fast"),o=(0,a.default)(":focus"),l.find(".jGrowl-notification").attr("tabindex",-1).focus()},close:function(){u()}}))})};window.growl=c,t.default=c},"A/M2":function(e,t,i){var n=i("l/Rs");i("l/Rs");!function(e,t){var i=!1;e(document).mouseup(function(){i=!1}),e.widget("ui.mouse",{version:"1.10.3",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(i){if(!0===e.data(i.target,t.widgetName+".preventClickEvent"))return e.removeData(i.target,t.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(!i){this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var n=this,r=1===t.which,a=!("string"!=typeof this.options.cancel||!t.target.nodeName)&&e(t.target).closest(this.options.cancel).length;return!(r&&!a&&this._mouseCapture(t))||(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){n.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=!1!==this._mouseStart(t),!this._mouseStarted)?(t.preventDefault(),!0):(!0===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return n._mouseMove(e)},this._mouseUpDelegate=function(e){return n._mouseUp(e)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),i=!0,!0))}},_mouseMove:function(t){return e.ui.ie&&(!document.documentMode||document.documentMode<9)&&!t.button?this._mouseUp(t):this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,t),this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(n)},"B+tq":function(e,t,i){"use strict";var n,r=i("rXeC"),a=(n=r)&&n.__esModule?n:{default:n};i("LNuh"),(0,a.default)(function(){function e(e){(0,a.default)(e).ksr_video()}a.default.videos_changed=function(){(0,a.default)(".video-player:visible").each(function(){e(this)})},(0,a.default)(document).on("ksr_video:pause_all_videos",function(){(0,a.default)(".video-player").trigger("ksr_video:pause")}),(0,a.default)(".video-player:visible").livequery(function(){e(this)})})},BQ76:function(e,t,i){"use strict";var n,r=i("wmCY"),a=(n=r)&&n.__esModule?n:{default:n};i("sWK4");var s=i("l/Rs");i("l/Rs");!function(e){e.fn.confirm_submit=function(t){return t=t||{},e(this).each(function(){var i=e(this);i.on("submit.confirm_submit",function(n){n.preventDefault();var r='<div class="modal_delete_confirmation"><p class="copy">'+(t.copy||a.default.t("library.confirm_submit.Really_buddy"))+'</p><div class="buttons"><a href="#" class="yes btn btn--green">'+(t.yes_copy||a.default.t("library.confirm_submit.Yes"))+'</a><a href="#" class="no btn btn--gray">'+(t.no_copy||a.default.t("library.confirm_submit.No_Thanks"))+"</a></div></div>",s=e.create_modal_dialog(t.title||"Are you sure?",r);i.removeClass("submitting-non-ajax"),s.find("a.yes").on("click",function(e){e.preventDefault(),i.off("submit.confirm_submit"),t.on_confirm_submit&&t.on_confirm_submit(),i[0].submit()}),s.find("a.no").on("click",function(t){t.preventDefault(),e(this).trigger("close")}),s.data("modal_dialog").open()})})}}(s)},CCL3:function(e,t,i){var n=i("l/Rs");i("l/Rs");!function(e,t){var i,n,r=0,a=/^ui-id-\d+$/;function s(t,i){var n,r,a,s=t.nodeName.toLowerCase();return"area"===s?(r=(n=t.parentNode).name,!(!t.href||!r||"map"!==n.nodeName.toLowerCase())&&(!!(a=e("img[usemap=#"+r+"]")[0])&&o(a))):(/input|select|textarea|button|object/.test(s)?!t.disabled:"a"===s&&t.href||i)&&o(t)}function o(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return"hidden"===e.css(this,"visibility")}).length}e.ui=e.ui||{},e.extend(e.ui,{version:"1.10.3",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({focus:(i=e.fn.focus,function(t,n){return"number"==typeof t?this.each(function(){var i=this;setTimeout(function(){e(i).focus(),n&&n.call(i)},t)}):i.apply(this,arguments)}),scrollParent:function(){var t;return t=e.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.css(this,"position"))&&/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(t){if(void 0!==t)return this.css("zIndex",t);if(this.length)for(var i,n,r=e(this[0]);r.length&&r[0]!==document;){if(("absolute"===(i=r.css("position"))||"relative"===i||"fixed"===i)&&(n=parseInt(r.css("zIndex"),10),!isNaN(n)&&0!==n))return n;r=r.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++r)})},removeUniqueId:function(){return this.each(function(){a.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(i){return!!e.data(i,t)}}):function(t,i,n){return!!e.data(t,n[3])},focusable:function(t){return s(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var i=e.attr(t,"tabindex"),n=isNaN(i);return(n||i>=0)&&s(t,!n)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(t,i){var n="Width"===i?["Left","Right"]:["Top","Bottom"],r=i.toLowerCase(),a={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};function s(t,i,r,a){return e.each(n,function(){i-=parseFloat(e.css(t,"padding"+this))||0,r&&(i-=parseFloat(e.css(t,"border"+this+"Width"))||0),a&&(i-=parseFloat(e.css(t,"margin"+this))||0)}),i}e.fn["inner"+i]=function(t){return void 0===t?a["inner"+i].call(this):this.each(function(){e(this).css(r,s(this,t)+"px")})},e.fn["outer"+i]=function(t,n){return"number"!=typeof t?a["outer"+i].call(this,t):this.each(function(){e(this).css(r,s(this,t,!0,n)+"px")})}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=(n=e.fn.removeData,function(t){return arguments.length?n.call(this,e.camelCase(t)):n.call(this)})),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.support.selectstart="onselectstart"in document.createElement("div"),e.fn.extend({disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.extend(e.ui,{plugin:{add:function(t,i,n){var r,a=e.ui[t].prototype;for(r in n)a.plugins[r]=a.plugins[r]||[],a.plugins[r].push([i,n[r]])},call:function(e,t,i){var n,r=e.plugins[t];if(r&&e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType)for(n=0;n<r.length;n++)e.options[r[n][0]]&&r[n][1].apply(e.element,i)}},hasScroll:function(t,i){if("hidden"===e(t).css("overflow"))return!1;var n,r=i&&"left"===i?"scrollLeft":"scrollTop";return t[r]>0||(t[r]=1,n=t[r]>0,t[r]=0,n)}})}(n)},CcZ3:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.is_creator=e.project.creator.id===s.default.get("id"),e.project.is_live="live"===e.project.state,e.backing&&(e.backing.reward.formatted_estimated_delivery_on=o.maybe.fromNullable(e.backing.reward.estimated_delivery_on).map(function(e){return(0,a.format)("ll",(0,u.toUTC)(1e3*e))}).getOrElse(null),e.backing.is_creator=e.is_creator,e.backing.formatted_amount=r.default.money(e.backing.amount,{currency:e.backing.project.currency,precision:0})),e.messages=n.default.map(e.messages,function(t){return t.sender=n.default.findWhere(e.participants,{id:t.sender_id}),(0,l.default)(t)}),e};var n=c(i("shXp")),r=c(i("L3hI")),a=i("kVy0"),s=c(i("eF8u")),o=i("I2cB"),l=c(i("5RPx")),u=i("HZrJ");function c(e){return e&&e.__esModule?e:{default:e}}},CuRd:function(e,t,i){"use strict";i("UBnO");i("l/Rs");var n=i("l/Rs");n.fn.client_side_asset_uploader=function(){var e=n(this),t=["data-asset-attachable-type","data-asset-method"].map(function(t){return"["+t+'="'+e.attr(t)+'"]'}).join("");e.adhoc_fileuploader({url:e.data("url"),paramsUrl:e.data("params-url"),done:function(e,i){var r=i.files[0],a={file:r,s3_key:i.formData.filter(function(e){return"key"===e.name})[0].value,data_file_name:r.name,data_file_size:r.size,data_content_type:r.type,signed_preview_url:"umm"};n(".js-assets-list"+t).trigger("assets_list:item_added",a)}})}},DXZ8:function(e,t,i){"use strict";var n=i("l/Rs");i("l/Rs");!function(e){var t={};e.publish=function(){var i=Array.prototype.slice.call(arguments),n=i.shift();t[n]&&e.each(t[n],function(){this.apply(e,i)})},e.subscribe=function(e,i){return t[e]||(t[e]=[]),t[e].push(i),[e,i]},e.unsubscribe=function(){var i=arguments[0];t[i]&&e.each(t[i],function(e){this===arguments[1]&&t[i].splice(e,1)})}}(n)},DkOX:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,i){var n=(0,a.default)(e).absoluteTo(window.location),r=(0,a.default)(t).absoluteTo(window.location);(i=i||{}).ignore_query&&(n.search({}),r.search({}));i.ignore_hash&&(n.hash(""),r.hash(""));return n.equals(r)};var n,r=i("hBlz"),a=(n=r)&&n.__esModule?n:{default:n}},E5Nj:function(e,t,i){"use strict";var n=s(i("l/Rs")),r=s(i("shXp")),a=s(i("MA+5"));function s(e){return e&&e.__esModule?e:{default:e}}i("LNuh"),(0,n.default)(function(){(0,n.default)(".render_mustache").livequery(function(){var e=(0,n.default)(this),t=r.default.extend(e.data("data"),e.data("extend")),i=e.data("partials")?e.data("partials").split(","):void 0,s=e.data("template");e.append((0,a.default)(s,t,i))})})},E7OR:function(e,t,i){"use strict";var n=l(i("shXp")),r=l(i("I1z3")),a=i("Tvaj"),s=l(i("wmCY")),o=l(i("YT+p"));function l(e){return e&&e.__esModule?e:{default:e}}i("xkBF"),i("SzcX"),i("hsYx"),i("0qc1"),i("lX5T");var u=i("l/Rs");i("l/Rs");!function(e){function t(t){this.$c=e(t),this.video_data=this.$c.data("video")||{},this.autostarting=!1;var i=this.$c.find("video");i.get(0)&&i.get(0).canPlayType&&(i.get(0).canPlayType("video/mp4")||i.hasClass("has_hls"))&&(this.$video=i,this.video=i.get(0),r.default.chrome&&this.$video.attr("controls","controls").removeAttr("controls")),this.initialize(),(window.location.search.match("play="+(this.$c.attr("id")||this.video_data.id))||this.$c.hasClass("autoplay"))&&(this.autostarting=!0,this.play()),this.$c.hasClass("muted")&&this.mute(),this.add_size_class(),this.bind_events()}e.fn.ksr_video=function(){return e(this).each(function(){var i=e(this).data("ksr_video");i||(i=new t(e(this)),e(this).data("ksr_video",i))})},e.extend(t.prototype,{overlay:function(){var t=this;this.$c.children(":not(video)").hide(),this.$overlay=e('<div class="overlay"><span class="button-playvideo"></span></div>'),this.$overlay.on("click",function(e){t.initialize_flash(),t.$overlay.remove(),e.preventDefault()}),this.$c.append(this.$overlay)},bind_events:function(){var e=this;this.$c.on("ksr_video:play",function(){e.play()}),this.$c.on("ksr_video:pause",function(){e.pause()}),this.$c.on("ksr_video:mute",function(){e.mute()}),this.$c.on("ksr_video:unmute",function(){e.unmute()}),this.$c.on("ksr_video:destroy",function(){e.destroy()}),this.$c.on("ksr_video:seek",function(t,i,n){e.seek(i,n)})},add_size_class:function(){this.$c.removeClass("small medium large"),this.$c.width()>600?this.$c.addClass("large"):this.$c.width()>400?this.$c.addClass("large"):this.$c.addClass("small")},bind_video_element:function(){var e=this,t=this.$video,i=!0;this.$video.on("loadedmetadata",function(){e.$c.trigger("ksr_video:loaded")}),t.bind("ended",function(){e.$c.trigger("ksr_video:ended")}),t.on("play",function(){e.$c.trigger("ksr_video:playing",[i]),e.$c.addClass("has_played"),e.autostarting?e.autostarting=!1:e.focus_playpause_button(),i=!1}),t.on("pause",function(){e.$c.trigger("ksr_video:paused"),e.focus_playpause_button()}),t.on("progress",function(){var t,i,r,a=e.video.buffered,s=[];if(a.length)for(t=0;t<a.length;t+=1)s.push(a.end(t));r=(i=n.default.max(s))/e.video.duration*100,e.$c.trigger("ksr_video:buffer_change",[i,r])}),t.on("timeupdate",function(){e.$c.trigger("ksr_video:time_update",[e.video.currentTime])})},bind_controls:function(){var t=this,i=this.$c.find(".player_controls"),r=i.find(".progress_container .progress_bg"),o=r.find(".buffer"),l=r.find(".progress"),u=r.find(".progress_handle"),c=i.find(".volume_container .progress_bg"),d=c.find(".progress"),h=c.find(".progress_handle"),f=i.find(".current_time"),p=i.find(".volume"),g=i.find(".playpause"),m=i.find(".video_track_list"),v=i.find(".js-caption-dropdown"),y={x:0,y:0},_=!1;function b(e){var t=Math.floor(e/60),i=Math.floor(e-60*t);return t+":"+(i<10?"0":"")+i}function w(){i.is(":hover")?T():(i.removeClass("visible"),i.trigger("ksr_video:controls_hidden"))}function E(){i.addClass("visible"),i.trigger("ksr_video:controls_shown")}function A(){clearTimeout(_)}function T(){A(),_=setTimeout(w,2e3)}function S(){var e=t.video.duration;e&&(t.$c.find(".total_time").text(b(e)).attr("datetime","PT"+Math.floor(e)+"S"),u.attr("aria-valuenow",t.video.currentTime).attr("aria-valuemin","0").attr("aria-valuemax",e))}function R(e){return e.which===a.LEFT?-1:e.which===a.RIGHT?1:null}function D(e,i){var n=i.delta,r=i.direction,a=i.max,s=t.video[e];r&&(s=function(e,t,i){return Math.min(i,Math.max(t,e))}(s+n*r,0,a),t.video[e]=s,E(),T())}function x(){var e=t.video.volume;KSR.store.setItem("ksr_video_volume",e),t.video.muted?(e=0,p.addClass("muted").attr("aria-label",s.default.t("library.ksr_video.Unmute"))):p.removeClass("muted").attr("aria-label",s.default.t("library.ksr_video.Mute"));var i=100*e+"%";d.width(i),h.css("left",i),h.attr("aria-valuenow",e)}this.$c.on("mousemove touchstart touchmove",function(e){var i={x:e.pageX,y:e.pageY};t.playing()&&("touchstart"===e.type||Math.abs(i.x-y.x)+Math.abs(i.y-y.y)>20)&&(E(),T(),y=i)}),S(),this.$video.on("click",function(){t.playpause()}),this.$c.find(".play_button_big, img.poster").on("click",function(e){t.play(),e.preventDefault()}),this.$c.on("focus click",":tabbable",function(){t.playing()&&(E(),T())}),this.$c.on("keydown",'[role="button"]',function(t){t.which!==a.ENTER&&t.which!==a.SPACE||(e(this).click(),t.preventDefault())}),this.$c.on("keydown",'.progress_container [role="slider"]',function(e){D("currentTime",{delta:.05*t.video.duration,direction:R(e),max:t.video.duration})}),this.$c.on("keydown",'.volume_container [role="slider"]',function(e){D("volume",{delta:.05,direction:R(e),max:1})}),this.$c.on("ksr_video:loaded",function(){S(),h.attr("aria-valuemin","0").attr("aria-valuemax","1"),x()}),this.$video.on("volumechange",function(){x()}).on("play",function(){g.removeClass("play").addClass("pause").attr("aria-label",s.default.t("library.ksr_video.Pause")),T()}).on("pause",function(){g.removeClass("pause").addClass("play").attr("aria-label",s.default.t("library.ksr_video.Play")),E(),A()}),g.on("click",function(e){t.playpause(),e.preventDefault()}),i.on("mouseenter focus",".video_dropdown",function(t){var n=e(t.currentTarget);n.addClass("open"),i.on("mouseleave.leave_dropdown blur.leave_dropdown",".video_dropdown",function(){n.removeClass("open"),i.off(".leave_dropdown")})});var C=function(e){n.default.each(e.textTracks,function(t,i){t.language===e.language?(t.mode="showing",e.hls&&(e.hls.subtitleTrack=i)):t.mode="hidden"})};function P(n){var r=v.find(".js-track"),a=n?r.filter('[data-language="'+n+'"]'):e();0===a.length&&(a=r.filter(".js-captions-off"),n=void 0),r.removeClass("selected"),a.addClass("selected"),a.is(".js-captions-off")?i.find(".ksr-icon__closed-caption").removeClass("is-on"):i.find(".ksr-icon__closed-caption").addClass("is-on"),t.$c.data("language",n),C({hls:t.hls,language:n,textTracks:t.video.textTracks})}m.on("click","li",function(){var i=e(this).data("language");v.removeClass("open"),i?KSR.store.setItem("last_track_language",i):KSR.store.removeItem("last_track_language"),P(i),t.$c.trigger("ksr_video:change_track",i)}),t.video.textTracks&&0!==t.video.textTracks.length?P(KSR.store.getItem("last_track_language")):this.$c.find(".js-remove-unless-text-tracks").remove();var I=null;function k(){t.$c.trigger("ksr_video:volume_adjusted")}e(document).on("fullscreenchange mozfullscreenchange webkitfullscreenchange",function(){!(document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement)&&I&&t.$c.css("height",I)}),i.find(".fullscreen").on("click",function(e){if(document.fullscreenEnabled||document.mozFullScreenEnabled||document.webkitFullscreenEnabled){var i=t.$c.get(0);document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement?document.cancelFullscreen?document.cancelFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen():(I=t.$c.css("height"),t.$c.css("height","auto"),i.requestFullscreen?i.requestFullscreen():i.mozRequestFullScreen?i.mozRequestFullScreen():i.webkitRequestFullscreen&&i.webkitRequestFullscreen())}else t.$c.toggleClass("fullscreen");e.preventDefault()}),r.draggable_bar(function(e){var i=t.video.duration*e;t.video.currentTime=i}),c.draggable_bar(function(e){t.video.muted&&t.unmute(),t.video.volume=e}),c.find(".progress_bar_bg").on("mouseup",k),d.on("mouseup",k),h.on("mouseup",k),e("body").is(".touchable")?d.hide():p.on("click",function(){t.mute_toggle()}),this.$c.on("ksr_video:buffer_change",function(e,t,i){o.width(i+"%")}),this.$c.on("ksr_video:time_update",function(e,i){var n=i/t.video.duration*100;l.width(n+"%"),u.css("left",n+"%"),f.text(b(i)).attr("datetime","PT"+Math.floor(i)+"S"),u.attr("aria-valuenow",i)})},play:function(){this.video?(this.$video.show(),this.hls&&this.hls.startLoad(),this.video.play()):this.jwplayer&&this.jwplayer.play()},pause:function(){this.playing()&&(this.video?this.video.pause():this.jwplayer&&this.jwplayer.pause())},playpause:function(){return this.playing()?this.pause():this.play(),this.playing()},focus_playpause_button:function(){var t=this.$c.find(".playpause"),i=e(window),n=t[0].getBoundingClientRect();n.top>=0&&n.left>=0&&n.bottom<=i.height()&&n.right<=i.width()&&t.focus()},seek:function(e,t){var i=this;if(void 0===t&&(t=!1),this.video){if(this.video.readyState<1)return this.video.load(),void this.$c.one("ksr_video:loaded",function(){i.seek(e,t)});this.video.currentTime=e,t?this.pause():this.play()}else this.jwplayer&&(this.jwplayer.seek(e),this.jwplayer.pause(t))},mute_toggle:function(){return this.video&&(this.video.muted?this.unmute():this.mute()),this.video.muted},mute:function(){this.$c.trigger("ksr_video:muted"),this.jwplayer?this.jwplayer.setMute(!0):this.video.muted=!0},unmute:function(){this.$c.trigger("ksr_video:unmuted"),this.jwplayer?this.jwplayer.setMute(!1):this.video.muted=!1},destroy:function(){this.$c.empty(),this.$c.removeData("ksr_video")},current_position:function(){return this.video?this.video.currentTime:this.jwplayer?this.jwplayer.getPosition():void 0},duration:function(){return this.jwplayer?this.jwplayer.getDuration():this.video.duration},playing:function(){return this.video?!this.video.paused:this.jwplayer?"playing"===this.jwplayer.getState().toLowerCase():void 0},initialize_flash:function(){var e="v"+parseInt(1e8*Math.random(),10),t=this.$c.data("external_flashvars")||{},i=this;this.$c.append('<div id="'+e+'"></div>'),"undefined"!=typeof swfobject&&swfobject.embedSWF("https://d3mlfyygrfdi2i.cloudfront.net/321f/kickplayer.swf",e,this.$c.data("dimensions").width,this.$c.data("dimensions").height,"9.0.115","/swf/expressInstall.swf",n.default.extend(t,{displayheight:this.$c.height(),file:encodeURI(this.$c.attr("data-video-url")),image:encodeURI(this.$c.attr("data-image")),backcolor:"000000",screencolor:"000000",controlbar:"over","controlbar.idlehide":"true",autostart:!0,skin:"https://d3mlfyygrfdi2i.cloudfront.net/cc3a/kickskin.swf"}),{allowscriptaccess:"always",allowfullscreen:"true",wmode:"opaque",menu:"false"},{id:"ksr_player_"+e,class:"ksr_player",name:"ksr_player_"+e},function(e){var t=!0;window.player_reference=e.ref,e.success?(i.$c.find("video").remove(),i.jwplayer=jwplayer(e.ref),i.jwplayer.onReady(function(){i.$c.trigger("ksr_video:loaded")}),i.jwplayer.onPlay(function(){i.$c.trigger("ksr_video:playing",[t]),t=!1}),i.jwplayer.onPause(function(){i.$c.trigger("ksr_video:paused")}),i.jwplayer.onComplete(function(){i.$c.trigger("ksr_video:ended")}),i.jwplayer.onBufferChange(function(e){var t=e.duration*(e.bufferPercent/100);isNaN(t)||i.$c.trigger("ksr_video:buffer_change",[t,e.bufferPercent])})):(i.$video=i.$c.find("video"),i.video=i.$video.get(0),i.$overlay.remove(),i.$c.children().show(),i.$c.find(".play_button_big").removeAttr("style"),i.video&&(i.initialize(),i.play()))})},initialize_hls:function(){this.hls=new o.default({autoStartLoad:this.$video.hasClass("preload")}),this.hls.loadSource(this.$video.find('source[type="application/x-mpegURL"]').attr("src")),this.hls.attachMedia(this.video);var e=this;this.hls.on(o.default.Events.MANIFEST_PARSED,function(){e.$c.trigger("ksr_video:loaded")})},initialize:function(){this.video?(this.$video.hasClass("has_hls")&&o.default.isSupported()&&this.initialize_hls(),this.bind_controls(),this.bind_video_element(),KSR.store.getItem("ksr_video_volume")&&(this.video.volume=KSR.store.getItem("ksr_video_volume")),this.$video.css({height:"100%"}).removeAttr("style")):this.overlay()}})}(u)},EZtX:function(e,t,i){var n=i("l/Rs");i("l/Rs");!function(e){"use strict";e.extend(e.fn.cycle.defaults,{caption:"> .cycle-caption",captionTemplate:"{{slideNum}} / {{slideCount}}",overlay:"> .cycle-overlay",overlayTemplate:"<div>{{title}}</div><div>{{desc}}</div>",captionModule:"caption"}),e(document).on("cycle-update-view",function(t,i,n,r){"caption"===i.captionModule&&e.each(["caption","overlay"],function(){var e=n[this+"Template"],t=i.API.getComponent(this);t.length&&e?(t.html(i.API.tmpl(e,n,i,r)),t.show()):t.hide()})}),e(document).on("cycle-destroyed",function(t,i){e.each(["caption","overlay"],function(){var e=i[this+"Template"];i[this]&&e&&i.API.getComponent("caption").empty()})})}(n)},Eaq5:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e};t.default=function(e){return e.show_more_backings=e.total>e.backings.length,e.count=e.total,e.backings=e.backings.map(function(e){return(0,s.default)(n({},e.get()))}),e};var r,a=i("WoYN"),s=(r=a)&&r.__esModule?r:{default:r}},Et0E:function(e,t,i){"use strict";var n=s(i("l/Rs")),r=s(i("9VV1")),a=s(i("DkOX"));function s(e){return e&&e.__esModule?e:{default:e}}(0,n.default)(document).on("click",".js-facebook-login, a.facebook-link",function(e){var t=(0,n.default)(this);e.preventDefault(),"undefined"!==window.FB?FB.login(function(e){e.authResponse&&n.default.post(t.attr("href"),{fbsr:e.authResponse.signedRequest}).done(function(e){e.data&&(0,a.default)(e.data,window.location.href)?window.location.reload(!0):e.data?window.location=e.data:e.flash&&(n.default.isArray(e.flash)&&n.default.isArray(e.flash[0])?(0,r.default)(n.default.map(e.flash,function(e){return e[e.length-1]})):e.flash&&(0,r.default)(e.flash))})},{scope:"email,user_friends,public_profile"}):(0,r.default)({error:"Sorry, we weren't able to connect to Facebook"})})},"FD+P":function(e,t,i){var n=i("l/Rs");i("l/Rs");!function(e){var t="-1";e.fn.clone_form_template=function(i,n){return i||(i={}),e(this).map(function(){return function(i,n,r){var a=(new Date).getTime();return i.find("label,input,textarea,select").each(function(i,s){!function(i,n,r,a){var s=r.pattern||t,o=new RegExp("_"+s+"_"),l=new RegExp("\\["+s+"\\]");i.attr("id")&&i.attr("id",i.attr("id").replace(o,"_"+n+"_")),i.attr("for")&&i.attr("for",i.attr("for").replace(o,"_"+n+"_")),i.attr("name")&&(r.copy_values&&i.val(e('[name="'+i.attr("name")+'"]').val()),i.attr("name",i.attr("name").replace(l,"["+n+"]"))),"function"==typeof a&&a.apply(i,i)}(e(s),a,n,r)}),i.removeClass("template").show()}(e(this).clone(),i,n)[0]})}}(n)},FPSz:function(e,t,i){"use strict";i("thKT");var n=s(i("I1z3")),r=s(i("wmCY")),a=i("TBVi");function s(e){return e&&e.__esModule?e:{default:e}}i("l/Rs");!function(e){function t(t,i){this.$div=t,this.options=e.extend({previous_month_text:"< Prev",next_month_text:"Next >",month_texts:[r.default.t("library.calendar_date_picker.January"),r.default.t("library.calendar_date_picker.February"),r.default.t("library.calendar_date_picker.March"),r.default.t("library.calendar_date_picker.April"),r.default.t("library.calendar_date_picker.May"),r.default.t("library.calendar_date_picker.June"),r.default.t("library.calendar_date_picker.July"),r.default.t("library.calendar_date_picker.August"),r.default.t("library.calendar_date_picker.September"),r.default.t("library.calendar_date_picker.October"),r.default.t("library.calendar_date_picker.November"),r.default.t("library.calendar_date_picker.December")],day_of_week_texts:[r.default.t("library.calendar_date_picker.Sunday_short"),r.default.t("library.calendar_date_picker.Monday_short"),r.default.t("library.calendar_date_picker.Tuesday_short"),r.default.t("library.calendar_date_picker.Wednesday_short"),r.default.t("library.calendar_date_picker.Thursday_short"),r.default.t("library.calendar_date_picker.Friday_short"),r.default.t("library.calendar_date_picker.Saturday_short")]},i),this._extract_options(),this._attach(),this._redraw()}var i;function s(e){return i?i.firstChild.nodeValue=e:(i=document.createElement("div")).appendChild(document.createTextNode(e)),i.innerHTML}e.fn.calendar_date_picker=function(i){return this.each(function(){var n=new t(e(this),i);e(this).data("calendar_date_picker",n)})},e.extend(t.prototype,{_copy_date:function(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate())},_copy_date_with_time:function(e,t){if(!e)return e;var i=this._copy_date(e),n=(t||"").split(":");return i.setHours(+n[0]||0),i.setMinutes(+n[1]||0),i},_copy_time:function(e){if(!e)return null;var t=""+e.getHours();1===t.length&&(t="0"+t);var i=""+e.getMinutes();return 1===i.length&&(i="0"+i),t+":"+i},_copy_month:function(e){return new Date(e.getFullYear(),e.getMonth(),1)},_next_month:function(e){return new Date(e.getFullYear(),e.getMonth()+1,1)},_previous_month:function(e){return new Date(e.getFullYear(),e.getMonth()-1,1)},_next_date:function(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate()+1,e.getHours(),e.getMinutes())},_previous_date:function(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate()-1,e.getHours(),e.getMinutes())},_same_year:function(e,t){return e.getFullYear()===t.getFullYear()},_same_month:function(e,t){return this._same_year(e,t)&&e.getMonth()===t.getMonth()},_last_date_of_month:function(e){return new Date(e.getFullYear(),e.getMonth()+1,0)},_selected_date_date_in_focus_month:function(){return this.selected_date&&this._same_month(this.selected_date,this.focus_date)?this.selected_date.getDate():void 0},_extract_options:function(){this.today_date=this._copy_date(this.options.today_date||new Date),this.options.selected_date&&(this.selected_date=this._copy_date(this.options.selected_date)),this.focus_date=this._copy_month(this.options.focus_date||this.selected_date||this.today_date),this.time=!!this._does_datetime()&&this._copy_time(this.options.selected_date||this.options.today_date||new Date)},_refresh_calendar_table_classes:function(e){var t=this._selected_date_date_in_focus_month(),i=e.children("tbody"),n=i.find("a.selected");n.removeClass("selected"),n.parent().removeClass("selected");var r=i.find("a:eq("+(t-1)+")");r.addClass("selected"),r.parent().addClass("selected")},_attach:function(){var e=this;this.$div.bind("calendar_date_picker:select_date",function(t,i){e.select_date(i)})},_bind_dom_table_events:function(){var t=this,i=this.$div.children().children("table"),r=i.children(":eq(0)").children().children(),a=r.children("a.previous_month");a.text(this.options.previous_month_text),a.click(function(e){e.preventDefault(),t._on_previous_month_clicked()});var s=r.children("a.next_month");s.text(this.options.next_month_text),s.click(function(e){e.preventDefault(),t._on_next_month_clicked()}),r.children(".month, .year").on("click",function(){t.focus_date=new Date,t._refresh_calendar()}),i.children("tbody").click(function(i){var r;r=n.default.msie?i.srcElement:i.target;var a=e(r);if(a[0]&&"A"===a[0].nodeName){i.preventDefault();var s=t._copy_date_with_time(t.focus_date,t.time);s.setDate(+a.text());var o=t._copy_date_with_time(t.selected_date,t.time);t.options.allow_deselect&&o&&s-o==0?t.select_date(void 0):t.select_date(s)}})},_bind_dom_time_events:function(){if(this._does_datetime()){var e=this,t=this.$div.children().children("div.time").find("input");t.time_field(this.options.time),t.trigger("time_field:set_time",this.time),t.bind("time_field:time_changed",function(t,i){e.selected_date||(e.selected_date=new Date);var n=e._copy_date_with_time(e.selected_date,i);e.select_date(n)})}},_does_datetime:function(){return void 0!==this.options.time_text},_on_previous_month_clicked:function(){this.focus_date=this._previous_month(this.focus_date),this._refresh_calendar()},_on_next_month_clicked:function(){this.focus_date=this._next_month(this.focus_date),this._refresh_calendar()},_redraw:function(){this.$div.empty(),this.$div.append('<div class="calendar_date_picker">'+this._table_html()+this._time_div_html()+"</div>"),this._bind_dom_table_events(),this._bind_dom_time_events()},_refresh_calendar:function(){this.$div.children().children("table").replaceWith(this._table_html()),this._bind_dom_table_events()},select_date:function(e,t){var i=e?this._copy_date(e):void 0,n=t||(e?this._copy_time(e):void 0);(this.selected_date?this.selected_date.valueOf():void 0)===(i?i.valueOf():void 0)&&n===this.time||(this.selected_date=i,this._does_datetime()&&(this.time=n,n&&this.$div.find("input").trigger("time_field:set_time",n)),this.$div.trigger("calendar_date_picker:date_selected",[this._copy_date_with_time(this.selected_date,this.time)]),this.focus_date=this._copy_month(this.selected_date||this.today_date),this._refresh_calendar(),this._refresh_calendar_table_classes(this.$div.find("table")))},_table_html:function(){return"<table>"+this._thead_month_html()+this._thead_days_of_week_html()+this._tbody_html()+"</table>"},_thead_month_html:function(){return'<thead class="month"><tr><th colspan="7"><a class="previous_month ss-icon ss-navigateleft grey-dark" href="#"></a><a class="next_month ss-icon ss-navigateright grey-dark" href="#"></a><span class="month">'+s(this.options.month_texts[this.focus_date.getMonth()])+'</span> <span class="year">'+this.focus_date.getFullYear()+"</span></th></tr></thead>"},_thead_days_of_week_html:function(){return'<thead class="days_of_week"><tr><th>'+this._days_of_week_ths().join("</th><th>")+"</th></tr></thead>"},_tbody_html:function(){var e=this._copy_month(this.focus_date).getDay(),t=1,i=this._last_date_of_month(this.focus_date).getDate(),n=this._selected_date_date_in_focus_month(),r=this._same_month(this.focus_date,this.today_date)&&this.today_date.getDate(),a=[];for(a.push(this._date_tds(e,n,r,t,i)),t=8-e;t<=i;t+=7)a.push(this._date_tds(0,n,r,t,i));return"<tbody><tr>"+a.join("</tr><tr>")+"</tr></tbody>"},_date_tds:function(e,t,i,n,r){for(var a=[],s=0;s<e;s+=1)a.push("<td></td>");for(var o=n;a.length<7&&o<=r;o+=1){var l,u=[];o===t&&u.push("selected"),o===i&&u.push("today");var c="<td"+(l=u.length?' class="'+u.join(" ")+'"':"")+'><a href="#"'+l+">"+o+"</a></td>";a.push(c)}for(var d=r+1;d<n+7;d+=1)a.push("<td></td>");return a.join("")},_days_of_week_ths:function(){return e.map(this.options.day_of_week_texts,s)},_time_div_html:function(){return this._does_datetime()?'<div class="time"><label>'+s(this.options.time_text)+'<input type="text" /></label>'+s((0,a.zoneAbbr)(new Date))+"</div>":""}})}(i("l/Rs"))},GCDY:function(e,t,i){"use strict";var n,r=i("shXp"),a=(n=r)&&n.__esModule?n:{default:n};var s=i("l/Rs");i("l/Rs");!function(e){e.fn.whenNear=function(t,i){var n=e(window),r=t||0,s=this;function o(){var t=a.default.filter(s,function(t){var i=e(t);if(!i.is(":hidden")){var a=n.scrollTop(),s=a+n.height(),o=i.offset().top;return o+i.height()>=a-r&&o<=s+r}});s=s.not(t),a.default.each(t,i)}return n.on("scroll.whenNear resize.whenNear",a.default.throttle(o,25)),o(),this}}(s)},HSFe:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.json=JSON.stringify(e),e}},HW66:function(e,t,i){"use strict";i("l/Rs");var n=i("l/Rs");n.fn.composed=function(e,t){var i=n(this);return void 0===i.data("topics")&&i.data("topics",{}),(i.data("topics")[e]||[]).reduce(function(e,t){return t.call(n,e)},t)},n.fn.composable=function(e,t){var i=n(this);return void 0===i.data("topics")&&i.data("topics",{}),i.data("topics")[e]||(i.data("topics")[e]=[]),i.data("topics")[e].push(t),[e,t]}},HZrJ:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.toUTC=function(e){return new Date(e).toISOString().replace("Z","")}},I1z3:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,r={};(n=function(e){e=e.toLowerCase();var t=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}}(navigator.userAgent)).browser&&(r[n.browser]=!0,r.version=n.version),r.chrome?r.webkit=!0:r.webkit&&(r.safari=!0),t.default=r},IhN0:function(e,t,i){var n=i("l/Rs");i("l/Rs");!function(e,t){function i(e,t,i){return e>t&&e<t+i}function n(e){return/left|right/.test(e.css("float"))||/inline|table-cell/.test(e.css("display"))}e.widget("ui.sortable",e.ui.mouse,{version:"1.10.3",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_create:function(){var e=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=!!this.items.length&&("x"===e.axis||n(this.items[0].item)),this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_setOption:function(t,i){"disabled"===t?(this.options[t]=i,this.widget().toggleClass("ui-sortable-disabled",!!i)):e.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(t,i){var n=null,r=!1,a=this;return!this.reverting&&(!this.options.disabled&&"static"!==this.options.type&&(this._refreshItems(t),e(t.target).parents().each(function(){if(e.data(this,a.widgetName+"-item")===a)return n=e(this),!1}),e.data(t.target,a.widgetName+"-item")===a&&(n=e(t.target)),!!n&&(!(this.options.handle&&!i&&(e(this.options.handle,n).find("*").addBack().each(function(){this===t.target&&(r=!0)}),!r))&&(this.currentItem=n,this._removeCurrentsFromItems(),!0))))},_mouseStart:function(t,i,n){var r,a,s=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,s.cursorAt&&this._adjustOffsetFromHelper(s.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),s.containment&&this._setContainment(),s.cursor&&"auto"!==s.cursor&&(a=this.document.find("body"),this.storedCursor=a.css("cursor"),a.css("cursor",s.cursor),this.storedStylesheet=e("<style>*{ cursor: "+s.cursor+" !important; }</style>").appendTo(a)),s.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",s.opacity)),s.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",s.zIndex)),this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!n)for(r=this.containers.length-1;r>=0;r--)this.containers[r]._trigger("activate",t,this._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!s.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){var i,n,r,a,s=this.options,o=!1;for(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<s.scrollSensitivity?this.scrollParent[0].scrollTop=o=this.scrollParent[0].scrollTop+s.scrollSpeed:t.pageY-this.overflowOffset.top<s.scrollSensitivity&&(this.scrollParent[0].scrollTop=o=this.scrollParent[0].scrollTop-s.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<s.scrollSensitivity?this.scrollParent[0].scrollLeft=o=this.scrollParent[0].scrollLeft+s.scrollSpeed:t.pageX-this.overflowOffset.left<s.scrollSensitivity&&(this.scrollParent[0].scrollLeft=o=this.scrollParent[0].scrollLeft-s.scrollSpeed)):(t.pageY-e(document).scrollTop()<s.scrollSensitivity?o=e(document).scrollTop(e(document).scrollTop()-s.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<s.scrollSensitivity&&(o=e(document).scrollTop(e(document).scrollTop()+s.scrollSpeed)),t.pageX-e(document).scrollLeft()<s.scrollSensitivity?o=e(document).scrollLeft(e(document).scrollLeft()-s.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<s.scrollSensitivity&&(o=e(document).scrollLeft(e(document).scrollLeft()+s.scrollSpeed))),!1!==o&&e.ui.ddmanager&&!s.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),i=this.items.length-1;i>=0;i--)if(r=(n=this.items[i]).item[0],(a=this._intersectsWithPointer(n))&&n.instance===this.currentContainer&&!(r===this.currentItem[0]||this.placeholder[1===a?"next":"prev"]()[0]===r||e.contains(this.placeholder[0],r)||"semi-dynamic"===this.options.type&&e.contains(this.element[0],r))){if(this.direction=1===a?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(n))break;this._rearrange(t,n),this._trigger("change",t,this._uiHash());break}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,i){if(t){if(e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t),this.options.revert){var n=this,r=this.placeholder.offset(),a=this.options.axis,s={};a&&"x"!==a||(s.left=r.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft)),a&&"y"!==a||(s.top=r.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,e(this.helper).animate(s,parseInt(this.options.revert,10)||500,function(){n._clear(t)})}else this._clear(t,i);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var i=this._getItemsAsjQuery(t&&t.connected),n=[];return t=t||{},e(i).each(function(){var i=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[\-=_](.+)/);i&&n.push((t.key||i[1]+"[]")+"="+(t.key&&t.expression?i[1]:i[2]))}),!n.length&&t.key&&n.push(t.key+"="),n.join("&")},toArray:function(t){var i=this._getItemsAsjQuery(t&&t.connected),n=[];return t=t||{},i.each(function(){n.push(e(t.item||this).attr(t.attribute||"id")||"")}),n},_intersectsWith:function(e){var t=this.positionAbs.left,i=t+this.helperProportions.width,n=this.positionAbs.top,r=n+this.helperProportions.height,a=e.left,s=a+e.width,o=e.top,l=o+e.height,u=this.offset.click.top,c=this.offset.click.left,d="x"===this.options.axis||n+u>o&&n+u<l,h="y"===this.options.axis||t+c>a&&t+c<s,f=d&&h;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?f:a<t+this.helperProportions.width/2&&i-this.helperProportions.width/2<s&&o<n+this.helperProportions.height/2&&r-this.helperProportions.height/2<l},_intersectsWithPointer:function(e){var t="x"===this.options.axis||i(this.positionAbs.top+this.offset.click.top,e.top,e.height),n="y"===this.options.axis||i(this.positionAbs.left+this.offset.click.left,e.left,e.width),r=t&&n,a=this._getDragVerticalDirection(),s=this._getDragHorizontalDirection();return!!r&&(this.floating?s&&"right"===s||"down"===a?2:1:a&&("down"===a?2:1))},_intersectsWithSides:function(e){var t=i(this.positionAbs.top+this.offset.click.top,e.top+e.height/2,e.height),n=i(this.positionAbs.left+this.offset.click.left,e.left+e.width/2,e.width),r=this._getDragVerticalDirection(),a=this._getDragHorizontalDirection();return this.floating&&a?"right"===a&&n||"left"===a&&!n:r&&("down"===r&&t||"up"===r&&!t)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return 0!==e&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return 0!==e&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor===String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){var i,n,r,a,s=[],o=[],l=this._connectWith();if(l&&t)for(i=l.length-1;i>=0;i--)for(n=(r=e(l[i])).length-1;n>=0;n--)(a=e.data(r[n],this.widgetFullName))&&a!==this&&!a.options.disabled&&o.push([e.isFunction(a.options.items)?a.options.items.call(a.element):e(a.options.items,a.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),a]);for(o.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),i=o.length-1;i>=0;i--)o[i][0].each(function(){s.push(this)});return e(s)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=e.grep(this.items,function(e){for(var i=0;i<t.length;i++)if(t[i]===e.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[],this.containers=[this];var i,n,r,a,s,o,l,u,c=this.items,d=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],h=this._connectWith();if(h&&this.ready)for(i=h.length-1;i>=0;i--)for(n=(r=e(h[i])).length-1;n>=0;n--)(a=e.data(r[n],this.widgetFullName))&&a!==this&&!a.options.disabled&&(d.push([e.isFunction(a.options.items)?a.options.items.call(a.element[0],t,{item:this.currentItem}):e(a.options.items,a.element),a]),this.containers.push(a));for(i=d.length-1;i>=0;i--)for(s=d[i][1],n=0,u=(o=d[i][0]).length;n<u;n++)(l=e(o[n])).data(this.widgetName+"-item",s),c.push({item:l,instance:s,width:0,height:0,left:0,top:0})},refreshPositions:function(t){var i,n,r,a;for(this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset()),i=this.items.length-1;i>=0;i--)(n=this.items[i]).instance!==this.currentContainer&&this.currentContainer&&n.item[0]!==this.currentItem[0]||(r=this.options.toleranceElement?e(this.options.toleranceElement,n.item):n.item,t||(n.width=r.outerWidth(),n.height=r.outerHeight()),a=r.offset(),n.left=a.left,n.top=a.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(i=this.containers.length-1;i>=0;i--)a=this.containers[i].element.offset(),this.containers[i].containerCache.left=a.left,this.containers[i].containerCache.top=a.top,this.containers[i].containerCache.width=this.containers[i].element.outerWidth(),this.containers[i].containerCache.height=this.containers[i].element.outerHeight();return this},_createPlaceholder:function(t){var i,n=(t=t||this).options;n.placeholder&&n.placeholder.constructor!==String||(i=n.placeholder,n.placeholder={element:function(){var n=t.currentItem[0].nodeName.toLowerCase(),r=e("<"+n+">",t.document[0]).addClass(i||t.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tr"===n?t.currentItem.children().each(function(){e("<td>&#160;</td>",t.document[0]).attr("colspan",e(this).attr("colspan")||1).appendTo(r)}):"img"===n&&r.attr("src",t.currentItem.attr("src")),i||r.css("visibility","hidden"),r},update:function(e,r){i&&!n.forcePlaceholderSize||(r.height()||r.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),r.width()||r.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10)))}}),t.placeholder=e(n.placeholder.element.call(t.element,t.currentItem)),t.currentItem.after(t.placeholder),n.placeholder.update(t,t.placeholder)},_contactContainers:function(t){var r,a,s,o,l,u,c,d,h,f,p=null,g=null;for(r=this.containers.length-1;r>=0;r--)if(!e.contains(this.currentItem[0],this.containers[r].element[0]))if(this._intersectsWith(this.containers[r].containerCache)){if(p&&e.contains(this.containers[r].element[0],p.element[0]))continue;p=this.containers[r],g=r}else this.containers[r].containerCache.over&&(this.containers[r]._trigger("out",t,this._uiHash(this)),this.containers[r].containerCache.over=0);if(p)if(1===this.containers.length)this.containers[g].containerCache.over||(this.containers[g]._trigger("over",t,this._uiHash(this)),this.containers[g].containerCache.over=1);else{for(s=1e4,o=null,l=(f=p.floating||n(this.currentItem))?"left":"top",u=f?"width":"height",c=this.positionAbs[l]+this.offset.click[l],a=this.items.length-1;a>=0;a--)e.contains(this.containers[g].element[0],this.items[a].item[0])&&this.items[a].item[0]!==this.currentItem[0]&&(f&&!i(this.positionAbs.top+this.offset.click.top,this.items[a].top,this.items[a].height)||(d=this.items[a].item.offset()[l],h=!1,Math.abs(d-c)>Math.abs(d+this.items[a][u]-c)&&(h=!0,d+=this.items[a][u]),Math.abs(d-c)<s&&(s=Math.abs(d-c),o=this.items[a],this.direction=h?"up":"down")));if(!o&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[g])return;o?this._rearrange(t,o,null,!0):this._rearrange(t,null,this.containers[g].element,!0),this._trigger("change",t,this._uiHash()),this.containers[g]._trigger("change",t,this._uiHash(this)),this.currentContainer=this.containers[g],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[g]._trigger("over",t,this._uiHash(this)),this.containers[g].containerCache.over=1}},_createHelper:function(t){var i=this.options,n=e.isFunction(i.helper)?e(i.helper.apply(this.element[0],[t,this.currentItem])):"clone"===i.helper?this.currentItem.clone():this.currentItem;return n.parents("body").length||e("parent"!==i.appendTo?i.appendTo:this.currentItem[0].parentNode)[0].appendChild(n[0]),n[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),n[0].style.width&&!i.forceHelperSize||n.width(this.currentItem.width()),n[0].style.height&&!i.forceHelperSize||n.height(this.currentItem.height()),n},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,i,n,r=this.options;"parent"===r.containment&&(r.containment=this.helper[0].parentNode),"document"!==r.containment&&"window"!==r.containment||(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,e("document"===r.containment?document:window).width()-this.helperProportions.width-this.margins.left,(e("document"===r.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(r.containment)||(t=e(r.containment)[0],i=e(r.containment).offset(),n="hidden"!==e(t).css("overflow"),this.containment=[i.left+(parseInt(e(t).css("borderLeftWidth"),10)||0)+(parseInt(e(t).css("paddingLeft"),10)||0)-this.margins.left,i.top+(parseInt(e(t).css("borderTopWidth"),10)||0)+(parseInt(e(t).css("paddingTop"),10)||0)-this.margins.top,i.left+(n?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(e(t).css("borderLeftWidth"),10)||0)-(parseInt(e(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,i.top+(n?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(e(t).css("borderTopWidth"),10)||0)-(parseInt(e(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(t,i){i||(i=this.position);var n="absolute"===t?1:-1,r="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,a=/(html|body)/i.test(r[0].tagName);return{top:i.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():a?0:r.scrollTop())*n,left:i.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():a?0:r.scrollLeft())*n}},_generatePosition:function(t){var i,n,r=this.options,a=t.pageX,s=t.pageY,o="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=/(html|body)/i.test(o[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==document&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(a=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(s=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(a=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(s=this.containment[3]+this.offset.click.top)),r.grid&&(i=this.originalPageY+Math.round((s-this.originalPageY)/r.grid[1])*r.grid[1],s=this.containment?i-this.offset.click.top>=this.containment[1]&&i-this.offset.click.top<=this.containment[3]?i:i-this.offset.click.top>=this.containment[1]?i-r.grid[1]:i+r.grid[1]:i,n=this.originalPageX+Math.round((a-this.originalPageX)/r.grid[0])*r.grid[0],a=this.containment?n-this.offset.click.left>=this.containment[0]&&n-this.offset.click.left<=this.containment[2]?n:n-this.offset.click.left>=this.containment[0]?n-r.grid[0]:n+r.grid[0]:n)),{top:s-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():l?0:o.scrollTop()),left:a-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():l?0:o.scrollLeft())}},_rearrange:function(e,t,i,n){i?i[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var r=this.counter;this._delay(function(){r===this.counter&&this.refreshPositions(!n)})},_clear:function(e,t){this.reverting=!1;var i,n=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(i in this._storedCSS)"auto"!==this._storedCSS[i]&&"static"!==this._storedCSS[i]||(this._storedCSS[i]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!t&&n.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||t||n.push(function(e){this._trigger("update",e,this._uiHash())}),this!==this.currentContainer&&(t||(n.push(function(e){this._trigger("remove",e,this._uiHash())}),n.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),n.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer)))),i=this.containers.length-1;i>=0;i--)t||n.push(function(e){return function(t){e._trigger("deactivate",t,this._uiHash(this))}}.call(this,this.containers[i])),this.containers[i].containerCache.over&&(n.push(function(e){return function(t){e._trigger("out",t,this._uiHash(this))}}.call(this,this.containers[i])),this.containers[i].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!t){for(this._trigger("beforeStop",e,this._uiHash()),i=0;i<n.length;i++)n[i].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!1}if(t||this._trigger("beforeStop",e,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null,!t){for(i=0;i<n.length;i++)n[i].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){!1===e.Widget.prototype._trigger.apply(this,arguments)&&this.cancel()},_uiHash:function(t){var i=t||this;return{helper:i.helper,placeholder:i.placeholder||e([]),position:i.position,originalPosition:i.originalPosition,offset:i.positionAbs,item:i.currentItem,sender:t?t.element:null}}})}(n)},LOOJ:function(e,t,i){"use strict";var n,r=i("shXp"),a=(n=r)&&n.__esModule?n:{default:n};i("l/Rs");var s=i("l/Rs");s.fn.option_values=function(e){var t=s(this).first().find("option").map(function(t,i){var n=i.value;return!("function"==typeof e&&!e(n))&&n});return(0,a.default)(t).without(!1)},s.fn.select_machine=function(e,t){var i={default_control:function(e){e.hide()}};return s(this).each(function(){!function(e,t,i){var n=s(e),r=a.default.map(a.default.keys(t),function(e){return"#"+e}).join(", ");n.delegate(r,"change",function(){s(this).trigger("state_change")}),n.delegate(r,"state_change",function(){var e=s(this),n=e.val();a.default.each(t[e[0].id],function(e,t){var r,o=s("#"+t),l=o.add(o.prev("label")),u=o.val(),c=a.default.result(e,n);void 0===o.data("options")&&o.data("options",o.find("option")),a.default.isRegExp(c)&&(c=o.option_values(function(e){return e.match(c)})),a.default.isArray(c)&&(c=a.default.map(c,function(e){return'[value="'+e+'"]'}).join(", ")),c?(r=s(o.data("options")),a.default.isString(c)&&(r=r.filter(c)),i.include_blank&&(r=s("<option>").add(r)),o.html(r),l.show(),o.val()!==u&&o.trigger("change")):(i.default_control(l),o.trigger("change"))})})}(this,e,s.extend(i,t))}),this}},M99n:function(e,t,i){"use strict";var n=i("l/Rs");i("l/Rs");n.support.transitionEvent=function(){return void 0!==window.TransitionEvent}},"MA+5":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=l(i("l/Rs")),r=l(i("shXp")),a=l(i("wmCY")),s=l(i("1i/z")),o=l(i("pD7l"));function l(e){return e&&e.__esModule?e:{default:e}}function u(e){var t=(0,n.default)("#template-"+e.replace(/\//g,"_"));if(!t.length)throw"Could not find template: "+e;return n.default.trim(t.html())}function c(){return function(e,t){return t(a.default.t(e,this))}}function d(e,t,i){var a=o.default[e]||function(e){return e},l=u(e),d=function(e){var t={};if(r.default.isString(e)&&(e=[e]),r.default.isArray(e))return r.default.each(e,function(e){t[e]=u(e)}),t}(i);return s.default.render(l,n.default.extend({t:c},a(t)),d)}t.default=d,window.render=d},MfwZ:function(e,t,i){var n=i("l/Rs");i("l/Rs");!function(e){"use strict";var t=e.fn.cycle;e.fn.cycle=function(i){var n,r,a,s=e.makeArray(arguments);return"number"==e.type(i)?this.cycle("goto",i):"string"==e.type(i)?this.each(function(){var o;if(n=i,void 0!==(a=e(this).data("cycle.opts")))return n="goto"==n?"jump":n,r=a.API[n],e.isFunction(r)?((o=e.makeArray(s)).shift(),r.apply(a.API,o)):void t.log("unknown command: ",n);t.log('slideshow must be initialized before sending commands; "'+n+'" ignored')}):t.apply(this,arguments)},e.extend(e.fn.cycle,t),e.extend(t.API,{next:function(){var e=this.opts();if(!e.busy||e.manualTrump){var t=e.reverse?-1:1;!1===e.allowWrap&&e.currSlide+t>=e.slideCount||(e.API.advanceSlide(t),e.API.trigger("cycle-next",[e]).log("cycle-next"))}},prev:function(){var e=this.opts();if(!e.busy||e.manualTrump){var t=e.reverse?1:-1;!1===e.allowWrap&&e.currSlide+t<0||(e.API.advanceSlide(t),e.API.trigger("cycle-prev",[e]).log("cycle-prev"))}},destroy:function(){this.stop();var t=this.opts(),i=e.isFunction(e._data)?e._data:e.noop;clearTimeout(t.timeoutId),t.timeoutId=0,t.API.stop(),t.API.trigger("cycle-destroyed",[t]).log("cycle-destroyed"),t.container.removeData(),i(t.container[0],"parsedAttrs",!1),t.retainStylesOnDestroy||(t.container.removeAttr("style"),t.slides.removeAttr("style"),t.slides.removeClass(t.slideActiveClass)),t.slides.each(function(){e(this).removeData(),i(this,"parsedAttrs",!1)})},jump:function(e){var t,i=this.opts();if(!i.busy||i.manualTrump){var n=parseInt(e,10);isNaN(n)||n<0||n>=i.slides.length?i.API.log("goto: invalid slide index: "+n):n!=i.currSlide?(i.nextSlide=n,clearTimeout(i.timeoutId),i.timeoutId=0,i.API.log("goto: ",n," (zero-index)"),t=i.currSlide<i.nextSlide,i.API.prepareTx(!0,t)):i.API.log("goto: skipping, already on slide",n)}},stop:function(){var t=this.opts(),i=t.container;clearTimeout(t.timeoutId),t.timeoutId=0,t.API.stopTransition(),t.pauseOnHover&&(!0!==t.pauseOnHover&&(i=e(t.pauseOnHover)),i.off("mouseenter mouseleave")),t.API.trigger("cycle-stopped",[t]).log("cycle-stopped")},reinit:function(){var e=this.opts();e.API.destroy(),e.container.cycle()},remove:function(t){for(var i,n,r=this.opts(),a=[],s=1,o=0;o<r.slides.length;o++)i=r.slides[o],o==t?n=i:(a.push(i),e(i).data("cycle.opts").slideNum=s,s++);n&&(r.slides=e(a),r.slideCount--,e(n).remove(),t==r.currSlide?r.API.advanceSlide(1):t<r.currSlide?r.currSlide--:r.currSlide++,r.API.trigger("cycle-slide-removed",[r,t,n]).log("cycle-slide-removed"),r.API.updateView())}}),e(document).on("click.cycle","[data-cycle-cmd]",function(t){t.preventDefault();var i=e(this),n=i.data("cycle-cmd"),r=i.data("cycle-context")||".cycle-slideshow";e(r).cycle(n,i.data("cycle-arg"))})}(n)},"N/lE":function(e,t,i){"use strict";var n=s(i("l/Rs")),r=s(i("TGXB")),a=s(i("hBlz"));function s(e){return e&&e.__esModule?e:{default:e}}i("LNuh"),(0,n.default)(function(){(0,n.default)(document).ajaxSend(function(e,t,i){var r,s;"GET"!==i.type&&(r=i.url,""===(s=new a.default(r).domain())||s===new a.default(window.location.href).domain())&&t.setRequestHeader("X-CSRF-Token",(0,n.default)('meta[name="csrf-token"]').attr("content"))}),(0,n.default)("form[data-ksrjson]").livequery(function(){var e=(0,n.default)([]);(0,n.default)(this).attr("data-target")?e=(0,n.default)((0,n.default)(this).attr("data-target")):(0,n.default)(this).closest(".ajax-container").length?e=(0,n.default)(this).closest(".ajax-container"):(0,n.default)(this).closest(".modal_dialog").length>0&&(e=(0,n.default)(this)),e.length>0&&r.default.enable_form((0,n.default)(this),e)}),(0,n.default)(document).on("click","a[data-ksrjson]",function(e){var t=(0,n.default)(this),i=(0,n.default)(t.attr("data-target"));return e.preventDefault(),0===i.length&&(i=t.closest(".ajax-container")),0===i.length||r.default.get(t.attr("href"),t.attr("data-ksrmethod"),i,this)})})},Qijp:function(e,t,i){var n=i("l/Rs");i("l/Rs");!function(e){e.fn.livesearch_pretty_input_dropdown=function(t){return t=t||{},e(this).each(function(){var i,n=e(this),r=n.find("input[type=text]"),a=n.find(".ss-delete"),s=r.siblings(".ss-search");function o(){this.value?a.show():a.hide()}function l(){r.val(""),r.trigger("livesearch:cancel").trigger("livesearch:close_results")}r.livesearch_input_dropdown(e.extend(t,{update_input:!1})),i=r.data("livesearch.input_dropdown"),o.call(r[0]),r.on("keypress cut paste input livesearch:close_results blur",o),r.on("livesearch:searching",function(){s.removeClass("ss-search").addClass("icon-loading-small")}),r.on("livesearch:results livesearch:ajax_error",function(){s.removeClass("icon-loading-small").addClass("ss-search")}),r.on("livesearch:results",function(){if(!t.input_can_submit_on_enter){var e=r.siblings(".results");i.select(e.find("li:first"))}}),a.on("click",function(){r.focus(),l()}),r.on("livesearch:close_results",function(){r.siblings(".results").slideUp(function(){e(window).resize(),e(this).trigger("sticky_bar:fix_to_bottom")})}),r.on("blur",function(){r.val().length<3&&l()})})}}(n)},QqbN:function(e,t,i){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=d(i("l/Rs")),a=d(i("shXp")),s=d(i("/V0p")),o=d(i("hwML"));i("wgDV");var l,u,c=d(i("eF8u"));function d(e){return e&&e.__esModule?e:{default:e}}function h(){return a.default.map(navigator.mimeTypes,function(e){return[e.type,e.description].join("|")})}function f(e){return(new s.default.SHA256).hex(e)}l=a.default.memoize(function(){var e,t,i,r,s,o,l,u,c,d,p=(e=["AdobeReader","Flash","Quicktime","RealPlayer","Shockwave","Silverlight","VLC","WindowsMediaPlayer"],a.default.chain(e).zip(a.default.map(e,function(e){try{return window.PluginDetect.getVersion(e)}catch(e){return e.description}})).filter(a.default.last).value()),g=a.default.map(navigator.plugins,function(e){return[e.name,e.description,e.filename,e.length].join("|")}),m=h(),v=(t=navigator.getGamepads?navigator.getGamepads():[],a.default.chain(t).filter(a.default.identity).map(function(e){return[e.index,e.id].join("|")}).value()),y=function(){var e=["Andale Mono","Arial","Arial Black","Arial Hebrew","Arial MT","Arial Narrow","Arial Rounded MT Bold","Arial Unicode MS","Bitstream Vera Sans Mono","Book Antiqua","Bookman Old Style","Calibri","Cambria","Cambria Math","Century","Century Gothic","Century Schoolbook","Comic Sans","Comic Sans MS","Consolas","Courier","Courier New","Garamond","Geneva","Georgia","Helvetica","Helvetica Neue","Impact","Lucida Bright","Lucida Calligraphy","Lucida Console","Lucida Fax","LUCIDA GRANDE","Lucida Handwriting","Lucida Sans","Lucida Sans Typewriter","Lucida Sans Unicode","Microsoft Sans Serif","Monaco","Monotype Corsiva","MS Gothic","MS Outlook","MS PGothic","MS Reference Sans Serif","MS Sans Serif","MS Serif","MYRIAD","MYRIAD PRO","Palatino","Palatino Linotype","Segoe Print","Segoe Script","Segoe UI","Segoe UI Light","Segoe UI Semibold","Segoe UI Symbol","Tahoma","Times","Times New Roman","Times New Roman PS","Trebuchet MS","Verdana","Wingdings","Wingdings 2","Wingdings 3"],t=["monospace","sans-serif","serif"],i=function(e){var t=document.createElement("span");t.style.fontFamily=e,t.style.fontSize="72px";var i=document.createTextNode("mmmmmmmmmmlli");return t.appendChild(i),t},n=a.default.map(t,i),r=a.default.map(e,function(e){return a.default.map(t,function(t){return i(e+","+t)})}),s=document.createElement("div");s.style.position="absolute",s.style.visibility="hidden",a.default.forEach(a.default.flatten(r).concat(n),function(e){s.appendChild(e)});var o=document.getElementsByTagName("body")[0];o.appendChild(s);var l=function(e){var t=e.offsetHeight;return[e.offsetWidth,t]},u=a.default.map(n,l),c=a.default.map(r,function(e){return a.default.map(e,l)});return o.removeChild(s),a.default.filter(e,function(e,i){var n,r,a;for(a=0;a<t.length;a+=1)if(n=c[i][a],r=u[a],n[0]!==r[0]||n[1]!==r[1])return!0;return!1})}(),_={pdc:p.length,pds:p.toString(),npc:g.length,nps:g.toString(),mtc:m.length,mts:m.toString(),fnc:y.length,fns:y.toString(),gpc:v.length,gps:v.toString(),tzo:(o=new Date,l=o.getTimezoneOffset(),o.setDate(1),o.setMonth(1),r=o.getTimezoneOffset(),o.setMonth(6),(s=r-o.getTimezoneOffset())?l+"DST"+s:l.toString()),uas:navigator.userAgent,lan:[navigator.language,navigator.userLanguage,navigator.systemLanguage,navigator.languages].join("|"),cpu:[navigator.platform,navigator.hardwareConcurrency].join("|"),mpi:Math.PI.toString()};return d=[screen.height===screen.availHeight,screen.height===window.innerHeight,0===h().length,0===(new Date).getTimezoneOffset()],a.default.filter(d,a.default.identity).length/d.length<.75&&(i=function(){var e=document.createElement("canvas");if(e.getContext&&e.getContext("2d")){var t=e.getContext("2d"),i="a1b2,#3<!xy> 456.Z";return t.textBaseline="top",t.font='14px "Arial"',t.textBaseline="alphabetic",t.fillStyle="#f60",t.fillRect(125,1,62,20),t.fillStyle="#069",t.fillText(i,2,15),t.fillStyle="rgba(102, 204, 0, 0.7)",t.fillText(i,4,17),e.toDataURL()}}(),_.cnv=[i.substr(0,32),i.length,f(i)].join("|"),_.res=(u=[screen.availWidth,screen.availHeight],"object"===(void 0===(c=screen.orientation||screen.mozOrientation||screen.msOrientation)?"undefined":n(c))&&(c=c.type),c?c.match("portrait")&&u.reverse():u.sort().reverse(),u.push(screen.colorDepth),u.join("x"))),_}),u=a.default.memoize(function(){var e=l();return f(a.default.chain(["pds","nps","mts","fns","gps","tzo","uas","lan","cpu","cnv","mpi","res"]).map(function(t){return e[t]}).map(function(e){return void 0===e?"":e}).map(function(e){return e.toString()}).value().join("\n"))});window.log_device=function(){var e=function(){var e,t,i;if(window.koala_device_endpoint){try{t=u()}catch(e){t=null}e={partition_key:(0,o.default)(),device_id2:t,visitor_id:(0,o.default)(),ip_address:window.current_ip,user_uid:(i=c.default,void 0===i||null===i||""===i||"object"!==(void 0===i?"undefined":n(i))?null:"function"==typeof i.get?i.get("id")||null:i.id&&i.id||null)},window.enabled_features&&window.enabled_features.device_components&&(e.components=l()),r.default.ajax({type:"POST",url:window.koala_device_endpoint,data:JSON.stringify(e),contentType:"text/plain; charset=UTF-8"})}};a.default.defer(function(){e()})}},R4hA:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.json=JSON.stringify(e),e}},RIos:function(e,t,i){var n=i("l/Rs");i("l/Rs");!function(e,t){function i(e){return parseInt(e,10)||0}function n(e){return!isNaN(parseInt(e,10))}e.widget("ui.resizable",e.ui.mouse,{version:"1.10.3",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_create:function(){var t,i,n,r,a=this,s=this.options;if(this.element.addClass("ui-resizable"),e.extend(this,{_aspectRatio:!!s.aspectRatio,aspectRatio:s.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:s.helper||s.ghost||s.animate?s.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(e("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.data("ui-resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=s.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),t=this.handles.split(","),this.handles={},i=0;i<t.length;i++)n=e.trim(t[i]),(r=e("<div class='ui-resizable-handle "+("ui-resizable-"+n)+"'></div>")).css({zIndex:s.zIndex}),"se"===n&&r.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[n]=".ui-resizable-"+n,this.element.append(r);this._renderAxis=function(t){var i,n,r,a;for(i in t=t||this.element,this.handles)this.handles[i].constructor===String&&(this.handles[i]=e(this.handles[i],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(n=e(this.handles[i],this.element),a=/sw|ne|nw|se|n|s/.test(i)?n.outerHeight():n.outerWidth(),r=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join(""),t.css(r,a),this._proportionallyResize()),e(this.handles[i]).length},this._renderAxis(this.element),this._handles=e(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){a.resizing||(this.className&&(r=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),a.axis=r&&r[1]?r[1]:"se")}),s.autoHide&&(this._handles.hide(),e(this.element).addClass("ui-resizable-autohide").mouseenter(function(){s.disabled||(e(this).removeClass("ui-resizable-autohide"),a._handles.show())}).mouseleave(function(){s.disabled||a.resizing||(e(this).addClass("ui-resizable-autohide"),a._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var t,i=function(t){e(t).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(i(this.element),t=this.element,this.originalElement.css({position:t.css("position"),width:t.outerWidth(),height:t.outerHeight(),top:t.css("top"),left:t.css("left")}).insertAfter(t),t.remove()),this.originalElement.css("resize",this.originalResizeStyle),i(this.originalElement),this},_mouseCapture:function(t){var i,n,r=!1;for(i in this.handles)((n=e(this.handles[i])[0])===t.target||e.contains(n,t.target))&&(r=!0);return!this.options.disabled&&r},_mouseStart:function(t){var n,r,a,s=this.options,o=this.element.position(),l=this.element;return this.resizing=!0,/absolute/.test(l.css("position"))?l.css({position:"absolute",top:l.css("top"),left:l.css("left")}):l.is(".ui-draggable")&&l.css({position:"absolute",top:o.top,left:o.left}),this._renderProxy(),n=i(this.helper.css("left")),r=i(this.helper.css("top")),s.containment&&(n+=e(s.containment).scrollLeft()||0,r+=e(s.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:n,top:r},this.size=this._helper?{width:l.outerWidth(),height:l.outerHeight()}:{width:l.width(),height:l.height()},this.originalSize=this._helper?{width:l.outerWidth(),height:l.outerHeight()}:{width:l.width(),height:l.height()},this.originalPosition={left:n,top:r},this.sizeDiff={width:l.outerWidth()-l.width(),height:l.outerHeight()-l.height()},this.originalMousePosition={left:t.pageX,top:t.pageY},this.aspectRatio="number"==typeof s.aspectRatio?s.aspectRatio:this.originalSize.width/this.originalSize.height||1,a=e(".ui-resizable-"+this.axis).css("cursor"),e("body").css("cursor","auto"===a?this.axis+"-resize":a),l.addClass("ui-resizable-resizing"),this._propagate("start",t),!0},_mouseDrag:function(t){var i,n=this.helper,r={},a=this.originalMousePosition,s=this.axis,o=this.position.top,l=this.position.left,u=this.size.width,c=this.size.height,d=t.pageX-a.left||0,h=t.pageY-a.top||0,f=this._change[s];return!!f&&(i=f.apply(this,[t,d,h]),this._updateVirtualBoundaries(t.shiftKey),(this._aspectRatio||t.shiftKey)&&(i=this._updateRatio(i,t)),i=this._respectSize(i,t),this._updateCache(i),this._propagate("resize",t),this.position.top!==o&&(r.top=this.position.top+"px"),this.position.left!==l&&(r.left=this.position.left+"px"),this.size.width!==u&&(r.width=this.size.width+"px"),this.size.height!==c&&(r.height=this.size.height+"px"),n.css(r),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),e.isEmptyObject(r)||this._trigger("resize",t,this.ui()),!1)},_mouseStop:function(t){this.resizing=!1;var i,n,r,a,s,o,l,u=this.options;return this._helper&&(r=(n=(i=this._proportionallyResizeElements).length&&/textarea/i.test(i[0].nodeName))&&e.ui.hasScroll(i[0],"left")?0:this.sizeDiff.height,a=n?0:this.sizeDiff.width,s={width:this.helper.width()-a,height:this.helper.height()-r},o=parseInt(this.element.css("left"),10)+(this.position.left-this.originalPosition.left)||null,l=parseInt(this.element.css("top"),10)+(this.position.top-this.originalPosition.top)||null,u.animate||this.element.css(e.extend(s,{top:l,left:o})),this.helper.height(this.size.height),this.helper.width(this.size.width),this._helper&&!u.animate&&this._proportionallyResize()),e("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(e){var t,i,r,a,s,o=this.options;s={minWidth:n(o.minWidth)?o.minWidth:0,maxWidth:n(o.maxWidth)?o.maxWidth:1/0,minHeight:n(o.minHeight)?o.minHeight:0,maxHeight:n(o.maxHeight)?o.maxHeight:1/0},(this._aspectRatio||e)&&(t=s.minHeight*this.aspectRatio,r=s.minWidth/this.aspectRatio,i=s.maxHeight*this.aspectRatio,a=s.maxWidth/this.aspectRatio,t>s.minWidth&&(s.minWidth=t),r>s.minHeight&&(s.minHeight=r),i<s.maxWidth&&(s.maxWidth=i),a<s.maxHeight&&(s.maxHeight=a)),this._vBoundaries=s},_updateCache:function(e){this.offset=this.helper.offset(),n(e.left)&&(this.position.left=e.left),n(e.top)&&(this.position.top=e.top),n(e.height)&&(this.size.height=e.height),n(e.width)&&(this.size.width=e.width)},_updateRatio:function(e){var t=this.position,i=this.size,r=this.axis;return n(e.height)?e.width=e.height*this.aspectRatio:n(e.width)&&(e.height=e.width/this.aspectRatio),"sw"===r&&(e.left=t.left+(i.width-e.width),e.top=null),"nw"===r&&(e.top=t.top+(i.height-e.height),e.left=t.left+(i.width-e.width)),e},_respectSize:function(e){var t=this._vBoundaries,i=this.axis,r=n(e.width)&&t.maxWidth&&t.maxWidth<e.width,a=n(e.height)&&t.maxHeight&&t.maxHeight<e.height,s=n(e.width)&&t.minWidth&&t.minWidth>e.width,o=n(e.height)&&t.minHeight&&t.minHeight>e.height,l=this.originalPosition.left+this.originalSize.width,u=this.position.top+this.size.height,c=/sw|nw|w/.test(i),d=/nw|ne|n/.test(i);return s&&(e.width=t.minWidth),o&&(e.height=t.minHeight),r&&(e.width=t.maxWidth),a&&(e.height=t.maxHeight),s&&c&&(e.left=l-t.minWidth),r&&c&&(e.left=l-t.maxWidth),o&&d&&(e.top=u-t.minHeight),a&&d&&(e.top=u-t.maxHeight),e.width||e.height||e.left||!e.top?e.width||e.height||e.top||!e.left||(e.left=null):e.top=null,e},_proportionallyResize:function(){if(this._proportionallyResizeElements.length){var e,t,i,n,r,a=this.helper||this.element;for(e=0;e<this._proportionallyResizeElements.length;e++){if(r=this._proportionallyResizeElements[e],!this.borderDif)for(this.borderDif=[],i=[r.css("borderTopWidth"),r.css("borderRightWidth"),r.css("borderBottomWidth"),r.css("borderLeftWidth")],n=[r.css("paddingTop"),r.css("paddingRight"),r.css("paddingBottom"),r.css("paddingLeft")],t=0;t<i.length;t++)this.borderDif[t]=(parseInt(i[t],10)||0)+(parseInt(n[t],10)||0);r.css({height:a.height()-this.borderDif[0]-this.borderDif[2]||0,width:a.width()-this.borderDif[1]-this.borderDif[3]||0})}}},_renderProxy:function(){var t=this.element,i=this.options;this.elementOffset=t.offset(),this._helper?(this.helper=this.helper||e("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++i.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(e,t){return{width:this.originalSize.width+t}},w:function(e,t){var i=this.originalSize;return{left:this.originalPosition.left+t,width:i.width-t}},n:function(e,t,i){var n=this.originalSize;return{top:this.originalPosition.top+i,height:n.height-i}},s:function(e,t,i){return{height:this.originalSize.height+i}},se:function(t,i,n){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,i,n]))},sw:function(t,i,n){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,i,n]))},ne:function(t,i,n){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,i,n]))},nw:function(t,i,n){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,i,n]))}},_propagate:function(t,i){e.ui.plugin.call(this,t,[i,this.ui()]),"resize"!==t&&this._trigger(t,i,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.ui.plugin.add("resizable","animate",{stop:function(t){var i=e(this).data("ui-resizable"),n=i.options,r=i._proportionallyResizeElements,a=r.length&&/textarea/i.test(r[0].nodeName),s=a&&e.ui.hasScroll(r[0],"left")?0:i.sizeDiff.height,o=a?0:i.sizeDiff.width,l={width:i.size.width-o,height:i.size.height-s},u=parseInt(i.element.css("left"),10)+(i.position.left-i.originalPosition.left)||null,c=parseInt(i.element.css("top"),10)+(i.position.top-i.originalPosition.top)||null;i.element.animate(e.extend(l,c&&u?{top:c,left:u}:{}),{duration:n.animateDuration,easing:n.animateEasing,step:function(){var n={width:parseInt(i.element.css("width"),10),height:parseInt(i.element.css("height"),10),top:parseInt(i.element.css("top"),10),left:parseInt(i.element.css("left"),10)};r&&r.length&&e(r[0]).css({width:n.width,height:n.height}),i._updateCache(n),i._propagate("resize",t)}})}}),e.ui.plugin.add("resizable","containment",{start:function(){var t,n,r,a,s,o,l,u=e(this).data("ui-resizable"),c=u.options,d=u.element,h=c.containment,f=h instanceof e?h.get(0):/parent/.test(h)?d.parent().get(0):h;f&&(u.containerElement=e(f),/document/.test(h)||h===document?(u.containerOffset={left:0,top:0},u.containerPosition={left:0,top:0},u.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight}):(t=e(f),n=[],e(["Top","Right","Left","Bottom"]).each(function(e,r){n[e]=i(t.css("padding"+r))}),u.containerOffset=t.offset(),u.containerPosition=t.position(),u.containerSize={height:t.innerHeight()-n[3],width:t.innerWidth()-n[1]},r=u.containerOffset,a=u.containerSize.height,s=u.containerSize.width,o=e.ui.hasScroll(f,"left")?f.scrollWidth:s,l=e.ui.hasScroll(f)?f.scrollHeight:a,u.parentData={element:f,left:r.left,top:r.top,width:o,height:l}))},resize:function(t){var i,n,r,a,s=e(this).data("ui-resizable"),o=s.options,l=s.containerOffset,u=s.position,c=s._aspectRatio||t.shiftKey,d={top:0,left:0},h=s.containerElement;h[0]!==document&&/static/.test(h.css("position"))&&(d=l),u.left<(s._helper?l.left:0)&&(s.size.width=s.size.width+(s._helper?s.position.left-l.left:s.position.left-d.left),c&&(s.size.height=s.size.width/s.aspectRatio),s.position.left=o.helper?l.left:0),u.top<(s._helper?l.top:0)&&(s.size.height=s.size.height+(s._helper?s.position.top-l.top:s.position.top),c&&(s.size.width=s.size.height*s.aspectRatio),s.position.top=s._helper?l.top:0),s.offset.left=s.parentData.left+s.position.left,s.offset.top=s.parentData.top+s.position.top,i=Math.abs((s._helper,s.offset.left-d.left+s.sizeDiff.width)),n=Math.abs((s._helper?s.offset.top-d.top:s.offset.top-l.top)+s.sizeDiff.height),r=s.containerElement.get(0)===s.element.parent().get(0),a=/relative|absolute/.test(s.containerElement.css("position")),r&&a&&(i-=s.parentData.left),i+s.size.width>=s.parentData.width&&(s.size.width=s.parentData.width-i,c&&(s.size.height=s.size.width/s.aspectRatio)),n+s.size.height>=s.parentData.height&&(s.size.height=s.parentData.height-n,c&&(s.size.width=s.size.height*s.aspectRatio))},stop:function(){var t=e(this).data("ui-resizable"),i=t.options,n=t.containerOffset,r=t.containerPosition,a=t.containerElement,s=e(t.helper),o=s.offset(),l=s.outerWidth()-t.sizeDiff.width,u=s.outerHeight()-t.sizeDiff.height;t._helper&&!i.animate&&/relative/.test(a.css("position"))&&e(this).css({left:o.left-r.left-n.left,width:l,height:u}),t._helper&&!i.animate&&/static/.test(a.css("position"))&&e(this).css({left:o.left-r.left-n.left,width:l,height:u})}}),e.ui.plugin.add("resizable","alsoResize",{start:function(){var t=e(this).data("ui-resizable").options,i=function(t){e(t).each(function(){var t=e(this);t.data("ui-resizable-alsoresize",{width:parseInt(t.width(),10),height:parseInt(t.height(),10),left:parseInt(t.css("left"),10),top:parseInt(t.css("top"),10)})})};"object"!=typeof t.alsoResize||t.alsoResize.parentNode?i(t.alsoResize):t.alsoResize.length?(t.alsoResize=t.alsoResize[0],i(t.alsoResize)):e.each(t.alsoResize,function(e){i(e)})},resize:function(t,i){var n=e(this).data("ui-resizable"),r=n.options,a=n.originalSize,s=n.originalPosition,o={height:n.size.height-a.height||0,width:n.size.width-a.width||0,top:n.position.top-s.top||0,left:n.position.left-s.left||0},l=function(t,n){e(t).each(function(){var t=e(this),r=e(this).data("ui-resizable-alsoresize"),a={},s=n&&n.length?n:t.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(s,function(e,t){var i=(r[t]||0)+(o[t]||0);i&&i>=0&&(a[t]=i||null)}),t.css(a)})};"object"!=typeof r.alsoResize||r.alsoResize.nodeType?l(r.alsoResize):e.each(r.alsoResize,function(e,t){l(e,t)})},stop:function(){e(this).removeData("resizable-alsoresize")}}),e.ui.plugin.add("resizable","ghost",{start:function(){var t=e(this).data("ui-resizable"),i=t.options,n=t.size;t.ghost=t.originalElement.clone(),t.ghost.css({opacity:.25,display:"block",position:"relative",height:n.height,width:n.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof i.ghost?i.ghost:""),t.ghost.appendTo(t.helper)},resize:function(){var t=e(this).data("ui-resizable");t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){var t=e(this).data("ui-resizable");t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(){var t=e(this).data("ui-resizable"),i=t.options,n=t.size,r=t.originalSize,a=t.originalPosition,s=t.axis,o="number"==typeof i.grid?[i.grid,i.grid]:i.grid,l=o[0]||1,u=o[1]||1,c=Math.round((n.width-r.width)/l)*l,d=Math.round((n.height-r.height)/u)*u,h=r.width+c,f=r.height+d,p=i.maxWidth&&i.maxWidth<h,g=i.maxHeight&&i.maxHeight<f,m=i.minWidth&&i.minWidth>h,v=i.minHeight&&i.minHeight>f;i.grid=o,m&&(h+=l),v&&(f+=u),p&&(h-=l),g&&(f-=u),/^(se|s|e)$/.test(s)?(t.size.width=h,t.size.height=f):/^(ne)$/.test(s)?(t.size.width=h,t.size.height=f,t.position.top=a.top-d):/^(sw)$/.test(s)?(t.size.width=h,t.size.height=f,t.position.left=a.left-c):(t.size.width=h,t.size.height=f,t.position.top=a.top-d,t.position.left=a.left-c)}})}(n)},RORv:function(e,t,i){"use strict";var n,r=i("wmCY"),a=(n=r)&&n.__esModule?n:{default:n};var s=i("l/Rs");i("l/Rs");!function(e){function t(t,i){this.$elem=t,this.xhr=!1,this.paused=i.paused||!1,this.options=e.extend({threshold:500,trigger_next:"scroll",load_next_after:!1,prepend_next:!1,dataType:"html",extra_params:{},$context:e(window),default_page:1,page_by:function(e){return void 0!==e?e+1:this.default_page},page_param:"page",url:!1},i),this.current_page=this.options.page_by(),this.bind_events()}e.fn.mobius=function(i){return i=i||{},e(this).each(function(){var n=e(this).data("mobius");n||(n=new t(e(this),i),e(this).data("mobius",n))})},e.extend(t.prototype,{bind_events:function(){var t=this;"string"==typeof this.options.trigger_next?(this.options.$context.on(this.options.trigger_next,function(){t.check_for_more()}),t.check_for_more()):this.options.trigger_next.jquery&&this.options.trigger_next.click(function(i){i.preventDefault(),e(this).addClass("loading_next"),t.load_next()})},clear_extra_params:function(){this.options.extra_params={}},add_param:function(e,t){this.options.extra_params[e]=t},set_extra_params:function(e){this.options.extra_params=e},pause:function(){this.paused=!0},play:function(){this.paused=!1},check_for_more:function(){this.paused||this.options.$context.scrollTop()+this.options.$context.height()-this.$elem.offset().top>this.$elem.get(0).scrollHeight-this.options.threshold&&this.load_next()},load_next:function(){this.load_page(this.options.page_by(this.current_page),this.options.load_next_after,!0)},load_page:function(t,i,n){var r=parseInt(t,10),s=this;isNaN(r)||(i&&i.length||(i=!1),this.xhr||(this.$elem.trigger("mobius:loading_page"),this.xhr=e.ajax({type:"get",dataType:this.options.dataType,url:this.build_paged_url(r),success:function(t){if(s.xhr=!1,"html"===s.options.dataType){var o=e("<div>"+t+"</div>").find(".mobius").children();if(!o.length)return void s.$elem.trigger("mobius:error",[a.default.t("library.mobius.No_mobius_found_in_page",{page:r})]);i?i.after(o):s.options.prepend_next?s.$elem.prepend(o):s.$elem.append(o),s.options.trigger_next.jquery&&s.options.trigger_next.removeClass("loading_next"),s.$elem.trigger("mobius:loaded_page",[r,o])}else s.$elem.trigger("mobius:loaded_page",[r,t]);!n&&i||(s.current_page=r)},error:function(){s.xhr=!1}})))},build_paged_url:function(t){var i=window.location.toString().replace(window.location.search,"").replace(window.location.hash,""),n=void 0===this.options.extra_params?"":"string"==typeof this.options.extra_params?this.options.extra_params:e.param(this.options.extra_params),r=/(.*)#$/;r.test(i)&&(i=r.exec(i)[1]),n&&(n="&"+n),this.options.url&&(i=this.options.url);var a=-1!==i.indexOf("?")?"&":"?";return i.toString()+a+this.options.page_param+"="+t+n}})}(s)},RZwK:function(e,t,i){"use strict";var n,r=i("l/Rs"),a=(n=r)&&n.__esModule?n:{default:n},s=i("vgZZ");(0,a.default)(function(){(0,a.default)(document).on("mouseover","li.menu-dropdown",function(){(0,a.default)(this).find(".menu-submenu").show()}),(0,a.default)(document).on("mouseout","li.menu-dropdown",function(){(0,a.default)(this).find(".menu-submenu").hide()}),(0,a.default)(document).on("click",".hit-list li",function(){var e=(0,a.default)(this).find("a.target");e.length&&(window.location=e.attr("href"))}),(0,a.default)(document).on("click",".js-feature-clear-all",function(){JSON.parse(this.dataset.cookies).forEach(s.destroy_cookie),window.location.reload()}),(0,a.default)(document).on("click",".js-feature-clear",function(){(0,s.destroy_cookie)(this.dataset.cookie),window.location.reload()}),(0,a.default)(document).on("click",".js-feature-toggle",function(){var e=new Date;e.setHours(e.getHours()+1),(0,s.write_cookie)(this.dataset.cookie,this.dataset.enabled,e),window.location.reload()})})},SNFf:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=n.default.extend({},e);return t.projects=t.projects.map(function(e){return e.map(function(e){return(0,r.default)(e)})}),t};var n=a(i("l/Rs")),r=a(i("TXOG"));function a(e){return e&&e.__esModule?e:{default:e}}},SzcX:function(e,t,i){"use strict";var n,r=i("6djF"),a=(n=r)&&n.__esModule?n:{default:n};var s=i("l/Rs");i("l/Rs");!function(e){function t(e,t){return a.default.pageX(e)-t.offset().left}e.fn.draggable_bar=function(i,n){return n||(n=i,i=null),this.each(function(){var r=e(this),a=null,s=0;r.on("mousedown touchstart",i,function(i){var n=e(i.target);a=i.target,s=t(i,n)}),r.on("mousedown touchstart mousemove touchmove",i,function(e){var i;a&&(i=t(e,r)/r.width())>0&&i<1&&n(i,a,s)}),e(document).on("mouseup touchend",function(){a=null})})}}(s)},TGXB:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s(i("l/Rs")),r=s(i("9VV1")),a=s(i("wmCY"));function s(e){return e&&e.__esModule?e:{default:e}}var o={get:function(e,t,i,r){return!i.hasClass("loading")&&(i.trigger("before_ksrjson",[i,r]),n.default.ajax({url:e,type:t||"GET",data:{format:"json"},dataType:"json",beforeSend:function(){i.addClass("loading")},success:function(e){o.parse_response(e,i)},complete:function(){i.removeClass("loading")}}),!1)},enable_form:function(e,t){e.on("submit",function(i){i.preventDefault(),e.trigger("ajaxForm:beforeSerialize"),n.default.ajax({url:e.attr("action"),type:e.attr("method"),data:e.serialize(),dataType:"json",beforeSend:function(){var i=e.find("input.confirmation");return e.is(".submitting")?((0,r.default)({error:a.default.t("library.ksr_json.Sorry_still_waiting_for_a_response_Please_try_refreshing_if")}),!1):!(i.length&&!i.prop("checked"))&&(t.addClass("loading"),void e.addClass("submitting"))},success:function(i){o.parse_response(i,t,e),t.trigger("ksr_json:afterSuccess")},error:function(i){o.parse_error(i,t,e),t.trigger("ksr_json:afterError")},complete:function(){t.removeClass("loading"),e.removeClass("submitting"),t.trigger("ksr_json:afterComplete")}})})},parse_response:function(e,t,i){var s,o,l,u={open:function(){(0,n.default)(i).trigger("jGrowl.open_"+e.status)},close:function(){(0,n.default)(i).trigger("jGrowl.close_"+e.status)}};switch(t.trigger("ksr_json:complete",e),n.default.isArray(e.flash)&&n.default.isArray(e.flash[0])?(0,r.default)(n.default.map(e.flash,function(e){return e[e.length-1]}),u):e.flash&&(0,r.default)(e.flash,u),parseInt(e.status,10)){case 200:case 406:s=(0,n.default)(e.data),e.data&&e.data.length>0&&(e.modal?((l=n.default.create_modal_dialog("",e.data)).data("modal_dialog").open(),"undefined"!=typeof FB&&FB.XFBML.parse(l.find(".modal_dialog_body")[0])):(s.find("a.cancel").length>0?(o=t.contents().detach(),s.find("a.cancel").one("click",function(){return t.contents().remove(),o.appendTo(t),!1})):t.contents().remove(),t.html(s),t.trigger("size_change"),"undefined"!=typeof FB&&FB.XFBML.parse(t[0]))),(0,n.default)('meta[name="csrf-token"]').attr("content",e.auth_token);break;case 204:t.remove();break;case 302:window.location.href=e.data.replace(/.json$/,"");break;case 303:t.load(e.data,function(){(0,n.default)('meta[name="csrf-token"]').attr("content",e.auth_token)});break;case 304:break;case 500:(0,r.default)({error:a.default.t("library.ksr_json.Sorry_something_went_wrong_Weve_been_notified_and_are_looking")});break;case 422:(0,r.default)({error:a.default.t("library.ksr_json.Sorry_something_went_wrong_Your_form_may_have_explired")})}return e},parse_error:function(e,t,i){o.parse_response({flash:{},status:e.status,data:e.body},t,i)}};t.default=o},TXOG:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=[];return e.creator_name=e.creator.name,e.percent_raised=e.pledged/e.goal*100,e.percent_raised_rounded=Math.round(e.percent_raised),e.percent_raised_to_100=Math.min(100,e.percent_raised),e.formatted_percent_raised=a.default.percent(e.percent_raised,{precision:0}),e.formatted_money=a.default.money(e.pledged,{precision:0,currency:e.currency}),e.formatted_goal=a.default.money(e.goal,{precision:0,currency:e.currency}),e.formatted_backers_count=a.default.format_number(e.backers_count,{precision:0}),e.count=e.backers_count,e.javascript_deadline=1e3*e.deadline,e.javascript_state_changed_at=1e3*e.state_changed_at,e.formatted_deadline=(0,s.format)("ll",e.javascript_deadline),e.formatted_state_changed_at=(0,s.format)("ll",e.javascript_state_changed_at),e.raw_score=e.recommendations_raw_score,e.weighted_score=e.recommendations_score,e.model_name=e.recommendations_model_name,e.project_state=e.state,e.section=e.ref||e.url_ref||"refined_search",function(e,t){t.blurb||(t.blurb=e.blurb);t.name||(t.name=e.name);t.feature_image_url=t.feature_image_attributes.image_urls.baseball_card,t["has_background_image?"]=!r.default.isEmpty(t.background_image_attributes),t["hide_background_black?"]=t["has_background_image?"]||t.background_color,t.border_color="",t.text_color&&(t.border_color="background-color: #"+t.text_color+";");t.text_color_style="",t.text_color&&(t.text_color_style="color: #"+t.text_color+";");t.background_color_style="",t.background_color&&(t.background_color_style="background-color: #"+t.background_color+";");t.card_style="",t.card_style+=t.text_color_style,t.card_style+=t.background_color_style,t.card_background_style="",t["has_background_image?"]&&(t.card_background_style="background-image: url("+t.background_image_attributes.image_urls.baseball_card+"); opacity: "+t.background_image_opacity+";")}(e,e.profile),n.default.each(["live","successful","canceled","failed"],function(){var t=String(this);e[t+"?"]=e.state===t}),e.url_ref?e.url_with_ref=(0,u.default)(e.urls.web.project).setSearch("ref",e.url_ref).toString():e.url_with_ref=e.urls.web.project,e["live_or_successful?"]="live"===e.state||"successful"===e.state,e["video?"]=null!==e.video&&void 0!==e.video,e["potd_today?"]=(0,l.default)(1e3*e.potd_at,new Date),e["staff_pick?"]=e.staff_pick,e["friends_backing?"]=e.friends&&e.friends.length>0,e["friends_backing?"]&&(e.truncated_friends=e.friends.slice(0,2),(t=r.default.map(e.truncated_friends,function(e){return"<strong>"+r.default.escape(e.name.split(" ")[0])+"</strong>"})).length<e.friends.length&&t.push("<strong>"+o.default.t("presenters.projects.baseball_card_tall.amount_more",{count:e.friends.length-t.length})+"</strong>"),e.escaped_sentence=o.default.t("presenters.projects.baseball_card_tall.friends_are_backers",{friends:a.default.to_sentence(t),count:t.length})),e.json=JSON.stringify(e),e.location_json=JSON.stringify(e.location),e.baseball_card_size||(e.baseball_card_size="tall"),e};var n=c(i("l/Rs")),r=c(i("shXp")),a=c(i("L3hI")),s=i("kVy0"),o=c(i("wmCY")),l=c(i("f4ga")),u=c(i("hBlz"));function c(e){return e&&e.__esModule?e:{default:e}}},Tqsz:function(e,t,i){"use strict";i("lX5T");var n=i("l/Rs");i("l/Rs");!function(e){function t(t){this.$container=e(t),this.embed()}e.fn.sound_player=function(){return e(this).each(function(){var i=e(this).data("ksr_video");i||(i=new t(e(this)),e(this).data("sound_player",i))})},e.extend(t.prototype,{embed:function(t){var i="v"+parseInt(1e8*Math.random(),10),n=this;this.$container.find("span").attr("id",i),swfobject.embedSWF("https://d3mlfyygrfdi2i.cloudfront.net/321f/kickplayer.swf",i,this.$container.width(),this.$container.height(),"9.0.115","https://d3mlfyygrfdi2i.cloudfront.net/7b65/expressInstall.swf",{displayheight:this.$container.height(),file:encodeURI(this.$container.attr("data-file")),backcolor:"000000",screencolor:"000000",controlbar:"bottom","controlbar.idlehide":"false",autostart:t,audioonly:!0,skin:"https://d3mlfyygrfdi2i.cloudfront.net/cc3a/kickskin.swf"},{allowscriptaccess:"always",wmode:"opaque",menu:"false"},{id:"sound_player_"+i,class:"ksr_player",name:"sound_player_"+i},function(i){if(i.success)n.jwplayer=jwplayer(i.ref);else{var r=e("<audio />",{src:n.$container.attr("data-file"),controls:!0,autoplay:t});n.$container.html(r),n.$audio=r}}),this.initialized=!0}})}(n)},UBnO:function(e,t,i){"use strict";var n=s(i("shXp")),r=s(i("9VV1")),a=s(i("wmCY"));function s(e){return e&&e.__esModule?e:{default:e}}i("uVjx"),i("+fgJ"),i("4C6Z");i("l/Rs");var o=i("l/Rs"),l=function(e,t){var i=this;this.options=o.extend({},this.default_options,t),Object.keys(this.constructor.decorator).forEach(function(e){var n=[i.constructor.decorator[e]];"function"==typeof t[e]&&n.push(t[e]),i.options[e]=function(){for(var e=0;e<n.length;e+=1)n[e].apply(i,arguments)}}),this.$input=e,this.$form=e.closest("form"),this.$container=e.closest(".js-asset-upload"),this.uploading_files=[]};l.prototype.raise=function(e){this.$input.trigger("error"),this.$form.trigger("ksr_file_upload:reset"),(0,r.default)({error:e}),this.$container.removeClass("uploading")},l.prototype.default_options={type:"POST",dataType:"text",mimeTypes:[],paramsUrl:null},l.prototype.identifier_for_file=function(e){return e.name+e.size+e.type+e.lastModified},(l.decorator={}).add=function(e,t){var i=this,r=t.files[0],s=r.name.replace(/\s+/g,"_"),l=this.identifier_for_file(r);if(this.options.mimeTypes&&this.options.mimeTypes.length>0&&this.options.mimeTypes.indexOf(r.type)<0)return this.raise(a.default.t("library.adhoc_fileuploader.This_is_not_a_valid_file_type")),!1;this.options.paramsUrl?o.ajax({url:this.options.paramsUrl,type:"GET",data:{filename:s,filetype:r.type},success:function(e){t.paramName="file",t.formData=n.default.map(e.params,function(e,t){return{name:t,value:e}}),t.submit(),i.uploading_files.push(l)},error:function(){i.raise(a.default.t("library.adhoc_fileuploader.Theres_something_wrong_with_the_filename_Please",{file_name:r.name}))}}):(t.submit(),this.uploading_files.push(l))},l.decorator.done=function(e,t){var i=t.files[0],n=this.identifier_for_file(i);this.uploading_files=this.uploading_files.filter(function(e){return e!==n}),this.uploading_files.length||(this.$container.removeClass("uploading"),window.onbeforeunload=this.previous_onbeforeunload)},l.decorator.submit=function(){this.$container.addClass("uploading"),this.previous_onbeforeunload=window.onbeforeunload;var e=this;window.onbeforeunload=function(){if(e.$container.hasClass("uploading"))return a.default.t("library.adhoc_fileuploader.Your_upload_has_not_completed_yet_Click_Stay")}},l.decorator.progress=function(e,t){var i=this.$container.find(".progress"),n=i.filter(".tmpl");if(n.length){var r=t.formData[2].value.replace(/[^\w-_+]/g,"_");(i=this.$container.find("."+r)).length||(i=n.clone().addClass(r).removeClass("tmpl"),o(".progress:last").after(i))}var s=parseInt(t.loaded/t.total*100,10);i.find(".bar").css("width",s+"%"),i.find(".percentage").text(s+"%"),100===s&&(i.addClass("finished"),i.find(".percentage").text(a.default.t("library.adhoc_fileuploader.Processing")))},l.decorator.fail=function(){this.raise(a.default.t("library.adhoc_fileuploader.There_was_an_error_with_this_file_Please_try_a_different"))},o.fn.adhoc_fileuploader=function(e){o(this).each(function(){var t=new l(o(this),e);o(this).fileupload(t.options)})}},WoYN:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(e.completed=!!e.backer_completed_at,e["is_"+e.status]=!0,e.formatted_deadline=(0,r.format)("ll",1e3*e.project.deadline),e.formatted_money=n.default.money(e.amount,{currency:e.project.currency}),e.formatted_status=a.default.t("presenters.backings.row.status."+e.display_status),e.project_state=l(e),e.reward){var t=e.reward.reward;if(e.formatted_reward=t.length>57?t.substring(0,57)+"…":t,e.reward.estimated_delivery_on){var i=1e3*e.reward.estimated_delivery_on;e.formatted_estimated_delivery_on=(0,r.format)("MMM YYYY",(0,s.toUTC)(i))}}return e.messages&&(e.formatted_messages_count=a.default.t("presenters.backings.row.messages_count",{count:e.messages.count,formatted_count:n.default.format_number(e.messages.count,{precision:0})}),e.formatted_messages_last_activity_at=(0,r.format)("ll",1e3*e.messages.last_activity_at)),e};var n=o(i("L3hI")),r=i("kVy0"),a=o(i("wmCY")),s=i("HZrJ");function o(e){return e&&e.__esModule?e:{default:e}}var l=function(e){switch(e.project.state){case"canceled":return a.default.t("presenters.backings.row.Canceled");case"failed":return a.default.t("presenters.backings.row.Unsuccessful");case"live":return a.default.t("presenters.backings.row.In_progress");case"successful":return a.default.t("presenters.backings.row.Successful");case"suspended":return a.default.t("presenters.backings.row.Suspended");default:return""}}},X6aU:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.json=JSON.stringify(e),e}},"Y0+b":function(e,t,i){"use strict";i("FD+P"),i("84+x"),i("b5hM"),i("Qijp"),i("ac+W"),i("zcvo"),i("2TxY");i("l/Rs"),i("l/Rs")},YBD5:function(e,t,i){"use strict";var n,r=i("l/Rs"),a=(n=r)&&n.__esModule?n:{default:n};i("Vh6Q"),i("wmCY"),i("8NzR"),i("aTdG"),i("ZVp/"),i("N/lE"),i("0ax2"),i("iPPX"),i("Et0E"),i("iQ9M"),i("QqbN"),i("9VV1"),i("yYdC"),i("RZwK"),i("4RZc"),i("9kaj"),i("asZU"),i("E5Nj"),i("2fYv"),i("yqLu"),i("3txR"),i("ofuh"),i("8bXp"),window.$=a.default},"YT+p":function(e,t,i){var n;n=function(){return function(e){var t={};function i(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/dist/",i(i.s=8)}([function(e,t,i){"use strict";i.d(t,"a",function(){return l}),i.d(t,"b",function(){return u});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function r(){}var a={trace:r,debug:r,log:r,warn:r,info:r,error:r},s=a;function o(e){for(var t=arguments.length,i=Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];i.forEach(function(t){s[t]=e[t]?e[t].bind(e):function(e){var t=self.console[e];return t?function(){for(var i=arguments.length,n=Array(i),r=0;r<i;r++)n[r]=arguments[r];n[0]&&(n[0]=function(e,t){return t="["+e+"] > "+t}(e,n[0])),t.apply(self.console,n)}:r}(t)})}var l=function(e){if(!0===e||"object"===(void 0===e?"undefined":n(e))){o(e,"debug","log","info","warn","error");try{s.log()}catch(e){s=a}}else s=a},u=a},function(e,t,i){"use strict";t.a={MEDIA_ATTACHING:"hlsMediaAttaching",MEDIA_ATTACHED:"hlsMediaAttached",MEDIA_DETACHING:"hlsMediaDetaching",MEDIA_DETACHED:"hlsMediaDetached",BUFFER_RESET:"hlsBufferReset",BUFFER_CODECS:"hlsBufferCodecs",BUFFER_CREATED:"hlsBufferCreated",BUFFER_APPENDING:"hlsBufferAppending",BUFFER_APPENDED:"hlsBufferAppended",BUFFER_EOS:"hlsBufferEos",BUFFER_FLUSHING:"hlsBufferFlushing",BUFFER_FLUSHED:"hlsBufferFlushed",MANIFEST_LOADING:"hlsManifestLoading",MANIFEST_LOADED:"hlsManifestLoaded",MANIFEST_PARSED:"hlsManifestParsed",LEVEL_SWITCH:"hlsLevelSwitch",LEVEL_SWITCHING:"hlsLevelSwitching",LEVEL_SWITCHED:"hlsLevelSwitched",LEVEL_LOADING:"hlsLevelLoading",LEVEL_LOADED:"hlsLevelLoaded",LEVEL_UPDATED:"hlsLevelUpdated",LEVEL_PTS_UPDATED:"hlsLevelPtsUpdated",AUDIO_TRACKS_UPDATED:"hlsAudioTracksUpdated",AUDIO_TRACK_SWITCH:"hlsAudioTrackSwitch",AUDIO_TRACK_SWITCHING:"hlsAudioTrackSwitching",AUDIO_TRACK_SWITCHED:"hlsAudioTrackSwitched",AUDIO_TRACK_LOADING:"hlsAudioTrackLoading",AUDIO_TRACK_LOADED:"hlsAudioTrackLoaded",SUBTITLE_TRACKS_UPDATED:"hlsSubtitleTracksUpdated",SUBTITLE_TRACK_SWITCH:"hlsSubtitleTrackSwitch",SUBTITLE_TRACK_LOADING:"hlsSubtitleTrackLoading",SUBTITLE_TRACK_LOADED:"hlsSubtitleTrackLoaded",SUBTITLE_FRAG_PROCESSED:"hlsSubtitleFragProcessed",INIT_PTS_FOUND:"hlsInitPtsFound",FRAG_LOADING:"hlsFragLoading",FRAG_LOAD_PROGRESS:"hlsFragLoadProgress",FRAG_LOAD_EMERGENCY_ABORTED:"hlsFragLoadEmergencyAborted",FRAG_LOADED:"hlsFragLoaded",FRAG_DECRYPTED:"hlsFragDecrypted",FRAG_PARSING_INIT_SEGMENT:"hlsFragParsingInitSegment",FRAG_PARSING_USERDATA:"hlsFragParsingUserdata",FRAG_PARSING_METADATA:"hlsFragParsingMetadata",FRAG_PARSING_DATA:"hlsFragParsingData",FRAG_PARSED:"hlsFragParsed",FRAG_BUFFERED:"hlsFragBuffered",FRAG_CHANGED:"hlsFragChanged",FPS_DROP:"hlsFpsDrop",FPS_DROP_LEVEL_CAPPING:"hlsFpsDropLevelCapping",ERROR:"hlsError",DESTROYING:"hlsDestroying",KEY_LOADING:"hlsKeyLoading",KEY_LOADED:"hlsKeyLoaded",STREAM_STATE_TRANSITION:"hlsStreamStateTransition"}},function(e,t,i){"use strict";i.d(t,"b",function(){return n}),i.d(t,"a",function(){return r});var n={NETWORK_ERROR:"networkError",MEDIA_ERROR:"mediaError",MUX_ERROR:"muxError",OTHER_ERROR:"otherError"},r={MANIFEST_LOAD_ERROR:"manifestLoadError",MANIFEST_LOAD_TIMEOUT:"manifestLoadTimeOut",MANIFEST_PARSING_ERROR:"manifestParsingError",MANIFEST_INCOMPATIBLE_CODECS_ERROR:"manifestIncompatibleCodecsError",LEVEL_LOAD_ERROR:"levelLoadError",LEVEL_LOAD_TIMEOUT:"levelLoadTimeOut",LEVEL_SWITCH_ERROR:"levelSwitchError",AUDIO_TRACK_LOAD_ERROR:"audioTrackLoadError",AUDIO_TRACK_LOAD_TIMEOUT:"audioTrackLoadTimeOut",FRAG_LOAD_ERROR:"fragLoadError",FRAG_LOOP_LOADING_ERROR:"fragLoopLoadingError",FRAG_LOAD_TIMEOUT:"fragLoadTimeOut",FRAG_DECRYPT_ERROR:"fragDecryptError",FRAG_PARSING_ERROR:"fragParsingError",REMUX_ALLOC_ERROR:"remuxAllocError",KEY_LOAD_ERROR:"keyLoadError",KEY_LOAD_TIMEOUT:"keyLoadTimeOut",BUFFER_ADD_CODEC_ERROR:"bufferAddCodecError",BUFFER_APPEND_ERROR:"bufferAppendError",BUFFER_APPENDING_ERROR:"bufferAppendingError",BUFFER_STALLED_ERROR:"bufferStalledError",BUFFER_FULL_ERROR:"bufferFullError",BUFFER_SEEK_OVER_HOLE:"bufferSeekOverHole",BUFFER_NUDGE_ON_STALL:"bufferNudgeOnStall",INTERNAL_EXCEPTION:"internalException"}},function(e,t,i){"use strict";i.d(t,"b",function(){return r});var n=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return e.isHeader=function(e,t){return t+10<=e.length&&73===e[t]&&68===e[t+1]&&51===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128},e.isFooter=function(e,t){return t+10<=e.length&&51===e[t]&&68===e[t+1]&&73===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128},e.getID3Data=function(t,i){for(var n=i,r=0;e.isHeader(t,i);){r+=10,r+=e._readSize(t,i+6),e.isFooter(t,i+10)&&(r+=10),i+=r}if(r>0)return t.subarray(n,n+r)},e._readSize=function(e,t){var i=0;return i=(127&e[t])<<21,i|=(127&e[t+1])<<14,i|=(127&e[t+2])<<7,i|=127&e[t+3]},e.getTimeStamp=function(t){for(var i=e.getID3Frames(t),n=0;n<i.length;n++){var r=i[n];if(e.isTimeStampFrame(r))return e._readTimeStamp(r)}},e.isTimeStampFrame=function(e){return e&&"PRIV"===e.key&&"com.apple.streaming.transportStreamTimestamp"===e.info},e._getFrameData=function(t){var i=String.fromCharCode(t[0],t[1],t[2],t[3]),n=e._readSize(t,4);return{type:i,size:n,data:t.subarray(10,10+n)}},e.getID3Frames=function(t){for(var i=0,n=[];e.isHeader(t,i);){for(var r=e._readSize(t,i+6),a=(i+=10)+r;i+8<a;){var s=e._getFrameData(t.subarray(i)),o=e._decodeFrame(s);o&&n.push(o),i+=s.size+10}e.isFooter(t,i)&&(i+=10)}return n},e._decodeFrame=function(t){return"PRIV"===t.type?e._decodePrivFrame(t):"T"===t.type[0]?e._decodeTextFrame(t):"W"===t.type[0]?e._decodeURLFrame(t):void 0},e._readTimeStamp=function(e){if(8===e.data.byteLength){var t=new Uint8Array(e.data),i=1&t[3],n=(t[4]<<23)+(t[5]<<15)+(t[6]<<7)+t[7];return n/=45,i&&(n+=47721858.84),Math.round(n)}},e._decodePrivFrame=function(t){if(!(t.size<2)){var i=e._utf8ArrayToStr(t.data,!0),n=new Uint8Array(t.data.subarray(i.length+1));return{key:t.type,info:i,data:n.buffer}}},e._decodeTextFrame=function(t){if(!(t.size<2)){if("TXXX"===t.type){var i=1,n=e._utf8ArrayToStr(t.data.subarray(i));i+=n.length+1;var r=e._utf8ArrayToStr(t.data.subarray(i));return{key:t.type,info:n,data:r}}var a=e._utf8ArrayToStr(t.data.subarray(1));return{key:t.type,data:a}}},e._decodeURLFrame=function(t){if("WXXX"===t.type){if(t.size<2)return;var i=1,n=e._utf8ArrayToStr(t.data.subarray(i));i+=n.length+1;var r=e._utf8ArrayToStr(t.data.subarray(i));return{key:t.type,info:n,data:r}}var a=e._utf8ArrayToStr(t.data);return{key:t.type,data:a}},e._utf8ArrayToStr=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=e.length,n=void 0,r=void 0,a=void 0,s="",o=0;o<i;){if(0===(n=e[o++])&&t)return s;if(0!==n&&3!==n)switch(n>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:s+=String.fromCharCode(n);break;case 12:case 13:r=e[o++],s+=String.fromCharCode((31&n)<<6|63&r);break;case 14:r=e[o++],a=e[o++],s+=String.fromCharCode((15&n)<<12|(63&r)<<6|(63&a)<<0)}}return s},e}(),r=n._utf8ArrayToStr;t.a=n},function(e,t,i){"use strict";var n=function(){function e(t,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.subtle=t,this.aesIV=i}return e.prototype.decrypt=function(e,t){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},t,e)},e}();var r=function(){function e(t,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.subtle=t,this.key=i}return e.prototype.expandKey=function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])},e}();var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.initTable()}return e.prototype.uint8ArrayToUint32Array_=function(e){for(var t=new DataView(e),i=new Uint32Array(4),n=0;n<4;n++)i[n]=t.getUint32(4*n);return i},e.prototype.initTable=function(){var e=this.sBox,t=this.invSBox,i=this.subMix,n=i[0],r=i[1],a=i[2],s=i[3],o=this.invSubMix,l=o[0],u=o[1],c=o[2],d=o[3],h=new Uint32Array(256),f=0,p=0,g=0;for(g=0;g<256;g++)h[g]=g<128?g<<1:g<<1^283;for(g=0;g<256;g++){var m=p^p<<1^p<<2^p<<3^p<<4;m=m>>>8^255&m^99,e[f]=m,t[m]=f;var v=h[f],y=h[v],_=h[y],b=257*h[m]^16843008*m;n[f]=b<<24|b>>>8,r[f]=b<<16|b>>>16,a[f]=b<<8|b>>>24,s[f]=b,b=16843009*_^65537*y^257*v^16843008*f,l[m]=b<<24|b>>>8,u[m]=b<<16|b>>>16,c[m]=b<<8|b>>>24,d[m]=b,f?(f=v^h[h[h[_^v]]],p^=h[h[p]]):f=p=1}},e.prototype.expandKey=function(e){for(var t=this.uint8ArrayToUint32Array_(e),i=!0,n=0;n<t.length&&i;)i=t[n]===this.key[n],n++;if(!i){this.key=t;var r=this.keySize=t.length;if(4!==r&&6!==r&&8!==r)throw new Error("Invalid aes key size="+r);var a=this.ksRows=4*(r+6+1),s=void 0,o=void 0,l=this.keySchedule=new Uint32Array(a),u=this.invKeySchedule=new Uint32Array(a),c=this.sBox,d=this.rcon,h=this.invSubMix,f=h[0],p=h[1],g=h[2],m=h[3],v=void 0,y=void 0;for(s=0;s<a;s++)s<r?v=l[s]=t[s]:(y=v,s%r==0?(y=c[(y=y<<8|y>>>24)>>>24]<<24|c[y>>>16&255]<<16|c[y>>>8&255]<<8|c[255&y],y^=d[s/r|0]<<24):r>6&&s%r==4&&(y=c[y>>>24]<<24|c[y>>>16&255]<<16|c[y>>>8&255]<<8|c[255&y]),l[s]=v=(l[s-r]^y)>>>0);for(o=0;o<a;o++)s=a-o,y=3&o?l[s]:l[s-4],u[o]=o<4||s<=4?y:f[c[y>>>24]]^p[c[y>>>16&255]]^g[c[y>>>8&255]]^m[c[255&y]],u[o]=u[o]>>>0}},e.prototype.networkToHostOrderSwap=function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24},e.prototype.decrypt=function(e,t,i){for(var n,r,a=this.keySize+6,s=this.invKeySchedule,o=this.invSBox,l=this.invSubMix,u=l[0],c=l[1],d=l[2],h=l[3],f=this.uint8ArrayToUint32Array_(i),p=f[0],g=f[1],m=f[2],v=f[3],y=new Int32Array(e),_=new Int32Array(y.length),b=void 0,w=void 0,E=void 0,A=void 0,T=void 0,S=void 0,R=void 0,D=void 0,x=void 0,C=void 0,P=void 0,I=void 0,k=this.networkToHostOrderSwap;t<y.length;){for(x=k(y[t]),C=k(y[t+1]),P=k(y[t+2]),I=k(y[t+3]),T=x^s[0],S=I^s[1],R=P^s[2],D=C^s[3],n=4,r=1;r<a;r++)b=u[T>>>24]^c[S>>16&255]^d[R>>8&255]^h[255&D]^s[n],w=u[S>>>24]^c[R>>16&255]^d[D>>8&255]^h[255&T]^s[n+1],E=u[R>>>24]^c[D>>16&255]^d[T>>8&255]^h[255&S]^s[n+2],A=u[D>>>24]^c[T>>16&255]^d[S>>8&255]^h[255&R]^s[n+3],T=b,S=w,R=E,D=A,n+=4;b=o[T>>>24]<<24^o[S>>16&255]<<16^o[R>>8&255]<<8^o[255&D]^s[n],w=o[S>>>24]<<24^o[R>>16&255]<<16^o[D>>8&255]<<8^o[255&T]^s[n+1],E=o[R>>>24]<<24^o[D>>16&255]<<16^o[T>>8&255]<<8^o[255&S]^s[n+2],A=o[D>>>24]<<24^o[T>>16&255]<<16^o[S>>8&255]<<8^o[255&R]^s[n+3],n+=3,_[t]=k(b^p),_[t+1]=k(A^g),_[t+2]=k(E^m),_[t+3]=k(w^v),p=x,g=C,m=P,v=I,t+=4}return _.buffer},e.prototype.destroy=function(){this.key=void 0,this.keySize=void 0,this.ksRows=void 0,this.sBox=void 0,this.invSBox=void 0,this.subMix=void 0,this.invSubMix=void 0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.rcon=void 0},e}(),s=i(2),o=i(0);var l=function(){function e(t,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.observer=t,this.config=i,this.logEnabled=!0;try{var n=crypto||self.crypto;this.subtle=n.subtle||n.webkitSubtle}catch(e){}this.disableWebCrypto=!this.subtle}return e.prototype.isSync=function(){return this.disableWebCrypto&&this.config.enableSoftwareAES},e.prototype.decrypt=function(e,t,i,s){var l=this;if(this.disableWebCrypto&&this.config.enableSoftwareAES){this.logEnabled&&(o.b.log("JS AES decrypt"),this.logEnabled=!1);var u=this.decryptor;u||(this.decryptor=u=new a),u.expandKey(t),s(u.decrypt(e,0,i))}else{this.logEnabled&&(o.b.log("WebCrypto AES decrypt"),this.logEnabled=!1);var c=this.subtle;this.key!==t&&(this.key=t,this.fastAesKey=new r(c,t)),this.fastAesKey.expandKey().then(function(r){new n(c,i).decrypt(e,r).catch(function(n){l.onWebCryptoError(n,e,t,i,s)}).then(function(e){s(e)})}).catch(function(n){l.onWebCryptoError(n,e,t,i,s)})}},e.prototype.onWebCryptoError=function(e,t,i,n,r){this.config.enableSoftwareAES?(o.b.log("WebCrypto Error, disable WebCrypto API"),this.disableWebCrypto=!0,this.logEnabled=!0,this.decrypt(t,i,n,r)):(o.b.error("decrypting error : "+e.message),this.observer.trigger(Event.ERROR,{type:s.b.MEDIA_ERROR,details:s.a.FRAG_DECRYPT_ERROR,fatal:!0,reason:e.message}))},e.prototype.destroy=function(){var e=this.decryptor;e&&(e.destroy(),this.decryptor=void 0)},e}();t.a=l},function(e,t){function i(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function n(e){return"function"==typeof e}function r(e){return"object"==typeof e&&null!==e}function a(e){return void 0===e}e.exports=i,i.EventEmitter=i,i.prototype._events=void 0,i.prototype._maxListeners=void 0,i.defaultMaxListeners=10,i.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},i.prototype.emit=function(e){var t,i,s,o,l,u;if(this._events||(this._events={}),"error"===e&&(!this._events.error||r(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var c=new Error('Uncaught, unspecified "error" event. ('+t+")");throw c.context=t,c}if(a(i=this._events[e]))return!1;if(n(i))switch(arguments.length){case 1:i.call(this);break;case 2:i.call(this,arguments[1]);break;case 3:i.call(this,arguments[1],arguments[2]);break;default:o=Array.prototype.slice.call(arguments,1),i.apply(this,o)}else if(r(i))for(o=Array.prototype.slice.call(arguments,1),s=(u=i.slice()).length,l=0;l<s;l++)u[l].apply(this,o);return!0},i.prototype.addListener=function(e,t){var s;if(!n(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,n(t.listener)?t.listener:t),this._events[e]?r(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,r(this._events[e])&&!this._events[e].warned&&(s=a(this._maxListeners)?i.defaultMaxListeners:this._maxListeners)&&s>0&&this._events[e].length>s&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},i.prototype.on=i.prototype.addListener,i.prototype.once=function(e,t){if(!n(t))throw TypeError("listener must be a function");var i=!1;function r(){this.removeListener(e,r),i||(i=!0,t.apply(this,arguments))}return r.listener=t,this.on(e,r),this},i.prototype.removeListener=function(e,t){var i,a,s,o;if(!n(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(s=(i=this._events[e]).length,a=-1,i===t||n(i.listener)&&i.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(r(i)){for(o=s;o-- >0;)if(i[o]===t||i[o].listener&&i[o].listener===t){a=o;break}if(a<0)return this;1===i.length?(i.length=0,delete this._events[e]):i.splice(a,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},i.prototype.removeAllListeners=function(e){var t,i;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n(i=this._events[e]))this.removeListener(e,i);else if(i)for(;i.length;)this.removeListener(e,i[i.length-1]);return delete this._events[e],this},i.prototype.listeners=function(e){return this._events&&this._events[e]?n(this._events[e])?[this._events[e]]:this._events[e].slice():[]},i.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(n(t))return 1;if(t)return t.length}return 0},i.listenerCount=function(e,t){return e.listenerCount(t)}},function(e,t,i){var n,r,a,s,o;n=/^((?:[^\/;?#]+:)?)(\/\/[^\/\;?#]*)?(.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,r=/^([^\/;?#]*)(.*)$/,a=/(?:\/|^)\.(?=\/)/g,s=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,o={buildAbsoluteURL:function(e,t,i){if(i=i||{},e=e.trim(),!(t=t.trim())){if(!i.alwaysNormalize)return e;var n=this.parseURL(e);if(!s)throw new Error("Error trying to parse base URL.");return n.path=o.normalizePath(n.path),o.buildURLFromParts(n)}var a=this.parseURL(t);if(!a)throw new Error("Error trying to parse relative URL.");if(a.scheme)return i.alwaysNormalize?(a.path=o.normalizePath(a.path),o.buildURLFromParts(a)):t;var s=this.parseURL(e);if(!s)throw new Error("Error trying to parse base URL.");if(!s.netLoc&&s.path&&"/"!==s.path[0]){var l=r.exec(s.path);s.netLoc=l[1],s.path=l[2]}s.netLoc&&!s.path&&(s.path="/");var u={scheme:s.scheme,netLoc:a.netLoc,path:null,params:a.params,query:a.query,fragment:a.fragment};if(!a.netLoc&&(u.netLoc=s.netLoc,"/"!==a.path[0]))if(a.path){var c=s.path,d=c.substring(0,c.lastIndexOf("/")+1)+a.path;u.path=o.normalizePath(d)}else u.path=s.path,a.params||(u.params=s.params,a.query||(u.query=s.query));return null===u.path&&(u.path=i.alwaysNormalize?o.normalizePath(a.path):a.path),o.buildURLFromParts(u)},parseURL:function(e){var t=n.exec(e);return t?{scheme:t[1]||"",netLoc:t[2]||"",path:t[3]||"",params:t[4]||"",query:t[5]||"",fragment:t[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(a,"");e.length!==(e=e.replace(s,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}},e.exports=o},function(e,t,i){"use strict";var n=i(1),r=i(2),a=i(4),s=i(0);function o(e,t){return 255===e[t]&&240==(246&e[t+1])}function l(e,t){return 1&e[t+1]?7:9}function u(e,t){return(3&e[t+3])<<11|e[t+4]<<3|(224&e[t+5])>>>5}function c(e,t){return!!(t+1<e.length&&o(e,t))}function d(e,t){if(t+1<e.length&&o(e,t)){var i=l(e,t);t+5<e.length&&(i=u(e,t));var n=t+i;if(n===e.length||n+1<e.length&&o(e,n))return!0}return!1}function h(e,t,i,n,a){if(!e.samplerate){var o=function(e,t,i,n){var a,o,l,u,c,d=navigator.userAgent.toLowerCase(),h=n,f=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];if(a=1+((192&t[i+2])>>>6),!((o=(60&t[i+2])>>>2)>f.length-1))return u=(1&t[i+2])<<2,u|=(192&t[i+3])>>>6,s.b.log("manifest codec:"+n+",ADTS data:type:"+a+",sampleingIndex:"+o+"["+f[o]+"Hz],channelConfig:"+u),/firefox/i.test(d)?o>=6?(a=5,c=new Array(4),l=o-3):(a=2,c=new Array(2),l=o):-1!==d.indexOf("android")?(a=2,c=new Array(2),l=o):(a=5,c=new Array(4),n&&(-1!==n.indexOf("mp4a.40.29")||-1!==n.indexOf("mp4a.40.5"))||!n&&o>=6?l=o-3:((n&&-1!==n.indexOf("mp4a.40.2")&&(o>=6&&1===u||/vivaldi/i.test(d))||!n&&1===u)&&(a=2,c=new Array(2)),l=o)),c[0]=a<<3,c[0]|=(14&o)>>1,c[1]|=(1&o)<<7,c[1]|=u<<3,5===a&&(c[1]|=(14&l)>>1,c[2]=(1&l)<<7,c[2]|=8,c[3]=0),{config:c,samplerate:f[o],channelCount:u,codec:"mp4a.40."+a,manifestCodec:h};e.trigger(Event.ERROR,{type:r.b.MEDIA_ERROR,details:r.a.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+o})}(t,i,n,a);e.config=o.config,e.samplerate=o.samplerate,e.channelCount=o.channelCount,e.codec=o.codec,e.manifestCodec=o.manifestCodec,s.b.log("parsed codec:"+e.codec+",rate:"+o.samplerate+",nb channel:"+o.channelCount)}}function f(e){return 9216e4/e}function p(e,t,i,n,r){var a=function(e,t,i,n,r){var a,s,o=e.length;if(a=l(e,t),s=u(e,t),(s-=a)>0&&t+a+s<=o)return{headerLength:a,frameLength:s,stamp:i+n*r}}(t,i,n,r,f(e.samplerate));if(a){var s=a.stamp,o=a.headerLength,c=a.frameLength,d={unit:t.subarray(i+o,i+o+c),pts:s,dts:s};return e.samples.push(d),e.len+=c,{sample:d,length:c+o}}}var g=i(3);var m=function(){function e(t,i,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.observer=t,this.config=n,this.remuxer=i}return e.prototype.resetInitSegment=function(e,t,i,n){this._audioTrack={container:"audio/adts",type:"audio",id:0,sequenceNumber:0,isAAC:!0,samples:[],len:0,manifestCodec:t,duration:n,inputTimeScale:9e4}},e.prototype.resetTimeStamp=function(){},e.probe=function(e){if(!e)return!1;for(var t=(g.a.getID3Data(e,0)||[]).length,i=e.length;t<i;t++)if(d(e,t))return s.b.log("ADTS sync word found !"),!0;return!1},e.prototype.append=function(e,t,i,n){for(var r=this._audioTrack,a=g.a.getID3Data(e,0)||[],o=g.a.getTimeStamp(a),l=o?90*o:9e4*t,u=0,d=l,f=e.length,m=a.length,v=[{pts:d,dts:d,data:a}];m<f-1;)if(c(e,m)&&m+5<f){h(r,this.observer,e,m,r.manifestCodec);var y=p(r,e,m,l,u);if(!y){s.b.log("Unable to parse AAC frame");break}m+=y.length,d=y.sample.pts,u++}else g.a.isHeader(e,m)?(a=g.a.getID3Data(e,m),v.push({pts:d,dts:d,data:a}),m+=a.length):m++;this.remuxer.remux(r,{samples:[]},{samples:v,inputTimeScale:9e4},{samples:[]},t,i,n)},e.prototype.destroy=function(){},e}();var v=Math.pow(2,32)-1,y=function(){function e(t,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.observer=t,this.remuxer=i}return e.prototype.resetTimeStamp=function(e){this.initPTS=e},e.prototype.resetInitSegment=function(t,i,r,a){if(t&&t.byteLength){var s=this.initData=e.parseInitSegment(t);null==i&&(i="mp4a.40.5"),null==r&&(r="avc1.42e01e");var o={};s.audio&&s.video?o.audiovideo={container:"video/mp4",codec:i+","+r,initSegment:a?t:null}:(s.audio&&(o.audio={container:"audio/mp4",codec:i,initSegment:a?t:null}),s.video&&(o.video={container:"video/mp4",codec:r,initSegment:a?t:null})),this.observer.trigger(n.a.FRAG_PARSING_INIT_SEGMENT,{tracks:o})}else i&&(this.audioCodec=i),r&&(this.videoCodec=r)},e.probe=function(t){return e.findBox({data:t,start:0,end:Math.min(t.length,16384)},["moof"]).length>0},e.bin2str=function(e){return String.fromCharCode.apply(null,e)},e.readUint32=function(e,t){e.data&&(t+=e.start,e=e.data);var i=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3];return i<0?4294967296+i:i},e.writeUint32=function(e,t,i){e.data&&(t+=e.start,e=e.data),e[t]=i>>24,e[t+1]=i>>16&255,e[t+2]=i>>8&255,e[t+3]=255&i},e.findBox=function(t,i){var n,r,a,s,o,l,u,c=[];if(t.data?(l=t.start,s=t.end,t=t.data):(l=0,s=t.byteLength),!i.length)return null;for(n=l;n<s;)r=e.readUint32(t,n),a=e.bin2str(t.subarray(n+4,n+8)),u=r>1?n+r:s,a===i[0]&&(1===i.length?c.push({data:t,start:n+8,end:u}):(o=e.findBox({data:t,start:n+8,end:u},i.slice(1))).length&&(c=c.concat(o))),n=u;return c},e.parseInitSegment=function(t){var i=[];return e.findBox(t,["moov","trak"]).forEach(function(t){var n=e.findBox(t,["tkhd"])[0];if(n){var r=n.data[n.start],a=0===r?12:20,o=e.readUint32(n,a),l=e.findBox(t,["mdia","mdhd"])[0];if(l){a=0===(r=l.data[l.start])?12:20;var u=e.readUint32(l,a),c=e.findBox(t,["mdia","hdlr"])[0];if(c){var d={soun:"audio",vide:"video"}[e.bin2str(c.data.subarray(c.start+8,c.start+12))];if(d){var h=e.findBox(t,["mdia","minf","stbl","stsd"]);if(h.length){h=h[0];var f=e.bin2str(h.data.subarray(h.start+12,h.start+16));s.b.log("MP4Demuxer:"+d+":"+f+" found")}i[o]={timescale:u,type:d},i[d]={timescale:u,id:o}}}}}}),i},e.getStartDTS=function(t,i){var n,r,a;return n=e.findBox(i,["moof","traf"]),r=[].concat.apply([],n.map(function(i){return e.findBox(i,["tfhd"]).map(function(n){var r,a;return r=e.readUint32(n,4),a=t[r].timescale||9e4,e.findBox(i,["tfdt"]).map(function(t){var i,n;return i=t.data[t.start],n=e.readUint32(t,4),1===i&&(n*=Math.pow(2,32),n+=e.readUint32(t,8)),n})[0]/a})})),a=Math.min.apply(null,r),isFinite(a)?a:0},e.offsetStartDTS=function(t,i,n){e.findBox(i,["moof","traf"]).map(function(i){return e.findBox(i,["tfhd"]).map(function(r){var a=e.readUint32(r,4),s=t[a].timescale||9e4;e.findBox(i,["tfdt"]).map(function(t){var i=t.data[t.start],r=e.readUint32(t,4);if(0===i)e.writeUint32(t,4,r-n*s);else{r*=Math.pow(2,32),r+=e.readUint32(t,8),r-=n*s,r=Math.max(r,0);var a=Math.floor(r/(v+1)),o=Math.floor(r%(v+1));e.writeUint32(t,4,a),e.writeUint32(t,8,o)}})})})},e.prototype.append=function(t,i,r,a){var s=this.initData;s||(this.resetInitSegment(t,this.audioCodec,this.videoCodec),s=this.initData);var o,l=this.initPTS;if(void 0===l){var u=e.getStartDTS(s,t);this.initPTS=l=u-i,this.observer.trigger(n.a.INIT_PTS_FOUND,{initPTS:l})}e.offsetStartDTS(s,t,l),o=e.getStartDTS(s,t),this.remuxer.remux(s.audio,s.video,null,null,o,r,a,t)},e.prototype.destroy=function(){},e}(),_={BitratesMap:[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],SamplingRateMap:[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],SamplesCoefficients:[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],BytesInSlot:[0,1,1,4],appendFrame:function(e,t,i,n,r){if(!(i+24>t.length)){var a=this.parseHeader(t,i);if(a&&i+a.frameLength<=t.length){var s=n+r*(9e4*a.samplesPerFrame/a.sampleRate),o={unit:t.subarray(i,i+a.frameLength),pts:s,dts:s};return e.config=[],e.channelCount=a.channelCount,e.samplerate=a.sampleRate,e.samples.push(o),e.len+=a.frameLength,{sample:o,length:a.frameLength}}}},parseHeader:function(e,t){var i=e[t+1]>>3&3,n=e[t+1]>>1&3,r=e[t+2]>>4&15,a=e[t+2]>>2&3,s=e[t+2]>>1&1;if(1!==i&&0!==r&&15!==r&&3!==a){var o=3===i?3-n:3===n?3:4,l=1e3*_.BitratesMap[14*o+r-1],u=3===i?0:2===i?1:2,c=_.SamplingRateMap[3*u+a],d=e[t+3]>>6==3?1:2,h=_.SamplesCoefficients[i][n],f=_.BytesInSlot[n],p=8*h*f;return{sampleRate:c,channelCount:d,frameLength:parseInt(h*l/c+s,10)*f,samplesPerFrame:p}}},isHeaderPattern:function(e,t){return 255===e[t]&&224==(224&e[t+1])&&0!=(6&e[t+1])},isHeader:function(e,t){return!!(t+1<e.length&&this.isHeaderPattern(e,t))},probe:function(e,t){if(t+1<e.length&&this.isHeaderPattern(e,t)){var i=this.parseHeader(e,t),n=4;i&&i.frameLength&&(n=i.frameLength);var r=t+n;if(r===e.length||r+1<e.length&&this.isHeaderPattern(e,r))return!0}return!1}},b=_;var w=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.data=t,this.bytesAvailable=t.byteLength,this.word=0,this.bitsAvailable=0}return e.prototype.loadWord=function(){var e=this.data,t=this.bytesAvailable,i=e.byteLength-t,n=new Uint8Array(4),r=Math.min(4,t);if(0===r)throw new Error("no bytes available");n.set(e.subarray(i,i+r)),this.word=new DataView(n.buffer).getUint32(0),this.bitsAvailable=8*r,this.bytesAvailable-=r},e.prototype.skipBits=function(e){var t;this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(e-=this.bitsAvailable,e-=(t=e>>3)>>3,this.bytesAvailable-=t,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)},e.prototype.readBits=function(e){var t=Math.min(this.bitsAvailable,e),i=this.word>>>32-t;return e>32&&s.b.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,this.bitsAvailable>0?this.word<<=t:this.bytesAvailable>0&&this.loadWord(),(t=e-t)>0&&this.bitsAvailable?i<<t|this.readBits(t):i},e.prototype.skipLZ=function(){var e;for(e=0;e<this.bitsAvailable;++e)if(0!=(this.word&2147483648>>>e))return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()},e.prototype.skipUEG=function(){this.skipBits(1+this.skipLZ())},e.prototype.skipEG=function(){this.skipBits(1+this.skipLZ())},e.prototype.readUEG=function(){var e=this.skipLZ();return this.readBits(e+1)-1},e.prototype.readEG=function(){var e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)},e.prototype.readBoolean=function(){return 1===this.readBits(1)},e.prototype.readUByte=function(){return this.readBits(8)},e.prototype.readUShort=function(){return this.readBits(16)},e.prototype.readUInt=function(){return this.readBits(32)},e.prototype.skipScalingList=function(e){var t,i=8,n=8;for(t=0;t<e;t++)0!==n&&(n=(i+this.readEG()+256)%256),i=0===n?i:n},e.prototype.readSPS=function(){var e,t,i,n,r,a,s,o=0,l=0,u=0,c=0,d=this.readUByte.bind(this),h=this.readBits.bind(this),f=this.readUEG.bind(this),p=this.readBoolean.bind(this),g=this.skipBits.bind(this),m=this.skipEG.bind(this),v=this.skipUEG.bind(this),y=this.skipScalingList.bind(this);if(d(),e=d(),h(5),g(3),d(),v(),100===e||110===e||122===e||244===e||44===e||83===e||86===e||118===e||128===e){var _=f();if(3===_&&g(1),v(),v(),g(1),p())for(a=3!==_?8:12,s=0;s<a;s++)p()&&y(s<6?16:64)}v();var b=f();if(0===b)f();else if(1===b)for(g(1),m(),m(),t=f(),s=0;s<t;s++)m();v(),g(1),i=f(),n=f(),0===(r=h(1))&&g(1),g(1),p()&&(o=f(),l=f(),u=f(),c=f());var w=[1,1];if(p()&&p())switch(d()){case 1:w=[1,1];break;case 2:w=[12,11];break;case 3:w=[10,11];break;case 4:w=[16,11];break;case 5:w=[40,33];break;case 6:w=[24,11];break;case 7:w=[20,11];break;case 8:w=[32,11];break;case 9:w=[80,33];break;case 10:w=[18,11];break;case 11:w=[15,11];break;case 12:w=[64,33];break;case 13:w=[160,99];break;case 14:w=[4,3];break;case 15:w=[3,2];break;case 16:w=[2,1];break;case 255:w=[d()<<8|d(),d()<<8|d()]}return{width:Math.ceil(16*(i+1)-2*o-2*l),height:(2-r)*(n+1)*16-(r?2:4)*(u+c),pixelRatio:w}},e.prototype.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()},e}();var E=function(){function e(t,i,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.decryptdata=n,this.discardEPB=r,this.decrypter=new a.a(t,i)}return e.prototype.decryptBuffer=function(e,t){this.decrypter.decrypt(e,this.decryptdata.key.buffer,this.decryptdata.iv.buffer,t)},e.prototype.decryptAacSample=function(e,t,i,n){var r=e[t].unit,a=r.subarray(16,r.length-r.length%16),s=a.buffer.slice(a.byteOffset,a.byteOffset+a.length),o=this;this.decryptBuffer(s,function(a){a=new Uint8Array(a),r.set(a,16),n||o.decryptAacSamples(e,t+1,i)})},e.prototype.decryptAacSamples=function(e,t,i){for(;;t++){if(t>=e.length)return void i();if(!(e[t].unit.length<32)){var n=this.decrypter.isSync();if(this.decryptAacSample(e,t,i,n),!n)return}}},e.prototype.getAvcEncryptedData=function(e){for(var t=16*Math.floor((e.length-48)/160)+16,i=new Int8Array(t),n=0,r=32;r<=e.length-16;r+=160,n+=16)i.set(e.subarray(r,r+16),n);return i},e.prototype.getAvcDecryptedUnit=function(e,t){t=new Uint8Array(t);for(var i=0,n=32;n<=e.length-16;n+=160,i+=16)e.set(t.subarray(i,i+16),n);return e},e.prototype.decryptAvcSample=function(e,t,i,n,r,a){var s=this.discardEPB(r.data),o=this.getAvcEncryptedData(s),l=this;this.decryptBuffer(o.buffer,function(o){r.data=l.getAvcDecryptedUnit(s,o),a||l.decryptAvcSamples(e,t,i+1,n)})},e.prototype.decryptAvcSamples=function(e,t,i,n){for(;;t++,i=0){if(t>=e.length)return void n();for(var r=e[t].units;!(i>=r.length);i++){var a=r[i];if(!(a.length<=48||1!==a.type&&5!==a.type)){var s=this.decrypter.isSync();if(this.decryptAvcSample(e,t,i,n,a,s),!s)return}}}},e}();var A={video:0,audio:1,id3:2,text:3},T=function(){function e(t,i,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.observer=t,this.config=n,this.typeSupported=r,this.remuxer=i,this.sampleAes=null}return e.prototype.setDecryptData=function(e){null!=e&&null!=e.key&&"SAMPLE-AES"===e.method?this.sampleAes=new E(this.observer,this.config,e,this.discardEPB):this.sampleAes=null},e.probe=function(t){var i=e._syncOffset(t);return!(i<0)&&(i&&s.b.warn("MPEG2-TS detected but first sync word found @ offset "+i+", junk ahead ?"),!0)},e._syncOffset=function(e){for(var t=Math.min(1e3,e.length-564),i=0;i<t;){if(71===e[i]&&71===e[i+188]&&71===e[i+376])return i;i++}return-1},e.createTrack=function(e,t){return{container:"video"===e||"audio"===e?"video/mp2t":void 0,type:e,id:A[e],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],len:0,dropped:"video"===e?0:void 0,isAAC:"audio"===e||void 0,duration:"audio"===e?t:void 0}},e.prototype.resetInitSegment=function(t,i,n,r){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack=e.createTrack("video",r),this._audioTrack=e.createTrack("audio",r),this._id3Track=e.createTrack("id3",r),this._txtTrack=e.createTrack("text",r),this.aacOverFlow=null,this.aacLastPTS=null,this.avcSample=null,this.audioCodec=i,this.videoCodec=n,this._duration=r},e.prototype.resetTimeStamp=function(){},e.prototype.append=function(t,i,a,o){var l,u,c,d,h,f=t.length,p=!1;this.contiguous=a;var g=this.pmtParsed,m=this._avcTrack,v=this._audioTrack,y=this._id3Track,_=m.pid,b=v.pid,w=y.pid,E=this._pmtId,A=m.pesData,T=v.pesData,S=y.pesData,R=this._parsePAT,D=this._parsePMT,x=this._parsePES,C=this._parseAVCPES.bind(this),P=this._parseAACPES.bind(this),I=this._parseMPEGPES.bind(this),k=this._parseID3PES.bind(this),L=e._syncOffset(t);for(f-=(f+L)%188,l=L;l<f;l+=188)if(71===t[l]){if(u=!!(64&t[l+1]),c=((31&t[l+1])<<8)+t[l+2],(48&t[l+3])>>4>1){if((d=l+5+t[l+4])===l+188)continue}else d=l+4;switch(c){case _:u&&(A&&(h=x(A))&&C(h,!1),A={data:[],size:0}),A&&(A.data.push(t.subarray(d,l+188)),A.size+=l+188-d);break;case b:u&&(T&&(h=x(T))&&(v.isAAC?P(h):I(h)),T={data:[],size:0}),T&&(T.data.push(t.subarray(d,l+188)),T.size+=l+188-d);break;case w:u&&(S&&(h=x(S))&&k(h),S={data:[],size:0}),S&&(S.data.push(t.subarray(d,l+188)),S.size+=l+188-d);break;case 0:u&&(d+=t[d]+1),E=this._pmtId=R(t,d);break;case E:u&&(d+=t[d]+1);var O=D(t,d,!0===this.typeSupported.mpeg||!0===this.typeSupported.mp3,null!=this.sampleAes);(_=O.avc)>0&&(m.pid=_),(b=O.audio)>0&&(v.pid=b,v.isAAC=O.isAAC),(w=O.id3)>0&&(y.pid=w),p&&!g&&(s.b.log("reparse from beginning"),p=!1,l=L-188),g=this.pmtParsed=!0;break;case 17:case 8191:break;default:p=!0}}else this.observer.trigger(n.a.ERROR,{type:r.b.MEDIA_ERROR,details:r.a.FRAG_PARSING_ERROR,fatal:!1,reason:"TS packet did not start with 0x47"});A&&(h=x(A))?(C(h,!0),m.pesData=null):m.pesData=A,T&&(h=x(T))?(v.isAAC?P(h):I(h),v.pesData=null):(T&&T.size&&s.b.log("last AAC PES packet truncated,might overlap between fragments"),v.pesData=T),S&&(h=x(S))?(k(h),y.pesData=null):y.pesData=S,null==this.sampleAes?this.remuxer.remux(v,m,y,this._txtTrack,i,a,o):this.decryptAndRemux(v,m,y,this._txtTrack,i,a,o)},e.prototype.decryptAndRemux=function(e,t,i,n,r,a,s){if(e.samples&&e.isAAC){var o=this;this.sampleAes.decryptAacSamples(e.samples,0,function(){o.decryptAndRemuxAvc(e,t,i,n,r,a,s)})}else this.decryptAndRemuxAvc(e,t,i,n,r,a,s)},e.prototype.decryptAndRemuxAvc=function(e,t,i,n,r,a,s){if(t.samples){var o=this;this.sampleAes.decryptAvcSamples(t.samples,0,0,function(){o.remuxer.remux(e,t,i,n,r,a,s)})}else this.remuxer.remux(e,t,i,n,r,a,s)},e.prototype.destroy=function(){this._initPTS=this._initDTS=void 0,this._duration=0},e.prototype._parsePAT=function(e,t){return(31&e[t+10])<<8|e[t+11]},e.prototype._parsePMT=function(e,t,i,n){var r,a,o={audio:-1,avc:-1,id3:-1,isAAC:!0};for(r=t+3+((15&e[t+1])<<8|e[t+2])-4,t+=12+((15&e[t+10])<<8|e[t+11]);t<r;){switch(a=(31&e[t+1])<<8|e[t+2],e[t]){case 207:if(!n){s.b.log("unkown stream type:"+e[t]);break}case 15:-1===o.audio&&(o.audio=a);break;case 21:-1===o.id3&&(o.id3=a);break;case 219:if(!n){s.b.log("unkown stream type:"+e[t]);break}case 27:-1===o.avc&&(o.avc=a);break;case 3:case 4:i?-1===o.audio&&(o.audio=a,o.isAAC=!1):s.b.log("MPEG audio found, not supported in this browser for now");break;case 36:s.b.warn("HEVC stream type found, not supported for now");break;default:s.b.log("unkown stream type:"+e[t])}t+=5+((15&e[t+3])<<8|e[t+4])}return o},e.prototype._parsePES=function(e){var t,i,n,r,a,o,l,u,c=0,d=e.data;if(!e||0===e.size)return null;for(;d[0].length<19&&d.length>1;){var h=new Uint8Array(d[0].length+d[1].length);h.set(d[0]),h.set(d[1],d[0].length),d[0]=h,d.splice(1,1)}if(1===((t=d[0])[0]<<16)+(t[1]<<8)+t[2]){if((n=(t[4]<<8)+t[5])&&n>e.size-6)return null;192&(i=t[7])&&((o=536870912*(14&t[9])+4194304*(255&t[10])+16384*(254&t[11])+128*(255&t[12])+(254&t[13])/2)>4294967295&&(o-=8589934592),64&i?((l=536870912*(14&t[14])+4194304*(255&t[15])+16384*(254&t[16])+128*(255&t[17])+(254&t[18])/2)>4294967295&&(l-=8589934592),o-l>54e5&&(s.b.warn(Math.round((o-l)/9e4)+"s delta between PTS and DTS, align them"),o=l)):l=o),u=(r=t[8])+9,e.size-=u,a=new Uint8Array(e.size);for(var f=0,p=d.length;f<p;f++){var g=(t=d[f]).byteLength;if(u){if(u>g){u-=g;continue}t=t.subarray(u),g-=u,u=0}a.set(t,c),c+=g}return n&&(n-=r+3),{data:a,pts:o,dts:l,len:n}}return null},e.prototype.pushAccesUnit=function(e,t){if(e.units.length&&e.frame){var i=t.samples,n=i.length;!this.config.forceKeyFrameOnDiscontinuity||!0===e.key||t.sps&&(n||this.contiguous)?(e.id=n,i.push(e)):t.dropped++}e.debug.length&&s.b.log(e.pts+"/"+e.dts+":"+e.debug)},e.prototype._parseAVCPES=function(e,t){var i,n,r,a=this,s=this._avcTrack,o=this._parseAVCNALu(e.data),l=this.avcSample,u=!1,c=this.pushAccesUnit.bind(this),d=function(e,t,i,n){return{key:e,pts:t,dts:i,units:[],debug:n}};e.data=null,l&&o.length&&!s.audFound&&(c(l,s),l=this.avcSample=d(!1,e.pts,e.dts,"")),o.forEach(function(t){switch(t.type){case 1:n=!0,l||(l=a.avcSample=d(!0,e.pts,e.dts,"")),l.frame=!0;var o=t.data;if(u&&o.length>4){var h=new w(o).readSliceType();2!==h&&4!==h&&7!==h&&9!==h||(l.key=!0)}break;case 5:n=!0,l||(l=a.avcSample=d(!0,e.pts,e.dts,"")),l.key=!0,l.frame=!0;break;case 6:n=!0,(i=new w(a.discardEPB(t.data))).readUByte();for(var f=0,p=0,g=!1,m=0;!g&&i.bytesAvailable>1;){f=0;do{f+=m=i.readUByte()}while(255===m);p=0;do{p+=m=i.readUByte()}while(255===m);if(4===f&&0!==i.bytesAvailable){if(g=!0,181===i.readUByte())if(49===i.readUShort())if(1195456820===i.readUInt())if(3===i.readUByte()){var v=i.readUByte(),y=31&v,_=[v,i.readUByte()];for(r=0;r<y;r++)_.push(i.readUByte()),_.push(i.readUByte()),_.push(i.readUByte());a._insertSampleInOrder(a._txtTrack.samples,{type:3,pts:e.pts,bytes:_})}}else if(p<i.bytesAvailable)for(r=0;r<p;r++)i.readUByte()}break;case 7:if(n=!0,u=!0,!s.sps){var b=(i=new w(t.data)).readSPS();s.width=b.width,s.height=b.height,s.pixelRatio=b.pixelRatio,s.sps=[t.data],s.duration=a._duration;var E=t.data.subarray(1,4),A="avc1.";for(r=0;r<3;r++){var T=E[r].toString(16);T.length<2&&(T="0"+T),A+=T}s.codec=A}break;case 8:n=!0,s.pps||(s.pps=[t.data]);break;case 9:n=!1,s.audFound=!0,l&&c(l,s),l=a.avcSample=d(!1,e.pts,e.dts,"");break;case 12:n=!1;break;default:n=!1,l&&(l.debug+="unknown NAL "+t.type+" ")}l&&n&&l.units.push(t)}),t&&l&&(c(l,s),this.avcSample=null)},e.prototype._insertSampleInOrder=function(e,t){var i=e.length;if(i>0){if(t.pts>=e[i-1].pts)e.push(t);else for(var n=i-1;n>=0;n--)if(t.pts<e[n].pts){e.splice(n,0,t);break}}else e.push(t)},e.prototype._getLastNalUnit=function(){var e=this.avcSample,t=void 0;if(!e||0===e.units.length){var i=this._avcTrack.samples;e=i[i.length-1]}if(e){var n=e.units;t=n[n.length-1]}return t},e.prototype._parseAVCNALu=function(e){var t,i,n,r,a=0,s=e.byteLength,o=this._avcTrack,l=o.naluState||0,u=l,c=[],d=-1;for(-1===l&&(d=0,r=31&e[0],l=0,a=1);a<s;)if(t=e[a++],l)if(1!==l)if(t)if(1===t){if(d>=0)n={data:e.subarray(d,a-l-1),type:r},c.push(n);else{var h=this._getLastNalUnit();if(h&&(u&&a<=4-u&&h.state&&(h.data=h.data.subarray(0,h.data.byteLength-u)),(i=a-l-1)>0)){var f=new Uint8Array(h.data.byteLength+i);f.set(h.data,0),f.set(e.subarray(0,i),h.data.byteLength),h.data=f}}a<s?(d=a,r=31&e[a],l=0):l=-1}else l=0;else l=3;else l=t?0:2;else l=t?0:1;if(d>=0&&l>=0&&(n={data:e.subarray(d,s),type:r,state:l},c.push(n)),0===c.length){var p=this._getLastNalUnit();if(p){var g=new Uint8Array(p.data.byteLength+e.byteLength);g.set(p.data,0),g.set(e,p.data.byteLength),p.data=g}}return o.naluState=l,c},e.prototype.discardEPB=function(e){for(var t,i,n=e.byteLength,r=[],a=1;a<n-2;)0===e[a]&&0===e[a+1]&&3===e[a+2]?(r.push(a+2),a+=2):a++;if(0===r.length)return e;t=n-r.length,i=new Uint8Array(t);var s=0;for(a=0;a<t;s++,a++)s===r[0]&&(s++,r.shift()),i[a]=e[s];return i},e.prototype._parseAACPES=function(e){var t,i,a,o,l,u,d,g=this._audioTrack,m=e.data,v=e.pts,y=this.aacOverFlow,_=this.aacLastPTS;if(y){var b=new Uint8Array(y.byteLength+m.byteLength);b.set(y,0),b.set(m,y.byteLength),m=b}for(a=0,l=m.length;a<l-1&&!c(m,a);a++);if(a&&(a<l-1?(u="AAC PES did not start with ADTS header,offset:"+a,d=!1):(u="no ADTS header found in AAC PES",d=!0),s.b.warn("parsing error:"+u),this.observer.trigger(n.a.ERROR,{type:r.b.MEDIA_ERROR,details:r.a.FRAG_PARSING_ERROR,fatal:d,reason:u}),d))return;if(h(g,this.observer,m,a,this.audioCodec),i=0,t=f(g.samplerate),y&&_){var w=_+t;Math.abs(w-v)>1&&(s.b.log("AAC: align PTS for overlapping frames by "+Math.round((w-v)/90)),v=w)}for(;a<l;)if(c(m,a)&&a+5<l){var E=p(g,m,a,v,i);if(!E)break;a+=E.length,o=E.sample.pts,i++}else a++;y=a<l?m.subarray(a,l):null,this.aacOverFlow=y,this.aacLastPTS=o},e.prototype._parseMPEGPES=function(e){for(var t=e.data,i=t.length,n=0,r=0,a=e.pts;r<i;)if(b.isHeader(t,r)){var s=b.appendFrame(this._audioTrack,t,r,a,n);if(!s)break;r+=s.length,n++}else r++},e.prototype._parseID3PES=function(e){this._id3Track.samples.push(e)},e}();var S=function(){function e(t,i,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.observer=t,this.config=n,this.remuxer=i}return e.prototype.resetInitSegment=function(e,t,i,n){this._audioTrack={container:"audio/mpeg",type:"audio",id:-1,sequenceNumber:0,isAAC:!1,samples:[],len:0,manifestCodec:t,duration:n,inputTimeScale:9e4}},e.prototype.resetTimeStamp=function(){},e.probe=function(e){var t,i,n=g.a.getID3Data(e,0);if(n&&void 0!==g.a.getTimeStamp(n))for(t=n.length,i=Math.min(e.length-1,t+100);t<i;t++)if(b.probe(e,t))return s.b.log("MPEG Audio sync word found !"),!0;return!1},e.prototype.append=function(e,t,i,n){for(var r=g.a.getID3Data(e,0),a=g.a.getTimeStamp(r),s=a?90*a:9e4*t,o=r.length,l=e.length,u=0,c=0,d=this._audioTrack,h=[{pts:s,dts:s,data:r}];o<l;)if(b.isHeader(e,o)){var f=b.appendFrame(d,e,o,s,u);if(!f)break;o+=f.length,c=f.sample.pts,u++}else g.a.isHeader(e,o)?(r=g.a.getID3Data(e,o),h.push({pts:c,dts:c,data:r}),o+=r.length):o++;this.remuxer.remux(d,{samples:[]},{samples:h,inputTimeScale:9e4},{samples:[]},t,i,n)},e.prototype.destroy=function(){},e}();var R=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return e.getSilentFrame=function(e,t){switch(e){case"mp4a.40.2":if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null},e}();var D=Math.pow(2,32)-1,x=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return e.init=function(){var t;for(t in e.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]},e.types)e.types.hasOwnProperty(t)&&(e.types[t]=[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)]);var i=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),n=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);e.HDLR_TYPES={video:i,audio:n};var r=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),a=new Uint8Array([0,0,0,0,0,0,0,0]);e.STTS=e.STSC=e.STCO=a,e.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),e.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),e.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),e.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var s=new Uint8Array([105,115,111,109]),o=new Uint8Array([97,118,99,49]),l=new Uint8Array([0,0,0,1]);e.FTYP=e.box(e.types.ftyp,s,l,s,o),e.DINF=e.box(e.types.dinf,e.box(e.types.dref,r))},e.box=function(e){for(var t,i=Array.prototype.slice.call(arguments,1),n=8,r=i.length,a=r;r--;)n+=i[r].byteLength;for((t=new Uint8Array(n))[0]=n>>24&255,t[1]=n>>16&255,t[2]=n>>8&255,t[3]=255&n,t.set(e,4),r=0,n=8;r<a;r++)t.set(i[r],n),n+=i[r].byteLength;return t},e.hdlr=function(t){return e.box(e.types.hdlr,e.HDLR_TYPES[t])},e.mdat=function(t){return e.box(e.types.mdat,t)},e.mdhd=function(t,i){i*=t;var n=Math.floor(i/(D+1)),r=Math.floor(i%(D+1));return e.box(e.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,n>>24,n>>16&255,n>>8&255,255&n,r>>24,r>>16&255,r>>8&255,255&r,85,196,0,0]))},e.mdia=function(t){return e.box(e.types.mdia,e.mdhd(t.timescale,t.duration),e.hdlr(t.type),e.minf(t))},e.mfhd=function(t){return e.box(e.types.mfhd,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t]))},e.minf=function(t){return"audio"===t.type?e.box(e.types.minf,e.box(e.types.smhd,e.SMHD),e.DINF,e.stbl(t)):e.box(e.types.minf,e.box(e.types.vmhd,e.VMHD),e.DINF,e.stbl(t))},e.moof=function(t,i,n){return e.box(e.types.moof,e.mfhd(t),e.traf(n,i))},e.moov=function(t){for(var i=t.length,n=[];i--;)n[i]=e.trak(t[i]);return e.box.apply(null,[e.types.moov,e.mvhd(t[0].timescale,t[0].duration)].concat(n).concat(e.mvex(t)))},e.mvex=function(t){for(var i=t.length,n=[];i--;)n[i]=e.trex(t[i]);return e.box.apply(null,[e.types.mvex].concat(n))},e.mvhd=function(t,i){i*=t;var n=Math.floor(i/(D+1)),r=Math.floor(i%(D+1)),a=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,n>>24,n>>16&255,n>>8&255,255&n,r>>24,r>>16&255,r>>8&255,255&r,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return e.box(e.types.mvhd,a)},e.sdtp=function(t){var i,n,r=t.samples||[],a=new Uint8Array(4+r.length);for(n=0;n<r.length;n++)i=r[n].flags,a[n+4]=i.dependsOn<<4|i.isDependedOn<<2|i.hasRedundancy;return e.box(e.types.sdtp,a)},e.stbl=function(t){return e.box(e.types.stbl,e.stsd(t),e.box(e.types.stts,e.STTS),e.box(e.types.stsc,e.STSC),e.box(e.types.stsz,e.STSZ),e.box(e.types.stco,e.STCO))},e.avc1=function(t){var i,n,r,a=[],s=[];for(i=0;i<t.sps.length;i++)r=(n=t.sps[i]).byteLength,a.push(r>>>8&255),a.push(255&r),a=a.concat(Array.prototype.slice.call(n));for(i=0;i<t.pps.length;i++)r=(n=t.pps[i]).byteLength,s.push(r>>>8&255),s.push(255&r),s=s.concat(Array.prototype.slice.call(n));var o=e.box(e.types.avcC,new Uint8Array([1,a[3],a[4],a[5],255,224|t.sps.length].concat(a).concat([t.pps.length]).concat(s))),l=t.width,u=t.height,c=t.pixelRatio[0],d=t.pixelRatio[1];return e.box(e.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,l>>8&255,255&l,u>>8&255,255&u,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),o,e.box(e.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),e.box(e.types.pasp,new Uint8Array([c>>24,c>>16&255,c>>8&255,255&c,d>>24,d>>16&255,d>>8&255,255&d])))},e.esds=function(e){var t=e.config.length;return new Uint8Array([0,0,0,0,3,23+t,0,1,0,4,15+t,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([t]).concat(e.config).concat([6,1,2]))},e.mp4a=function(t){var i=t.samplerate;return e.box(e.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,i>>8&255,255&i,0,0]),e.box(e.types.esds,e.esds(t)))},e.mp3=function(t){var i=t.samplerate;return e.box(e.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,i>>8&255,255&i,0,0]))},e.stsd=function(t){return"audio"===t.type?t.isAAC||"mp3"!==t.codec?e.box(e.types.stsd,e.STSD,e.mp4a(t)):e.box(e.types.stsd,e.STSD,e.mp3(t)):e.box(e.types.stsd,e.STSD,e.avc1(t))},e.tkhd=function(t){var i=t.id,n=t.duration*t.timescale,r=t.width,a=t.height,s=Math.floor(n/(D+1)),o=Math.floor(n%(D+1));return e.box(e.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,i>>24&255,i>>16&255,i>>8&255,255&i,0,0,0,0,s>>24,s>>16&255,s>>8&255,255&s,o>>24,o>>16&255,o>>8&255,255&o,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,r>>8&255,255&r,0,0,a>>8&255,255&a,0,0]))},e.traf=function(t,i){var n=e.sdtp(t),r=t.id,a=Math.floor(i/(D+1)),s=Math.floor(i%(D+1));return e.box(e.types.traf,e.box(e.types.tfhd,new Uint8Array([0,0,0,0,r>>24,r>>16&255,r>>8&255,255&r])),e.box(e.types.tfdt,new Uint8Array([1,0,0,0,a>>24,a>>16&255,a>>8&255,255&a,s>>24,s>>16&255,s>>8&255,255&s])),e.trun(t,n.length+16+20+8+16+8+8),n)},e.trak=function(t){return t.duration=t.duration||4294967295,e.box(e.types.trak,e.tkhd(t),e.mdia(t))},e.trex=function(t){var i=t.id;return e.box(e.types.trex,new Uint8Array([0,0,0,0,i>>24,i>>16&255,i>>8&255,255&i,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},e.trun=function(t,i){var n,r,a,s,o,l,u=t.samples||[],c=u.length,d=12+16*c,h=new Uint8Array(d);for(i+=8+d,h.set([0,0,15,1,c>>>24&255,c>>>16&255,c>>>8&255,255&c,i>>>24&255,i>>>16&255,i>>>8&255,255&i],0),n=0;n<c;n++)a=(r=u[n]).duration,s=r.size,o=r.flags,l=r.cts,h.set([a>>>24&255,a>>>16&255,a>>>8&255,255&a,s>>>24&255,s>>>16&255,s>>>8&255,255&s,o.isLeading<<2|o.dependsOn,o.isDependedOn<<6|o.hasRedundancy<<4|o.paddingValue<<1|o.isNonSync,61440&o.degradPrio,15&o.degradPrio,l>>>24&255,l>>>16&255,l>>>8&255,255&l],12+16*n);return e.box(e.types.trun,h)},e.initSegment=function(t){e.types||e.init();var i,n=e.moov(t);return(i=new Uint8Array(e.FTYP.byteLength+n.byteLength)).set(e.FTYP),i.set(n,e.FTYP.byteLength),i},e}();var C=function(){function e(t,i,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.observer=t,this.config=i,this.typeSupported=n;var a=navigator.userAgent;this.isSafari=r&&r.indexOf("Apple")>-1&&a&&!a.match("CriOS"),this.ISGenerated=!1}return e.prototype.destroy=function(){},e.prototype.resetTimeStamp=function(e){this._initPTS=this._initDTS=e},e.prototype.resetInitSegment=function(){this.ISGenerated=!1},e.prototype.remux=function(e,t,i,r,a,o,l){if(this.ISGenerated||this.generateIS(e,t,a),this.ISGenerated){var u=e.samples.length,c=t.samples.length,d=a,h=a;if(u&&c){var f=(e.samples[0].dts-t.samples[0].dts)/t.inputTimeScale;d+=Math.max(0,f),h+=Math.max(0,-f)}if(u){e.timescale||(s.b.warn("regenerate InitSegment as audio detected"),this.generateIS(e,t,a));var p=this.remuxAudio(e,d,o,l);if(c){var g=void 0;p&&(g=p.endPTS-p.startPTS),t.timescale||(s.b.warn("regenerate InitSegment as video detected"),this.generateIS(e,t,a)),this.remuxVideo(t,h,o,g,l)}}else{var m=void 0;c&&(m=this.remuxVideo(t,h,o,l)),m&&e.codec&&this.remuxEmptyAudio(e,d,o,m)}}i.samples.length&&this.remuxID3(i,a),r.samples.length&&this.remuxText(r,a),this.observer.trigger(n.a.FRAG_PARSED)},e.prototype.generateIS=function(e,t,i){var a,o,l=this.observer,u=e.samples,c=t.samples,d=this.typeSupported,h="audio/mp4",f={},p={tracks:f},g=void 0===this._initPTS;if(g&&(a=o=1/0),e.config&&u.length&&(e.timescale=e.samplerate,s.b.log("audio sampling rate : "+e.samplerate),e.isAAC||(d.mpeg?(h="audio/mpeg",e.codec=""):d.mp3&&(e.codec="mp3")),f.audio={container:h,codec:e.codec,initSegment:!e.isAAC&&d.mpeg?new Uint8Array:x.initSegment([e]),metadata:{channelCount:e.channelCount}},g&&(a=o=u[0].pts-e.inputTimeScale*i)),t.sps&&t.pps&&c.length){var m=t.inputTimeScale;t.timescale=m,f.video={container:"video/mp4",codec:t.codec,initSegment:x.initSegment([t]),metadata:{width:t.width,height:t.height}},g&&(a=Math.min(a,c[0].pts-m*i),o=Math.min(o,c[0].dts-m*i),this.observer.trigger(n.a.INIT_PTS_FOUND,{initPTS:a}))}Object.keys(f).length?(l.trigger(n.a.FRAG_PARSING_INIT_SEGMENT,p),this.ISGenerated=!0,g&&(this._initPTS=a,this._initDTS=o)):l.trigger(n.a.ERROR,{type:r.b.MEDIA_ERROR,details:r.a.FRAG_PARSING_ERROR,fatal:!1,reason:"no audio/video samples found"})},e.prototype.remuxVideo=function(e,t,i,a,o){var l,u,c,d,h,f,p,g=8,m=e.timescale,v=e.samples,y=[],_=v.length,b=this._PTSNormalize,w=this._initDTS,E=this.nextAvcDts,A=this.isSafari;A&&(i|=v.length&&E&&(o&&Math.abs(t-E/m)<.1||Math.abs(v[0].pts-E-w)<m/5)),i||(E=t*m),v.forEach(function(e){e.pts=b(e.pts-w,E),e.dts=b(e.dts-w,E)}),v.sort(function(e,t){var i=e.dts-t.dts,n=e.pts-t.pts;return i||(n||e.id-t.id)});var T=v.reduce(function(e,t){return Math.max(Math.min(e,t.pts-t.dts),-18e3)},0);if(T<0){s.b.warn("PTS < DTS detected in video samples, shifting DTS by "+Math.round(T/90)+" ms to overcome this issue");for(var S=0;S<v.length;S++)v[S].dts+=T}var R=v[0];h=Math.max(R.dts,0),d=Math.max(R.pts,0);var D=Math.round((h-E)/90);i&&D&&(D>1?s.b.log("AVC:"+D+" ms hole between fragments detected,filling it"):D<-1&&s.b.log("AVC:"+-D+" ms overlapping between fragments detected"),h=E,v[0].dts=h,d=Math.max(d-D,E),v[0].pts=d,s.b.log("Video/PTS/DTS adjusted: "+Math.round(d/90)+"/"+Math.round(h/90)+",delta:"+D+" ms")),R=v[v.length-1],p=Math.max(R.dts,0),f=Math.max(R.pts,0,p),A&&(l=Math.round((p-h)/(v.length-1)));for(var C=0,P=0,I=0;I<_;I++){for(var k=v[I],L=k.units,O=L.length,M=0,N=0;N<O;N++)M+=L[N].data.length;P+=M,C+=O,k.length=M,k.dts=A?h+I*l:Math.max(k.dts,h),k.pts=Math.max(k.pts,k.dts)}var F=P+4*C+8;try{u=new Uint8Array(F)}catch(e){return void this.observer.trigger(n.a.ERROR,{type:r.b.MUX_ERROR,details:r.a.REMUX_ALLOC_ERROR,fatal:!1,bytes:F,reason:"fail allocating video mdat "+F})}var j=new DataView(u.buffer);j.setUint32(0,F),u.set(x.types.mdat,4);for(var B=0;B<_;B++){for(var U=v[B],G=U.units,H=0,z=void 0,W=0,$=G.length;W<$;W++){var V=G[W],Y=V.data,q=V.data.byteLength;j.setUint32(g,q),g+=4,u.set(Y,g),g+=q,H+=4+q}if(A)z=Math.max(0,l*Math.round((U.pts-U.dts)/l));else{if(B<_-1)l=v[B+1].dts-U.dts;else{var X=this.config,J=U.dts-v[B>0?B-1:B].dts;if(X.stretchShortVideoTrack){var K=X.maxBufferHole,Q=X.maxSeekHole,Z=Math.floor(Math.min(K,Q)*m),ee=(a?d+a*m:this.nextAudioPts)-U.pts;ee>Z?((l=ee-J)<0&&(l=J),s.b.log("It is approximately "+ee/90+" ms to the next segment; using duration "+l/90+" ms for the last video frame.")):l=J}else l=J}z=Math.round(U.pts-U.dts)}y.push({size:H,duration:l,cts:z,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:U.key?2:1,isNonSync:U.key?0:1}})}this.nextAvcDts=p+l;var te=e.dropped;if(e.len=0,e.nbNalu=0,e.dropped=0,y.length&&navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var ie=y[0].flags;ie.dependsOn=2,ie.isNonSync=0}e.samples=y,c=x.moof(e.sequenceNumber++,h,e),e.samples=[];var ne={data1:c,data2:u,startPTS:d/m,endPTS:(f+l)/m,startDTS:h/m,endDTS:this.nextAvcDts/m,type:"video",nb:y.length,dropped:te};return this.observer.trigger(n.a.FRAG_PARSING_DATA,ne),ne},e.prototype.remuxAudio=function(e,t,i,a){var o,l,u,c,d,h,f,p=e.inputTimeScale,g=e.timescale,m=p/g,v=(e.isAAC?1024:1152)*m,y=this._PTSNormalize,_=this._initDTS,b=!e.isAAC&&this.typeSupported.mpeg,w=e.samples,E=[],A=this.nextAudioPts;if(i|=w.length&&A&&(a&&Math.abs(t-A/p)<.1||Math.abs(w[0].pts-A-_)<20*v),w.forEach(function(e){e.pts=e.dts=y(e.pts-_,t*p)}),0!==(w=w.filter(function(e){return e.pts>=0})).length){if(i||(A=a?t*p:w[0].pts),e.isAAC)for(var T=this.config.maxAudioFramesDrift,S=0,D=A;S<w.length;){var C,P=w[S];C=P.pts-D;var I=Math.abs(1e3*C/p);if(C<=-T*v)s.b.warn("Dropping 1 audio frame @ "+(D/p).toFixed(3)+"s due to "+Math.round(I)+" ms overlap."),w.splice(S,1),e.len-=P.unit.length;else if(C>=T*v&&I<1e4&&D){var k=Math.round(C/v);s.b.warn("Injecting "+k+" audio frame @ "+(D/p).toFixed(3)+"s due to "+Math.round(1e3*C/p)+" ms gap.");for(var L=0;L<k;L++){var O=Math.max(D,0);(u=R.getSilentFrame(e.manifestCodec||e.codec,e.channelCount))||(s.b.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),u=P.unit.subarray()),w.splice(S,0,{unit:u,pts:O,dts:O}),e.len+=u.length,D+=v,S++}P.pts=P.dts=D,D+=v,S++}else Math.abs(C),P.pts=P.dts=D,D+=v,S++}for(var M=0,N=w.length;M<N;M++){var F=w[M],j=F.unit,B=F.pts;if(void 0!==f)l.duration=Math.round((B-f)/m);else{var U=Math.round(1e3*(B-A)/p),G=0;if(i&&e.isAAC&&U){if(U>0&&U<1e4)G=Math.round((B-A)/v),s.b.log(U+" ms hole between AAC samples detected,filling it"),G>0&&((u=R.getSilentFrame(e.manifestCodec||e.codec,e.channelCount))||(u=j.subarray()),e.len+=G*u.length);else if(U<-12){s.b.log("drop overlapping AAC sample, expected/parsed/delta:"+(A/p).toFixed(3)+"s/"+(B/p).toFixed(3)+"s/"+-U+"ms"),e.len-=j.byteLength;continue}B=A}if(h=B,!(e.len>0))return;var H=b?e.len:e.len+8;o=b?0:8;try{c=new Uint8Array(H)}catch(e){return void this.observer.trigger(n.a.ERROR,{type:r.b.MUX_ERROR,details:r.a.REMUX_ALLOC_ERROR,fatal:!1,bytes:H,reason:"fail allocating audio mdat "+H})}b||(new DataView(c.buffer).setUint32(0,H),c.set(x.types.mdat,4));for(var z=0;z<G;z++)(u=R.getSilentFrame(e.manifestCodec||e.codec,e.channelCount))||(s.b.log("Unable to get silent frame for given audio codec; duplicating this frame instead."),u=j.subarray()),c.set(u,o),o+=u.byteLength,l={size:u.byteLength,cts:0,duration:1024,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},E.push(l)}c.set(j,o);var W=j.byteLength;o+=W,l={size:W,cts:0,duration:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},E.push(l),f=B}var $=0,V=E.length;if(V>=2&&($=E[V-2].duration,l.duration=$),V){this.nextAudioPts=A=f+m*$,e.len=0,e.samples=E,d=b?new Uint8Array:x.moof(e.sequenceNumber++,h/m,e),e.samples=[];var Y=h/p,q=A/p,X={data1:d,data2:c,startPTS:Y,endPTS:q,startDTS:Y,endDTS:q,type:"audio",nb:V};return this.observer.trigger(n.a.FRAG_PARSING_DATA,X),X}return null}},e.prototype.remuxEmptyAudio=function(e,t,i,n){var r=e.inputTimeScale,a=r/(e.samplerate?e.samplerate:r),o=this.nextAudioPts,l=(void 0!==o?o:n.startDTS*r)+this._initDTS,u=n.endDTS*r+this._initDTS,c=1024*a,d=Math.ceil((u-l)/c),h=R.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);if(s.b.warn("remux empty Audio"),h){for(var f=[],p=0;p<d;p++){var g=l+p*c;f.push({unit:h,pts:g,dts:g}),e.len+=h.length}e.samples=f,this.remuxAudio(e,t,i)}else s.b.trace("Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec!")},e.prototype.remuxID3=function(e,t){var i,r=e.samples.length,a=e.inputTimeScale,s=this._initPTS,o=this._initDTS;if(r){for(var l=0;l<r;l++)(i=e.samples[l]).pts=(i.pts-s)/a,i.dts=(i.dts-o)/a;this.observer.trigger(n.a.FRAG_PARSING_METADATA,{samples:e.samples})}e.samples=[],t=t},e.prototype.remuxText=function(e,t){e.samples.sort(function(e,t){return e.pts-t.pts});var i,r=e.samples.length,a=e.inputTimeScale,s=this._initPTS;if(r){for(var o=0;o<r;o++)(i=e.samples[o]).pts=(i.pts-s)/a;this.observer.trigger(n.a.FRAG_PARSING_USERDATA,{samples:e.samples})}e.samples=[],t=t},e.prototype._PTSNormalize=function(e,t){var i;if(void 0===t)return e;for(i=t<e?-8589934592:8589934592;Math.abs(e-t)>4294967296;)e+=i;return e},e}();var P=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.observer=t}return e.prototype.destroy=function(){},e.prototype.resetTimeStamp=function(){},e.prototype.resetInitSegment=function(){},e.prototype.remux=function(e,t,i,r,a,s,o,l){var u=this.observer,c="";e&&(c+="audio"),t&&(c+="video"),u.trigger(n.a.FRAG_PARSING_DATA,{data1:l,startPTS:a,startDTS:a,type:c,nb:1,dropped:0}),u.trigger(n.a.FRAG_PARSED)},e}();var I=function(){function e(t,i,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.observer=t,this.typeSupported=i,this.config=n,this.vendor=r}return e.prototype.destroy=function(){var e=this.demuxer;e&&e.destroy()},e.prototype.push=function(e,t,i,r,s,o,l,u,c,d,h,f){if(e.byteLength>0&&null!=t&&null!=t.key&&"AES-128"===t.method){var p=this.decrypter;null==p&&(p=this.decrypter=new a.a(this.observer,this.config));var g,m=this;try{g=performance.now()}catch(e){g=Date.now()}p.decrypt(e,t.key.buffer,t.iv.buffer,function(e){var a;try{a=performance.now()}catch(e){a=Date.now()}m.observer.trigger(n.a.FRAG_DECRYPTED,{stats:{tstart:g,tdecrypt:a}}),m.pushDecrypted(new Uint8Array(e),t,new Uint8Array(i),r,s,o,l,u,c,d,h,f)})}else this.pushDecrypted(new Uint8Array(e),t,new Uint8Array(i),r,s,o,l,u,c,d,h,f)},e.prototype.pushDecrypted=function(e,t,i,a,s,o,l,u,c,d,h,f){var p=this.demuxer;if(!p||l&&!this.probe(e)){for(var g=this.observer,v=this.typeSupported,_=this.config,b=[{demux:T,remux:C},{demux:y,remux:P},{demux:m,remux:C},{demux:S,remux:C}],w=0,E=b.length;w<E;w++){var A=b[w],R=A.demux.probe;if(R(e)){var D=this.remuxer=new A.remux(g,_,v,this.vendor);p=new A.demux(g,D,_,v),this.probe=R;break}}if(!p)return void g.trigger(n.a.ERROR,{type:r.b.MEDIA_ERROR,details:r.a.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"});this.demuxer=p}var x=this.remuxer;(l||u)&&(p.resetInitSegment(i,a,s,d),x.resetInitSegment()),l&&(p.resetTimeStamp(f),x.resetTimeStamp(f)),"function"==typeof p.setDecryptData&&p.setDecryptData(t),p.append(e,o,c,h)},e}();t.a=I},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={};i.d(n,"newCue",function(){return Ee});var r=i(6),a=i.n(r),s=i(1),o=i(2),l=i(0),u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var c=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.hls=t,this.onEvent=this.onEvent.bind(this);for(var i=arguments.length,n=Array(i>1?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];this.handledEvents=n,this.useGenericHandler=!0,this.registerListeners()}return e.prototype.destroy=function(){this.unregisterListeners()},e.prototype.isEventHandler=function(){return"object"===u(this.handledEvents)&&this.handledEvents.length&&"function"==typeof this.onEvent},e.prototype.registerListeners=function(){this.isEventHandler()&&this.handledEvents.forEach(function(e){if("hlsEventGeneric"===e)throw new Error("Forbidden event name: "+e);this.hls.on(e,this.onEvent)},this)},e.prototype.unregisterListeners=function(){this.isEventHandler()&&this.handledEvents.forEach(function(e){this.hls.off(e,this.onEvent)},this)},e.prototype.onEvent=function(e,t){this.onEventGeneric(e,t)},e.prototype.onEventGeneric=function(e,t){try{(function(e,t){var i="on"+e.replace("hls","");if("function"!=typeof this[i])throw new Error("Event "+e+" has no generic handler in this "+this.constructor.name+" class (tried "+i+")");return this[i].bind(this,t)}).call(this,e,t).call()}catch(t){l.b.error("internal error happened while processing "+e+":"+t.message),this.hls.trigger(s.a.ERROR,{type:o.b.OTHER_ERROR,details:o.a.INTERNAL_EXCEPTION,fatal:!1,event:e,err:t})}},e}();var d=/^(\d+)x(\d+)$/,h=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,f=function(){function e(t){for(var i in function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),"string"==typeof t&&(t=e.parseAttrList(t)),t)t.hasOwnProperty(i)&&(this[i]=t[i])}return e.prototype.decimalInteger=function(e){var t=parseInt(this[e],10);return t>Number.MAX_SAFE_INTEGER?1/0:t},e.prototype.hexadecimalInteger=function(e){if(this[e]){var t=(this[e]||"0x").slice(2);t=(1&t.length?"0":"")+t;for(var i=new Uint8Array(t.length/2),n=0;n<t.length/2;n++)i[n]=parseInt(t.slice(2*n,2*n+2),16);return i}return null},e.prototype.hexadecimalIntegerAsNumber=function(e){var t=parseInt(this[e],16);return t>Number.MAX_SAFE_INTEGER?1/0:t},e.prototype.decimalFloatingPoint=function(e){return parseFloat(this[e])},e.prototype.enumeratedString=function(e){return this[e]},e.prototype.decimalResolution=function(e){var t=d.exec(this[e]);if(null!==t)return{width:parseInt(t[1],10),height:parseInt(t[2],10)}},e.parseAttrList=function(e){var t,i={};for(h.lastIndex=0;null!==(t=h.exec(e));){var n=t[2];0===n.indexOf('"')&&n.lastIndexOf('"')===n.length-1&&(n=n.slice(1,-1)),i[t[1]]=n}return i},e}(),p={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,drac:!0,dvav:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0}};function g(e,t){return MediaSource.isTypeSupported((t||"video")+'/mp4;codecs="'+e+'"')}var m=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var y=/#EXT-X-STREAM-INF:([^\n\r]*)[\r\n]+([^\r\n]+)/g,_=/#EXT-X-MEDIA:(.*)/g,b=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/|(?!#)(\S+)/.source,/|#EXT-X-BYTERANGE:*(.+)/.source,/|#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/|#.*/.source].join(""),"g"),w=/(?:(?:#(EXTM3U))|(?:#EXT-X-(PLAYLIST-TYPE):(.+))|(?:#EXT-X-(MEDIA-SEQUENCE): *(\d+))|(?:#EXT-X-(TARGETDURATION): *(\d+))|(?:#EXT-X-(KEY):(.+))|(?:#EXT-X-(START):(.+))|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DISCONTINUITY-SEQ)UENCE:(\d+))|(?:#EXT-X-(DIS)CONTINUITY))|(?:#EXT-X-(VERSION):(\d+))|(?:#EXT-X-(MAP):(.+))|(?:(#)(.*):(.*))|(?:(#)(.*))(?:.*)\r?\n?/,E=function(){function e(){v(this,e),this.method=null,this.key=null,this.iv=null,this._uri=null}return m(e,[{key:"uri",get:function(){return!this._uri&&this.reluri&&(this._uri=a.a.buildAbsoluteURL(this.baseuri,this.reluri,{alwaysNormalize:!0})),this._uri}}]),e}(),A=function(){function e(){v(this,e),this._url=null,this._byteRange=null,this._decryptdata=null,this.tagList=[]}return e.prototype.createInitializationVector=function(e){for(var t=new Uint8Array(16),i=12;i<16;i++)t[i]=e>>8*(15-i)&255;return t},e.prototype.fragmentDecryptdataFromLevelkey=function(e,t){var i=e;return e&&e.method&&e.uri&&!e.iv&&((i=new E).method=e.method,i.baseuri=e.baseuri,i.reluri=e.reluri,i.iv=this.createInitializationVector(t)),i},e.prototype.cloneObj=function(e){return JSON.parse(JSON.stringify(e))},m(e,[{key:"url",get:function(){return!this._url&&this.relurl&&(this._url=a.a.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url},set:function(e){this._url=e}},{key:"programDateTime",get:function(){return!this._programDateTime&&this.rawProgramDateTime&&(this._programDateTime=new Date(Date.parse(this.rawProgramDateTime))),this._programDateTime}},{key:"byteRange",get:function(){if(!this._byteRange){var e=this._byteRange=[];if(this.rawByteRange){var t=this.rawByteRange.split("@",2);if(1===t.length){var i=this.lastByteRangeEndOffset;e[0]=i||0}else e[0]=parseInt(t[1]);e[1]=parseInt(t[0])+e[0]}}return this._byteRange}},{key:"byteRangeStartOffset",get:function(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function(){return this.byteRange[1]}},{key:"decryptdata",get:function(){return this._decryptdata||(this._decryptdata=this.fragmentDecryptdataFromLevelkey(this.levelkey,this.sn)),this._decryptdata}}]),e}();function T(e,t){if(!e)return null;for(var i=null,n=0;n<e.length;n++){var r=e[n];r.id===t&&(i=r)}return i}var S=function(e){function t(i){v(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,i,s.a.MANIFEST_LOADING,s.a.LEVEL_LOADING,s.a.AUDIO_TRACK_LOADING,s.a.SUBTITLE_TRACK_LOADING));return n.loaders={},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.destroy=function(){for(var e in this.loaders){var t=this.loaders[e];t&&t.destroy()}this.loaders={},c.prototype.destroy.call(this)},t.prototype.onManifestLoading=function(e){this.load(e.url,{type:"manifest"})},t.prototype.onLevelLoading=function(e){this.load(e.url,{type:"level",level:e.level,id:e.id})},t.prototype.onAudioTrackLoading=function(e){this.load(e.url,{type:"audioTrack",id:e.id})},t.prototype.onSubtitleTrackLoading=function(e){this.load(e.url,{type:"subtitleTrack",id:e.id})},t.prototype.load=function(e,t){var i=this.loaders[t.type];if(void 0!==i){var n=i.context;if(n&&n.url===e)return void l.b.trace("playlist request ongoing");l.b.warn("abort previous loader for type:"+t.type),i.abort()}var r=this.hls.config,a=void 0,s=void 0,o=void 0,u=void 0;"manifest"===t.type?(a=r.manifestLoadingMaxRetry,s=r.manifestLoadingTimeOut,o=r.manifestLoadingRetryDelay,u=r.manifestLoadingMaxRetryTimeout):"level"===t.type?(a=0,s=r.levelLoadingTimeOut):(a=r.levelLoadingMaxRetry,s=r.levelLoadingTimeOut,o=r.levelLoadingRetryDelay,u=r.levelLoadingMaxRetryTimeout,l.b.log("loading playlist for "+t.type+" "+(t.level||t.id))),i=this.loaders[t.type]=t.loader=void 0!==r.pLoader?new r.pLoader(r):new r.loader(r),t.url=e,t.responseType="";var c,d;c={timeout:s,maxRetry:a,retryDelay:o,maxRetryDelay:u},d={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)},i.load(t,c,d)},t.prototype.resolve=function(e,t){return a.a.buildAbsoluteURL(t,e,{alwaysNormalize:!0})},t.prototype.parseMasterPlaylist=function(e,t){var i=[],n=void 0;function r(e,t){["video","audio"].forEach(function(i){var n=e.filter(function(e){return function(e,t){var i=p[t];return!!i&&!0===i[e.slice(0,4)]}(e,i)});if(n.length){var r=n.filter(function(e){return 0===e.lastIndexOf("avc1",0)||0===e.lastIndexOf("mp4a",0)});t[i+"Codec"]=r.length>0?r[0]:n[0],e=e.filter(function(e){return-1===n.indexOf(e)})}}),t.unknownCodecs=e}for(y.lastIndex=0;null!=(n=y.exec(e));){var a={},s=a.attrs=new f(n[1]);a.url=this.resolve(n[2],t);var o=s.decimalResolution("RESOLUTION");o&&(a.width=o.width,a.height=o.height),a.bitrate=s.decimalInteger("AVERAGE-BANDWIDTH")||s.decimalInteger("BANDWIDTH"),a.name=s.NAME,r([].concat((s.CODECS||"").split(/[ ,]+/)),a),a.videoCodec&&-1!==a.videoCodec.indexOf("avc1")&&(a.videoCodec=this.avc1toavcoti(a.videoCodec)),i.push(a)}return i},t.prototype.parseMasterPlaylistMedia=function(e,t,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],r=void 0,a=[],s=0;for(_.lastIndex=0;null!==(r=_.exec(e));){var o={},l=new f(r[1]);if(l.TYPE===i){if(o.groupId=l["GROUP-ID"],o.name=l.NAME,o.type=i,o.default="YES"===l.DEFAULT,o.autoselect="YES"===l.AUTOSELECT,o.forced="YES"===l.FORCED,l.URI&&(o.url=this.resolve(l.URI,t)),o.lang=l.LANGUAGE,o.name||(o.name=o.lang),n.length){var u=T(n,o.groupId);o.audioCodec=u?u.codec:n[0].codec}o.id=s++,a.push(o)}}return a},t.prototype.avc1toavcoti=function(e){var t,i=e.split(".");return i.length>2?(t=i.shift()+".",t+=parseInt(i.shift()).toString(16),t+=("000"+parseInt(i.shift()).toString(16)).substr(-4)):t=e,t},t.prototype.parseLevelPlaylist=function(e,t,i,n){var r,a,s=0,o=0,u={type:null,version:null,url:t,fragments:[],live:!0,startSN:0},c=new E,d=0,h=null,p=new A;for(b.lastIndex=0;null!==(r=b.exec(e));){var g=r[1];if(g){p.duration=parseFloat(g);var m=(" "+r[2]).slice(1);p.title=m||null,p.tagList.push(m?["INF",g,m]:["INF",g])}else if(r[3]){if(!isNaN(p.duration)){var v=s++;p.type=n,p.start=o,p.levelkey=c,p.sn=v,p.level=i,p.cc=d,p.baseurl=t,p.relurl=(" "+r[3]).slice(1),u.fragments.push(p),h=p,o+=p.duration,p=new A}}else if(r[4]){if(p.rawByteRange=(" "+r[4]).slice(1),h){var y=h.byteRangeEndOffset;y&&(p.lastByteRangeEndOffset=y)}}else if(r[5])p.rawProgramDateTime=(" "+r[5]).slice(1),p.tagList.push(["PROGRAM-DATE-TIME",p.rawProgramDateTime]),void 0===u.programDateTime&&(u.programDateTime=new Date(new Date(Date.parse(r[5]))-1e3*o));else{for(r=r[0].match(w),a=1;a<r.length&&void 0===r[a];a++);var _=(" "+r[a+1]).slice(1),T=(" "+r[a+2]).slice(1);switch(r[a]){case"#":p.tagList.push(T?[_,T]:[_]);break;case"PLAYLIST-TYPE":u.type=_.toUpperCase();break;case"MEDIA-SEQUENCE":s=u.startSN=parseInt(_);break;case"TARGETDURATION":u.targetduration=parseFloat(_);break;case"VERSION":u.version=parseInt(_);break;case"EXTM3U":break;case"ENDLIST":u.live=!1;break;case"DIS":d++,p.tagList.push(["DIS"]);break;case"DISCONTINUITY-SEQ":d=parseInt(_);break;case"KEY":var S=new f(_),R=S.enumeratedString("METHOD"),D=S.URI,x=S.hexadecimalInteger("IV");R&&(c=new E,D&&["AES-128","SAMPLE-AES"].indexOf(R)>=0&&(c.method=R,c.baseuri=t,c.reluri=D,c.key=null,c.iv=x));break;case"START":var C=new f(_).decimalFloatingPoint("TIME-OFFSET");isNaN(C)||(u.startTimeOffset=C);break;case"MAP":var P=new f(_);p.relurl=P.URI,p.rawByteRange=P.BYTERANGE,p.baseurl=t,p.level=i,p.type=n,p.sn="initSegment",u.initSegment=p,p=new A;break;default:l.b.warn("line parsed but not handled: "+r)}}}return(p=h)&&!p.relurl&&(u.fragments.pop(),o-=p.duration),u.totalduration=o,u.averagetargetduration=o/u.fragments.length,u.endSN=s-1,u.startCC=u.fragments[0]?u.fragments[0].cc:0,u.endCC=d,u},t.prototype.loadsuccess=function(e,t,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=e.data,a=e.url,u=i.type,c=i.id,d=i.level,h=this.hls;if(this.loaders[u]=void 0,void 0!==a&&0!==a.indexOf("data:")||(a=i.url),t.tload=performance.now(),0===r.indexOf("#EXTM3U"))if(r.indexOf("#EXTINF:")>0){var f="audioTrack"!==u&&"subtitleTrack"!==u,p=isNaN(d)?isNaN(c)?0:c:d,g=this.parseLevelPlaylist(r,a,p,"audioTrack"===u?"audio":"subtitleTrack"===u?"subtitle":"main");g.tload=t.tload,"manifest"===u&&h.trigger(s.a.MANIFEST_LOADED,{levels:[{url:a,details:g}],audioTracks:[],url:a,stats:t,networkDetails:n}),t.tparsed=performance.now(),g.targetduration?f?h.trigger(s.a.LEVEL_LOADED,{details:g,level:d||0,id:c||0,stats:t,networkDetails:n}):"audioTrack"===u?h.trigger(s.a.AUDIO_TRACK_LOADED,{details:g,id:c,stats:t,networkDetails:n}):"subtitleTrack"===u&&h.trigger(s.a.SUBTITLE_TRACK_LOADED,{details:g,id:c,stats:t,networkDetails:n}):h.trigger(s.a.ERROR,{type:o.b.NETWORK_ERROR,details:o.a.MANIFEST_PARSING_ERROR,fatal:!0,url:a,reason:"invalid targetduration",networkDetails:n})}else{var m=this.parseMasterPlaylist(r,a);if(m.length){var v=m.map(function(e){return{id:e.attrs.AUDIO,codec:e.audioCodec}}),y=this.parseMasterPlaylistMedia(r,a,"AUDIO",v),_=this.parseMasterPlaylistMedia(r,a,"SUBTITLES");if(y.length){var b=!1;y.forEach(function(e){e.url||(b=!0)}),!1===b&&m[0].audioCodec&&!m[0].attrs.AUDIO&&(l.b.log("audio codec signaled in quality level, but no embedded audio track signaled, create one"),y.unshift({type:"main",name:"main"}))}h.trigger(s.a.MANIFEST_LOADED,{levels:m,audioTracks:y,subtitles:_,url:a,stats:t,networkDetails:n})}else h.trigger(s.a.ERROR,{type:o.b.NETWORK_ERROR,details:o.a.MANIFEST_PARSING_ERROR,fatal:!0,url:a,reason:"no level found in manifest",networkDetails:n})}else h.trigger(s.a.ERROR,{type:o.b.NETWORK_ERROR,details:o.a.MANIFEST_PARSING_ERROR,fatal:!0,url:a,reason:"no EXTM3U delimiter",networkDetails:n})},t.prototype.loaderror=function(e,t){var i,n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=t.loader;switch(t.type){case"manifest":i=o.a.MANIFEST_LOAD_ERROR,n=!0;break;case"level":i=o.a.LEVEL_LOAD_ERROR,n=!1;break;case"audioTrack":i=o.a.AUDIO_TRACK_LOAD_ERROR,n=!1}a&&(a.abort(),this.loaders[t.type]=void 0),this.hls.trigger(s.a.ERROR,{type:o.b.NETWORK_ERROR,details:i,fatal:n,url:a.url,loader:a,response:e,context:t,networkDetails:r})},t.prototype.loadtimeout=function(e,t){var i,n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=t.loader;switch(t.type){case"manifest":i=o.a.MANIFEST_LOAD_TIMEOUT,n=!0;break;case"level":i=o.a.LEVEL_LOAD_TIMEOUT,n=!1;break;case"audioTrack":i=o.a.AUDIO_TRACK_LOAD_TIMEOUT,n=!1}a&&(a.abort(),this.loaders[t.type]=void 0),this.hls.trigger(s.a.ERROR,{type:o.b.NETWORK_ERROR,details:i,fatal:n,url:a.url,loader:a,context:t,networkDetails:r})},t}(c);var R=function(e){function t(i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,i,s.a.FRAG_LOADING));return n.loaders={},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.destroy=function(){var e=this.loaders;for(var t in e){var i=e[t];i&&i.destroy()}this.loaders={},c.prototype.destroy.call(this)},t.prototype.onFragLoading=function(e){var t=e.frag,i=t.type,n=this.loaders[i],r=this.hls.config;t.loaded=0,n&&(l.b.warn("abort previous fragment loader for type:"+i),n.abort()),n=this.loaders[i]=t.loader=void 0!==r.fLoader?new r.fLoader(r):new r.loader(r);var a,s,o=void 0;o={url:t.url,frag:t,responseType:"arraybuffer",progressData:!1};var u=t.byteRangeStartOffset,c=t.byteRangeEndOffset;isNaN(u)||isNaN(c)||(o.rangeStart=u,o.rangeEnd=c),a={timeout:r.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:r.fragLoadingMaxRetryTimeout},s={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this),onProgress:this.loadprogress.bind(this)},n.load(o,a,s)},t.prototype.loadsuccess=function(e,t,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=e.data,a=i.frag;a.loader=void 0,this.loaders[a.type]=void 0,this.hls.trigger(s.a.FRAG_LOADED,{payload:r,frag:a,stats:t,networkDetails:n})},t.prototype.loaderror=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=t.loader;n&&n.abort(),this.loaders[t.type]=void 0,this.hls.trigger(s.a.ERROR,{type:o.b.NETWORK_ERROR,details:o.a.FRAG_LOAD_ERROR,fatal:!1,frag:t.frag,response:e,networkDetails:i})},t.prototype.loadtimeout=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=t.loader;n&&n.abort(),this.loaders[t.type]=void 0,this.hls.trigger(s.a.ERROR,{type:o.b.NETWORK_ERROR,details:o.a.FRAG_LOAD_TIMEOUT,fatal:!1,frag:t.frag,networkDetails:i})},t.prototype.loadprogress=function(e,t,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=t.frag;r.loaded=e.loaded,this.hls.trigger(s.a.FRAG_LOAD_PROGRESS,{frag:r,stats:e,networkDetails:n})},t}(c);var D=function(e){function t(i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,i,s.a.KEY_LOADING));return n.loaders={},n.decryptkey=null,n.decrypturl=null,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.destroy=function(){for(var e in this.loaders){var t=this.loaders[e];t&&t.destroy()}this.loaders={},c.prototype.destroy.call(this)},t.prototype.onKeyLoading=function(e){var t=e.frag,i=t.type,n=this.loaders[i],r=t.decryptdata,a=r.uri;if(a!==this.decrypturl||null===this.decryptkey){var o=this.hls.config;n&&(l.b.warn("abort previous key loader for type:"+i),n.abort()),t.loader=this.loaders[i]=new o.loader(o),this.decrypturl=a,this.decryptkey=null;var u,c,d;u={url:a,frag:t,responseType:"arraybuffer"},c={timeout:o.fragLoadingTimeOut,maxRetry:o.fragLoadingMaxRetry,retryDelay:o.fragLoadingRetryDelay,maxRetryDelay:o.fragLoadingMaxRetryTimeout},d={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)},t.loader.load(u,c,d)}else this.decryptkey&&(r.key=this.decryptkey,this.hls.trigger(s.a.KEY_LOADED,{frag:t}))},t.prototype.loadsuccess=function(e,t,i){var n=i.frag;this.decryptkey=n.decryptdata.key=new Uint8Array(e.data),n.loader=void 0,this.loaders[n.type]=void 0,this.hls.trigger(s.a.KEY_LOADED,{frag:n})},t.prototype.loaderror=function(e,t){var i=t.frag,n=i.loader;n&&n.abort(),this.loaders[t.type]=void 0,this.hls.trigger(s.a.ERROR,{type:o.b.NETWORK_ERROR,details:o.a.KEY_LOAD_ERROR,fatal:!1,frag:i,response:e})},t.prototype.loadtimeout=function(e,t){var i=t.frag,n=i.loader;n&&n.abort(),this.loaders[t.type]=void 0,this.hls.trigger(s.a.ERROR,{type:o.b.NETWORK_ERROR,details:o.a.KEY_LOAD_TIMEOUT,fatal:!1,frag:i})},t}(c),x={search:function(e,t){for(var i=0,n=e.length-1,r=null,a=null;i<=n;){var s=t(a=e[r=(i+n)/2|0]);if(s>0)i=r+1;else{if(!(s<0))return a;n=r-1}}return null}},C={isBuffered:function(e,t){try{if(e)for(var i=e.buffered,n=0;n<i.length;n++)if(t>=i.start(n)&&t<=i.end(n))return!0}catch(e){}return!1},bufferInfo:function(e,t,i){try{if(e){var n,r=e.buffered,a=[];for(n=0;n<r.length;n++)a.push({start:r.start(n),end:r.end(n)});return this.bufferedInfo(a,t,i)}}catch(e){}return{len:0,start:t,end:t,nextStart:void 0}},bufferedInfo:function(e,t,i){var n,r,a,s,o,l=[];for(e.sort(function(e,t){var i=e.start-t.start;return i||t.end-e.end}),o=0;o<e.length;o++){var u=l.length;if(u){var c=l[u-1].end;e[o].start-c<i?e[o].end>c&&(l[u-1].end=e[o].end):l.push(e[o])}else l.push(e[o])}for(o=0,n=0,r=a=t;o<l.length;o++){var d=l[o].start,h=l[o].end;if(t+i>=d&&t<h)r=d,n=(a=h)-t;else if(t+i<d){s=d;break}}return{len:n,start:r,end:a,nextStart:s}}},P=i(7),I=i(5),k=i.n(I),L=i(9),O=i.n(L);function M(){if("undefined"!=typeof window)return window.MediaSource||window.WebKitMediaSource}var N=M(),F=function(){function e(t,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.hls=t,this.id=i;var n=this.observer=new k.a,r=t.config;n.trigger=function(e){for(var t=arguments.length,i=Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];n.emit.apply(n,[e,e].concat(i))},n.off=function(e){for(var t=arguments.length,i=Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];n.removeListener.apply(n,[e].concat(i))};var a=function(e,i){(i=i||{}).frag=this.frag,i.id=this.id,t.trigger(e,i)}.bind(this);n.on(s.a.FRAG_DECRYPTED,a),n.on(s.a.FRAG_PARSING_INIT_SEGMENT,a),n.on(s.a.FRAG_PARSING_DATA,a),n.on(s.a.FRAG_PARSED,a),n.on(s.a.ERROR,a),n.on(s.a.FRAG_PARSING_METADATA,a),n.on(s.a.FRAG_PARSING_USERDATA,a),n.on(s.a.INIT_PTS_FOUND,a);var u={mp4:N.isTypeSupported("video/mp4"),mpeg:N.isTypeSupported("audio/mpeg"),mp3:N.isTypeSupported('audio/mp4; codecs="mp3"')},c=navigator.vendor;if(r.enableWorker&&"undefined"!=typeof Worker){l.b.log("demuxing in webworker");var d=void 0;try{d=this.w=O()(10),this.onwmsg=this.onWorkerMessage.bind(this),d.addEventListener("message",this.onwmsg),d.onerror=function(e){t.trigger(s.a.ERROR,{type:o.b.OTHER_ERROR,details:o.a.INTERNAL_EXCEPTION,fatal:!0,event:"demuxerWorker",err:{message:e.message+" ("+e.filename+":"+e.lineno+")"}})},d.postMessage({cmd:"init",typeSupported:u,vendor:c,id:i,config:JSON.stringify(r)})}catch(e){l.b.error("error while initializing DemuxerWorker, fallback on DemuxerInline"),d&&URL.revokeObjectURL(d.objectURL),this.demuxer=new P.a(n,u,r,c),this.w=void 0}}else this.demuxer=new P.a(n,u,r,c)}return e.prototype.destroy=function(){var e=this.w;if(e)e.removeEventListener("message",this.onwmsg),e.terminate(),this.w=null;else{var t=this.demuxer;t&&(t.destroy(),this.demuxer=null)}var i=this.observer;i&&(i.removeAllListeners(),this.observer=null)},e.prototype.push=function(e,t,i,n,r,a,s,o){var u=this.w,c=isNaN(r.startDTS)?r.start:r.startDTS,d=r.decryptdata,h=this.frag,f=!(h&&r.cc===h.cc),p=!(h&&r.level===h.level),g=h&&r.sn===h.sn+1,m=!p&&g;if(f&&l.b.log(this.id+":discontinuity detected"),p&&l.b.log(this.id+":switch detected"),this.frag=r,u)u.postMessage({cmd:"demux",data:e,decryptdata:d,initSegment:t,audioCodec:i,videoCodec:n,timeOffset:c,discontinuity:f,trackSwitch:p,contiguous:m,duration:a,accurateTimeOffset:s,defaultInitPTS:o},e instanceof ArrayBuffer?[e]:[]);else{var v=this.demuxer;v&&v.push(e,d,t,i,n,c,f,p,m,a,s,o)}},e.prototype.onWorkerMessage=function(e){var t=e.data,i=this.hls;switch(t.event){case"init":URL.revokeObjectURL(this.w.objectURL);break;case s.a.FRAG_PARSING_DATA:t.data.data1=new Uint8Array(t.data1),t.data2&&(t.data.data2=new Uint8Array(t.data2));default:t.data=t.data||{},t.data.frag=this.frag,t.data.id=this.id,i.trigger(t.event,t.data)}},e}();function j(e,t,i){var n=e[t],r=e[i],a=r.startPTS;isNaN(a)?r.start=i>t?n.start+n.duration:Math.max(n.start-r.duration,0):i>t?(n.duration=a-n.start,n.duration<0&&l.b.warn("negative duration computed for frag "+n.sn+",level "+n.level+", there should be some duration drift between playlist and fragment!")):(r.duration=n.start-a,r.duration<0&&l.b.warn("negative duration computed for frag "+r.sn+",level "+r.level+", there should be some duration drift between playlist and fragment!"))}function B(e,t,i,n,r,a){var s=i;if(!isNaN(t.startPTS)){var o=Math.abs(t.startPTS-i);isNaN(t.deltaPTS)?t.deltaPTS=o:t.deltaPTS=Math.max(o,t.deltaPTS),s=Math.max(i,t.startPTS),i=Math.min(i,t.startPTS),n=Math.max(n,t.endPTS),r=Math.min(r,t.startDTS),a=Math.max(a,t.endDTS)}var l=i-t.start;t.start=t.startPTS=i,t.maxStartPTS=s,t.endPTS=n,t.startDTS=r,t.endDTS=a,t.duration=n-i;var u,c,d,h=t.sn;if(!e||h<e.startSN||h>e.endSN)return 0;for(u=h-e.startSN,(c=e.fragments)[u]=t,d=u;d>0;d--)j(c,d,d-1);for(d=u;d<c.length-1;d++)j(c,d,d+1);return e.PTSKnown=!0,l}function U(e,t){var i,n=Math.max(e.startSN,t.startSN)-t.startSN,r=Math.min(e.endSN,t.endSN)-t.startSN,a=t.startSN-e.startSN,s=e.fragments,o=t.fragments,u=0;if(r<n)t.PTSKnown=!1;else{for(var c=n;c<=r;c++){var d=s[a+c],h=o[c];h&&d&&(u=d.cc-h.cc,isNaN(d.startPTS)||(h.start=h.startPTS=d.startPTS,h.endPTS=d.endPTS,h.duration=d.duration,h.backtracked=d.backtracked,h.dropped=d.dropped,i=h))}if(u)for(l.b.log("discontinuity sliding from playlist, take drift into account"),c=0;c<o.length;c++)o[c].cc+=u;if(i)B(t,i,i.startPTS,i.endPTS,i.startDTS,i.endDTS);else if(a>=0&&a<s.length){var f=s[a].start;for(c=0;c<o.length;c++)o[c].start+=f}t.PTSKnown=e.PTSKnown}}var G={toString:function(e){for(var t="",i=e.length,n=0;n<i;n++)t+="["+e.start(n).toFixed(3)+","+e.end(n).toFixed(3)+"]";return t}};function H(e,t){t.fragments.forEach(function(t){if(t){var i=t.start+e;t.start=t.startPTS=i,t.endPTS=i+t.duration}}),t.PTSKnown=!0}function z(e,t,i){if(function(e,t,i){var n=!1;return t&&t.details&&i&&(i.endCC>i.startCC||e&&e.cc<i.startCC)&&(n=!0),n}(e,t,i)){var n=function(e,t){var i=e.fragments,n=t.fragments;if(n.length&&i.length){var r=function(e,t){for(var i=null,n=0;n<e.length;n+=1){var r=e[n];if(r&&r.cc===t){i=r;break}}return i}(i,n[0].cc);if(r&&(!r||r.startPTS))return r;l.b.log("No frag in previous level to align on")}else l.b.log("No fragments to align")}(t.details,i);n&&(l.b.log("Adjusting PTS using last level due to CC increase within current level"),H(n.start,i))}if(!1===i.PTSKnown&&t&&t.details){var r=t.details.programDateTime,a=(i.programDateTime-r)/1e3+t.details.fragments[0].start;isNaN(a)||(l.b.log("adjusting PTS using programDateTime delta, sliding:"+a.toFixed(3)),H(a,i))}}var W=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var $={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_LEVEL:"WAITING_LEVEL",PARSING:"PARSING",PARSED:"PARSED",BUFFER_FLUSHING:"BUFFER_FLUSHING",ENDED:"ENDED",ERROR:"ERROR"},V=function(e){function t(i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,i,s.a.MEDIA_ATTACHED,s.a.MEDIA_DETACHING,s.a.MANIFEST_LOADING,s.a.MANIFEST_PARSED,s.a.LEVEL_LOADED,s.a.KEY_LOADED,s.a.FRAG_LOADED,s.a.FRAG_LOAD_EMERGENCY_ABORTED,s.a.FRAG_PARSING_INIT_SEGMENT,s.a.FRAG_PARSING_DATA,s.a.FRAG_PARSED,s.a.ERROR,s.a.AUDIO_TRACK_SWITCHING,s.a.AUDIO_TRACK_SWITCHED,s.a.BUFFER_CREATED,s.a.BUFFER_APPENDED,s.a.BUFFER_FLUSHED));return n.config=i.config,n.audioCodecSwap=!1,n.ticks=0,n._state=$.STOPPED,n.ontick=n.tick.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.destroy=function(){this.stopLoad(),this.timer&&(clearInterval(this.timer),this.timer=null),c.prototype.destroy.call(this),this.state=$.STOPPED},t.prototype.startLoad=function(e){if(this.levels){var t=this.lastCurrentTime,i=this.hls;if(this.stopLoad(),this.timer||(this.timer=setInterval(this.ontick,100)),this.level=-1,this.fragLoadError=0,!this.startFragRequested){var n=i.startLevel;-1===n&&(n=0,this.bitrateTest=!0),this.level=i.nextLoadLevel=n,this.loadedmetadata=!1}t>0&&-1===e&&(l.b.log("override startPosition with lastCurrentTime @"+t.toFixed(3)),e=t),this.state=$.IDLE,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}else this.forceStartLoad=!0,this.state=$.STOPPED},t.prototype.stopLoad=function(){var e=this.fragCurrent;e&&(e.loader&&e.loader.abort(),this.fragCurrent=null),this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=$.STOPPED,this.forceStartLoad=!1},t.prototype.tick=function(){this.ticks++,1===this.ticks&&(this.doTick(),this.ticks>1&&setTimeout(this.tick,1),this.ticks=0)},t.prototype.doTick=function(){switch(this.state){case $.ERROR:break;case $.BUFFER_FLUSHING:this.fragLoadError=0;break;case $.IDLE:this._doTickIdle();break;case $.WAITING_LEVEL:var e=this.levels[this.level];e&&e.details&&(this.state=$.IDLE);break;case $.FRAG_LOADING_WAITING_RETRY:var t=performance.now(),i=this.retryDate;(!i||t>=i||this.media&&this.media.seeking)&&(l.b.log("mediaController: retryDate reached, switch back to IDLE state"),this.state=$.IDLE);break;case $.ERROR:case $.STOPPED:case $.FRAG_LOADING:case $.PARSING:case $.PARSED:case $.ENDED:}this._checkBuffer(),this._checkFragmentChanged()},t.prototype._doTickIdle=function(){var e=this.hls,t=e.config,i=this.media;if(void 0!==this.levelLastLoaded&&(i||!this.startFragRequested&&t.startFragPrefetch)){var n=void 0;n=this.loadedmetadata?i.currentTime:this.nextLoadPosition;var r=e.nextLoadLevel,a=this.levels[r];if(a){var o=a.bitrate,u=void 0;u=o?Math.max(8*t.maxBufferSize/o,t.maxBufferLength):t.maxBufferLength,u=Math.min(u,t.maxMaxBufferLength);var c=C.bufferInfo(this.mediaBuffer?this.mediaBuffer:i,n,t.maxBufferHole),d=c.len;if(!(d>=u)){l.b.trace("buffer length of "+d.toFixed(3)+" is below max of "+u.toFixed(3)+". checking for more payload ..."),this.level=e.nextLoadLevel=r;var h=a.details;if(void 0===h||!0===h.live&&this.levelLastLoaded!==r)this.state=$.WAITING_LEVEL;else{var f=this.fragPrevious;if(!h.live&&f&&!f.backtracked&&f.sn===h.endSN&&!c.nextStart)if(Math.min(i.duration,f.start+f.duration)-Math.max(c.end,f.start)<=Math.max(.2,f.duration)){var p={};return this.altAudio&&(p.type="video"),this.hls.trigger(s.a.BUFFER_EOS,p),void(this.state=$.ENDED)}this._fetchPayloadOrEos(n,c,h)}}}}},t.prototype._fetchPayloadOrEos=function(e,t,i){var n=this.fragPrevious,r=this.level,a=i.fragments,s=a.length;if(0!==s){var o=a[0].start,u=a[s-1].start+a[s-1].duration,c=t.end,d=void 0;if(i.initSegment&&!i.initSegment.data)d=i.initSegment;else if(i.live){var h=this.config.initialLiveManifestSize;if(s<h)return void l.b.warn("Can not start playback of a level, reason: not enough fragments "+s+" < "+h);if(null===(d=this._ensureFragmentAtLivePoint(i,c,o,u,n,a,s)))return}else c<o&&(d=a[0]);d||(d=this._findFragment(o,n,s,a,c,u,i)),d&&this._loadFragmentOrKey(d,r,i,e,c)}},t.prototype._ensureFragmentAtLivePoint=function(e,t,i,n,r,a,s){var o=this.hls.config,u=this.media,c=void 0,d=void 0!==o.liveMaxLatencyDuration?o.liveMaxLatencyDuration:o.liveMaxLatencyDurationCount*e.targetduration;if(t<Math.max(i-o.maxFragLookUpTolerance,n-d)){var h=this.liveSyncPosition=this.computeLivePosition(i,e);l.b.log("buffer end: "+t.toFixed(3)+" is located too far from the end of live sliding playlist, reset currentTime to : "+h.toFixed(3)),t=h,u&&u.readyState&&u.duration>h&&(u.currentTime=h),this.nextLoadPosition=h}if(e.PTSKnown&&t>n&&u&&u.readyState)return null;if(this.startFragRequested&&!e.PTSKnown){if(r){var f=r.sn+1;if(f>=e.startSN&&f<=e.endSN){var p=a[f-e.startSN];r.cc===p.cc&&(c=p,l.b.log("live playlist, switching playlist, load frag with next SN: "+c.sn))}c||(c=x.search(a,function(e){return r.cc-e.cc}))&&l.b.log("live playlist, switching playlist, load frag with same CC: "+c.sn)}c||(c=a[Math.min(s-1,Math.round(s/2))],l.b.log("live playlist, switching playlist, unknown, load middle frag : "+c.sn))}return c},t.prototype._findFragment=function(e,t,i,n,r,a,s){var o=this.hls.config,u=void 0,c=void 0,d=o.maxFragLookUpTolerance,h=t?n[t.sn-n[0].sn+1]:void 0,f=function(e){var t=Math.min(d,e.duration+(e.deltaPTS?e.deltaPTS:0));return e.start+e.duration-t<=r?1:e.start-t>r&&e.start?-1:0};if(r<a?(r>a-d&&(d=0),c=h&&!f(h)?h:x.search(n,f)):c=n[i-1],c){var p=(u=c).sn-s.startSN,g=t&&u.level===t.level,m=n[p-1],v=n[p+1];if(t&&u.sn===t.sn)if(g&&!u.backtracked)if(u.sn<s.endSN){var y=t.deltaPTS;y&&y>o.maxBufferHole&&t.dropped&&p?(u=m,l.b.warn("SN just loaded, with large PTS gap between audio and video, maybe frag is not starting with a keyframe ? load previous one to try to overcome this"),t.loadCounter--):(u=v,l.b.log("SN just loaded, load next one: "+u.sn))}else u=null;else u.backtracked&&(v&&v.backtracked?(l.b.warn("Already backtracked from fragment "+v.sn+", will not backtrack to fragment "+u.sn+". Loading fragment "+v.sn),u=v):(l.b.warn("Loaded fragment with dropped frames, backtracking 1 segment to find a keyframe"),u.dropped=0,m?(m.loadCounter&&m.loadCounter--,(u=m).backtracked=!0):p&&(u=null)))}return u},t.prototype._loadFragmentOrKey=function(e,t,i,n,r){var a=this.hls,u=a.config;if(!e.decryptdata||null==e.decryptdata.uri||null!=e.decryptdata.key){if(l.b.log("Loading "+e.sn+" of ["+i.startSN+" ,"+i.endSN+"],level "+t+", currentTime:"+n.toFixed(3)+",bufferEnd:"+r.toFixed(3)),void 0!==this.fragLoadIdx?this.fragLoadIdx++:this.fragLoadIdx=0,e.loadCounter){e.loadCounter++;var c=u.fragLoadingLoopThreshold;if(e.loadCounter>c&&Math.abs(this.fragLoadIdx-e.loadIdx)<c)return void a.trigger(s.a.ERROR,{type:o.b.MEDIA_ERROR,details:o.a.FRAG_LOOP_LOADING_ERROR,fatal:!1,frag:e})}else e.loadCounter=1;return e.loadIdx=this.fragLoadIdx,e.autoLevel=a.autoLevelEnabled,e.bitrateTest=this.bitrateTest,this.fragCurrent=e,this.startFragRequested=!0,isNaN(e.sn)||e.bitrateTest||(this.nextLoadPosition=e.start+e.duration),a.trigger(s.a.FRAG_LOADING,{frag:e}),this.demuxer||(this.demuxer=new F(a,"main")),void(this.state=$.FRAG_LOADING)}l.b.log("Loading key for "+e.sn+" of ["+i.startSN+" ,"+i.endSN+"],level "+t),this.state=$.KEY_LOADING,a.trigger(s.a.KEY_LOADING,{frag:e})},t.prototype.getBufferedFrag=function(e){return x.search(this._bufferedFrags,function(t){return e<t.startPTS?-1:e>t.endPTS?1:0})},t.prototype.followingBufferedFrag=function(e){return e?this.getBufferedFrag(e.endPTS+.5):null},t.prototype._checkFragmentChanged=function(){var e,t,i=this.media;if(i&&i.readyState&&!1===i.seeking&&((t=i.currentTime)>i.playbackRate*this.lastCurrentTime&&(this.lastCurrentTime=t),C.isBuffered(i,t)?e=this.getBufferedFrag(t):C.isBuffered(i,t+.1)&&(e=this.getBufferedFrag(t+.1)),e)){var n=e;if(n!==this.fragPlaying){this.hls.trigger(s.a.FRAG_CHANGED,{frag:n});var r=n.level;this.fragPlaying&&this.fragPlaying.level===r||this.hls.trigger(s.a.LEVEL_SWITCHED,{level:r}),this.fragPlaying=n}}},t.prototype.immediateLevelSwitch=function(){if(l.b.log("immediateLevelSwitch"),!this.immediateSwitch){this.immediateSwitch=!0;var e=this.media,t=void 0;e?(t=e.paused,e.pause()):t=!0,this.previouslyPaused=t}var i=this.fragCurrent;i&&i.loader&&i.loader.abort(),this.fragCurrent=null,void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)},t.prototype.immediateLevelSwitchEnd=function(){var e=this.media;e&&e.buffered.length&&(this.immediateSwitch=!1,C.isBuffered(e,e.currentTime)&&(e.currentTime-=1e-4),this.previouslyPaused||e.play())},t.prototype.nextLevelSwitch=function(){var e=this.media;if(e&&e.readyState){var t,i=void 0,n=void 0;if(void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold),(t=this.getBufferedFrag(e.currentTime))&&t.startPTS>1&&this.flushMainBuffer(0,t.startPTS-1),e.paused)i=0;else{var r=this.hls.nextLoadLevel,a=this.levels[r],s=this.fragLastKbps;i=s&&this.fragCurrent?this.fragCurrent.duration*a.bitrate/(1e3*s)+1:0}if((n=this.getBufferedFrag(e.currentTime+i))&&(n=this.followingBufferedFrag(n))){var o=this.fragCurrent;o&&o.loader&&o.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(n.maxStartPTS,Number.POSITIVE_INFINITY)}}},t.prototype.flushMainBuffer=function(e,t){this.state=$.BUFFER_FLUSHING;var i={startOffset:e,endOffset:t};this.altAudio&&(i.type="video"),this.hls.trigger(s.a.BUFFER_FLUSHING,i)},t.prototype.onMediaAttached=function(e){var t=this.media=this.mediaBuffer=e.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),this.onvended=this.onMediaEnded.bind(this),t.addEventListener("seeking",this.onvseeking),t.addEventListener("seeked",this.onvseeked),t.addEventListener("ended",this.onvended);var i=this.config;this.levels&&i.autoStartLoad&&this.hls.startLoad(i.startPosition)},t.prototype.onMediaDetaching=function(){var e=this.media;e&&e.ended&&(l.b.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0);var t=this.levels;t&&t.forEach(function(e){e.details&&e.details.fragments.forEach(function(e){e.loadCounter=void 0,e.backtracked=void 0})}),e&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("seeked",this.onvseeked),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.stopLoad()},t.prototype.onMediaSeeking=function(){var e=this.media,t=e?e.currentTime:void 0,i=this.config;isNaN(t)||l.b.log("media seeking to "+t.toFixed(3));var n=this.mediaBuffer?this.mediaBuffer:e,r=C.bufferInfo(n,t,this.config.maxBufferHole);if(this.state===$.FRAG_LOADING){var a=this.fragCurrent;if(0===r.len&&a){var s=i.maxFragLookUpTolerance,o=a.start-s,u=a.start+a.duration+s;t<o||t>u?(a.loader&&(l.b.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),a.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.state=$.IDLE):l.b.log("seeking outside of buffer but within currently loaded fragment range")}}else this.state===$.ENDED&&(0===r.len&&(this.fragPrevious=0),this.state=$.IDLE);e&&(this.lastCurrentTime=t),this.state!==$.FRAG_LOADING&&void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*i.fragLoadingLoopThreshold),this.loadedmetadata||(this.nextLoadPosition=this.startPosition=t),this.tick()},t.prototype.onMediaSeeked=function(){var e=this.media,t=e?e.currentTime:void 0;isNaN(t)||l.b.log("media seeked to "+t.toFixed(3)),this.tick()},t.prototype.onMediaEnded=function(){l.b.log("media ended"),this.startPosition=this.lastCurrentTime=0},t.prototype.onManifestLoading=function(){l.b.log("trigger BUFFER_RESET"),this.hls.trigger(s.a.BUFFER_RESET),this._bufferedFrags=[],this.stalled=!1,this.startPosition=this.lastCurrentTime=0},t.prototype.onManifestParsed=function(e){var t,i=!1,n=!1;e.levels.forEach(function(e){(t=e.audioCodec)&&(-1!==t.indexOf("mp4a.40.2")&&(i=!0),-1!==t.indexOf("mp4a.40.5")&&(n=!0))}),this.audioCodecSwitch=i&&n,this.audioCodecSwitch&&l.b.log("both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=e.levels,this.startFragRequested=!1;var r=this.config;(r.autoStartLoad||this.forceStartLoad)&&this.hls.startLoad(r.startPosition)},t.prototype.onLevelLoaded=function(e){var t=e.details,i=e.level,n=this.levels[this.levelLastLoaded],r=this.levels[i],a=t.totalduration,o=0;if(l.b.log("level "+i+" loaded ["+t.startSN+","+t.endSN+"],duration:"+a),t.live){var u=r.details;u&&t.fragments.length>0?(U(u,t),o=t.fragments[0].start,this.liveSyncPosition=this.computeLivePosition(o,u),t.PTSKnown&&!isNaN(o)?l.b.log("live playlist sliding:"+o.toFixed(3)):(l.b.log("live playlist - outdated PTS, unknown sliding"),z(this.fragPrevious,n,t))):(l.b.log("live playlist - first load, unknown sliding"),t.PTSKnown=!1,z(this.fragPrevious,n,t))}else t.PTSKnown=!1;if(r.details=t,this.levelLastLoaded=i,this.hls.trigger(s.a.LEVEL_UPDATED,{details:t,level:i}),!1===this.startFragRequested){if(-1===this.startPosition||-1===this.lastCurrentTime){var c=t.startTimeOffset;isNaN(c)?t.live?(this.startPosition=this.computeLivePosition(o,t),l.b.log("configure startPosition to "+this.startPosition)):this.startPosition=0:(c<0&&(l.b.log("negative start time offset "+c+", count from end of last fragment"),c=o+a+c),l.b.log("start time offset found in playlist, adjust startPosition to "+c),this.startPosition=c),this.lastCurrentTime=this.startPosition}this.nextLoadPosition=this.startPosition}this.state===$.WAITING_LEVEL&&(this.state=$.IDLE),this.tick()},t.prototype.onKeyLoaded=function(){this.state===$.KEY_LOADING&&(this.state=$.IDLE,this.tick())},t.prototype.onFragLoaded=function(e){var t=this.fragCurrent,i=e.frag;if(this.state===$.FRAG_LOADING&&t&&"main"===i.type&&i.level===t.level&&i.sn===t.sn){var n=e.stats,r=this.levels[t.level],a=r.details;if(l.b.log("Loaded  "+t.sn+" of ["+a.startSN+" ,"+a.endSN+"],level "+t.level),this.bitrateTest=!1,this.stats=n,!0===i.bitrateTest&&this.hls.nextLoadLevel)this.state=$.IDLE,this.startFragRequested=!1,n.tparsed=n.tbuffered=performance.now(),this.hls.trigger(s.a.FRAG_BUFFERED,{stats:n,frag:t,id:"main"}),this.tick();else if("initSegment"===i.sn)this.state=$.IDLE,n.tparsed=n.tbuffered=performance.now(),a.initSegment.data=e.payload,this.hls.trigger(s.a.FRAG_BUFFERED,{stats:n,frag:t,id:"main"}),this.tick();else{this.state=$.PARSING;var o=a.totalduration,u=t.level,c=t.sn,d=this.config.defaultAudioCodec||r.audioCodec;this.audioCodecSwap&&(l.b.log("swapping playlist audio codec"),void 0===d&&(d=this.lastAudioCodec),d&&(d=-1!==d.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5")),this.pendingBuffering=!0,this.appended=!1,l.b.log("Parsing "+c+" of ["+a.startSN+" ,"+a.endSN+"],level "+u+", cc "+t.cc);var h=this.demuxer;h||(h=this.demuxer=new F(this.hls,"main"));var f=this.media,p=!(f&&f.seeking)&&(a.PTSKnown||!a.live),g=a.initSegment?a.initSegment.data:[];h.push(e.payload,g,d,r.videoCodec,t,o,p,void 0)}}this.fragLoadError=0},t.prototype.onFragParsingInitSegment=function(e){var t=this.fragCurrent,i=e.frag;if(t&&"main"===e.id&&i.sn===t.sn&&i.level===t.level&&this.state===$.PARSING){var n,r,a=e.tracks;if(a.audio&&this.altAudio&&delete a.audio,r=a.audio){var o=this.levels[this.level].audioCodec,u=navigator.userAgent.toLowerCase();o&&this.audioCodecSwap&&(l.b.log("swapping playlist audio codec"),o=-1!==o.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),this.audioCodecSwitch&&1!==r.metadata.channelCount&&-1===u.indexOf("firefox")&&(o="mp4a.40.5"),-1!==u.indexOf("android")&&"audio/mpeg"!==r.container&&(o="mp4a.40.2",l.b.log("Android: force audio codec to "+o)),r.levelCodec=o,r.id=e.id}for(n in(r=a.video)&&(r.levelCodec=this.levels[this.level].videoCodec,r.id=e.id),this.hls.trigger(s.a.BUFFER_CODECS,a),a){r=a[n],l.b.log("main track:"+n+",container:"+r.container+",codecs[level/parsed]=["+r.levelCodec+"/"+r.codec+"]");var c=r.initSegment;c&&(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(s.a.BUFFER_APPENDING,{type:n,data:c,parent:"main",content:"initSegment"}))}this.tick()}},t.prototype.onFragParsingData=function(e){var t=this,i=this.fragCurrent,n=e.frag;if(i&&"main"===e.id&&n.sn===i.sn&&n.level===i.level&&("audio"!==e.type||!this.altAudio)&&this.state===$.PARSING){var r=this.levels[this.level],a=i;if(isNaN(e.endPTS)&&(e.endPTS=e.startPTS+i.duration,e.endDTS=e.startDTS+i.duration),l.b.log("Parsed "+e.type+",PTS:["+e.startPTS.toFixed(3)+","+e.endPTS.toFixed(3)+"],DTS:["+e.startDTS.toFixed(3)+"/"+e.endDTS.toFixed(3)+"],nb:"+e.nb+",dropped:"+(e.dropped||0)),"video"===e.type)if(a.dropped=e.dropped,a.dropped)if(a.backtracked)l.b.warn("Already backtracked on this fragment, appending with the gap");else{var o=r.details;if(!o||a.sn!==o.startSN)return l.b.warn("missing video frame(s), backtracking fragment"),a.backtracked=!0,this.nextLoadPosition=e.startPTS,this.state=$.IDLE,this.fragPrevious=a,void this.tick();l.b.warn("missing video frame(s) on first frag, appending with gap")}else a.backtracked=!1;var u=B(r.details,a,e.startPTS,e.endPTS,e.startDTS,e.endDTS),c=this.hls;c.trigger(s.a.LEVEL_PTS_UPDATED,{details:r.details,level:this.level,drift:u,type:e.type,start:e.startPTS,end:e.endPTS}),[e.data1,e.data2].forEach(function(i){i&&i.length&&t.state===$.PARSING&&(t.appended=!0,t.pendingBuffering=!0,c.trigger(s.a.BUFFER_APPENDING,{type:e.type,data:i,parent:"main",content:"data"}))}),this.tick()}},t.prototype.onFragParsed=function(e){var t=this.fragCurrent,i=e.frag;t&&"main"===e.id&&i.sn===t.sn&&i.level===t.level&&this.state===$.PARSING&&(this.stats.tparsed=performance.now(),this.state=$.PARSED,this._checkAppendedParsed())},t.prototype.onAudioTrackSwitching=function(e){var t=!!e.url,i=e.id;if(!t){if(this.mediaBuffer!==this.media){l.b.log("switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var n=this.fragCurrent;n.loader&&(l.b.log("switching to main audio track, cancel main fragment load"),n.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=$.IDLE}var r=this.hls;r.trigger(s.a.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),r.trigger(s.a.AUDIO_TRACK_SWITCHED,{id:i}),this.altAudio=!1}},t.prototype.onAudioTrackSwitched=function(e){var t=e.id,i=!!this.hls.audioTracks[t].url;if(i){var n=this.videoBuffer;n&&this.mediaBuffer!==n&&(l.b.log("switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=n)}this.altAudio=i,this.tick()},t.prototype.onBufferCreated=function(e){var t=e.tracks,i=void 0,n=void 0,r=!1;for(var a in t){var s=t[a];"main"===s.id?(n=a,i=s,"video"===a&&(this.videoBuffer=t[a].buffer)):r=!0}r&&i?(l.b.log("alternate track found, use "+n+".buffered to schedule main fragment loading"),this.mediaBuffer=i.buffer):this.mediaBuffer=this.media},t.prototype.onBufferAppended=function(e){if("main"===e.parent){var t=this.state;t!==$.PARSING&&t!==$.PARSED||(this.pendingBuffering=e.pending>0,this._checkAppendedParsed())}},t.prototype._checkAppendedParsed=function(){if(!(this.state!==$.PARSED||this.appended&&this.pendingBuffering)){var e=this.fragCurrent;if(e){var t=this.mediaBuffer?this.mediaBuffer:this.media;l.b.log("main buffered : "+G.toString(t.buffered));var i=this._bufferedFrags.filter(function(e){return C.isBuffered(t,(e.startPTS+e.endPTS)/2)});i.push(e),this._bufferedFrags=i.sort(function(e,t){return e.startPTS-t.startPTS}),this.fragPrevious=e;var n=this.stats;n.tbuffered=performance.now(),this.fragLastKbps=Math.round(8*n.total/(n.tbuffered-n.tfirst)),this.hls.trigger(s.a.FRAG_BUFFERED,{stats:n,frag:e,id:"main"}),this.state=$.IDLE}this.tick()}},t.prototype.onError=function(e){var t=e.frag||this.fragCurrent;if(!t||"main"===t.type){var i=!!this.media&&C.isBuffered(this.media,this.media.currentTime)&&C.isBuffered(this.media,this.media.currentTime+.5);switch(e.details){case o.a.FRAG_LOAD_ERROR:case o.a.FRAG_LOAD_TIMEOUT:case o.a.KEY_LOAD_ERROR:case o.a.KEY_LOAD_TIMEOUT:if(!e.fatal)if(this.fragLoadError+1<=this.config.fragLoadingMaxRetry){var n=Math.min(Math.pow(2,this.fragLoadError)*this.config.fragLoadingRetryDelay,this.config.fragLoadingMaxRetryTimeout);t.loadCounter=0,l.b.warn("mediaController: frag loading failed, retry in "+n+" ms"),this.retryDate=performance.now()+n,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.fragLoadError++,this.state=$.FRAG_LOADING_WAITING_RETRY}else l.b.error("mediaController: "+e.details+" reaches max retry, redispatch as fatal ..."),e.fatal=!0,this.state=$.ERROR;break;case o.a.FRAG_LOOP_LOADING_ERROR:e.fatal||(i?(this._reduceMaxBufferLength(t.duration),this.state=$.IDLE):t.autoLevel&&0!==t.level||(e.fatal=!0,this.state=$.ERROR));break;case o.a.LEVEL_LOAD_ERROR:case o.a.LEVEL_LOAD_TIMEOUT:this.state!==$.ERROR&&(e.fatal?(this.state=$.ERROR,l.b.warn("streamController: "+e.details+",switch to "+this.state+" state ...")):e.levelRetry||this.state!==$.WAITING_LEVEL||(this.state=$.IDLE));break;case o.a.BUFFER_FULL_ERROR:"main"!==e.parent||this.state!==$.PARSING&&this.state!==$.PARSED||(i?(this._reduceMaxBufferLength(this.config.maxBufferLength),this.state=$.IDLE):(l.b.warn("buffer full error also media.currentTime is not buffered, flush everything"),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)))}}},t.prototype._reduceMaxBufferLength=function(e){var t=this.config;t.maxMaxBufferLength>=e&&(t.maxMaxBufferLength/=2,l.b.warn("main:reduce max buffer length to "+t.maxMaxBufferLength+"s"),void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*t.fragLoadingLoopThreshold))},t.prototype._checkBuffer=function(){var e=this.media,t=this.config;if(e&&e.readyState){var i=e.currentTime,n=this.mediaBuffer?this.mediaBuffer:e,r=n.buffered;if(!this.loadedmetadata&&r.length){this.loadedmetadata=!0;var a=e.seeking?i:this.startPosition,u=C.isBuffered(n,a),c=r.start(0),d=!u&&Math.abs(a-c)<t.maxSeekHole;(i!==a||d)&&(l.b.log("target start position:"+a),d&&(a=c,l.b.log("target start position not buffered, seek to buffered.start(0) "+a)),l.b.log("adjust currentTime from "+i+" to "+a),e.currentTime=a)}else if(this.immediateSwitch)this.immediateLevelSwitchEnd();else{var h=C.bufferInfo(e,i,0),f=!(e.paused||e.ended||0===e.buffered.length);if(i!==this.lastCurrentTime)this.stallReported&&(l.b.warn("playback not stuck anymore @"+i+", after "+Math.round(performance.now()-this.stalled)+"ms"),this.stallReported=!1),this.stalled=void 0,this.nudgeRetry=0;else if(f){var p=performance.now(),g=this.hls;if(this.stalled){var m=p-this.stalled,v=h.len,y=this.nudgeRetry||0;if(v<=.5&&m>1e3*t.lowBufferWatchdogPeriod){this.stallReported||(this.stallReported=!0,l.b.warn("playback stalling in low buffer @"+i),g.trigger(s.a.ERROR,{type:o.b.MEDIA_ERROR,details:o.a.BUFFER_STALLED_ERROR,fatal:!1,buffer:v}));var _=h.nextStart,b=_-i;if(_&&b<t.maxSeekHole&&b>0){this.nudgeRetry=++y;var w=y*t.nudgeOffset;l.b.log("adjust currentTime from "+e.currentTime+" to next buffered @ "+_+" + nudge "+w),e.currentTime=_+w,this.stalled=void 0,g.trigger(s.a.ERROR,{type:o.b.MEDIA_ERROR,details:o.a.BUFFER_SEEK_OVER_HOLE,fatal:!1,hole:_+w-i})}}else if(v>.5&&m>1e3*t.highBufferWatchdogPeriod)if(this.stallReported||(this.stallReported=!0,l.b.warn("playback stalling in high buffer @"+i),g.trigger(s.a.ERROR,{type:o.b.MEDIA_ERROR,details:o.a.BUFFER_STALLED_ERROR,fatal:!1,buffer:v})),this.stalled=void 0,this.nudgeRetry=++y,y<t.nudgeMaxRetry){var E=e.currentTime,A=E+y*t.nudgeOffset;l.b.log("adjust currentTime from "+E+" to "+A),e.currentTime=A,g.trigger(s.a.ERROR,{type:o.b.MEDIA_ERROR,details:o.a.BUFFER_NUDGE_ON_STALL,fatal:!1})}else l.b.error("still stuck in high buffer @"+i+" after "+t.nudgeMaxRetry+", raise fatal error"),g.trigger(s.a.ERROR,{type:o.b.MEDIA_ERROR,details:o.a.BUFFER_STALLED_ERROR,fatal:!0})}else this.stalled=p,this.stallReported=!1}}}},t.prototype.onFragLoadEmergencyAborted=function(){this.state=$.IDLE,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tick()},t.prototype.onBufferFlushed=function(){var e=this.mediaBuffer?this.mediaBuffer:this.media;this._bufferedFrags=this._bufferedFrags.filter(function(t){return C.isBuffered(e,(t.startPTS+t.endPTS)/2)}),void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold),this.state=$.IDLE,this.fragPrevious=null},t.prototype.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap},t.prototype.computeLivePosition=function(e,t){var i=void 0!==this.config.liveSyncDuration?this.config.liveSyncDuration:this.config.liveSyncDurationCount*t.targetduration;return e+Math.max(0,t.totalduration-i)},W(t,[{key:"state",set:function(e){if(this.state!==e){var t=this.state;this._state=e,l.b.log("main stream:"+t+"->"+e),this.hls.trigger(s.a.STREAM_STATE_TRANSITION,{previousState:t,nextState:e})}},get:function(){return this._state}},{key:"currentLevel",get:function(){var e=this.media;if(e){var t=this.getBufferedFrag(e.currentTime);if(t)return t.level}return-1}},{key:"nextBufferedFrag",get:function(){var e=this.media;return e?this.followingBufferedFrag(this.getBufferedFrag(e.currentTime)):null}},{key:"nextLevel",get:function(){var e=this.nextBufferedFrag;return e?e.level:-1}},{key:"liveSyncPosition",get:function(){return this._liveSyncPosition},set:function(e){this._liveSyncPosition=e}}]),t}(c),Y=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var q=function(e){function t(i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,i,s.a.MANIFEST_LOADED,s.a.LEVEL_LOADED,s.a.FRAG_LOADED,s.a.ERROR));return n.canload=!1,n.currentLevelIndex=null,n.manualLevelIndex=-1,n.timer=null,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.destroy=function(){this.cleanTimer(),this.manualLevelIndex=-1},t.prototype.cleanTimer=function(){null!==this.timer&&(clearTimeout(this.timer),this.timer=null)},t.prototype.startLoad=function(){var e=this._levels;this.canload=!0,this.levelRetryCount=0,e&&e.forEach(function(e){e.loadError=0;var t=e.details;t&&t.live&&(e.details=void 0)}),null!==this.timer&&this.loadLevel()},t.prototype.stopLoad=function(){this.canload=!1},t.prototype.onManifestLoaded=function(e){var t=[],i=void 0,n={},r=null,a=!1,u=!1,c=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),d=[];if(e.levels.forEach(function(e){e.loadError=0,e.fragmentError=!1,a=a||!!e.videoCodec,u=u||!!e.audioCodec||!(!e.attrs||!e.attrs.AUDIO),!0===c&&e.audioCodec&&-1!==e.audioCodec.indexOf("mp4a.40.34")&&(e.audioCodec=void 0),void 0===(r=n[e.bitrate])?(e.url=[e.url],e.urlId=0,n[e.bitrate]=e,t.push(e)):r.url.push(e.url)}),!0===a&&!0===u&&(t=t.filter(function(e){return!!e.videoCodec})),t=t.filter(function(e){var t=e.audioCodec,i=e.videoCodec;return(!t||g(t))&&(!i||g(i))}),e.audioTracks&&(d=e.audioTracks.filter(function(e){return!e.audioCodec||g(e.audioCodec,"audio")})),t.length>0){i=t[0].bitrate,t.sort(function(e,t){return e.bitrate-t.bitrate}),this._levels=t;for(var h=0;h<t.length;h++)if(t[h].bitrate===i){this._firstLevel=h,l.b.log("manifest loaded,"+t.length+" level(s) found, first bitrate:"+i);break}this.hls.trigger(s.a.MANIFEST_PARSED,{levels:t,audioTracks:d,firstLevel:this._firstLevel,stats:e.stats,audio:u,video:a,altAudio:d.length>0})}else this.hls.trigger(s.a.ERROR,{type:o.b.MEDIA_ERROR,details:o.a.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:this.hls.url,reason:"no level with compatible codecs found in manifest"})},t.prototype.setLevelInternal=function(e){var t=this._levels,i=this.hls;if(e>=0&&e<t.length){if(this.cleanTimer(),this.currentLevelIndex!==e){l.b.log("switching to level "+e),this.currentLevelIndex=e;var n=t[e];n.level=e,i.trigger(s.a.LEVEL_SWITCH,n),i.trigger(s.a.LEVEL_SWITCHING,n)}var r=t[e],a=r.details;if(!a||!0===a.live){var u=r.urlId;i.trigger(s.a.LEVEL_LOADING,{url:r.url[u],level:e,id:u})}}else i.trigger(s.a.ERROR,{type:o.b.OTHER_ERROR,details:o.a.LEVEL_SWITCH_ERROR,level:e,fatal:!1,reason:"invalid level idx"})},t.prototype.onError=function(e){if(!0!==e.fatal){var t=!1,i=!1,n=void 0;switch(e.details){case o.a.FRAG_LOAD_ERROR:case o.a.FRAG_LOAD_TIMEOUT:case o.a.FRAG_LOOP_LOADING_ERROR:case o.a.KEY_LOAD_ERROR:case o.a.KEY_LOAD_TIMEOUT:n=e.frag.level,i=!0;break;case o.a.LEVEL_LOAD_ERROR:case o.a.LEVEL_LOAD_TIMEOUT:n=e.context.level,t=!0;break;case o.a.REMUX_ALLOC_ERROR:n=e.level,t=!0}void 0!==n&&this.recoverLevel(e,n,t,i)}else e.type===o.b.NETWORK_ERROR&&this.cleanTimer()},t.prototype.recoverLevel=function(e,t,i,n){var r=this,a=this.hls.config,s=e.details,o=this._levels[t],u=void 0,c=void 0,d=void 0;if(o.loadError++,o.fragmentError=n,!0===i){if(!(this.levelRetryCount+1<=a.levelLoadingMaxRetry))return l.b.error("level controller, cannot recover from "+s+" error"),this.currentLevelIndex=null,this.cleanTimer(),void(e.fatal=!0);c=Math.min(Math.pow(2,this.levelRetryCount)*a.levelLoadingRetryDelay,a.levelLoadingMaxRetryTimeout),this.timer=setTimeout(function(){return r.loadLevel()},c),e.levelRetry=!0,this.levelRetryCount++,l.b.warn("level controller, "+s+", retry in "+c+" ms, current retry count is "+this.levelRetryCount)}!0!==i&&!0!==n||((u=o.url.length)>1&&o.loadError<u?(l.b.warn("level controller, "+s+" for level "+t+": switching to redundant stream id "+o.urlId),o.urlId=(o.urlId+1)%u,o.details=void 0):-1===this.manualLevelIndex?(d=0===t?this._levels.length-1:t-1,l.b.warn("level controller, "+s+": switch to "+d),this.hls.nextAutoLevel=this.currentLevelIndex=d):!0===n&&(l.b.warn("level controller, "+s+": reload a fragment"),this.currentLevelIndex=null))},t.prototype.onFragLoaded=function(e){var t=e.frag;if(void 0!==t&&"main"===t.type){var i=this._levels[t.level];void 0!==i&&(i.fragmentError=!1,i.loadError=0,this.levelRetryCount=0)}},t.prototype.onLevelLoaded=function(e){var t=this,i=e.level;if(i===this.currentLevelIndex){var n=this._levels[i];!1===n.fragmentError&&(n.loadError=0,this.levelRetryCount=0);var r=e.details;if(r.live){var a=1e3*(r.averagetargetduration?r.averagetargetduration:r.targetduration),s=n.details;s&&r.endSN===s.endSN&&(a/=2,l.b.log("same live playlist, reload twice faster")),a-=performance.now()-e.stats.trequest,a=Math.max(1e3,Math.round(a)),l.b.log("live playlist, reload in "+a+" ms"),this.timer=setTimeout(function(){return t.loadLevel()},a)}else this.cleanTimer()}},t.prototype.loadLevel=function(){var e=void 0,t=void 0;null!==this.currentLevelIndex&&!0===this.canload&&void 0!==(e=this._levels[this.currentLevelIndex])&&e.url.length>0&&(t=e.urlId,this.hls.trigger(s.a.LEVEL_LOADING,{url:e.url[t],level:this.currentLevelIndex,id:t}))},Y(t,[{key:"levels",get:function(){return this._levels}},{key:"level",get:function(){return this.currentLevelIndex},set:function(e){var t=this._levels;t&&(e=Math.min(e,t.length-1),this.currentLevelIndex===e&&void 0!==t[e].details||this.setLevelInternal(e))}},{key:"manualLevel",get:function(){return this.manualLevelIndex},set:function(e){this.manualLevelIndex=e,void 0===this._startLevel&&(this._startLevel=e),-1!==e&&(this.level=e)}},{key:"firstLevel",get:function(){return this._firstLevel},set:function(e){this._firstLevel=e}},{key:"startLevel",get:function(){if(void 0===this._startLevel){var e=this.hls.config.startLevel;return void 0!==e?e:this._firstLevel}return this._startLevel},set:function(e){this._startLevel=e}},{key:"nextLoadLevel",get:function(){return-1!==this.manualLevelIndex?this.manualLevelIndex:this.hls.nextAutoLevel},set:function(e){this.level=e,-1===this.manualLevelIndex&&(this.hls.nextAutoLevel=e)}}]),t}(c),X=i(3);var J=function(e){function t(i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,i,s.a.MEDIA_ATTACHED,s.a.MEDIA_DETACHING,s.a.FRAG_PARSING_METADATA));return n.id3Track=void 0,n.media=void 0,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.destroy=function(){c.prototype.destroy.call(this)},t.prototype.onMediaAttached=function(e){this.media=e.media,this.media},t.prototype.onMediaDetaching=function(){this.media=void 0},t.prototype.onFragParsingMetadata=function(e){var t=e.frag,i=e.samples;this.id3Track||(this.id3Track=this.media.addTextTrack("metadata","id3"),this.id3Track.mode="hidden");for(var n=window.WebKitDataCue||window.VTTCue||window.TextTrackCue,r=0;r<i.length;r++){var a=X.a.getID3Frames(i[r].data);if(a){var s=i[r].pts,o=r<i.length-1?i[r+1].pts:t.endPTS;s===o&&(o+=1e-4);for(var l=0;l<a.length;l++){var u=a[l];if(!X.a.isTimeStampFrame(u)){var c=new n(s,o,"");c.value=u,this.id3Track.addCue(c)}}}}},t}(c);var K=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.alpha_=t?Math.exp(Math.log(.5)/t):0,this.estimate_=0,this.totalWeight_=0}return e.prototype.sample=function(e,t){var i=Math.pow(this.alpha_,e);this.estimate_=t*(1-i)+i*this.estimate_,this.totalWeight_+=e},e.prototype.getTotalWeight=function(){return this.totalWeight_},e.prototype.getEstimate=function(){if(this.alpha_){var e=1-Math.pow(this.alpha_,this.totalWeight_);return this.estimate_/e}return this.estimate_},e}();var Q=function(){function e(t,i,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.hls=t,this.defaultEstimate_=r,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new K(i),this.fast_=new K(n)}return e.prototype.sample=function(e,t){var i=8e3*t/(e=Math.max(e,this.minDelayMs_)),n=e/1e3;this.fast_.sample(n,i),this.slow_.sample(n,i)},e.prototype.canEstimate=function(){var e=this.fast_;return e&&e.getTotalWeight()>=this.minWeight_},e.prototype.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},e.prototype.destroy=function(){},e}(),Z=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var ee=function(e){function t(i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,i,s.a.FRAG_LOADING,s.a.FRAG_LOADED,s.a.FRAG_BUFFERED,s.a.ERROR));return n.lastLoadedFragLevel=0,n._nextAutoLevel=-1,n.hls=i,n.timer=null,n._bwEstimator=null,n.onCheck=n._abandonRulesCheck.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.destroy=function(){this.clearTimer(),c.prototype.destroy.call(this)},t.prototype.onFragLoading=function(e){var t=e.frag;if("main"===t.type){if(this.timer||(this.timer=setInterval(this.onCheck,100)),!this._bwEstimator){var i=this.hls,n=e.frag.level,r=i.levels[n].details.live,a=i.config,s=void 0,o=void 0;r?(s=a.abrEwmaFastLive,o=a.abrEwmaSlowLive):(s=a.abrEwmaFastVoD,o=a.abrEwmaSlowVoD),this._bwEstimator=new Q(i,o,s,a.abrEwmaDefaultEstimate)}this.fragCurrent=t}},t.prototype._abandonRulesCheck=function(){var e=this.hls,t=e.media,i=this.fragCurrent,n=i.loader,r=e.minAutoLevel;if(!n||n.stats&&n.stats.aborted)return l.b.warn("frag loader destroy or aborted, disarm abandonRules"),this.clearTimer(),void(this._nextAutoLevel=-1);var a=n.stats;if(t&&a&&(!t.paused&&0!==t.playbackRate||!t.readyState)&&i.autoLevel&&i.level){var o=performance.now()-a.trequest,u=Math.abs(t.playbackRate);if(o>500*i.duration/u){var c=e.levels,d=Math.max(1,a.bw?a.bw/8:1e3*a.loaded/o),h=c[i.level],f=h.realBitrate?Math.max(h.realBitrate,h.bitrate):h.bitrate,p=a.total?a.total:Math.max(a.loaded,Math.round(i.duration*f/8)),g=t.currentTime,m=(p-a.loaded)/d,v=(C.bufferInfo(t,g,e.config.maxBufferHole).end-g)/u;if(v<2*i.duration/u&&m>v){var y=void 0,_=void 0;for(_=i.level-1;_>r;_--){var b=c[_].realBitrate?Math.max(c[_].realBitrate,c[_].bitrate):c[_].bitrate;if((y=i.duration*b/(6.4*d))<v)break}y<m&&(l.b.warn("loading too slow, abort fragment loading and switch to level "+_+":fragLoadedDelay["+_+"]<fragLoadedDelay["+(i.level-1)+"];bufferStarvationDelay:"+y.toFixed(1)+"<"+m.toFixed(1)+":"+v.toFixed(1)),e.nextLoadLevel=_,this._bwEstimator.sample(o,a.loaded),n.abort(),this.clearTimer(),e.trigger(s.a.FRAG_LOAD_EMERGENCY_ABORTED,{frag:i,stats:a}))}}}},t.prototype.onFragLoaded=function(e){var t=e.frag;if("main"===t.type&&!isNaN(t.sn)){if(this.clearTimer(),this.lastLoadedFragLevel=t.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){var i=this.hls.levels[t.level],n=(i.loaded?i.loaded.bytes:0)+e.stats.loaded,r=(i.loaded?i.loaded.duration:0)+e.frag.duration;i.loaded={bytes:n,duration:r},i.realBitrate=Math.round(8*n/r)}if(e.frag.bitrateTest){var a=e.stats;a.tparsed=a.tbuffered=a.tload,this.onFragBuffered(e)}}},t.prototype.onFragBuffered=function(e){var t=e.stats,i=e.frag;if(!(!0===t.aborted||1!==i.loadCounter||"main"!==i.type||isNaN(i.sn)||i.bitrateTest&&t.tload!==t.tbuffered)){var n=t.tparsed-t.trequest;l.b.log("latency/loading/parsing/append/kbps:"+Math.round(t.tfirst-t.trequest)+"/"+Math.round(t.tload-t.tfirst)+"/"+Math.round(t.tparsed-t.tload)+"/"+Math.round(t.tbuffered-t.tparsed)+"/"+Math.round(8*t.loaded/(t.tbuffered-t.trequest))),this._bwEstimator.sample(n,t.loaded),t.bwEstimate=this._bwEstimator.getEstimate(),i.bitrateTest?this.bitrateTestDelay=n/1e3:this.bitrateTestDelay=0}},t.prototype.onError=function(e){switch(e.details){case o.a.FRAG_LOAD_ERROR:case o.a.FRAG_LOAD_TIMEOUT:this.clearTimer()}},t.prototype.clearTimer=function(){clearInterval(this.timer),this.timer=null},t.prototype._findBestLevel=function(e,t,i,n,r,a,s,o,u){for(var c=r;c>=n;c--){var d=u[c].details,h=d?d.totalduration/d.fragments.length:t,f=!!d&&d.live,p=void 0;p=c<=e?s*i:o*i;var g=u[c].realBitrate?Math.max(u[c].realBitrate,u[c].bitrate):u[c].bitrate,m=g*h/p;if(l.b.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+c+"/"+Math.round(p)+"/"+g+"/"+h+"/"+a+"/"+m),p>g&&(!m||f&&!this.bitrateTestDelay||m<a))return c}return-1},Z(t,[{key:"nextAutoLevel",get:function(){var e=this._nextAutoLevel,t=this._bwEstimator;if(!(-1===e||t&&t.canEstimate()))return e;var i=this._nextABRAutoLevel;return-1!==e&&(i=Math.min(e,i)),i},set:function(e){this._nextAutoLevel=e}},{key:"_nextABRAutoLevel",get:function(){var e=this.hls,t=e.maxAutoLevel,i=e.levels,n=e.config,r=e.minAutoLevel,a=e.media,s=this.lastLoadedFragLevel,o=this.fragCurrent?this.fragCurrent.duration:0,u=a?a.currentTime:0,c=a&&0!==a.playbackRate?Math.abs(a.playbackRate):1,d=this._bwEstimator?this._bwEstimator.getEstimate():n.abrEwmaDefaultEstimate,h=(C.bufferInfo(a,u,n.maxBufferHole).end-u)/c,f=this._findBestLevel(s,o,d,r,t,h,n.abrBandWidthFactor,n.abrBandWidthUpFactor,i);if(f>=0)return f;l.b.trace("rebuffering expected to happen, lets try to find a quality level minimizing the rebuffering");var p=o?Math.min(o,n.maxStarvationDelay):n.maxStarvationDelay,g=n.abrBandWidthFactor,m=n.abrBandWidthUpFactor;if(0===h){var v=this.bitrateTestDelay;if(v)p=(o?Math.min(o,n.maxLoadingDelay):n.maxLoadingDelay)-v,l.b.trace("bitrate test took "+Math.round(1e3*v)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*p)+" ms"),g=m=1}return f=this._findBestLevel(s,o,d,r,t,h+p,g,m,i),Math.max(f,0)}}]),t}(c);var te=M(),ie=function(e){function t(i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,i,s.a.MEDIA_ATTACHING,s.a.MEDIA_DETACHING,s.a.MANIFEST_PARSED,s.a.BUFFER_RESET,s.a.BUFFER_APPENDING,s.a.BUFFER_CODECS,s.a.BUFFER_EOS,s.a.BUFFER_FLUSHING,s.a.LEVEL_PTS_UPDATED,s.a.LEVEL_UPDATED));return n._msDuration=null,n._levelDuration=null,n._live=null,n._objectUrl=null,n.onsbue=n.onSBUpdateEnd.bind(n),n.onsbe=n.onSBUpdateError.bind(n),n.pendingTracks={},n.tracks={},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.destroy=function(){c.prototype.destroy.call(this)},t.prototype.onLevelPtsUpdated=function(e){var t=e.type,i=this.tracks.audio;if("audio"===t&&i&&"audio/mpeg"===i.container){var n=this.sourceBuffer.audio;if(Math.abs(n.timestampOffset-e.start)>.1){var r=n.updating;try{n.abort()}catch(e){r=!0,l.b.warn("can not abort audio buffer: "+e)}r?this.audioTimestampOffset=e.start:(l.b.warn("change mpeg audio timestamp offset from "+n.timestampOffset+" to "+e.start),n.timestampOffset=e.start)}}},t.prototype.onManifestParsed=function(e){var t=e.audio,i=e.video||e.levels.length&&e.audio,n=0;e.altAudio&&(t||i)&&(n=(t?1:0)+(i?1:0),l.b.log(n+" sourceBuffer(s) expected")),this.sourceBufferNb=n},t.prototype.onMediaAttaching=function(e){var t=this.media=e.media;if(t){var i=this.mediaSource=new te;this.onmso=this.onMediaSourceOpen.bind(this),this.onmse=this.onMediaSourceEnded.bind(this),this.onmsc=this.onMediaSourceClose.bind(this),i.addEventListener("sourceopen",this.onmso),i.addEventListener("sourceended",this.onmse),i.addEventListener("sourceclose",this.onmsc),t.src=URL.createObjectURL(i),this._objectUrl=t.src}},t.prototype.onMediaDetaching=function(){l.b.log("media source detaching");var e=this.mediaSource;if(e){if("open"===e.readyState)try{e.endOfStream()}catch(e){l.b.warn("onMediaDetaching:"+e.message+" while calling endOfStream")}e.removeEventListener("sourceopen",this.onmso),e.removeEventListener("sourceended",this.onmse),e.removeEventListener("sourceclose",this.onmsc),this.media&&(URL.revokeObjectURL(this._objectUrl),this.media.src===this._objectUrl?(this.media.removeAttribute("src"),this.media.load()):l.b.warn("media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.pendingTracks={},this.tracks={},this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0}this.onmso=this.onmse=this.onmsc=null,this.hls.trigger(s.a.MEDIA_DETACHED)},t.prototype.onMediaSourceOpen=function(){l.b.log("media source opened"),this.hls.trigger(s.a.MEDIA_ATTACHED,{media:this.media});var e=this.mediaSource;e&&e.removeEventListener("sourceopen",this.onmso),this.checkPendingTracks()},t.prototype.checkPendingTracks=function(){var e=this.pendingTracks,t=Object.keys(e).length;t&&(this.sourceBufferNb<=t||0===this.sourceBufferNb)&&(this.createSourceBuffers(e),this.pendingTracks={},this.doAppending())},t.prototype.onMediaSourceClose=function(){l.b.log("media source closed")},t.prototype.onMediaSourceEnded=function(){l.b.log("media source ended")},t.prototype.onSBUpdateEnd=function(){if(this.audioTimestampOffset){var e=this.sourceBuffer.audio;l.b.warn("change mpeg audio timestamp offset from "+e.timestampOffset+" to "+this.audioTimestampOffset),e.timestampOffset=this.audioTimestampOffset,delete this.audioTimestampOffset}this._needsFlush&&this.doFlush(),this._needsEos&&this.checkEos(),this.appending=!1;var t=this.parent,i=this.segments.reduce(function(e,i){return i.parent===t?e+1:e},0);this.hls.trigger(s.a.BUFFER_APPENDED,{parent:t,pending:i}),this._needsFlush||this.doAppending(),this.updateMediaElementDuration()},t.prototype.onSBUpdateError=function(e){l.b.error("sourceBuffer error:",e),this.hls.trigger(s.a.ERROR,{type:o.b.MEDIA_ERROR,details:o.a.BUFFER_APPENDING_ERROR,fatal:!1})},t.prototype.onBufferReset=function(){var e=this.sourceBuffer;for(var t in e){var i=e[t];try{this.mediaSource.removeSourceBuffer(i),i.removeEventListener("updateend",this.onsbue),i.removeEventListener("error",this.onsbe)}catch(e){}}this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0},t.prototype.onBufferCodecs=function(e){if(0===Object.keys(this.sourceBuffer).length){for(var t in e)this.pendingTracks[t]=e[t];var i=this.mediaSource;i&&"open"===i.readyState&&this.checkPendingTracks()}},t.prototype.createSourceBuffers=function(e){var t=this.sourceBuffer,i=this.mediaSource;for(var n in e)if(!t[n]){var r=e[n],a=r.levelCodec||r.codec,u=r.container+";codecs="+a;l.b.log("creating sourceBuffer("+u+")");try{var c=t[n]=i.addSourceBuffer(u);c.addEventListener("updateend",this.onsbue),c.addEventListener("error",this.onsbe),this.tracks[n]={codec:a,container:r.container},r.buffer=c}catch(e){l.b.error("error while trying to add sourceBuffer:"+e.message),this.hls.trigger(s.a.ERROR,{type:o.b.MEDIA_ERROR,details:o.a.BUFFER_ADD_CODEC_ERROR,fatal:!1,err:e,mimeType:u})}}this.hls.trigger(s.a.BUFFER_CREATED,{tracks:e})},t.prototype.onBufferAppending=function(e){this._needsFlush||(this.segments?this.segments.push(e):this.segments=[e],this.doAppending())},t.prototype.onBufferAppendFail=function(e){l.b.error("sourceBuffer error:",e.event),this.hls.trigger(s.a.ERROR,{type:o.b.MEDIA_ERROR,details:o.a.BUFFER_APPENDING_ERROR,fatal:!1})},t.prototype.onBufferEos=function(e){var t=this.sourceBuffer,i=e.type;for(var n in t)i&&n!==i||t[n].ended||(t[n].ended=!0,l.b.log(n+" sourceBuffer now EOS"));this.checkEos()},t.prototype.checkEos=function(){var e=this.sourceBuffer,t=this.mediaSource;if(t&&"open"===t.readyState){for(var i in e){var n=e[i];if(!n.ended)return;if(n.updating)return void(this._needsEos=!0)}l.b.log("all media data available, signal endOfStream() to MediaSource and stop loading fragment");try{t.endOfStream()}catch(e){l.b.warn("exception while calling mediaSource.endOfStream()")}this._needsEos=!1}else this._needsEos=!1},t.prototype.onBufferFlushing=function(e){this.flushRange.push({start:e.startOffset,end:e.endOffset,type:e.type}),this.flushBufferCounter=0,this.doFlush()},t.prototype.onLevelUpdated=function(e){var t=e.details;t.fragments.length>0&&(this._levelDuration=t.totalduration+t.fragments[0].start,this._live=t.live,this.updateMediaElementDuration())},t.prototype.updateMediaElementDuration=function(){var e,t=this.hls.config;if(null!==this._levelDuration&&this.media&&this.mediaSource&&this.sourceBuffer&&0!==this.media.readyState&&"open"===this.mediaSource.readyState){for(var i in this.sourceBuffer)if(!0===this.sourceBuffer[i].updating)return;e=this.media.duration,null===this._msDuration&&(this._msDuration=this.mediaSource.duration),!0===this._live&&!0===t.liveDurationInfinity?(l.b.log("Media Source duration is set to Infinity"),this._msDuration=this.mediaSource.duration=1/0):(this._levelDuration>this._msDuration&&this._levelDuration>e||e===1/0||isNaN(e))&&(l.b.log("Updating Media Source duration to "+this._levelDuration.toFixed(3)),this._msDuration=this.mediaSource.duration=this._levelDuration)}},t.prototype.doFlush=function(){for(;this.flushRange.length;){var e=this.flushRange[0];if(!this.flushBuffer(e.start,e.end,e.type))return void(this._needsFlush=!0);this.flushRange.shift(),this.flushBufferCounter=0}if(0===this.flushRange.length){this._needsFlush=!1;var t=0,i=this.sourceBuffer;try{for(var n in i)t+=i[n].buffered.length}catch(e){l.b.error("error while accessing sourceBuffer.buffered")}this.appended=t,this.hls.trigger(s.a.BUFFER_FLUSHED)}},t.prototype.doAppending=function(){var e=this.hls,t=this.sourceBuffer,i=this.segments;if(Object.keys(t).length){if(this.media.error)return this.segments=[],void l.b.error("trying to append although a media error occured, flush segment and abort");if(this.appending)return;if(i&&i.length){var n=i.shift();try{var r=t[n.type];r?r.updating?i.unshift(n):(r.ended=!1,this.parent=n.parent,r.appendBuffer(n.data),this.appendError=0,this.appended++,this.appending=!0):this.onSBUpdateEnd()}catch(t){l.b.error("error while trying to append buffer:"+t.message),i.unshift(n);var a={type:o.b.MEDIA_ERROR,parent:n.parent};if(22===t.code)return this.segments=[],a.details=o.a.BUFFER_FULL_ERROR,a.fatal=!1,void e.trigger(s.a.ERROR,a);if(this.appendError?this.appendError++:this.appendError=1,a.details=o.a.BUFFER_APPEND_ERROR,this.appendError>e.config.appendErrorMaxRetry)return l.b.log("fail "+e.config.appendErrorMaxRetry+" times to append segment in sourceBuffer"),i=[],a.fatal=!0,void e.trigger(s.a.ERROR,a);a.fatal=!1,e.trigger(s.a.ERROR,a)}}}},t.prototype.flushBuffer=function(e,t,i){var n,r,a,s,o,u,c=this.sourceBuffer;if(Object.keys(c).length){if(l.b.log("flushBuffer,pos/start/end: "+this.media.currentTime.toFixed(3)+"/"+e+"/"+t),this.flushBufferCounter<this.appended){for(var d in c)if(!i||d===i){if((n=c[d]).ended=!1,n.updating)return l.b.warn("cannot flush, sb updating in progress"),!1;try{for(r=0;r<n.buffered.length;r++)if(a=n.buffered.start(r),s=n.buffered.end(r),-1!==navigator.userAgent.toLowerCase().indexOf("firefox")&&t===Number.POSITIVE_INFINITY?(o=e,u=t):(o=Math.max(a,e),u=Math.min(s,t)),Math.min(u,s)-o>.5)return this.flushBufferCounter++,l.b.log("flush "+d+" ["+o+","+u+"], of ["+a+","+s+"], pos:"+this.media.currentTime),n.remove(o,u),!1}catch(e){l.b.warn("exception while accessing sourcebuffer, it might have been removed from MediaSource")}}}else l.b.warn("abort flushing too many retries");l.b.log("buffer flushed")}return!0},t}(c),ne=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var re=function(e){function t(i){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,i,s.a.FPS_DROP_LEVEL_CAPPING,s.a.MEDIA_ATTACHING,s.a.MANIFEST_PARSED))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.destroy=function(){this.hls.config.capLevelToPlayerSize&&(this.media=this.restrictedLevels=null,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(this.timer=clearInterval(this.timer)))},t.prototype.onFpsDropLevelCapping=function(e){t.isLevelAllowed(e.droppedLevel,this.restrictedLevels)&&this.restrictedLevels.push(e.droppedLevel)},t.prototype.onMediaAttaching=function(e){this.media=e.media instanceof HTMLVideoElement?e.media:null},t.prototype.onManifestParsed=function(e){var t=this.hls;this.restrictedLevels=[],t.config.capLevelToPlayerSize&&(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.levels=e.levels,t.firstLevel=this.getMaxLevel(e.firstLevel),clearInterval(this.timer),this.timer=setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},t.prototype.detectPlayerSize=function(){if(this.media){var e=this.levels?this.levels.length:0;if(e){var t=this.hls;t.autoLevelCapping=this.getMaxLevel(e-1),t.autoLevelCapping>this.autoLevelCapping&&t.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping}}},t.prototype.getMaxLevel=function(e){var i=this;if(!this.levels)return-1;var n=this.levels.filter(function(n,r){return t.isLevelAllowed(r,i.restrictedLevels)&&r<=e});return t.getMaxLevelByMediaSize(n,this.mediaWidth,this.mediaHeight)},t.isLevelAllowed=function(e){return-1===(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).indexOf(e)},t.getMaxLevelByMediaSize=function(e,t,i){if(!e||e&&!e.length)return-1;for(var n,r,a=e.length-1,s=0;s<e.length;s+=1){var o=e[s];if((o.width>=t||o.height>=i)&&(n=o,!(r=e[s+1])||n.width!==r.width||n.height!==r.height)){a=s;break}}return a},ne(t,[{key:"mediaWidth",get:function(){var e=void 0,i=this.media;return i&&(e=i.width||i.clientWidth||i.offsetWidth,e*=t.contentScaleFactor),e}},{key:"mediaHeight",get:function(){var e=void 0,i=this.media;return i&&(e=i.height||i.clientHeight||i.offsetHeight,e*=t.contentScaleFactor),e}}],[{key:"contentScaleFactor",get:function(){var e=1;try{e=window.devicePixelRatio}catch(e){}return e}}]),t}(c);var ae=function(e){function t(i){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,i,s.a.MEDIA_ATTACHING))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.destroy=function(){this.timer&&clearInterval(this.timer),this.isVideoPlaybackQualityAvailable=!1},t.prototype.onMediaAttaching=function(e){var t=this.hls.config;t.capLevelOnFPSDrop&&("function"==typeof(this.video=e.media instanceof HTMLVideoElement?e.media:null).getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),clearInterval(this.timer),this.timer=setInterval(this.checkFPSInterval.bind(this),t.fpsDroppedMonitoringPeriod))},t.prototype.checkFPS=function(e,t,i){var n=performance.now();if(t){if(this.lastTime){var r=n-this.lastTime,a=i-this.lastDroppedFrames,o=t-this.lastDecodedFrames,u=1e3*a/r,c=this.hls;if(c.trigger(s.a.FPS_DROP,{currentDropped:a,currentDecoded:o,totalDroppedFrames:i}),u>0&&a>c.config.fpsDroppedMonitoringThreshold*o){var d=c.currentLevel;l.b.warn("drop FPS ratio greater than max allowed value for currentLevel: "+d),d>0&&(-1===c.autoLevelCapping||c.autoLevelCapping>=d)&&(d-=1,c.trigger(s.a.FPS_DROP_LEVEL_CAPPING,{level:d,droppedLevel:c.currentLevel}),c.autoLevelCapping=d,c.streamController.nextLevelSwitch())}}this.lastTime=n,this.lastDroppedFrames=i,this.lastDecodedFrames=t}},t.prototype.checkFPSInterval=function(){var e=this.video;if(e)if(this.isVideoPlaybackQualityAvailable){var t=e.getVideoPlaybackQuality();this.checkFPS(e,t.totalVideoFrames,t.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)},t}(c);var se=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&t.xhrSetup&&(this.xhrSetup=t.xhrSetup)}return e.prototype.destroy=function(){this.abort(),this.loader=null},e.prototype.abort=function(){var e=this.loader;e&&4!==e.readyState&&(this.stats.aborted=!0,e.abort()),window.clearTimeout(this.requestTimeout),this.requestTimeout=null,window.clearTimeout(this.retryTimeout),this.retryTimeout=null},e.prototype.load=function(e,t,i){this.context=e,this.config=t,this.callbacks=i,this.stats={trequest:performance.now(),retry:0},this.retryDelay=t.retryDelay,this.loadInternal()},e.prototype.loadInternal=function(){var e,t=this.context;e=this.loader=new XMLHttpRequest;var i=this.stats;i.tfirst=0,i.loaded=0;var n=this.xhrSetup;try{if(n)try{n(e,t.url)}catch(i){e.open("GET",t.url,!0),n(e,t.url)}e.readyState||e.open("GET",t.url,!0)}catch(i){return void this.callbacks.onError({code:e.status,text:i.message},t,e)}t.rangeEnd&&e.setRequestHeader("Range","bytes="+t.rangeStart+"-"+(t.rangeEnd-1)),e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.responseType=t.responseType,this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),this.config.timeout),e.send()},e.prototype.readystatechange=function(e){var t=e.currentTarget,i=t.readyState,n=this.stats,r=this.context,a=this.config;if(!n.aborted&&i>=2)if(window.clearTimeout(this.requestTimeout),0===n.tfirst&&(n.tfirst=Math.max(performance.now(),n.trequest)),4===i){var s=t.status;if(s>=200&&s<300){n.tload=Math.max(n.tfirst,performance.now());var o=void 0,u=void 0;u="arraybuffer"===r.responseType?(o=t.response).byteLength:(o=t.responseText).length,n.loaded=n.total=u;var c={url:t.responseURL,data:o};this.callbacks.onSuccess(c,n,r,t)}else n.retry>=a.maxRetry||s>=400&&s<499?(l.b.error(s+" while loading "+r.url),this.callbacks.onError({code:s,text:t.statusText},r,t)):(l.b.warn(s+" while loading "+r.url+", retrying in "+this.retryDelay+"..."),this.destroy(),this.retryTimeout=window.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,a.maxRetryDelay),n.retry++)}else this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),a.timeout)},e.prototype.loadtimeout=function(){l.b.warn("timeout while loading "+this.context.url),this.callbacks.onTimeout(this.stats,this.context,null)},e.prototype.loadprogress=function(e){var t=e.currentTarget,i=this.stats;i.loaded=e.loaded,e.lengthComputable&&(i.total=e.total);var n=this.callbacks.onProgress;n&&n(i,this.context,null,t)},e}(),oe=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var le=function(e){function t(i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,i,s.a.MANIFEST_LOADING,s.a.MANIFEST_PARSED,s.a.AUDIO_TRACK_LOADED,s.a.ERROR));return n.ticks=0,n.ontick=n.tick.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.destroy=function(){this.cleanTimer(),c.prototype.destroy.call(this)},t.prototype.cleanTimer=function(){this.timer&&(clearTimeout(this.timer),this.timer=null)},t.prototype.tick=function(){this.ticks++,1===this.ticks&&(this.doTick(),this.ticks>1&&setTimeout(this.tick,1),this.ticks=0)},t.prototype.doTick=function(){this.updateTrack(this.trackId)},t.prototype.onError=function(e){e.fatal&&e.type===o.b.NETWORK_ERROR&&this.cleanTimer()},t.prototype.onManifestLoading=function(){this.tracks=[],this.trackId=-1},t.prototype.onManifestParsed=function(e){var t=this,i=e.audioTracks||[],n=!1;this.tracks=i,this.hls.trigger(s.a.AUDIO_TRACKS_UPDATED,{audioTracks:i});var r=0;i.forEach(function(e){if(e.default&&!n)return t.audioTrack=r,void(n=!0);r++}),!1===n&&i.length&&(l.b.log("no default audio track defined, use first audio track as default"),this.audioTrack=0)},t.prototype.onAudioTrackLoaded=function(e){e.id<this.tracks.length&&(l.b.log("audioTrack "+e.id+" loaded"),this.tracks[e.id].details=e.details,e.details.live&&!this.timer&&(this.timer=setInterval(this.ontick,1e3*e.details.targetduration)),!e.details.live&&this.timer&&this.cleanTimer())},t.prototype.setAudioTrackInternal=function(e){if(e>=0&&e<this.tracks.length){this.cleanTimer(),this.trackId=e,l.b.log("switching to audioTrack "+e);var t=this.tracks[e],i=this.hls,n=t.type,r=t.url,a={id:e,type:n,url:r};i.trigger(s.a.AUDIO_TRACK_SWITCH,a),i.trigger(s.a.AUDIO_TRACK_SWITCHING,a);var o=t.details;!r||void 0!==o&&!0!==o.live||(l.b.log("(re)loading playlist for audioTrack "+e),i.trigger(s.a.AUDIO_TRACK_LOADING,{url:r,id:e}))}},t.prototype.updateTrack=function(e){if(e>=0&&e<this.tracks.length){this.cleanTimer(),this.trackId=e,l.b.log("updating audioTrack "+e);var t=this.tracks[e],i=t.url,n=t.details;!i||void 0!==n&&!0!==n.live||(l.b.log("(re)loading playlist for audioTrack "+e),this.hls.trigger(s.a.AUDIO_TRACK_LOADING,{url:i,id:e}))}},oe(t,[{key:"audioTracks",get:function(){return this.tracks}},{key:"audioTrack",get:function(){return this.trackId},set:function(e){this.trackId===e&&void 0!==this.tracks[e].details||this.setAudioTrackInternal(e)}}]),t}(c),ue=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var ce={STOPPED:"STOPPED",STARTING:"STARTING",IDLE:"IDLE",PAUSED:"PAUSED",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",BUFFER_FLUSHING:"BUFFER_FLUSHING",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS"},de=function(e){function t(i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,i,s.a.MEDIA_ATTACHED,s.a.MEDIA_DETACHING,s.a.AUDIO_TRACKS_UPDATED,s.a.AUDIO_TRACK_SWITCHING,s.a.AUDIO_TRACK_LOADED,s.a.KEY_LOADED,s.a.FRAG_LOADED,s.a.FRAG_PARSING_INIT_SEGMENT,s.a.FRAG_PARSING_DATA,s.a.FRAG_PARSED,s.a.ERROR,s.a.BUFFER_RESET,s.a.BUFFER_CREATED,s.a.BUFFER_APPENDED,s.a.BUFFER_FLUSHED,s.a.INIT_PTS_FOUND));return n.config=i.config,n.audioCodecSwap=!1,n.ticks=0,n._state=ce.STOPPED,n.ontick=n.tick.bind(n),n.initPTS=[],n.waitingFragment=null,n.videoTrackCC=null,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.destroy=function(){this.stopLoad(),this.timer&&(clearInterval(this.timer),this.timer=null),c.prototype.destroy.call(this),this.state=ce.STOPPED},t.prototype.onInitPtsFound=function(e){var t=e.id,i=e.frag.cc,n=e.initPTS;"main"===t&&(this.initPTS[i]=n,this.videoTrackCC=i,l.b.log("InitPTS for cc:"+i+" found from video track:"+n),this.state===ce.WAITING_INIT_PTS&&this.tick())},t.prototype.startLoad=function(e){if(this.tracks){var t=this.lastCurrentTime;this.stopLoad(),this.timer||(this.timer=setInterval(this.ontick,100)),this.fragLoadError=0,t>0&&-1===e?(l.b.log("audio:override startPosition with lastCurrentTime @"+t.toFixed(3)),this.state=ce.IDLE):(this.lastCurrentTime=this.startPosition?this.startPosition:e,this.state=ce.STARTING),this.nextLoadPosition=this.startPosition=this.lastCurrentTime,this.tick()}else this.startPosition=e,this.state=ce.STOPPED},t.prototype.stopLoad=function(){var e=this.fragCurrent;e&&(e.loader&&e.loader.abort(),this.fragCurrent=null),this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=ce.STOPPED},t.prototype.tick=function(){this.ticks++,1===this.ticks&&(this.doTick(),this.ticks>1&&setTimeout(this.tick,1),this.ticks=0)},t.prototype.doTick=function(){var e,t,i,n=this.hls,r=n.config;switch(this.state){case ce.ERROR:case ce.PAUSED:case ce.BUFFER_FLUSHING:break;case ce.STARTING:this.state=ce.WAITING_TRACK,this.loadedmetadata=!1;break;case ce.IDLE:var a=this.tracks;if(!a)break;if(!this.media&&(this.startFragRequested||!r.startFragPrefetch))break;if(this.loadedmetadata)e=this.media.currentTime;else if(void 0===(e=this.nextLoadPosition))break;var u=this.mediaBuffer?this.mediaBuffer:this.media,c=this.videoBuffer?this.videoBuffer:this.media,d=C.bufferInfo(u,e,r.maxBufferHole),h=C.bufferInfo(c,e,r.maxBufferHole),f=d.len,p=d.end,g=this.fragPrevious,m=Math.max(r.maxBufferLength,h.len),v=this.audioSwitch,y=this.trackId;if((f<m||v)&&y<a.length){if(void 0===(i=a[y].details)){this.state=ce.WAITING_TRACK;break}if(!v&&!i.live&&g&&g.sn===i.endSN&&!d.nextStart&&(!this.media.seeking||this.media.duration-p<g.duration/2)){this.hls.trigger(s.a.BUFFER_EOS,{type:"audio"}),this.state=ce.ENDED;break}var _=i.fragments,b=_.length,w=_[0].start,E=_[b-1].start+_[b-1].duration,A=void 0;if(v)if(i.live&&!i.PTSKnown)l.b.log("switching audiotrack, live stream, unknown PTS,load first fragment"),p=0;else if(p=e,i.PTSKnown&&e<w){if(!(d.end>w||d.nextStart))return;l.b.log("alt audio track ahead of main track, seek to start of alt audio track"),this.media.currentTime=w+.05}if(i.initSegment&&!i.initSegment.data)A=i.initSegment;else if(p<=w){if(A=_[0],null!==this.videoTrackCC&&A.cc!==this.videoTrackCC&&(A=function(e,t){return x.search(e,function(e){return e.cc<t?1:e.cc>t?-1:0})}(_,this.videoTrackCC)),i.live&&A.loadIdx&&A.loadIdx===this.fragLoadIdx){var T=d.nextStart?d.nextStart:w;return l.b.log("no alt audio available @currentTime:"+this.media.currentTime+", seeking @"+(T+.05)),void(this.media.currentTime=T+.05)}}else{var S=void 0,R=r.maxFragLookUpTolerance,D=g?_[g.sn-_[0].sn+1]:void 0,P=function(e){var t=Math.min(R,e.duration);return e.start+e.duration-t<=p?1:e.start-t>p&&e.start?-1:0};p<E?(p>E-R&&(R=0),S=D&&!P(D)?D:x.search(_,P)):S=_[b-1],S&&(A=S,w=S.start,g&&A.level===g.level&&A.sn===g.sn&&(A.sn<i.endSN?(A=_[A.sn+1-i.startSN],l.b.log("SN just loaded, load next one: "+A.sn)):A=null))}if(A)if(A.decryptdata&&null!=A.decryptdata.uri&&null==A.decryptdata.key)l.b.log("Loading key for "+A.sn+" of ["+i.startSN+" ,"+i.endSN+"],track "+y),this.state=ce.KEY_LOADING,n.trigger(s.a.KEY_LOADING,{frag:A});else{if(l.b.log("Loading "+A.sn+", cc: "+A.cc+" of ["+i.startSN+" ,"+i.endSN+"],track "+y+", currentTime:"+e+",bufferEnd:"+p.toFixed(3)),void 0!==this.fragLoadIdx?this.fragLoadIdx++:this.fragLoadIdx=0,A.loadCounter){A.loadCounter++;var I=r.fragLoadingLoopThreshold;if(A.loadCounter>I&&Math.abs(this.fragLoadIdx-A.loadIdx)<I)return void n.trigger(s.a.ERROR,{type:o.b.MEDIA_ERROR,details:o.a.FRAG_LOOP_LOADING_ERROR,fatal:!1,frag:A})}else A.loadCounter=1;A.loadIdx=this.fragLoadIdx,this.fragCurrent=A,this.startFragRequested=!0,isNaN(A.sn)||(this.nextLoadPosition=A.start+A.duration),n.trigger(s.a.FRAG_LOADING,{frag:A}),this.state=ce.FRAG_LOADING}}break;case ce.WAITING_TRACK:(t=this.tracks[this.trackId])&&t.details&&(this.state=ce.IDLE);break;case ce.FRAG_LOADING_WAITING_RETRY:var k=performance.now(),L=this.retryDate,O=(u=this.media)&&u.seeking;(!L||k>=L||O)&&(l.b.log("audioStreamController: retryDate reached, switch back to IDLE state"),this.state=ce.IDLE);break;case ce.WAITING_INIT_PTS:var M=this.videoTrackCC;if(void 0===this.initPTS[M])break;var N=this.waitingFragment;if(N){var F=N.frag.cc;M!==F?(t=this.tracks[this.trackId]).details&&t.details.live&&(l.b.warn("Waiting fragment CC ("+F+") does not match video track CC ("+M+")"),this.waitingFragment=null,this.state=ce.IDLE):(this.state=ce.FRAG_LOADING,this.onFragLoaded(this.waitingFragment),this.waitingFragment=null)}else this.state=ce.IDLE;break;case ce.STOPPED:case ce.FRAG_LOADING:case ce.PARSING:case ce.PARSED:case ce.ENDED:}},t.prototype.onMediaAttached=function(e){var t=this.media=this.mediaBuffer=e.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),t.addEventListener("seeking",this.onvseeking),t.addEventListener("ended",this.onvended);var i=this.config;this.tracks&&i.autoStartLoad&&this.startLoad(i.startPosition)},t.prototype.onMediaDetaching=function(){var e=this.media;e&&e.ended&&(l.b.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0);var t=this.tracks;t&&t.forEach(function(e){e.details&&e.details.fragments.forEach(function(e){e.loadCounter=void 0})}),e&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1,this.stopLoad()},t.prototype.onMediaSeeking=function(){this.state===ce.ENDED&&(this.state=ce.IDLE),this.media&&(this.lastCurrentTime=this.media.currentTime),void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold),this.tick()},t.prototype.onMediaEnded=function(){this.startPosition=this.lastCurrentTime=0},t.prototype.onAudioTracksUpdated=function(e){l.b.log("audio tracks updated"),this.tracks=e.audioTracks},t.prototype.onAudioTrackSwitching=function(e){var t=!!e.url;this.trackId=e.id,this.fragCurrent=null,this.state=ce.PAUSED,this.waitingFragment=null,t?this.timer||(this.timer=setInterval(this.ontick,100)):this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),t&&(this.audioSwitch=!0,this.state=ce.IDLE,void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold)),this.tick()},t.prototype.onAudioTrackLoaded=function(e){var t=e.details,i=e.id,n=this.tracks[i],r=t.totalduration,a=0;if(l.b.log("track "+i+" loaded ["+t.startSN+","+t.endSN+"],duration:"+r),t.live){var s=n.details;s&&t.fragments.length>0?(U(s,t),a=t.fragments[0].start,t.PTSKnown?l.b.log("live audio playlist sliding:"+a.toFixed(3)):l.b.log("live audio playlist - outdated PTS, unknown sliding")):(t.PTSKnown=!1,l.b.log("live audio playlist - first load, unknown sliding"))}else t.PTSKnown=!1;if(n.details=t,!this.startFragRequested){if(-1===this.startPosition){var o=t.startTimeOffset;isNaN(o)?this.startPosition=0:(l.b.log("start time offset found in playlist, adjust startPosition to "+o),this.startPosition=o)}this.nextLoadPosition=this.startPosition}this.state===ce.WAITING_TRACK&&(this.state=ce.IDLE),this.tick()},t.prototype.onKeyLoaded=function(){this.state===ce.KEY_LOADING&&(this.state=ce.IDLE,this.tick())},t.prototype.onFragLoaded=function(e){var t=this.fragCurrent,i=e.frag;if(this.state===ce.FRAG_LOADING&&t&&"audio"===i.type&&i.level===t.level&&i.sn===t.sn){var n=this.tracks[this.trackId],r=n.details,a=r.totalduration,o=t.level,u=t.sn,c=t.cc,d=this.config.defaultAudioCodec||n.audioCodec||"mp4a.40.2",h=this.stats=e.stats;if("initSegment"===u)this.state=ce.IDLE,h.tparsed=h.tbuffered=performance.now(),r.initSegment.data=e.payload,this.hls.trigger(s.a.FRAG_BUFFERED,{stats:h,frag:t,id:"audio"}),this.tick();else{this.state=ce.PARSING,this.appended=!1,this.demuxer||(this.demuxer=new F(this.hls,"audio"));var f=this.initPTS[c],p=r.initSegment?r.initSegment.data:[];if(r.initSegment||void 0!==f){this.pendingBuffering=!0,l.b.log("Demuxing "+u+" of ["+r.startSN+" ,"+r.endSN+"],track "+o);this.demuxer.push(e.payload,p,d,null,t,a,!1,f)}else l.b.log("unknown video PTS for continuity counter "+c+", waiting for video PTS before demuxing audio frag "+u+" of ["+r.startSN+" ,"+r.endSN+"],track "+o),this.waitingFragment=e,this.state=ce.WAITING_INIT_PTS}}this.fragLoadError=0},t.prototype.onFragParsingInitSegment=function(e){var t=this.fragCurrent,i=e.frag;if(t&&"audio"===e.id&&i.sn===t.sn&&i.level===t.level&&this.state===ce.PARSING){var n=e.tracks,r=void 0;if(n.video&&delete n.video,r=n.audio){r.levelCodec=r.codec,r.id=e.id,this.hls.trigger(s.a.BUFFER_CODECS,n),l.b.log("audio track:audio,container:"+r.container+",codecs[level/parsed]=["+r.levelCodec+"/"+r.codec+"]");var a=r.initSegment;if(a){var o={type:"audio",data:a,parent:"audio",content:"initSegment"};this.audioSwitch?this.pendingData=[o]:(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(s.a.BUFFER_APPENDING,o))}this.tick()}}},t.prototype.onFragParsingData=function(e){var t=this,i=this.fragCurrent,n=e.frag;if(i&&"audio"===e.id&&"audio"===e.type&&n.sn===i.sn&&n.level===i.level&&this.state===ce.PARSING){var r=this.trackId,a=this.tracks[r],o=this.hls;isNaN(e.endPTS)&&(e.endPTS=e.startPTS+i.duration,e.endDTS=e.startDTS+i.duration),l.b.log("parsed "+e.type+",PTS:["+e.startPTS.toFixed(3)+","+e.endPTS.toFixed(3)+"],DTS:["+e.startDTS.toFixed(3)+"/"+e.endDTS.toFixed(3)+"],nb:"+e.nb),B(a.details,i,e.startPTS,e.endPTS);var u=this.audioSwitch,c=this.media,d=!1;if(u&&c)if(c.readyState){var h=c.currentTime;l.b.log("switching audio track : currentTime:"+h),h>=e.startPTS&&(l.b.log("switching audio track : flushing all audio"),this.state=ce.BUFFER_FLUSHING,o.trigger(s.a.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),d=!0,this.audioSwitch=!1,o.trigger(s.a.AUDIO_TRACK_SWITCHED,{id:r}))}else this.audioSwitch=!1,o.trigger(s.a.AUDIO_TRACK_SWITCHED,{id:r});var f=this.pendingData;this.audioSwitch||([e.data1,e.data2].forEach(function(t){t&&t.length&&f.push({type:e.type,data:t,parent:"audio",content:"data"})}),!d&&f.length&&(f.forEach(function(e){t.state===ce.PARSING&&(t.pendingBuffering=!0,t.hls.trigger(s.a.BUFFER_APPENDING,e))}),this.pendingData=[],this.appended=!0)),this.tick()}},t.prototype.onFragParsed=function(e){var t=this.fragCurrent,i=e.frag;t&&"audio"===e.id&&i.sn===t.sn&&i.level===t.level&&this.state===ce.PARSING&&(this.stats.tparsed=performance.now(),this.state=ce.PARSED,this._checkAppendedParsed())},t.prototype.onBufferReset=function(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1},t.prototype.onBufferCreated=function(e){var t=e.tracks.audio;t&&(this.mediaBuffer=t.buffer,this.loadedmetadata=!0),e.tracks.video&&(this.videoBuffer=e.tracks.video.buffer)},t.prototype.onBufferAppended=function(e){if("audio"===e.parent){var t=this.state;t!==ce.PARSING&&t!==ce.PARSED||(this.pendingBuffering=e.pending>0,this._checkAppendedParsed())}},t.prototype._checkAppendedParsed=function(){if(!(this.state!==ce.PARSED||this.appended&&this.pendingBuffering)){var e=this.fragCurrent,t=this.stats,i=this.hls;if(e){this.fragPrevious=e,t.tbuffered=performance.now(),i.trigger(s.a.FRAG_BUFFERED,{stats:t,frag:e,id:"audio"});var n=this.mediaBuffer?this.mediaBuffer:this.media;l.b.log("audio buffered : "+G.toString(n.buffered)),this.audioSwitch&&this.appended&&(this.audioSwitch=!1,i.trigger(s.a.AUDIO_TRACK_SWITCHED,{id:this.trackId})),this.state=ce.IDLE}this.tick()}},t.prototype.onError=function(e){var t=e.frag;if(!t||"audio"===t.type)switch(e.details){case o.a.FRAG_LOAD_ERROR:case o.a.FRAG_LOAD_TIMEOUT:if(!e.fatal){var i=this.fragLoadError;i?i++:i=1;var n=this.config;if(i<=n.fragLoadingMaxRetry){this.fragLoadError=i,t.loadCounter=0;var r=Math.min(Math.pow(2,i-1)*n.fragLoadingRetryDelay,n.fragLoadingMaxRetryTimeout);l.b.warn("audioStreamController: frag loading failed, retry in "+r+" ms"),this.retryDate=performance.now()+r,this.state=ce.FRAG_LOADING_WAITING_RETRY}else l.b.error("audioStreamController: "+e.details+" reaches max retry, redispatch as fatal ..."),e.fatal=!0,this.state=ce.ERROR}break;case o.a.FRAG_LOOP_LOADING_ERROR:case o.a.AUDIO_TRACK_LOAD_ERROR:case o.a.AUDIO_TRACK_LOAD_TIMEOUT:case o.a.KEY_LOAD_ERROR:case o.a.KEY_LOAD_TIMEOUT:this.state!==ce.ERROR&&(this.state=e.fatal?ce.ERROR:ce.IDLE,l.b.warn("audioStreamController: "+e.details+" while loading frag,switch to "+this.state+" state ..."));break;case o.a.BUFFER_FULL_ERROR:if("audio"===e.parent&&(this.state===ce.PARSING||this.state===ce.PARSED)){var a=this.mediaBuffer,u=this.media.currentTime;if(a&&C.isBuffered(a,u)&&C.isBuffered(a,u+.5)){var c=this.config;c.maxMaxBufferLength>=c.maxBufferLength&&(c.maxMaxBufferLength/=2,l.b.warn("audio:reduce max buffer length to "+c.maxMaxBufferLength+"s"),this.fragLoadIdx+=2*c.fragLoadingLoopThreshold),this.state=ce.IDLE}else l.b.warn("buffer full error also media.currentTime is not buffered, flush audio buffer"),this.fragCurrent=null,this.state=ce.BUFFER_FLUSHING,this.hls.trigger(s.a.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"})}}},t.prototype.onBufferFlushed=function(){var e=this,t=this.pendingData;t&&t.length?(l.b.log("appending pending audio data on Buffer Flushed"),t.forEach(function(t){e.hls.trigger(s.a.BUFFER_APPENDING,t)}),this.appended=!0,this.pendingData=[],this.state=ce.PARSED):(this.state=ce.IDLE,this.fragPrevious=null,this.tick())},ue(t,[{key:"state",set:function(e){if(this.state!==e){var t=this.state;this._state=e,l.b.log("audio stream:"+t+"->"+e)}},get:function(){return this._state}}]),t}(c),he=function(){if("undefined"!=typeof window&&window.VTTCue)return window.VTTCue;var e="auto",t={"":!0,lr:!0,rl:!0},i={start:!0,middle:!0,end:!0,left:!0,right:!0};function n(e){return"string"==typeof e&&(!!i[e.toLowerCase()]&&e.toLowerCase())}function r(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)e[n]=i[n]}return e}function a(i,a,s){var o=this,l=function(){if("undefined"!=typeof navigator)return/MSIE\s8\.0/.test(navigator.userAgent)}(),u={};l?o=document.createElement("custom"):u.enumerable=!0,o.hasBeenReset=!1;var c="",d=!1,h=i,f=a,p=s,g=null,m="",v=!0,y="auto",_="start",b=50,w="middle",E=50,A="middle";if(Object.defineProperty(o,"id",r({},u,{get:function(){return c},set:function(e){c=""+e}})),Object.defineProperty(o,"pauseOnExit",r({},u,{get:function(){return d},set:function(e){d=!!e}})),Object.defineProperty(o,"startTime",r({},u,{get:function(){return h},set:function(e){if("number"!=typeof e)throw new TypeError("Start time must be set to a number.");h=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"endTime",r({},u,{get:function(){return f},set:function(e){if("number"!=typeof e)throw new TypeError("End time must be set to a number.");f=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"text",r({},u,{get:function(){return p},set:function(e){p=""+e,this.hasBeenReset=!0}})),Object.defineProperty(o,"region",r({},u,{get:function(){return g},set:function(e){g=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"vertical",r({},u,{get:function(){return m},set:function(e){var i=function(e){return"string"==typeof e&&!!t[e.toLowerCase()]&&e.toLowerCase()}(e);if(!1===i)throw new SyntaxError("An invalid or illegal string was specified.");m=i,this.hasBeenReset=!0}})),Object.defineProperty(o,"snapToLines",r({},u,{get:function(){return v},set:function(e){v=!!e,this.hasBeenReset=!0}})),Object.defineProperty(o,"line",r({},u,{get:function(){return y},set:function(t){if("number"!=typeof t&&t!==e)throw new SyntaxError("An invalid number or illegal string was specified.");y=t,this.hasBeenReset=!0}})),Object.defineProperty(o,"lineAlign",r({},u,{get:function(){return _},set:function(e){var t=n(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");_=t,this.hasBeenReset=!0}})),Object.defineProperty(o,"position",r({},u,{get:function(){return b},set:function(e){if(e<0||e>100)throw new Error("Position must be between 0 and 100.");b=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"positionAlign",r({},u,{get:function(){return w},set:function(e){var t=n(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");w=t,this.hasBeenReset=!0}})),Object.defineProperty(o,"size",r({},u,{get:function(){return E},set:function(e){if(e<0||e>100)throw new Error("Size must be between 0 and 100.");E=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"align",r({},u,{get:function(){return A},set:function(e){var t=n(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");A=t,this.hasBeenReset=!0}})),o.displayState=void 0,l)return o}return a.prototype.getCueAsHTML=function(){return window.WebVTT.convertCueToDOMTree(window,this.text)},a}(),fe=function(){return{decode:function(e){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}};function pe(){this.window=window,this.state="INITIAL",this.buffer="",this.decoder=new fe,this.regionList=[]}function ge(){this.values=Object.create(null)}function me(e,t,i,n){var r=n?e.split(n):[e];for(var a in r)if("string"==typeof r[a]){var s=r[a].split(i);if(2===s.length)t(s[0],s[1])}}ge.prototype={set:function(e,t){this.get(e)||""===t||(this.values[e]=t)},get:function(e,t,i){return i?this.has(e)?this.values[e]:t[i]:this.has(e)?this.values[e]:t},has:function(e){return e in this.values},alt:function(e,t,i){for(var n=0;n<i.length;++n)if(t===i[n]){this.set(e,t);break}},integer:function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},percent:function(e,t){return!!(t.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(t=parseFloat(t))>=0&&t<=100)&&(this.set(e,t),!0)}};var ve=new he(0,0,0),ye="middle"===ve.align?"middle":"center";function _e(e,t,i){var n=e;function r(){var t=function(e){function t(e,t,i,n){return 3600*(0|e)+60*(0|t)+(0|i)+(0|n)/1e3}var i=e.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);return i?i[3]?t(i[1],i[2],i[3].replace(":",""),i[4]):i[1]>59?t(i[1],i[2],0,i[4]):t(0,i[1],i[2],i[4]):null}(e);if(null===t)throw new Error("Malformed timestamp: "+n);return e=e.replace(/^[^\sa-zA-Z-]+/,""),t}function a(){e=e.replace(/^\s+/,"")}if(a(),t.startTime=r(),a(),"--\x3e"!==e.substr(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '--\x3e'): "+n);e=e.substr(3),a(),t.endTime=r(),a(),function(e,t){var n=new ge;me(e,function(e,t){switch(e){case"region":for(var r=i.length-1;r>=0;r--)if(i[r].id===t){n.set(e,i[r].region);break}break;case"vertical":n.alt(e,t,["rl","lr"]);break;case"line":var a=t.split(","),s=a[0];n.integer(e,s),n.percent(e,s)&&n.set("snapToLines",!1),n.alt(e,s,["auto"]),2===a.length&&n.alt("lineAlign",a[1],["start",ye,"end"]);break;case"position":a=t.split(","),n.percent(e,a[0]),2===a.length&&n.alt("positionAlign",a[1],["start",ye,"end","line-left","line-right","auto"]);break;case"size":n.percent(e,t);break;case"align":n.alt(e,t,["start",ye,"end","left","right"])}},/:/,/\s/),t.region=n.get("region",null),t.vertical=n.get("vertical","");var r=n.get("line","auto");"auto"===r&&-1===ve.line&&(r=-1),t.line=r,t.lineAlign=n.get("lineAlign","start"),t.snapToLines=n.get("snapToLines",!0),t.size=n.get("size",100),t.align=n.get("align",ye);var a=n.get("position","auto");"auto"===a&&50===ve.position&&(a="start"===t.align||"left"===t.align?0:"end"===t.align||"right"===t.align?100:50),t.position=a}(e,t)}function be(e){return e.replace(/<br(?: \/)?>/gi,"\n")}pe.prototype={parse:function(e){var t=this;function i(){var e=t.buffer,i=0;for(e=be(e);i<e.length&&"\r"!==e[i]&&"\n"!==e[i];)++i;var n=e.substr(0,i);return"\r"===e[i]&&++i,"\n"===e[i]&&++i,t.buffer=e.substr(i),n}e&&(t.buffer+=t.decoder.decode(e,{stream:!0}));try{var n;if("INITIAL"===t.state){if(!/\r\n|\n/.test(t.buffer))return this;var r=(n=i()).match(/^(ï»¿)?WEBVTT([ \t].*)?$/);if(!r||!r[0])throw new Error("Malformed WebVTT signature.");t.state="HEADER"}for(var a=!1;t.buffer;){if(!/\r\n|\n/.test(t.buffer))return this;switch(a?a=!1:n=i(),t.state){case"HEADER":/:/.test(n)?me(n,function(e,t){switch(e){case"Region":console.log("parse region",t)}},/:/):n||(t.state="ID");continue;case"NOTE":n||(t.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(n)){t.state="NOTE";break}if(!n)continue;if(t.cue=new he(0,0,""),t.state="CUE",-1===n.indexOf("--\x3e")){t.cue.id=n;continue}case"CUE":try{_e(n,t.cue,t.regionList)}catch(e){t.cue=null,t.state="BADCUE";continue}t.state="CUETEXT";continue;case"CUETEXT":var s=-1!==n.indexOf("--\x3e");if(!n||s&&(a=!0)){t.oncue&&t.oncue(t.cue),t.cue=null,t.state="ID";continue}t.cue.text&&(t.cue.text+="\n"),t.cue.text+=n;continue;case"BADCUE":n||(t.state="ID");continue}}}catch(e){"CUETEXT"===t.state&&t.cue&&t.oncue&&t.oncue(t.cue),t.cue=null,t.state="INITIAL"===t.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){try{if(this.buffer+=this.decoder.decode(),(this.cue||"HEADER"===this.state)&&(this.buffer+="\n\n",this.parse()),"INITIAL"===this.state)throw new Error("Malformed WebVTT signature.")}catch(e){throw e}return this.onflush&&this.onflush(),this}};var we=pe;function Ee(e,t,i,n){for(var r,a,s,o,l,u=window.VTTCue||window.TextTrackCue,c=0;c<n.rows.length;c++)if(s=!0,o=0,l="",!(r=n.rows[c]).isEmpty()){for(var d=0;d<r.chars.length;d++)r.chars[d].uchar.match(/\s/)&&s?o++:(l+=r.chars[d].uchar,s=!1);r.cueStartTime=t,t===i&&(i+=1e-4),a=new u(t,i,be(l.trim())),o>=16?o--:o++,navigator.userAgent.match(/Firefox\//)?a.line=c+1:a.line=c>7?c-2:c+1,a.align="left",a.position=Math.max(0,Math.min(100,o/32*100+(navigator.userAgent.match(/Firefox\//)?50:0))),e.addCue(a)}}function Ae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Te={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},Se=function(e){var t=e;return Te.hasOwnProperty(e)&&(t=Te[e]),String.fromCharCode(t)},Re=15,De=100,xe={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},Ce={17:2,18:4,21:6,22:8,23:10,19:13,20:15},Pe={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},Ie={25:2,26:4,29:6,30:8,31:10,27:13,28:15},ke=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],Le={verboseFilter:{DATA:3,DEBUG:3,INFO:2,WARNING:2,TEXT:1,ERROR:0},time:null,verboseLevel:0,setTime:function(e){this.time=e},log:function(e,t){var i=this.verboseFilter[e];this.verboseLevel>=i&&console.log(this.time+" ["+e+"] "+t)}},Oe=function(e){for(var t=[],i=0;i<e.length;i++)t.push(e[i].toString(16));return t},Me=function(){function e(t,i,n,r,a){Ae(this,e),this.foreground=t||"white",this.underline=i||!1,this.italics=n||!1,this.background=r||"black",this.flash=a||!1}return e.prototype.reset=function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},e.prototype.setStyles=function(e){for(var t=["foreground","underline","italics","background","flash"],i=0;i<t.length;i++){var n=t[i];e.hasOwnProperty(n)&&(this[n]=e[n])}},e.prototype.isDefault=function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},e.prototype.equals=function(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash},e.prototype.copy=function(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash},e.prototype.toString=function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash},e}(),Ne=function(){function e(t,i,n,r,a,s){Ae(this,e),this.uchar=t||" ",this.penState=new Me(i,n,r,a,s)}return e.prototype.reset=function(){this.uchar=" ",this.penState.reset()},e.prototype.setChar=function(e,t){this.uchar=e,this.penState.copy(t)},e.prototype.setPenState=function(e){this.penState.copy(e)},e.prototype.equals=function(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)},e.prototype.copy=function(e){this.uchar=e.uchar,this.penState.copy(e.penState)},e.prototype.isEmpty=function(){return" "===this.uchar&&this.penState.isDefault()},e}(),Fe=function(){function e(){Ae(this,e),this.chars=[];for(var t=0;t<De;t++)this.chars.push(new Ne);this.pos=0,this.currPenState=new Me}return e.prototype.equals=function(e){for(var t=!0,i=0;i<De;i++)if(!this.chars[i].equals(e.chars[i])){t=!1;break}return t},e.prototype.copy=function(e){for(var t=0;t<De;t++)this.chars[t].copy(e.chars[t])},e.prototype.isEmpty=function(){for(var e=!0,t=0;t<De;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e},e.prototype.setCursor=function(e){this.pos!==e&&(this.pos=e),this.pos<0?(Le.log("ERROR","Negative cursor position "+this.pos),this.pos=0):this.pos>De&&(Le.log("ERROR","Too large cursor position "+this.pos),this.pos=De)},e.prototype.moveCursor=function(e){var t=this.pos+e;if(e>1)for(var i=this.pos+1;i<t+1;i++)this.chars[i].setPenState(this.currPenState);this.setCursor(t)},e.prototype.backSpace=function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},e.prototype.insertChar=function(e){e>=144&&this.backSpace();var t=Se(e);this.pos>=De?Le.log("ERROR","Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(t,this.currPenState),this.moveCursor(1))},e.prototype.clearFromPos=function(e){var t;for(t=e;t<De;t++)this.chars[t].reset()},e.prototype.clear=function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},e.prototype.clearToEndOfRow=function(){this.clearFromPos(this.pos)},e.prototype.getTextString=function(){for(var e=[],t=!0,i=0;i<De;i++){var n=this.chars[i].uchar;" "!==n&&(t=!1),e.push(n)}return t?"":e.join("")},e.prototype.setPenStyles=function(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)},e}(),je=function(){function e(){Ae(this,e),this.rows=[];for(var t=0;t<Re;t++)this.rows.push(new Fe);this.currRow=Re-1,this.nrRollUpRows=null,this.reset()}return e.prototype.reset=function(){for(var e=0;e<Re;e++)this.rows[e].clear();this.currRow=Re-1},e.prototype.equals=function(e){for(var t=!0,i=0;i<Re;i++)if(!this.rows[i].equals(e.rows[i])){t=!1;break}return t},e.prototype.copy=function(e){for(var t=0;t<Re;t++)this.rows[t].copy(e.rows[t])},e.prototype.isEmpty=function(){for(var e=!0,t=0;t<Re;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e},e.prototype.backSpace=function(){this.rows[this.currRow].backSpace()},e.prototype.clearToEndOfRow=function(){this.rows[this.currRow].clearToEndOfRow()},e.prototype.insertChar=function(e){this.rows[this.currRow].insertChar(e)},e.prototype.setPen=function(e){this.rows[this.currRow].setPenStyles(e)},e.prototype.moveCursor=function(e){this.rows[this.currRow].moveCursor(e)},e.prototype.setCursor=function(e){Le.log("INFO","setCursor: "+e),this.rows[this.currRow].setCursor(e)},e.prototype.setPAC=function(e){Le.log("INFO","pacData = "+JSON.stringify(e));var t=e.row-1;if(this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==t){for(var i=0;i<Re;i++)this.rows[i].clear();var n=this.currRow+1-this.nrRollUpRows,r=this.lastOutputScreen;if(r){var a=r.rows[n].cueStartTime;if(a&&a<Le.time)for(var s=0;s<this.nrRollUpRows;s++)this.rows[t-this.nrRollUpRows+s+1].copy(r.rows[n+s])}}this.currRow=t;var o=this.rows[this.currRow];if(null!==e.indent){var l=e.indent,u=Math.max(l-1,0);o.setCursor(e.indent),e.color=o.chars[u].penState.foreground}var c={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(c)},e.prototype.setBkgData=function(e){Le.log("INFO","bkgData = "+JSON.stringify(e)),this.backSpace(),this.setPen(e),this.insertChar(32)},e.prototype.setRollUpRows=function(e){this.nrRollUpRows=e},e.prototype.rollUp=function(){if(null!==this.nrRollUpRows){Le.log("TEXT",this.getDisplayText());var e=this.currRow+1-this.nrRollUpRows,t=this.rows.splice(e,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),Le.log("INFO","Rolling up")}else Le.log("DEBUG","roll_up but nrRollUpRows not set yet")},e.prototype.getDisplayText=function(e){e=e||!1;for(var t=[],i="",n=-1,r=0;r<Re;r++){var a=this.rows[r].getTextString();a&&(n=r+1,e?t.push("Row "+n+": '"+a+"'"):t.push(a.trim()))}return t.length>0&&(i=e?"["+t.join(" | ")+"]":t.join("\n")),i},e.prototype.getTextAndFormat=function(){return this.rows},e}(),Be=function(){function e(t,i){Ae(this,e),this.chNr=t,this.outputFilter=i,this.mode=null,this.verbose=0,this.displayedMemory=new je,this.nonDisplayedMemory=new je,this.lastOutputScreen=new je,this.currRollUpRow=this.displayedMemory.rows[Re-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}return e.prototype.reset=function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.currRollUpRow=this.displayedMemory.rows[Re-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.lastCueEndTime=null},e.prototype.getHandler=function(){return this.outputFilter},e.prototype.setHandler=function(e){this.outputFilter=e},e.prototype.setPAC=function(e){this.writeScreen.setPAC(e)},e.prototype.setBkgData=function(e){this.writeScreen.setBkgData(e)},e.prototype.setMode=function(e){e!==this.mode&&(this.mode=e,Le.log("INFO","MODE="+e),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)},e.prototype.insertChars=function(e){for(var t=0;t<e.length;t++)this.writeScreen.insertChar(e[t]);var i=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";Le.log("INFO",i+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(Le.log("TEXT","DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},e.prototype.ccRCL=function(){Le.log("INFO","RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},e.prototype.ccBS=function(){Le.log("INFO","BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},e.prototype.ccAOF=function(){},e.prototype.ccAON=function(){},e.prototype.ccDER=function(){Le.log("INFO","DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},e.prototype.ccRU=function(e){Le.log("INFO","RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)},e.prototype.ccFON=function(){Le.log("INFO","FON - Flash On"),this.writeScreen.setPen({flash:!0})},e.prototype.ccRDC=function(){Le.log("INFO","RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},e.prototype.ccTR=function(){Le.log("INFO","TR"),this.setMode("MODE_TEXT")},e.prototype.ccRTD=function(){Le.log("INFO","RTD"),this.setMode("MODE_TEXT")},e.prototype.ccEDM=function(){Le.log("INFO","EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)},e.prototype.ccCR=function(){Le.log("CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)},e.prototype.ccENM=function(){Le.log("INFO","ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},e.prototype.ccEOC=function(){if(Le.log("INFO","EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,Le.log("TEXT","DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)},e.prototype.ccTO=function(e){Le.log("INFO","TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)},e.prototype.ccMIDROW=function(e){var t={flash:!1};if(t.underline=e%2==1,t.italics=e>=46,t.italics)t.foreground="white";else{var i=Math.floor(e/2)-16;t.foreground=["white","green","blue","cyan","red","yellow","magenta"][i]}Le.log("INFO","MIDROW: "+JSON.stringify(t)),this.writeScreen.setPen(t)},e.prototype.outputDataUpdate=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=Le.time;null!==t&&this.outputFilter&&(null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue&&(this.outputFilter.newCue(this.cueStartTime,t,this.lastOutputScreen),!0===e&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue()),this.cueStartTime=this.displayedMemory.isEmpty()?null:t):this.cueStartTime=t,this.lastOutputScreen.copy(this.displayedMemory))},e.prototype.cueSplitAtTime=function(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))},e}(),Ue=function(){function e(t,i,n){Ae(this,e),this.field=t||1,this.outputs=[i,n],this.channels=[new Be(1,i),new Be(2,n)],this.currChNr=-1,this.lastCmdA=null,this.lastCmdB=null,this.bufferedData=[],this.startTime=null,this.lastTime=null,this.dataCounters={padding:0,char:0,cmd:0,other:0}}return e.prototype.getHandler=function(e){return this.channels[e].getHandler()},e.prototype.setHandler=function(e,t){this.channels[e].setHandler(t)},e.prototype.addData=function(e,t){var i,n,r,a=!1;this.lastTime=e,Le.setTime(e);for(var s=0;s<t.length;s+=2)if(n=127&t[s],r=127&t[s+1],0!==n||0!==r){if(Le.log("DATA","["+Oe([t[s],t[s+1]])+"] -> ("+Oe([n,r])+")"),(i=this.parseCmd(n,r))||(i=this.parseMidrow(n,r)),i||(i=this.parsePAC(n,r)),i||(i=this.parseBackgroundAttributes(n,r)),!i)if(a=this.parseChars(n,r))if(this.currChNr&&this.currChNr>=0)this.channels[this.currChNr-1].insertChars(a);else Le.log("WARNING","No channel found yet. TEXT-MODE?");i?this.dataCounters.cmd+=2:a?this.dataCounters.char+=2:(this.dataCounters.other+=2,Le.log("WARNING","Couldn't parse cleaned data "+Oe([n,r])+" orig: "+Oe([t[s],t[s+1]])))}else this.dataCounters.padding+=2},e.prototype.parseCmd=function(e,t){var i=null;if(!((20===e||28===e)&&32<=t&&t<=47)&&!((23===e||31===e)&&33<=t&&t<=35))return!1;if(e===this.lastCmdA&&t===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,Le.log("DEBUG","Repeated command ("+Oe([e,t])+") is dropped"),!0;i=20===e||23===e?1:2;var n=this.channels[i-1];return 20===e||28===e?32===t?n.ccRCL():33===t?n.ccBS():34===t?n.ccAOF():35===t?n.ccAON():36===t?n.ccDER():37===t?n.ccRU(2):38===t?n.ccRU(3):39===t?n.ccRU(4):40===t?n.ccFON():41===t?n.ccRDC():42===t?n.ccTR():43===t?n.ccRTD():44===t?n.ccEDM():45===t?n.ccCR():46===t?n.ccENM():47===t&&n.ccEOC():n.ccTO(t-32),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=i,!0},e.prototype.parseMidrow=function(e,t){var i=null;return(17===e||25===e)&&32<=t&&t<=47&&((i=17===e?1:2)!==this.currChNr?(Le.log("ERROR","Mismatch channel in midrow parsing"),!1):(this.channels[i-1].ccMIDROW(t),Le.log("DEBUG","MIDROW ("+Oe([e,t])+")"),!0))},e.prototype.parsePAC=function(e,t){var i,n=null;if(!((17<=e&&e<=23||25<=e&&e<=31)&&64<=t&&t<=127)&&!((16===e||24===e)&&64<=t&&t<=95))return!1;if(e===this.lastCmdA&&t===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,!0;i=e<=23?1:2,n=64<=t&&t<=95?1===i?xe[e]:Pe[e]:1===i?Ce[e]:Ie[e];var r=this.interpretPAC(n,t);return this.channels[i-1].setPAC(r),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=i,!0},e.prototype.interpretPAC=function(e,t){var i=t,n={color:null,italics:!1,indent:null,underline:!1,row:e};return i=t>95?t-96:t-64,n.underline=1==(1&i),i<=13?n.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(i/2)]:i<=15?(n.italics=!0,n.color="white"):n.indent=4*Math.floor((i-16)/2),n},e.prototype.parseChars=function(e,t){var i=null,n=null,r=null;if(e>=25?(i=2,r=e-8):(i=1,r=e),17<=r&&r<=19){var a=t;a=17===r?t+80:18===r?t+112:t+144,Le.log("INFO","Special char '"+Se(a)+"' in channel "+i),n=[a]}else 32<=e&&e<=127&&(n=0===t?[e]:[e,t]);if(n){var s=Oe(n);Le.log("DEBUG","Char codes =  "+s.join(",")),this.lastCmdA=null,this.lastCmdB=null}return n},e.prototype.parseBackgroundAttributes=function(e,t){var i,n,r;return((16===e||24===e)&&32<=t&&t<=47||(23===e||31===e)&&45<=t&&t<=47)&&(i={},16===e||24===e?(n=Math.floor((t-32)/2),i.background=ke[n],t%2==1&&(i.background=i.background+"_semi")):45===t?i.background="transparent":(i.foreground="black",47===t&&(i.underline=!0)),r=e<24?1:2,this.channels[r-1].setBkgData(i),this.lastCmdA=null,this.lastCmdB=null,!0)},e.prototype.reset=function(){for(var e=0;e<this.channels.length;e++)this.channels[e]&&this.channels[e].reset();this.lastCmdA=null,this.lastCmdB=null},e.prototype.cueSplitAtTime=function(e){for(var t=0;t<this.channels.length;t++)this.channels[t]&&this.channels[t].cueSplitAtTime(e)},e}();var Ge=function(){function e(t,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.timelineController=t,this.track=i,this.startTime=null,this.endTime=null,this.screen=null}return e.prototype.dispatchCue=function(){null!==this.startTime&&(this.timelineController.addCues("textTrack"+this.track,this.startTime,this.endTime,this.screen),this.startTime=null)},e.prototype.newCue=function(e,t,i){(null===this.startTime||this.startTime>e)&&(this.startTime=e),this.endTime=t,this.screen=i,this.timelineController.createCaptionsTrack(this.track)},e}(),He=function(e,t,i){return e.substr(i||0,t.length)===t},ze=function(e){for(var t=5381,i=e.length;i;)t=33*t^e.charCodeAt(--i);return(t>>>0).toString()},We={parse:function(e,t,i,n,r,a){var s=Object(X.b)(new Uint8Array(e)).trim().replace(/\r\n|\n\r|\n|\r/g,"\n").split("\n"),o="00:00.000",l=0,u=0,c=0,d=[],h=void 0,f=!0,p=new we;p.oncue=function(e){var t=i[n],r=i.ccOffset;t&&t.new&&(void 0!==u?r=i.ccOffset=t.start:function(e,t,i){var n=e[t],r=e[n.prevCC];if(!r||!r.new&&n.new)return e.ccOffset=e.presentationOffset=n.start,void(n.new=!1);for(;r&&r.new;)e.ccOffset+=n.start-r.start,n.new=!1,r=e[(n=r).prevCC];e.presentationOffset=i}(i,n,c)),c&&(r=c+i.ccOffset-i.presentationOffset),e.startTime+=r-u,e.endTime+=r-u,e.id=ze(e.startTime.toString())+ze(e.endTime.toString())+ze(e.text),e.text=decodeURIComponent(encodeURIComponent(e.text)),e.endTime>0&&d.push(e)},p.onparsingerror=function(e){h=e},p.onflush=function(){h&&a?a(h):r(d)},s.forEach(function(e){if(f){if(He(e,"X-TIMESTAMP-MAP=")){f=!1,e.substr(16).split(",").forEach(function(e){He(e,"LOCAL:")?o=e.substr(6):He(e,"MPEGTS:")&&(l=parseInt(e.substr(7)))});try{l-=t=t<0?t+8589934592:t,i=o,n=parseInt(i.substr(-3)),r=parseInt(i.substr(-6,2)),a=parseInt(i.substr(-9,2)),s=i.length>9?parseInt(i.substr(0,i.indexOf(":"))):0,u=(isNaN(n)||isNaN(r)||isNaN(a)||isNaN(s)?-1:(n+=1e3*r,n+=6e4*a,n+=36e5*s))/1e3,c=l/9e4,-1===u&&(h=new Error("Malformed X-TIMESTAMP-MAP: "+e))}catch(t){h=new Error("Malformed X-TIMESTAMP-MAP: "+e)}return}""===e&&(f=!1)}var i,n,r,a,s;p.parse(e+"\n")}),p.flush()}};function $e(e){if(e&&e.cues)for(;e.cues.length>0;)e.removeCue(e.cues[0])}var Ve=function(e){function t(i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,i,s.a.MEDIA_ATTACHING,s.a.MEDIA_DETACHING,s.a.FRAG_PARSING_USERDATA,s.a.FRAG_DECRYPTED,s.a.MANIFEST_LOADING,s.a.MANIFEST_LOADED,s.a.FRAG_LOADED,s.a.LEVEL_SWITCHING,s.a.INIT_PTS_FOUND));if(n.hls=i,n.config=i.config,n.enabled=!0,n.Cues=i.config.cueHandler,n.textTracks=[],n.tracks=[],n.unparsedVttFrags=[],n.initPTS=void 0,n.cueRanges=[],n.config.enableCEA708Captions){var r=new Ge(n,1),a=new Ge(n,2);n.cea608Parser=new Ue(0,r,a)}return n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.addCues=function(e,t,i,n){for(var r,a,s,o,l=this.cueRanges,u=!1,c=l.length;c--;){var d=l[c],h=(r=d[0],a=d[1],s=t,o=i,Math.min(a,o)-Math.max(r,s));if(h>=0&&(d[0]=Math.min(d[0],t),d[1]=Math.max(d[1],i),u=!0,h/(i-t)>.5))return}u||l.push([t,i]),this.Cues.newCue(this[e],t,i,n)},t.prototype.onInitPtsFound=function(e){var t=this;void 0===this.initPTS&&(this.initPTS=e.initPTS),this.unparsedVttFrags.length&&(this.unparsedVttFrags.forEach(function(e){t.onFragLoaded(e)}),this.unparsedVttFrags=[])},t.prototype.getExistingTrack=function(e){var t=this.media;if(t)for(var i=0;i<t.textTracks.length;i++){var n=t.textTracks[i];if(!0===n["textTrack"+e])return n}return null},t.prototype.sendAddTrackEvent=function(e,t){var i=null;try{i=new window.Event("addtrack")}catch(e){(i=document.createEvent("Event")).initEvent("addtrack",!1,!1)}i.track=e,t.dispatchEvent(i)},t.prototype.createCaptionsTrack=function(e){var t="textTrack"+e;if(!this[t]){var i=this.getExistingTrack(e);if(i)this[t]=i,$e(this[t]),this.sendAddTrackEvent(this[t],this.media);else{var n=this.createTextTrack("captions",this.config["captionsTextTrack"+e+"Label"],this.config.captionsTextTrack1LanguageCode);n&&(n[t]=!0,this[t]=n)}}},t.prototype.createTextTrack=function(e,t,i){var n=this.media;if(n)return n.addTextTrack(e,t,i)},t.prototype.destroy=function(){c.prototype.destroy.call(this)},t.prototype.onMediaAttaching=function(e){this.media=e.media,this._cleanTracks()},t.prototype.onMediaDetaching=function(){$e(this.textTrack1),$e(this.textTrack2)},t.prototype.onManifestLoading=function(){this.lastSn=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0},this._cleanTracks()},t.prototype._cleanTracks=function(){var e=this.media;if(e){var t=e.textTracks;if(t)for(var i=0;i<t.length;i++)$e(t[i])}},t.prototype.onManifestLoaded=function(e){var t=this;if(this.textTracks=[],this.unparsedVttFrags=this.unparsedVttFrags||[],this.initPTS=void 0,this.cueRanges=[],this.config.enableWebVTT){this.tracks=e.subtitles||[];var i=this.media?this.media.textTracks:[];this.tracks.forEach(function(e,n){var r=void 0;if(n<i.length){var a=i[n];(function(e,t){return e&&e.label===t.name&&!(e.textTrack1||e.textTrack2)})(a,e)&&(r=a)}r||(r=t.createTextTrack("subtitles",e.name,e.lang)),r.mode=e.default?"showing":"hidden",t.textTracks.push(r)})}},t.prototype.onLevelSwitching=function(){this.enabled="NONE"!==this.hls.currentLevel.closedCaptions},t.prototype.onFragLoaded=function(e){var t=e.frag,i=e.payload;if("main"===t.type){var n=t.sn;if(n!==this.lastSn+1){var r=this.cea608Parser;r&&r.reset()}this.lastSn=n}else if("subtitle"===t.type)if(i.byteLength){if(void 0===this.initPTS)return void this.unparsedVttFrags.push(e);var a=t.decryptdata;null!=a&&null!=a.key&&"AES-128"===a.method||this._parseVTTs(t,i)}else this.hls.trigger(s.a.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t})},t.prototype._parseVTTs=function(e,t){var i=this.vttCCs;i[e.cc]||(i[e.cc]={start:e.start,prevCC:this.prevCC,new:!0},this.prevCC=e.cc);var n=this.textTracks,r=this.hls;We.parse(t,this.initPTS,i,e.cc,function(t){var i=n[e.trackId];t.forEach(function(e){if(!i.cues.getCueById(e.id))try{i.addCue(e)}catch(n){var t=new window.TextTrackCue(e.startTime,e.endTime,e.text);t.id=e.id,i.addCue(t)}}),r.trigger(s.a.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})},function(t){l.b.log("Failed to parse VTT cue: "+t),r.trigger(s.a.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e})})},t.prototype.onFragDecrypted=function(e){var t=e.payload,i=e.frag;if("subtitle"===i.type){if(void 0===this.initPTS)return void this.unparsedVttFrags.push(e);this._parseVTTs(i,t)}},t.prototype.onFragParsingUserdata=function(e){if(this.enabled&&this.config.enableCEA708Captions)for(var t=0;t<e.samples.length;t++){var i=this.extractCea608Data(e.samples[t].bytes);this.cea608Parser.addData(e.samples[t].pts,i)}},t.prototype.extractCea608Data=function(e){for(var t,i,n,r=31&e[0],a=2,s=[],o=0;o<r;o++)t=e[a++],i=127&e[a++],n=127&e[a++],0===i&&0===n||0!=(4&t)&&0===(3&t)&&(s.push(i),s.push(n));return s},t}(c),Ye=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();function qe(e){for(var t=[],i=0;i<e.length;i++)"subtitles"===e[i].kind&&t.push(e[i]);return t}var Xe=function(e){function t(i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,i,s.a.MEDIA_ATTACHED,s.a.MEDIA_DETACHING,s.a.MANIFEST_LOADING,s.a.MANIFEST_LOADED,s.a.SUBTITLE_TRACK_LOADED));return n.tracks=[],n.trackId=-1,n.media=void 0,n.subtitleDisplay=!1,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype._onTextTracksChanged=function(){if(this.media){for(var e=-1,t=qe(this.media.textTracks),i=0;i<t.length;i++)"showing"===t[i].mode&&(e=i);this.subtitleTrack=e}},t.prototype.destroy=function(){c.prototype.destroy.call(this)},t.prototype.onMediaAttached=function(e){var t=this;this.media=e.media,this.media&&(void 0!==this.queuedDefaultTrack&&(this.subtitleTrack=this.queuedDefaultTrack,delete this.queuedDefaultTrack),this.trackChangeListener=this._onTextTracksChanged.bind(this),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.subtitlePollingInterval=setInterval(function(){t.trackChangeListener()},500):this.media.textTracks.addEventListener("change",this.trackChangeListener))},t.prototype.onMediaDetaching=function(){this.media&&(this.useTextTrackPolling?clearInterval(this.subtitlePollingInterval):this.media.textTracks.removeEventListener("change",this.trackChangeListener),this.media=void 0)},t.prototype.onManifestLoading=function(){this.tracks=[],this.trackId=-1},t.prototype.onManifestLoaded=function(e){var t=this,i=e.subtitles||[];this.tracks=i,this.trackId=-1,this.hls.trigger(s.a.SUBTITLE_TRACKS_UPDATED,{subtitleTracks:i}),i.forEach(function(e){e.default&&(t.media?t.subtitleTrack=e.id:t.queuedDefaultTrack=e.id)})},t.prototype.onTick=function(){var e=this.trackId,t=this.tracks[e];if(t){var i=t.details;void 0!==i&&!0!==i.live||(l.b.log("(re)loading playlist for subtitle track "+e),this.hls.trigger(s.a.SUBTITLE_TRACK_LOADING,{url:t.url,id:e}))}},t.prototype.onSubtitleTrackLoaded=function(e){var t=this;e.id<this.tracks.length&&(l.b.log("subtitle track "+e.id+" loaded"),this.tracks[e.id].details=e.details,e.details.live&&!this.timer&&(this.timer=setInterval(function(){t.onTick()},1e3*e.details.targetduration,this)),!e.details.live&&this.timer&&(clearInterval(this.timer),this.timer=null))},t.prototype.setSubtitleTrackInternal=function(e){if(!(e<-1||e>=this.tracks.length)){this.timer&&(clearInterval(this.timer),this.timer=null);var t=qe(this.media.textTracks);if(-1!==this.trackId&&this.subtitleDisplay&&(t[this.trackId].mode="hidden"),this.trackId=e,l.b.log("switching to subtitle track "+e),this.hls.trigger(s.a.SUBTITLE_TRACK_SWITCH,{id:e}),-1!==e){var i=this.tracks[e];this.subtitleDisplay&&(t[e].mode="showing");var n=i.details;void 0!==n&&!0!==n.live||(l.b.log("(re)loading playlist for subtitle track "+e),this.hls.trigger(s.a.SUBTITLE_TRACK_LOADING,{url:i.url,id:e}))}}},Ye(t,[{key:"subtitleTracks",get:function(){return this.tracks}},{key:"subtitleTrack",get:function(){return this.trackId},set:function(e){this.trackId!==e&&this.setSubtitleTrackInternal(e)}}]),t}(c),Je=i(4);var Ke={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING"},Qe=function(e){function t(i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,i,s.a.MEDIA_ATTACHED,s.a.ERROR,s.a.KEY_LOADED,s.a.FRAG_LOADED,s.a.SUBTITLE_TRACKS_UPDATED,s.a.SUBTITLE_TRACK_SWITCH,s.a.SUBTITLE_TRACK_LOADED,s.a.SUBTITLE_FRAG_PROCESSED));return n.config=i.config,n.vttFragSNsProcessed={},n.vttFragQueues=void 0,n.currentlyProcessing=null,n.state=Ke.STOPPED,n.currentTrackId=-1,n.ticks=0,n.decrypter=new Je.a(i.observer,i.config),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.destroy=function(){c.prototype.destroy.call(this),this.state=Ke.STOPPED},t.prototype.clearVttFragQueues=function(){var e=this;this.vttFragQueues={},this.tracks.forEach(function(t){e.vttFragQueues[t.id]=[]})},t.prototype.nextFrag=function(){if(null===this.currentlyProcessing&&this.currentTrackId>-1&&this.vttFragQueues[this.currentTrackId].length){var e=this.currentlyProcessing=this.vttFragQueues[this.currentTrackId].shift();this.fragCurrent=e,this.hls.trigger(s.a.FRAG_LOADING,{frag:e}),this.state=Ke.FRAG_LOADING}},t.prototype.onSubtitleFragProcessed=function(e){e.success&&this.vttFragSNsProcessed[e.frag.trackId].push(e.frag.sn),this.currentlyProcessing=null,this.state=Ke.IDLE,this.nextFrag()},t.prototype.onMediaAttached=function(){this.state=Ke.IDLE},t.prototype.onError=function(e){var t=e.frag;t&&"subtitle"!==t.type||this.currentlyProcessing&&(this.currentlyProcessing=null,this.nextFrag())},t.prototype.tick=function(){var e=this;this.ticks++,1===this.ticks&&(this.doTick(),this.ticks>1&&setTimeout(function(){e.tick()},1),this.ticks=0)},t.prototype.doTick=function(){var e=this;switch(this.state){case Ke.IDLE:var t,i=this.tracks,n=this.currentTrackId,r=this.vttFragSNsProcessed[n],a=this.vttFragQueues[n],o=this.currentlyProcessing?this.currentlyProcessing.sn:-1;if(!i)break;if(n<i.length&&(t=i[n].details),void 0===t)break;t.fragments.forEach(function(t){(function(e){return r.indexOf(e.sn)>-1})(t)||t.sn===o||function(e){return a.some(function(t){return t.sn===e.sn})}(t)||(t.decryptdata&&null!=t.decryptdata.uri&&null==t.decryptdata.key?(l.b.log("Loading key for "+t.sn),e.state=Ke.KEY_LOADING,e.hls.trigger(s.a.KEY_LOADING,{frag:t})):(t.trackId=n,a.push(t),e.nextFrag()))})}},t.prototype.onSubtitleTracksUpdated=function(e){var t=this;l.b.log("subtitle tracks updated"),this.tracks=e.subtitleTracks,this.clearVttFragQueues(),this.vttFragSNsProcessed={},this.tracks.forEach(function(e){t.vttFragSNsProcessed[e.id]=[]})},t.prototype.onSubtitleTrackSwitch=function(e){this.currentTrackId=e.id,this.clearVttFragQueues()},t.prototype.onSubtitleTrackLoaded=function(){this.tick()},t.prototype.onKeyLoaded=function(){this.state===Ke.KEY_LOADING&&(this.state=Ke.IDLE,this.tick())},t.prototype.onFragLoaded=function(e){var t=this.fragCurrent,i=e.frag.decryptdata,n=e.frag,r=this.hls;if(this.state===Ke.FRAG_LOADING&&t&&"subtitle"===e.frag.type&&t.sn===e.frag.sn&&e.payload.byteLength>0&&null!=i&&null!=i.key&&"AES-128"===i.method){var a;try{a=performance.now()}catch(e){a=Date.now()}this.decrypter.decrypt(e.payload,i.key.buffer,i.iv.buffer,function(e){var t;try{t=performance.now()}catch(e){t=Date.now()}r.trigger(s.a.FRAG_DECRYPTED,{frag:n,payload:e,stats:{tstart:a,tdecrypt:t}})})}},t}(c),Ze={autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,initialLiveManifestSize:1,maxBufferLength:30,maxBufferSize:6e7,maxBufferHole:.5,maxSeekHole:2,lowBufferWatchdogPeriod:.5,highBufferWatchdogPeriod:3,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,liveDurationInfinity:!1,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,fragLoadingLoopThreshold:3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:se,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,fetchSetup:void 0,abrController:ee,bufferController:ie,capLevelController:re,fpsController:ae,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0};Ze.subtitleStreamController=Qe,Ze.subtitleTrackController=Xe,Ze.timelineController=Ve,Ze.cueHandler=n,Ze.enableCEA708Captions=!0,Ze.enableWebVTT=!0,Ze.captionsTextTrack1Label="English",Ze.captionsTextTrack1LanguageCode="en",Ze.captionsTextTrack2Label="Spanish",Ze.captionsTextTrack2LanguageCode="es",Ze.audioStreamController=de,Ze.audioTrackController=le;var et=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var tt=function(){function e(){var t=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=e.DefaultConfig;if((i.liveSyncDurationCount||i.liveMaxLatencyDurationCount)&&(i.liveSyncDuration||i.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");for(var r in n)r in i||(i[r]=n[r]);if(void 0!==i.liveMaxLatencyDurationCount&&i.liveMaxLatencyDurationCount<=i.liveSyncDurationCount)throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be gt "liveSyncDurationCount"');if(void 0!==i.liveMaxLatencyDuration&&(i.liveMaxLatencyDuration<=i.liveSyncDuration||void 0===i.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be gt "liveSyncDuration"');Object(l.a)(i.debug),this.config=i,this._autoLevelCapping=-1;var a=this.observer=new k.a;a.trigger=function(e){for(var t=arguments.length,i=Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];a.emit.apply(a,[e,e].concat(i))},a.off=function(e){for(var t=arguments.length,i=Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];a.removeListener.apply(a,[e].concat(i))},this.on=a.on.bind(a),this.off=a.off.bind(a),this.trigger=a.trigger.bind(a);var s=this.abrController=new i.abrController(this),o=new i.bufferController(this),u=new i.capLevelController(this),c=new i.fpsController(this),d=new S(this),h=new R(this),f=new D(this),p=new J(this),g=[this.levelController=new q(this),this.streamController=new V(this)],m=i.audioStreamController;m&&g.push(new m(this)),this.networkControllers=g;var v=[d,h,f,s,o,u,c,p];if(m=i.audioTrackController){var y=new m(this);this.audioTrackController=y,v.push(y)}if(m=i.subtitleTrackController){var _=new m(this);this.subtitleTrackController=_,v.push(_)}[i.subtitleStreamController,i.timelineController].forEach(function(e){e&&v.push(new e(t))}),this.coreComponents=v}return e.isSupported=function(){return e=M(),t=window.SourceBuffer||window.WebKitSourceBuffer,i=e&&"function"==typeof e.isTypeSupported&&e.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),n=!t||t.prototype&&"function"==typeof t.prototype.appendBuffer&&"function"==typeof t.prototype.remove,!!i&&!!n;var e,t,i,n},et(e,null,[{key:"version",get:function(){return"0.8.9"}},{key:"Events",get:function(){return s.a}},{key:"ErrorTypes",get:function(){return o.b}},{key:"ErrorDetails",get:function(){return o.a}},{key:"DefaultConfig",get:function(){return e.defaultConfig?e.defaultConfig:Ze},set:function(t){e.defaultConfig=t}}]),e.prototype.destroy=function(){l.b.log("destroy"),this.trigger(s.a.DESTROYING),this.detachMedia(),this.coreComponents.concat(this.networkControllers).forEach(function(e){e.destroy()}),this.url=null,this.observer.removeAllListeners(),this._autoLevelCapping=-1},e.prototype.attachMedia=function(e){l.b.log("attachMedia"),this.media=e,this.trigger(s.a.MEDIA_ATTACHING,{media:e})},e.prototype.detachMedia=function(){l.b.log("detachMedia"),this.trigger(s.a.MEDIA_DETACHING),this.media=null},e.prototype.loadSource=function(e){e=a.a.buildAbsoluteURL(window.location.href,e,{alwaysNormalize:!0}),l.b.log("loadSource:"+e),this.url=e,this.trigger(s.a.MANIFEST_LOADING,{url:e})},e.prototype.startLoad=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;l.b.log("startLoad("+e+")"),this.networkControllers.forEach(function(t){t.startLoad(e)})},e.prototype.stopLoad=function(){l.b.log("stopLoad"),this.networkControllers.forEach(function(e){e.stopLoad()})},e.prototype.swapAudioCodec=function(){l.b.log("swapAudioCodec"),this.streamController.swapAudioCodec()},e.prototype.recoverMediaError=function(){l.b.log("recoverMediaError");var e=this.media;this.detachMedia(),this.attachMedia(e)},et(e,[{key:"levels",get:function(){return this.levelController.levels}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(e){l.b.log("set currentLevel:"+e),this.loadLevel=e,this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(e){l.b.log("set nextLevel:"+e),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(e){l.b.log("set loadLevel:"+e),this.levelController.manualLevel=e}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(e){this.levelController.nextLoadLevel=e}},{key:"firstLevel",get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(e){l.b.log("set firstLevel:"+e),this.levelController.firstLevel=e}},{key:"startLevel",get:function(){return this.levelController.startLevel},set:function(e){l.b.log("set startLevel:"+e);-1!==e&&(e=Math.max(e,this.minAutoLevel)),this.levelController.startLevel=e}},{key:"autoLevelCapping",get:function(){return this._autoLevelCapping},set:function(e){l.b.log("set autoLevelCapping:"+e),this._autoLevelCapping=e}},{key:"autoLevelEnabled",get:function(){return-1===this.levelController.manualLevel}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"minAutoLevel",get:function(){for(var e=this.levels,t=this.config.minAutoBitrate,i=e?e.length:0,n=0;n<i;n++){if((e[n].realBitrate?Math.max(e[n].realBitrate,e[n].bitrate):e[n].bitrate)>t)return n}return 0}},{key:"maxAutoLevel",get:function(){var e=this.levels,t=this.autoLevelCapping;return-1===t&&e&&e.length?e.length-1:t}},{key:"nextAutoLevel",get:function(){return Math.min(Math.max(this.abrController.nextAutoLevel,this.minAutoLevel),this.maxAutoLevel)},set:function(e){this.abrController.nextAutoLevel=Math.max(this.minAutoLevel,e)}},{key:"audioTracks",get:function(){var e=this.audioTrackController;return e?e.audioTracks:[]}},{key:"audioTrack",get:function(){var e=this.audioTrackController;return e?e.audioTrack:-1},set:function(e){var t=this.audioTrackController;t&&(t.audioTrack=e)}},{key:"liveSyncPosition",get:function(){return this.streamController.liveSyncPosition}},{key:"subtitleTracks",get:function(){var e=this.subtitleTrackController;return e?e.subtitleTracks:[]}},{key:"subtitleTrack",get:function(){var e=this.subtitleTrackController;return e?e.subtitleTrack:-1},set:function(e){var t=this.subtitleTrackController;t&&(t.subtitleTrack=e)}},{key:"subtitleDisplay",get:function(){var e=this.subtitleTrackController;return!!e&&e.subtitleDisplay},set:function(e){var t=this.subtitleTrackController;t&&(t.subtitleDisplay=e)}}]),e}();t.default=tt},function(e,t,i){function n(e){var t=[],i=e.toString(),n=i.match(/^function\s?\(\w+,\s*\w+,\s*(\w+)\)/);if(!n)return t;for(var r,a=n[1],s=new RegExp("(\\\\n|\\W)"+(a+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")+"\\((/\\*.*?\\*/)?s?.*?([\\.|\\-|\\w|/|@]+).*?\\)","g");r=s.exec(i);)t.push(r[3]);return t}e.exports=function(e,t){t=t||{};var r=i.m,a=t.all?Object.keys(r):function(e,t){for(var i=[t],r=[],a={};i.length;){var s=i.pop();if(!a[s]&&e[s]){a[s]=!0,r.push(s);var o=n(e[s]);i=i.concat(o)}}return r}(r,e),s="("+function(e){var t={};function i(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=t,i.i=function(e){return e},i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/",i.oe=function(e){throw console.error(e),e};var n=i(i.s=ENTRY_MODULE);return n.default||n}.toString().replace("ENTRY_MODULE",JSON.stringify(e))+")({"+a.map(function(e){return JSON.stringify(e)+": "+r[e].toString()}).join(",")+"})(self);",o=new window.Blob([s],{type:"text/javascript"});if(t.bare)return o;var l=(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(o),u=new window.Worker(l);return u.objectURL=l,u}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(7),r=i(1),a=i(0),s=i(5),o=i.n(s);t.default=function(e){var t=new o.a;t.trigger=function(e){for(var i=arguments.length,n=Array(i>1?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];t.emit.apply(t,[e,e].concat(n))},t.off=function(e){for(var i=arguments.length,n=Array(i>1?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];t.removeListener.apply(t,[e].concat(n))};var i=function(t,i){e.postMessage({event:t,data:i})};e.addEventListener("message",function(r){var s=r.data;switch(s.cmd){case"init":var o=JSON.parse(s.config);e.demuxer=new n.a(t,s.typeSupported,o,s.vendor);try{Object(a.a)(!0===o.debug)}catch(e){console.warn("demuxerWorker: unable to enable logs")}i("init",null);break;case"demux":e.demuxer.push(s.data,s.decryptdata,s.initSegment,s.audioCodec,s.videoCodec,s.timeOffset,s.discontinuity,s.trackSwitch,s.contiguous,s.duration,s.accurateTimeOffset,s.defaultInitPTS)}}),t.on(r.a.FRAG_DECRYPTED,i),t.on(r.a.FRAG_PARSING_INIT_SEGMENT,i),t.on(r.a.FRAG_PARSED,i),t.on(r.a.ERROR,i),t.on(r.a.FRAG_PARSING_METADATA,i),t.on(r.a.FRAG_PARSING_USERDATA,i),t.on(r.a.INIT_PTS_FOUND,i),t.on(r.a.FRAG_PARSING_DATA,function(t,i){var n=[],r={event:t,data:i};i.data1&&(r.data1=i.data1.buffer,n.push(i.data1.buffer),delete i.data1),i.data2&&(r.data2=i.data2.buffer,n.push(i.data2.buffer),delete i.data2),e.postMessage(r,n)})}}]).default},e.exports=n()},"ac+W":function(e,t,i){var n=i("l/Rs");i("l/Rs");!function(e){e.fn.livesearch_navigator=function(t){return t=t||{},e(this).each(function(){var i=e(this);i.livesearch_pretty_input_dropdown(t),i.on("livesearch:selected",function(e,t){t&&(window.location=t[1])})})}}(n)},asZU:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.requestId=void 0;var n=i("I2cB"),r=i("Z6GA"),a=t.requestId=function(e){return n.maybe.fromNullable(e.documentElement.dataset).chain((0,r.maybeProp)("requestId")).chain(function(e){return n.maybe.fromNullable("__REQUEST_ID_MIDDLEWARE_SWAP_TOKEN__"===e?null:e)}).getOrElse(null)};window.request_id=a(document)},b5hM:function(e,t,i){var n=i("l/Rs");i("l/Rs");!function(e){var t=38,i=40,n=13;function r(t,i){this.$elem=t,this.options=e.extend({update_input:!0,no_results_html:"Sorry, we couldn't find anything.",ignore_history:!0,process_results:function(e){return e}},i);var n=this.$elem.closest(".field_with_icon"),r=e([]);(r=n.length?n.siblings(".results"):this.$elem.siblings(".results")).length?(this.$results=r,this.$results.find("div.no_results").remove()):(this.$results=e('<div class="results"></div>'),n.length?n.after(this.$results):this.$elem.after(this.$results)),this.$results.find("ul.result_list").length||this.$results.append('<ul class="result_list"></ul>'),this.$no_results=e('<div class="no_results">'+this.options.no_results_html+"</div>"),this.$no_results.hide(),this.$results.append(this.$no_results),this.handle_optional_content(),this.livesearch=t.livesearch(this.options).data("livesearch"),this._attach()}e.fn.livesearch_input_dropdown=function(t){return t=t||{},e(this).each(function(){var i=e(this).data("livesearch.input_dropdown");i||(i=new r(e(this),t),e(this).data("livesearch.input_dropdown",i))})},e.extend(r.prototype,{_attach:function(){var e=this;this.$elem.on("livesearch:results",function(t,i){e.options.process_results&&(i=e.options.process_results(i)),e.show_results(i),e.push_history(i)}),this.bind_results(),this.bind_popstate(),this.$elem.on("keydown.autocomplete",function(r){var a,s,o,l=!!e.$results.find(".selected").length;switch(r.keyCode){case t:l?((a=e.$results.find(".selected").prev(":not(.not_result)")).length||(a=e.$results.find("li:not(.not_result)").last()),e.select(a,!1)):e.select(e.$results.find("li:not(.not_result)").last(),!1),r.preventDefault();break;case i:l?((s=e.$results.find(".selected").next(":not(.not_result)")).length||(s=e.$results.find("li:not(.not_result)").first()),e.select(s,!1)):e.select(e.$results.find("li:not(.not_result)").first(),!1),r.preventDefault();break;case n:o=e.$results.find(".selected"),e.input_can_submit()||r.preventDefault(),o.length&&(r.preventDefault(),e.select(o,!0))}})},history_api_supported:function(){return window.history&&window.history.pushState},bind_popstate:function(){if(this.history_api_supported()&&!this.options.ignore_history){var e=this;this.replacing_history_state=!1,window.onpopstate=function(t){t.state&&t.state.livesearch?(e.show_results(t.state.livesearch.results),e.livesearch.suspend_while(function(){e.$elem.val(t.state.livesearch.input_value).trigger("input")})):e.reset(!0)}}},input_can_submit:function(){var e=this.livesearch.search_xhr.readyState,t=e>0&&e<4;return this.options.input_can_submit_on_enter&&!t&&this.$elem.is(":focus")},bind_results:function(){var t=this;this.$results.find("li").on("click",function(i){t.select(e(this),!0),i.preventDefault()}),this.$results.find("li").on("mouseover",function(){t.select(e(this)),t.unselect_on_mouseout=!0}),this.$results.on("mouseout",function(){t.unselect_on_mouseout&&t.unselect_currently_selected()}),this.$elem.on("livesearch:reveal_results",function(){t.reveal_results()})},build_result_names_list:function(t){var i=[],n=this;return e.each(t,function(e,t){n.options.return_name_from_result?t=n.options.return_name_from_result(t):"string"!=typeof t&&(t=t[0]),i.push(t)}),i},show_results:function(t){var i,n,r,a=this.$results.children("ul"),s=e([]);t.results&&(r=t,t=t.results),this.unselect_currently_selected(),a.empty(),t.length?(this.$no_results.hide(),a.show()):(this.$no_results.show(),a.hide()),i=this.build_result_names_list(t),e.each(i,function(i,n){var r=e("<li>"+n+"</li>");r.data("livesearch_result",t[i]),a.append(r)}),r&&r.count>t.length&&(n="see all "+r.count+" results",s=e("<a>").attr({href:this.livesearch.url+"?"+this.livesearch.last_search,title:n,class:"see_all not_result"}).html(n).wrap("<li>"),a.append(s)),this.bind_results(),this.reveal_results()},push_history:function(e){if(this.history_api_supported()&&!this.options.ignore_history){"string"==typeof e&&(e=JSON.parse(e));var t={livesearch:{input_value:this.$elem.val(),results:e}};this.replacing_history_state?(history.replaceState(t),this.replacing_history_state=!1):history.pushState(t,"","?"+this.livesearch.last_search)}},reveal_results:function(){var t=this;this.$results.slideDown(function(){e(window).resize(),t.$results.trigger("sticky_bar:fix_to_bottom"),t.$results.trigger("shifted"),t.$results.trigger("livesearch:revealed_results")})},reset:function(e){this.$results.hide(),this.$elem.val(""),e&&this.$results.children("ul.result_list").html("")},unselect_currently_selected:function(){var e=this.$results.children("ul").children("li.selected");e.trigger("livesearch:unselect"),e.removeClass("selected"),this.unselect_on_mouseout=!1},select:function(e,t){var i=this;e.is(".not_result")||(this.unselect_currently_selected(),e.addClass("selected"),this.options.update_input&&this.livesearch.suspend_while(function(){i.$elem.val(e.text()),i.$elem.focus()}),e.trigger("livesearch:soft_select"),t&&e.trigger("livesearch:selected",[e.data("livesearch_result")]))},handle_optional_content:function(){this.options.prepend&&this.$results.prepend(this.options.prepend)}})}(n)},c1YT:function(e,t,i){"use strict";var n=i("l/Rs");i("l/Rs");!function(e){e.fn.render=function(t){return e(this).each(function(){e(this).data("renderer")(t)}),this},e.fn.define_renderer=function(t){return e(this).data("renderer",t),this}}(n)},dgQY:function(e,t,i){"use strict";var n=s(i("l/Rs")),r=i("4RZc"),a=s(i("c5nH"));function s(e){return e&&e.__esModule?e:{default:e}}!function(){function e(e,t){if(void 0!==e){var i="internal";(0,n.default)("body").is(".widget")&&(i="external"),n.default.ajax({url:e,type:"post",data:{event_type:t,location:i}})}}function t(e){return(0,n.default)("body").is(".widget")||e.closest("#projects_show").length?"Project":e.closest(".school").length?"School":e.closest(".NS_site__homepage_staff_picks").length?"Homepage Editorial":e.closest("#projects_start").length?"Start Project":e.closest("body.posts").length?"Project Post":e.closest("#projects_edit").length?"Project Edit":e.closest("#jobs_index").length?"Jobs Page":e.closest(".activity").length?"Activity":"Other"}var i;function s(e){window.koala_video_progress_endpoint&&(i=setInterval(function(){var t=e.current_position();!function(e){n.default.ajax({type:"POST",url:window.window.koala_video_progress_endpoint,data:JSON.stringify({project_name:a.default.data.name,project_pid:a.default.data.id,backers_count:a.default.data.backers_count,blurb:a.default.data.blurb,category_name:a.default.data.category.name,comments_count:a.default.data.comments_count,creator_name:a.default.data.creator.name,currency_symbol:a.default.data.currency_symbol,goal:a.default.data.goal,launched_at:a.default.data.launched_at,photo_full:a.default.data.photo.full,photo_thumb:a.default.data.photo.thumb,project_url:a.default.data.urls.web.project,usd_pledged:a.default.data.usd_pledged,video:a.default.data.video,video_playhead_position:e}),contentType:"text/plain; charset=UTF-8"})}(Math.floor(t))},1e3))}function o(e){return function(i){var a=(0,n.default)(i.target),s=t(a),o=a.attr("data-video-name");(0,r.track)(s+" "+e,{video_name:o})}}(0,n.default)(document).on("ksr_video:playing",function(i,a){var o=(0,n.default)(i.target),l=t(o),u=o.data("ksr_video"),c=u.current_position(),d=o.closest(".video-player").attr("data-video-tracker-url"),h=o.attr("data-video-name");s(u),a?(e(d,"start"),(0,r.track)(l+" Video Start",{track_count:o.find("track").length,track_language:o.data("language"),video_name:h})):(0,r.track)(l+" Video Resume",{position:c,video_name:h})}).on("ksr_video:paused",function(e){var a=(0,n.default)(e.target),s=a.data("ksr_video"),o=t(a),l=s.current_position(),u=a.attr("data-video-name");clearInterval(i),(0,r.track)(o+" Video Pause",{position:l,video_name:u})}).on("ksr_video:ended",function(i){var a=(0,n.default)(i.target),s=a.data("ksr_video"),o=t(a),l=s.duration(),u=a.closest(".video-player").attr("data-video-tracker-url"),c=a.attr("data-video-name");e(u,"complete"),(0,r.track)(o+" Video Complete",{duration:l,video_name:c})}).on("ksr_video:change_track",function(e,i){var a=(0,n.default)(e.target),s=t(a),o=a.attr("data-video-name");(0,r.track)(s+" Video Change Track",{track_language:i,video_name:o})}).on("ksr_video:muted",o("Video Mute")).on("ksr_video:unmuted",o("Video Unmute")).on("ksr_video:volume_adjusted",o("Video Volume Adjustment"))}()},f4ga:function(e,t,i){var n=i("WNGz");e.exports=function(e,t){var i=n(e),r=n(t);return i.getTime()===r.getTime()}},fbTF:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.short_filesize=a.default.number_to_human_size(e.data_file_size,{precision:1}),e};var n,r=i("L3hI"),a=(n=r)&&n.__esModule?n:{default:n}},grXb:function(e,t,i){var n=i("l/Rs");i("l/Rs");!function(e){"use strict";function t(t,i){var n;t._hashFence?t._hashFence=!1:(n=window.location.hash.substring(1),t.slides.each(function(r){if(e(this).data("cycle-hash")==n){if(!0===i)t.startingSlide=r;else{var a=t.currSlide<r;t.nextSlide=r,t.API.prepareTx(!0,a)}return!1}}))}e(document).on("cycle-pre-initialize",function(i,n){t(n,!0),n._onHashChange=function(){t(n,!1)},e(window).on("hashchange",n._onHashChange)}),e(document).on("cycle-update-view",function(e,t,i){i.hash&&"#"+i.hash!=window.location.hash&&(t._hashFence=!0,window.location.hash=i.hash)}),e(document).on("cycle-destroyed",function(t,i){i._onHashChange&&e(window).off("hashchange",i._onHashChange)})}(n)},h1HY:function(e,t,i){"use strict";i("RORv");var n=i("l/Rs");i("l/Rs");!function(e){e.fn.persistent_paging=function(){return e(this).each(function(){var t=e(this),i=[[1,0,t.find(".page")]],n=[],r=!1,a=t.data("mobius"),s=/^#p(\d*)/.exec(window.location.hash);s&&1!==parseInt(s[1],10)&&(t.one("mobius:loaded_page",function(t,i,n){e.scrollTo(n.offset().top+70)}),a.load_page(parseInt(s[1],10))),t.on("mobius:loaded_page",function(n,r,s){var o,l,u,c=[];function d(){if(this[0]===l)return o=!0,!1}for(i.push([r,!1,s]),u=[],e.each(i,function(){u.push([this[0],this[2].offset().top,this[2]])}),i=u,l=1;l<=i[i.length-1][0];l+=1)o=!1,e.each(i,d),o||c.push(l);c.length?e.each(c,function(){var n=i[0],r=parseInt(this,10),s=e([]),o=[],l=e([]),u=e([]);e.each(i,function(){this[0]>n[0]&&this[0]<r&&(n=this)}),(s=n[2].next(".missing")).length?(o=s.data("missing_pages"),-1===e.inArray(r,o)&&(o.push(r),s.data("missing_pages",o))):(l=(s=t.siblings(".missing").clone()).find(".loading"),u=s.find(".load_more"),s.data("missing_pages",[r]),s.find("a").click(function(e){var i=s.data("missing_pages"),n=i.pop();e.preventDefault(),i.length&&s.data("missing_pages",i),u.addClass("loading"),a.load_page(n,s),t.one("mobius:loaded_page",function(){u.removeClass("loading")})}),n[2].after(s),l.hide(),s.show())}):t.find("div.missing").remove()}),e(document).scroll(function(){var t,a=e(window).scrollTop();e.each(i,function(){var e=this[1];a>e&&(n=this)}),n[0]!==r&&(t="#p"+n[0],window.history&&window.history.replaceState?history.replaceState(null,null,t):window.location.replace(t),e(document).trigger("infinite_scroll:scrolled_to",[n[0]]),r=n[0])})})}}(n)},h8C7:function(e,t,i){"use strict";var n=a(i("9VV1")),r=a(i("wmCY"));function a(e){return e&&e.__esModule?e:{default:e}}var s=i("l/Rs");i("l/Rs");!function(e){function t(t){var i=t.data("status-url");i&&e.pollster(i,function(i){var a,s=t.data("track-label");return i.ok?(a=e(i.html),t.replaceWith(a),(0,n.default)({success:r.default.t("library.video_tracks_editor.Successfully_imported_label",{label:s})}),!0):!!i.error&&(a=e(i.html),t.replaceWith(a),(0,n.default)({error:r.default.t("library.video_tracks_editor.Something_went_wrong_while_importing_label",{label:s,error:i.error})}),!0)},{delay:1e3})}e.fn.videoTracksEditor=function(){var i=e(this);i.on("click",".js-add-track",function(t){var i=e(t.currentTarget),n=i.closest(".js-subtitles"),r=n.find(".js-language-select"),a=n.find(".js-track-list"),s=r.find("option:selected").val();e.ajax({method:"POST",url:i.data("create-track-path"),data:{language:s,captionable_type:i.data("captionable-type"),captionable_id:i.data("captionable-id")},dataType:"json"}).success(function(e){a.append(e.html),r.find('option[value="'+s+'"]').prop("disabled",!0),r.ksr_val(r.find("option").not("[disabled]").first().val())}),t.preventDefault()}),i.on("click",".js-captionable--destroy-track",function(t){var i=e(t.currentTarget),n=i.closest(".js-subtitles").find(".js-language-select"),a=i.data("path");t.preventDefault(),confirm(r.default.t("library.video_tracks_editor.Are_you_sure_you_want_to_delete_this_track"))&&e.ajax({method:"DELETE",url:a}).success(function(e){var t=i.data("language");e.ok&&(n.find('option[value="'+t+'"]').prop("disabled",!1),i.closest(".js-captionable--track-item").remove())})}),i.on("change",".js-importer--input",function(){var i,a=e(this),s=a.closest(".js-importer"),o=a.closest(".js-captionable--track-item"),l=s.find(".js-importer--text"),u=this.files&&this.files[0],c=new FormData;u&&(a.hide(),l.text(r.default.t("library.video_tracks_editor.Uploading")),c.append("track[file]",u),(i=e.ajax({url:a.data("url"),type:"PUT",processData:!1,contentType:!1,data:c})).success(function(i){var r;i.ok?(r=e(i.html),o.replaceWith(r),t(r)):(0,n.default)({error:i.error})}),i.error(function(){(0,n.default)({error:r.default.t("library.video_tracks_editor.Something_went_wrong_while_uploading_file",{file:u.name})}),a.show()}))}),i.find(".js-captionable--track-item").each(function(){t(e(this))})}}(s)},iDDm:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.filters={},(e=function(e){return n.default.each(n.default.keys(e.aggregations),function(t){n.default.each(n.default.keys(e.aggregations[t]),function(i){var n=e.aggregations[t][i];e.aggregations[t][i]={count:n}})}),e}(e=function(e){e.project.disputed>0&&(e.filters.disputed={true:{count:e.project.disputed}});return e}(e))).aggregations.must_have_creator_note={true:{},false:{}},e.not_filtered=!0,"successful"===(e=function(e){e.params&&(n.default.each(n.default.keys(e.params),function(t){n.default.has(e.aggregations,t)?(e.aggregations[t][e.params[t]]||(e.aggregations[t][e.params[t]]={}),e.aggregations[t][e.params[t]].selected=!0):n.default.has(e.filters,t)?e.filters[t][e.params[t]].selected=!0:(e.aggregations[t]={})[e.params[t]]={selected:!0}}),e.params.sort_by&&(e.params["sort_by_"+e.params.sort_by]=" "+(e.params.asc_or_desc||"asc")),e.actual_reward_selected=!1,e.params.reward_id&&(e.actual_reward_selected=!0,e.selected_reward=n.default.findWhere(e.rewards,{id:parseInt(e.params.reward_id,10)}),e.selected_reward||(e.actual_reward_selected=!1,e.selected_reward=n.default.findWhere(e.rewards,{id:"none"})),e.selected_reward.selected=!0),n.default.each(["survey_answered","completed","must_have_creator_note","status","backer_banned","disputed"],function(t){e.params[t]&&(e.not_filtered=!1)}));return e}(e)).project.state&&(e.project.is_successful=!0),(e=function(e){return e.show_aggregations=e.total_entries>0||!(e.params&&e.params.term&&!e.params.creator_note&&!e.params.creator_note_not),e}(e)).formatted_total_entries=r.default.format_number(e.total_entries,{precision:0}),e.count=e.total_entries,(e=function(e){return n.default.each(e.rewards,function(e){e.formatted_minimum=r.default.money(e.minimum,{currency:s.default.get("currency"),precision:0}),e.reward.length>35?e.truncated_description=e.reward.substring(0,35)+"…":e.truncated_description=e.reward}),e}(e)).message_url=(0,a.default)(e.urls.web.message_batches).segment("new").query(e.params),e.isCreator=s.default.get("creator.id")===o.default.get("id"),e.showMessages=e.isCreator||e.showMessages,e};var n=l(i("shXp")),r=l(i("L3hI")),a=l(i("hBlz")),s=l(i("c5nH")),o=l(i("eF8u"));function l(e){return e&&e.__esModule?e:{default:e}}},iPPX:function(e,t,i){"use strict";var n,r=i("l/Rs"),a=(n=r)&&n.__esModule?n:{default:n};(0,a.default)(function(){(0,a.default)("body").hasClass("admin")||(window._sf_async_config={uid:5536,domain:window.location.hostname.replace("www.","")},window._sf_endpt=(new Date).getTime(),a.default.getScript("//a248.e.akamai.net/chartbeat.download.akamai.com/102508/js/chartbeat.js"))})},iQ9M:function(e,t,i){"use strict";var n=u(i("l/Rs")),r=u(i("shXp")),a=i("kVy0"),s=u(i("wmCY")),o=u(i("dH3X")),l=i("jO9b");function u(e){return e&&e.__esModule?e:{default:e}}i("LNuh"),i("CCL3"),i("v4vi"),i("A/M2"),i("IhN0"),i("kUTX"),i("Y0+b"),(0,n.default)(".field.search.location-search").livequery(function(){var e=(0,n.default)(this);e.on("livesearch_selector:select",function(){(0,n.default)(this).siblings("span.input-tip").hide(),(0,n.default)(this).parent().siblings("span.input-tip").hide(),(0,n.default)(this).trigger("shifted")}),e.on("livesearch_selector:unselect",function(){(0,n.default)(this).siblings("span.input-tip").show(),(0,n.default)(this).parent().siblings("span.input-tip").show(),(0,n.default)(this).trigger("shifted")}),e.livesearch_selector({url:e.data("searchUrl"),cancel_copy:"",process_data:function(){return{term:this.$elem.val()}},process_results:function(e){return r.default.map(e.locations,function(e){return[e.short_name,e.id]})}})}),(0,n.default)("input.date").livequery(function(){var e=(0,n.default)(this),t=e.val(),i=e.closest(".js-date-field").find(".js-hidden-calendar-input");i.val(t?(0,a.format)("YYYY-MM-DD",t):""),e.datetime_picker_field({calendar:{allow_deselect:!1,previous_month_text:"<",next_month_text:">"},class_name:"absolute z_top",parse_callback:function(e){var t=(0,l.parseWithFormat)(e,"l");return(0,o.default)(t)?t:void 0},format_callback:function(e){return i.val(e?(0,a.format)("YYYY-MM-DD",e):""),e?(0,a.format)("l",e):""}})}),(0,n.default)("input.datetime").livequery(function(){var e=(0,n.default)(this),t=e.data("options")||{};e.datetime_picker_field(n.default.extend(!0,{calendar:{allow_deselect:!1,previous_month_text:"<",next_month_text:">",time_text:s.default.t("onloads.initializers.forms.Time")},class_name:"absolute z_top",position:e.is(".position_calendar_below")?"bottom":"right",parse_callback:function(e){var t=(0,l.parseWithFormat)(e,"l LT");return(0,o.default)(t)?t:void 0},format_callback:function(t){return e.closest(".js-datetime-field").find(".js-hidden-calendar-input").val(t?(0,a.formatWithLocale)("en","YYYY-MM-DD HH:mm:ss Z",t):""),t?(0,a.format)("l LT",t):""}},t))}),(0,n.default)(".js-calendar-picker").livequery(function(){var e,t=(0,n.default)(this),i=t.find('input[type="hidden"]'),o=t.find(".calendar"),l=o.data("options")||{};o.on("calendar_date_picker:date_selected",function(e,t){t?i.val((0,a.format)("YYYY-MM-DD HH:mm:ss Z",t)):i.val(""),i.trigger("change")}),""!==i.val()&&(e=new Date(i.val())),o.calendar_date_picker(r.default.extend({allow_deselect:!1,previous_month_text:"<",next_month_text:">",time_text:s.default.t("onloads.initializers.forms.Time"),selected_date:e},l)).data("calendar_date_picker")}),(0,n.default)("form ul.js-sortable, form ol.js-sortable, form tbody.js-sortable").livequery(function(){var e=(0,n.default)(this),t=!1;e.find(".move").length&&(t=".move"),e.find(".move").click(function(e){e.preventDefault()}),e.sortable({containment:"document",axis:"y",handle:t,update:function(){e.find("input.position").each(function(e){(0,n.default)(this).val(e+1)})}}),e.closest("form").submit(function(){e.find("input.position").each(function(e){(0,n.default)(this).val(e+1)})})})},iUX3:function(e,t,i){"use strict";i("RORv"),i("orei");var n=i("l/Rs");i("l/Rs");!function(e){function t(e,t){this.$elem=e,this.options=t,this.total_elements=e.find(t.items).length,e.serialScroll(t),this.bind_events()}e.fn.infinite_carousel=function(i){return i=i||{},e(this).each(function(){var n=e(this).data("infinite_carousel");n||(n=new t(e(this),i),e(this).data("infinite_carousel",n))})},e.extend(t.prototype,{bind_events:function(){var e=this;this.$elem.on("notify.serialScroll",function(t,i){e.total_elements=e.$elem.find(e.options.items).length+1,i+1>=e.total_elements-e.options.step&&e.$elem.trigger("infinite_carousel:last_page")})}})}(n)},iptH:function(e,t,i){var n=i("l/Rs");i("l/Rs");!function(e){"use strict";function t(e){return(e||"").toLowerCase()}e.fn.cycle=function(i){var n;return 0!==this.length||e.isReady?this.each(function(){var n,r,a,s,o=e(this),l=e.fn.cycle.log;if(!o.data("cycle.opts")){for(var u in(!1===o.data("cycle-log")||i&&!1===i.log||r&&!1===r.log)&&(l=e.noop),l("--c2 init--"),n=o.data())n.hasOwnProperty(u)&&/^cycle[A-Z]+/.test(u)&&(s=n[u],l((a=u.match(/^cycle(.*)/)[1].replace(/^[A-Z]/,t))+":",s,"("+typeof s+")"),n[a]=s);(r=e.extend({},e.fn.cycle.defaults,n,i||{})).timeoutId=0,r.paused=r.paused||!1,r.container=o,r._maxZ=r.maxZ,r.API=e.extend({_container:o},e.fn.cycle.API),r.API.log=l,r.API.trigger=function(e,t){return r.container.trigger(e,t),r.API},o.data("cycle.opts",r),o.data("cycle.API",r.API),r.API.trigger("cycle-bootstrap",[r,r.API]),r.API.addInitialSlides(),r.API.preInitSlideshow(),r.slides.length&&r.API.initSlideshow()}}):(n={s:this.selector,c:this.context},e.fn.cycle.log("requeuing slideshow (dom not ready)"),e(function(){e(n.s,n.c).cycle(i)}),this)},e.fn.cycle.API={opts:function(){return this._container.data("cycle.opts")},addInitialSlides:function(){var t=this.opts(),i=t.slides;t.slideCount=0,t.slides=e(),i=i.jquery?i:t.container.find(i),t.random&&i.sort(function(){return Math.random()-.5}),t.API.add(i)},preInitSlideshow:function(){var t=this.opts();t.API.trigger("cycle-pre-initialize",[t]);var i=e.fn.cycle.transitions[t.fx];i&&e.isFunction(i.preInit)&&i.preInit(t),t._preInitialized=!0},postInitSlideshow:function(){var t=this.opts();t.API.trigger("cycle-post-initialize",[t]);var i=e.fn.cycle.transitions[t.fx];i&&e.isFunction(i.postInit)&&i.postInit(t)},initSlideshow:function(){var t,i=this.opts(),n=i.container;i.API.calcFirstSlide(),"static"==i.container.css("position")&&i.container.css("position","relative"),e(i.slides[i.currSlide]).css("opacity",1).show(),i.API.stackSlides(i.slides[i.currSlide],i.slides[i.nextSlide],!i.reverse),i.pauseOnHover&&(!0!==i.pauseOnHover&&(n=e(i.pauseOnHover)),n.hover(function(){i.API.pause(!0)},function(){i.API.resume(!0)})),i.timeout&&(t=i.API.getSlideOpts(i.currSlide),i.API.queueTransition(t,t.timeout+i.delay)),i._initialized=!0,i.API.updateView(!0),i.API.trigger("cycle-initialized",[i]),i.API.postInitSlideshow()},pause:function(t){var i=this.opts(),n=i.API.getSlideOpts(),r=i.hoverPaused||i.paused;t?i.hoverPaused=!0:i.paused=!0,r||(i.container.addClass("cycle-paused"),i.API.trigger("cycle-paused",[i]).log("cycle-paused"),n.timeout&&(clearTimeout(i.timeoutId),i.timeoutId=0,i._remainingTimeout-=e.now()-i._lastQueue,(i._remainingTimeout<0||isNaN(i._remainingTimeout))&&(i._remainingTimeout=void 0)))},resume:function(e){var t=this.opts(),i=!t.hoverPaused&&!t.paused;e?t.hoverPaused=!1:t.paused=!1,i||(t.container.removeClass("cycle-paused"),0===t.slides.filter(":animated").length&&t.API.queueTransition(t.API.getSlideOpts(),t._remainingTimeout),t.API.trigger("cycle-resumed",[t,t._remainingTimeout]).log("cycle-resumed"))},add:function(t,i){var n,r=this.opts(),a=r.slideCount;"string"==e.type(t)&&(t=e.trim(t)),e(t).each(function(t){var n,a=e(this);i?r.container.prepend(a):r.container.append(a),r.slideCount++,n=r.API.buildSlideOpts(a),r.slides=i?e(a).add(r.slides):r.slides.add(a),r.API.initSlide(n,a,--r._maxZ),a.data("cycle.opts",n),r.API.trigger("cycle-slide-added",[r,n,a])}),r.API.updateView(!0),r._preInitialized&&a<2&&r.slideCount>=1&&(r._initialized?r.timeout&&(n=r.slides.length,r.nextSlide=r.reverse?n-1:1,r.timeoutId||r.API.queueTransition(r)):r.API.initSlideshow())},calcFirstSlide:function(){var e,t=this.opts();((e=parseInt(t.startingSlide||0,10))>=t.slides.length||e<0)&&(e=0),t.currSlide=e,t.reverse?(t.nextSlide=e-1,t.nextSlide<0&&(t.nextSlide=t.slides.length-1)):(t.nextSlide=e+1,t.nextSlide==t.slides.length&&(t.nextSlide=0))},calcNextSlide:function(){var e,t=this.opts();t.reverse?(e=t.nextSlide-1<0,t.nextSlide=e?t.slideCount-1:t.nextSlide-1,t.currSlide=e?0:t.nextSlide+1):(e=t.nextSlide+1==t.slides.length,t.nextSlide=e?0:t.nextSlide+1,t.currSlide=e?t.slides.length-1:t.nextSlide-1)},calcTx:function(t,i){var n,r=t;return i&&r.manualFx&&(n=e.fn.cycle.transitions[r.manualFx]),n||(n=e.fn.cycle.transitions[r.fx]),n||(n=e.fn.cycle.transitions.fade,r.API.log('Transition "'+r.fx+'" not found.  Using fade.')),n},prepareTx:function(e,t){var i,n,r,a,s,o=this.opts();o.slideCount<2?o.timeoutId=0:(!e||o.busy&&!o.manualTrump||(o.API.stopTransition(),o.busy=!1,clearTimeout(o.timeoutId),o.timeoutId=0),o.busy||(0!==o.timeoutId||e)&&(n=o.slides[o.currSlide],r=o.slides[o.nextSlide],a=o.API.getSlideOpts(o.nextSlide),s=o.API.calcTx(a,e),o._tx=s,e&&void 0!==a.manualSpeed&&(a.speed=a.manualSpeed),o.nextSlide!=o.currSlide&&(e||!o.paused&&!o.hoverPaused&&o.timeout)?(o.API.trigger("cycle-before",[a,n,r,t]),s.before&&s.before(a,n,r,t),i=function(){o.busy=!1,o.container.data("cycle.opts")&&(s.after&&s.after(a,n,r,t),o.API.trigger("cycle-after",[a,n,r,t]),o.API.queueTransition(a),o.API.updateView(!0))},o.busy=!0,s.transition?s.transition(a,n,r,t,i):o.API.doTransition(a,n,r,t,i),o.API.calcNextSlide(),o.API.updateView()):o.API.queueTransition(a)))},doTransition:function(t,i,n,r,a){var s=t,o=e(i),l=e(n),u=function(){l.animate(s.animIn||{opacity:1},s.speed,s.easeIn||s.easing,a)};l.css(s.cssBefore||{}),o.animate(s.animOut||{},s.speed,s.easeOut||s.easing,function(){o.css(s.cssAfter||{}),s.sync||u()}),s.sync&&u()},queueTransition:function(t,i){var n=this.opts(),r=void 0!==i?i:t.timeout;if(0===n.nextSlide&&0==--n.loop)return n.API.log("terminating; loop=0"),n.timeout=0,r?setTimeout(function(){n.API.trigger("cycle-finished",[n])},r):n.API.trigger("cycle-finished",[n]),void(n.nextSlide=n.currSlide);r&&(n._lastQueue=e.now(),void 0===i&&(n._remainingTimeout=t.timeout),n.paused||n.hoverPaused||(n.timeoutId=setTimeout(function(){n.API.prepareTx(!1,!n.reverse)},r)))},stopTransition:function(){var e=this.opts();e.slides.filter(":animated").length&&(e.slides.stop(!1,!0),e.API.trigger("cycle-transition-stopped",[e])),e._tx&&e._tx.stopTransition&&e._tx.stopTransition(e)},advanceSlide:function(e){var t=this.opts();return clearTimeout(t.timeoutId),t.timeoutId=0,t.nextSlide=t.currSlide+e,t.nextSlide<0?t.nextSlide=t.slides.length-1:t.nextSlide>=t.slides.length&&(t.nextSlide=0),t.API.prepareTx(!0,e>=0),!1},buildSlideOpts:function(i){var n,r,a=this.opts(),s=i.data()||{};for(var o in s)s.hasOwnProperty(o)&&/^cycle[A-Z]+/.test(o)&&(n=s[o],r=o.match(/^cycle(.*)/)[1].replace(/^[A-Z]/,t),a.API.log("["+(a.slideCount-1)+"]",r+":",n,"("+typeof n+")"),s[r]=n);(s=e.extend({},e.fn.cycle.defaults,a,s)).slideNum=a.slideCount;try{delete s.API,delete s.slideCount,delete s.currSlide,delete s.nextSlide,delete s.slides}catch(e){}return s},getSlideOpts:function(t){var i=this.opts();void 0===t&&(t=i.currSlide);var n=i.slides[t],r=e(n).data("cycle.opts");return e.extend({},i,r)},initSlide:function(t,i,n){var r=this.opts();i.css(t.slideCss||{}),n>0&&i.css("zIndex",n),isNaN(t.speed)&&(t.speed=e.fx.speeds[t.speed]||e.fx.speeds._default),t.sync||(t.speed=t.speed/2),i.addClass(r.slideClass)},updateView:function(e,t,i){var n=this.opts();if(n._initialized){var r=n.API.getSlideOpts(),a=n.slides[n.currSlide];!e&&!0!==t&&(n.API.trigger("cycle-update-view-before",[n,r,a]),n.updateView<0)||(n.slideActiveClass&&n.slides.removeClass(n.slideActiveClass).eq(n.currSlide).addClass(n.slideActiveClass),e&&n.hideNonActive&&n.slides.filter(":not(."+n.slideActiveClass+")").hide(),0===n.updateView&&setTimeout(function(){n.API.trigger("cycle-update-view",[n,r,a,e])},r.speed/(n.sync?2:1)),0!==n.updateView&&n.API.trigger("cycle-update-view",[n,r,a,e]),e&&n.API.trigger("cycle-update-view-after",[n,r,a]))}},getComponent:function(t){var i=this.opts(),n=i[t];return"string"==typeof n?/^\s*[\>|\+|~]/.test(n)?i.container.find(n):e(n):n.jquery?n:e(n)},stackSlides:function(t,i,n){var r,a=this.opts();t||(t=a.slides[a.currSlide],i=a.slides[a.nextSlide],n=!a.reverse),e(t).css("zIndex",a.maxZ);var s=a.maxZ-2,o=a.slideCount;if(n){for(r=a.currSlide+1;r<o;r++)e(a.slides[r]).css("zIndex",s--);for(r=0;r<a.currSlide;r++)e(a.slides[r]).css("zIndex",s--)}else{for(r=a.currSlide-1;r>=0;r--)e(a.slides[r]).css("zIndex",s--);for(r=o-1;r>a.currSlide;r--)e(a.slides[r]).css("zIndex",s--)}e(i).css("zIndex",a.maxZ-1)},getSlideIndex:function(e){return this.opts().slides.index(e)}},e.fn.cycle.log=function(){window.console&&console.log&&console.log("[cycle2] "+Array.prototype.join.call(arguments," "))},e.fn.cycle.version=function(){return"Cycle2: 2.0.2"},e.fn.cycle.transitions={custom:{},none:{before:function(e,t,i,n){e.API.stackSlides(i,t,n),e.cssBefore={opacity:1,display:"block"}}},fade:{before:function(t,i,n,r){var a=t.API.getSlideOpts(t.nextSlide).slideCss||{};t.API.stackSlides(i,n,r),t.cssBefore=e.extend(a,{opacity:0,display:"block"}),t.animIn={opacity:1},t.animOut={opacity:0}}},fadeout:{before:function(t,i,n,r){var a=t.API.getSlideOpts(t.nextSlide).slideCss||{};t.API.stackSlides(i,n,r),t.cssBefore=e.extend(a,{opacity:1,display:"block"}),t.animOut={opacity:0}}},scrollHorz:{before:function(e,t,i,n){e.API.stackSlides(t,i,n);var r=e.container.css("overflow","hidden").width();e.cssBefore={left:n?r:-r,top:0,opacity:1,display:"block"},e.cssAfter={zIndex:e._maxZ-2,left:0},e.animIn={left:0},e.animOut={left:n?-r:r}}}},e.fn.cycle.defaults={allowWrap:!0,autoSelector:".cycle-slideshow[data-cycle-auto-init!=false]",delay:0,easing:null,fx:"fade",hideNonActive:!0,loop:0,manualFx:void 0,manualSpeed:void 0,manualTrump:!0,maxZ:100,pauseOnHover:!1,reverse:!1,slideActiveClass:"cycle-slide-active",slideClass:"cycle-slide",slideCss:{position:"absolute",top:0,left:0},slides:"> img",speed:500,startingSlide:0,sync:!0,timeout:4e3,updateView:0},e(document).ready(function(){e(e.fn.cycle.defaults.autoSelector).cycle()})}(n)},jAPW:function(e,t,i){var n,r,a;!function(s){"use strict";r=[i("l/Rs")],void 0===(a="function"==typeof(n=s)?n.apply(t,r):n)||(e.exports=a)}(function(e){"use strict";var t=e.scrollTo=function(t,i,n){return e(window).scrollTo(t,i,n)};function i(t){return!t.nodeName||-1!==e.inArray(t.nodeName.toLowerCase(),["iframe","#document","html","body"])}function n(t){return e.isFunction(t)||e.isPlainObject(t)?t:{top:t,left:t}}return t.defaults={axis:"xy",duration:0,limit:!0},e.fn.scrollTo=function(r,a,s){"object"==typeof a&&(s=a,a=0),"function"==typeof s&&(s={onAfter:s}),"max"===r&&(r=9e9),s=e.extend({},t.defaults,s),a=a||s.duration;var o=s.queue&&s.axis.length>1;return o&&(a/=2),s.offset=n(s.offset),s.over=n(s.over),this.each(function(){if(null!==r){var l,u=i(this),c=u?this.contentWindow||window:this,d=e(c),h=r,f={};switch(typeof h){case"number":case"string":if(/^([+-]=?)?\d+(\.\d+)?(px|%)?$/.test(h)){h=n(h);break}h=u?e(h):e(h,c);case"object":if(0===h.length)return;(h.is||h.style)&&(l=(h=e(h)).offset())}var p=e.isFunction(s.offset)&&s.offset(c,h)||s.offset;e.each(s.axis.split(""),function(e,i){var n="x"===i?"Left":"Top",r=n.toLowerCase(),a="scroll"+n,m=d[a](),v=t.max(c,i);if(l)f[a]=l[r]+(u?0:m-d.offset()[r]),s.margin&&(f[a]-=parseInt(h.css("margin"+n),10)||0,f[a]-=parseInt(h.css("border"+n+"Width"),10)||0),f[a]+=p[r]||0,s.over[r]&&(f[a]+=h["x"===i?"width":"height"]()*s.over[r]);else{var y=h[r];f[a]=y.slice&&"%"===y.slice(-1)?parseFloat(y)/100*v:y}s.limit&&/^\d+$/.test(f[a])&&(f[a]=f[a]<=0?0:Math.min(f[a],v)),!e&&s.axis.length>1&&(m===f[a]?f={}:o&&(g(s.onAfterFirst),f={}))}),g(s.onAfter)}function g(t){var i=e.extend({},s,{queue:!0,duration:a,complete:t&&function(){t.call(c,h,s)}});d.animate(f,i)}})},t.max=function(t,n){var r="x"===n?"Width":"Height",a="scroll"+r;if(!i(t))return t[a]-e(t)[r.toLowerCase()]();var s="client"+r,o=t.ownerDocument||t.document,l=o.documentElement,u=o.body;return Math.max(l[a],u[a])-Math.min(l[s],u[s])},e.Tween.propHooks.scrollLeft=e.Tween.propHooks.scrollTop={get:function(t){return e(t.elem)[t.prop]()},set:function(t){var i=this.get(t);if(t.options.interrupt&&t._last&&t._last!==i)return e(t.elem).stop();var n=Math.round(t.now);i!==n&&(e(t.elem)[t.prop](n),t._last=this.get(t))}},t})},jN36:function(e,t,i){var n=i("l/Rs");i("l/Rs");!function(e){function t(t,i,n){this.url=t,this.finished=i||function(){},this.options=e.extend({delay:3e4,on_error:function(){},on_complete:function(){},continue_on_error:!1},n),this.xhr=!1,this.running=!1,this.go()}e.pollster=function(e,i,n){return new t(e,i,n)},window.Pollster=t,t.prototype.start=function(){var e=this;this.running=!0,this.timeout=setTimeout(function(){e.go()},this.options.delay)},t.prototype.stop=function(){this.running=!1,this.timeout&&clearTimeout(this.timeout)},t.prototype.go=function(){var t=!1,i=this;function n(){t?i.stop():i.start()}this.xhr||(this.xhr=e.ajax({url:this.url,dataType:"json",type:"get",global:!1,cache:!1,success:function(e){t=i.finished(e),n()},error:function(){i.options.continue_on_error&&n(),i.options.on_error()},complete:function(){i.xhr=!1,i.options.on_complete()}}))}}(n)},jO9b:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseWithFormat=t.parseWithFormatAndLocale=void 0;var n,r=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var i=[],n=!0,r=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(n=(s=o.next()).done)&&(i.push(s.value),!t||i.length!==t);n=!0);}catch(e){r=!0,a=e}finally{try{!n&&o.return&&o.return()}finally{if(r)throw a}}return i}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=i("xA5w"),s=(n=a)&&n.__esModule?n:{default:n};var o=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:["day","month","year"],n=t.split(e),r=i.reduce(function(e,t,i){return e[t]=n[i],e},{}),a=r.day;return r.month+"/"+a+"/"+r.year},l={l:{de:function(e){return o(".",e)},en:function(e){return e},es:function(e){return o("/",e)},fr:function(e){return o("/",e)},ja:function(e){return o("/",e,["year","month","day"])}},"l LT":{de:function(e){var t=e.split(" "),i=r(t,2),n=i[0],a=i[1];return o(".",n)+" "+a},en:function(e){return e},es:function(e){var t=e.split(" "),i=r(t,2),n=i[0],a=i[1];return o("/",n)+" "+a},fr:function(e){var t=e.split(" "),i=r(t,2),n=i[0],a=i[1];return o("/",n)+" "+a},ja:function(e){var t=e.split(" "),i=r(t,2),n=i[0],a=i[1];return o("/",n,["year","month","day"])+" "+a}}},u=t.parseWithFormatAndLocale=function(e,t,i){return(0,s.default)(l[t][e](i))};t.parseWithFormat=function(e,t){return u(window.I18n.locale,t,e)}},k7Hi:function(e,t,i){"use strict";var n=a(i("9VV1")),r=a(i("wmCY"));function a(e){return e&&e.__esModule?e:{default:e}}i("l/Rs");var s=i("l/Rs");s.fn.in_place_editor=function(){return s(this).each(function(){var e=s(this),t=e.next("form.in_place_editor"),i=t.find(".js-in-place-editor-cancel"),a=e.siblings(".trigger_editor")||e,o=t.find("input.text"),l=!1;function u(){t.addClass("inactive"),e.show()}a.on("click",function(){o.css("fontSize",e.css("fontSize")),e.hide(),t.removeClass("inactive"),o.focus()}),i.on("click",function(){o.val(e.text()),u()}),t.on("submit",function(i){i.preventDefault(),l||(t.addClass("submitting"),l=!0,s.ajax({url:t.attr("action").replace(/(\.\w+)?$/,".js"),data:t.serialize(),type:"POST",complete:function(){t.removeClass("submitting"),l=!1},success:function(){var i=o.val();e.html(i),u(),l=!1,t.siblings(".clipster").data("text",i)},error:function(e){var i=JSON.parse(e.responseText),a="<p>"+r.default.t("library.in_place_editor.Oops_there_was_a_problem_with_your_submission");t.removeClass("submitting"),l=!1,i.errors?(a+=":<br/>"+s.map(i.errors,function(e,t){return t+": "+e}),a+="</p>"):a+=". "+r.default.t("library.in_place_editor.Please_refresh_the_page_before_trying_again")+"</p>",(0,n.default)({error:s(a).html()})}}))})})},s("span.in_place_editor").in_place_editor()},kUTX:function(e,t,i){"use strict";i("FPSz");i("l/Rs");!function(e){function t(t,i){this.$field=t,this.$calendar=void 0,this.options=e.extend({calendar:{},position:"right"},i),this._in_manual_edit=!1,this._blurs_to_ignore=-1,this._attach()}e.fn.datetime_picker_field=function(i){return this.each(function(){new t(e(this),i)})},e.extend(t.prototype,{_attach:function(){var e=this;this.$field.focus(function(){e._in_time_field=!1,e._ensure_calendar()}),this.$field.blur(function(){e._hide_calendar_or_refocus(),e._blurs_to_ignore-=1}),e.$field.bind("keypress cut paste input",function(){e._handle_edit()})},_ensure_calendar:function(){if(this.$calendar)return this.$calendar;var t=this,i=e("<div></div>"),n=e.extend({selected_date:this.get_selected_datetime()},this.options.calendar);return this.options.class_name?i.addClass(this.options.class_name):(i.css("position","absolute"),i.css("z-index",1e3)),"bottom"===this.options.position?(i.css("left",this.$field.offset().left),i.css("top",this.$field.offset().top+this.$field.outerHeight()+20)):(i.css("left",this.$field.offset().left+this.$field.width()+20),i.css("top",this.$field.offset().top)),i.hide(),this._get_surrounding_element().append(i),i.calendar_date_picker(n),i.mousedown(function(){t._in_time_field=!1,t._blurs_to_ignore+=1}),i.find("label").mousedown(function(e){t._in_time_field=!0,t._blurs_to_ignore+=1,e.stopPropagation()}),i.find("input").blur(function(){t._hide_calendar_or_refocus(),t._blurs_to_ignore-=1}),t._blurs_to_ignore=0,i.bind("calendar_date_picker:date_selected",function(e,i){if(!t._in_manual_edit){var n=t.options.format_callback(i);n!==t.$field.val()&&(t.$field.val(n),t.$field.trigger("input"),t.options.calendar.time_text||(t._hide_calendar(),t._focus_next()))}}),i.find(".time input").bind("keydown",function(i){13===i.keyCode&&(e(this).blur(),t._hide_calendar())}),this.$calendar=i,i.fadeIn(),this.options.open_calendar_callback&&this.options.open_calendar_callback(),this.$calendar},_hide_calendar:function(){this.$calendar&&(this.$calendar.fadeOut(function(){e(this).remove()}),this.$calendar=void 0,this.options.close_calendar_callback&&this.options.close_calendar_callback())},_focus_next:function(){var e=this.$field.parents("form:eq(0)").find(":input"),t=e.index(this.$field);t>-1&&t+1<e.length&&e.eq(t+1).focus()},_reformat_value:function(){this.$field.val(this.options.format_callback(this.get_selected_datetime()))},_hide_calendar_or_refocus:function(){var e=this;this._blurs_to_ignore<=0?(this._hide_calendar(),this._reformat_value()):window.setTimeout(function(){e._in_time_field?e.$calendar&&e.$calendar.length&&e.$calendar.find("input").focus():e.$field.focus()})},_handle_edit:function(){this._in_manual_edit=!0,this.$calendar&&this.$calendar.trigger("calendar_date_picker:select_date",this.get_selected_datetime()),this._in_manual_edit=!1},get_selected_datetime:function(){var e=this.$field.val();return this.options.parse_callback(e)},_get_surrounding_element:function(){return this.options.surrounding_element?e(this.options.surrounding_element):e("body")}})}(i("l/Rs"))},l8Wg:function(e,t,i){"use strict";var n=u(i("shXp")),r=u(i("9VV1")),a=u(i("wmCY")),s=i("4RZc"),o=u(i("hBlz"));i("4C6Z");var l=u(i("c5nH"));function u(e){return e&&e.__esModule?e:{default:e}}i("l/Rs");var c=i("l/Rs");c.fn.ksr_uploader=function(e){function t(t,i,n){return c.pollster(t,function(t){return!!t.image_src&&(i.find(".success img.preview").attr("src",t.image_src).removeAttr("data-status_url"),c(".js-subs-preview").removeClass("o0p"),i.removeClass("encoding"),n.trigger("ksr_uploader:uploaded",[t]),e.after_encode&&e.after_encode(),!0)},{delay:5e3})}return e=e||{},c(this).each(function(){var i,u,d=c(this),h=new RegExp(window.location.host+"|^/"),f=!d.attr("url").match(h),p=f?n.default.map(d.data("params"),function(e,t){return{name:t,value:e}}):[{name:"new_style",value:!0}],g=d.siblings(".progress"),m=d.parent(),v=m.parent(),y=d.closest("form"),_=v.find(".success img.preview"),b=y.find("input[type=submit]"),w=b.map(function(){return c(this).val()}).get(),E=!1;function A(e){E=e,d.data("uploading",e)}function T(e){var n=e,r=y.find(".success");if("string"==typeof n)try{n=c.parseJSON(n)||{}}catch(e){n={}}A(!1),n.image_src&&r.find("img.preview").attr("src",n.image_src),n.id&&r.find("input.asset_id").val(n.id),_.attr("data-status_url",n.status_url),d.trigger("file_added",[n]),b.val(function(e){return w[e]}),v.removeClass("uploading"),v.addClass("has_file"),c(".js-subs-percentage").addClass("hide"),c(".js-subs-preview").addClass("o0p"),c(".js-subs-uploader-icon").addClass("hide"),n.status_url?i=t(n.status_url,v,d):d.trigger("ksr_uploader:uploaded",[n])}function S(e,t,i){var n=c.map(t.messages,function(e){return e}),r=y.find(".js-asset-upload").attr("class");void 0===r&&(r=y.closest(".js-asset-upload").attr("class")),c.each(n,function(t,n){(0,s.track)(e,{project_pid:l.default.data.id,type:i.type,file_size:i.size,context:r,error_description:n})})}d.siblings("label").hide(),d.fileupload({dataType:"text",dropZone:m,pasteZone:null,url:d.attr("url"),type:"POST",replaceFileInput:!1,add:function(e,t){t.files[0].size<1?t.files=[]:(i&&i.stop(),u=t.submit(),A(!0),g.removeClass("finished"),v.addClass("uploading"),d.trigger("file_queued"),window.onbeforeunload=function(){if(E)return a.default.t("library.ksr_uploader.Your_upload_has_not_completed_yet_Click_Stay")})},submit:function(e,t){f?p.push({name:"success_action_redirect",value:c.support.xhrFormDataFileUpload?"":(0,o.default)().path("/iframe_upload_catcher.html").fragment("").toString()}):p.push({name:"authenticity_token",value:c('meta[name="csrf-token"]').attr("content")}),t.formData=p},done:function(t,i){f?function(t){if("function"==typeof e.remote_upload_success)return void e.remote_upload_success.apply(d,arguments);var i=t.files[0];c.ajax({url:d.data("assetPath"),data:{file_name:encodeURIComponent(i.name),content_type:i.type,updated_at:(i.lastModifiedDate||new Date).getTime(),file_size:i.size,s3_key:n.default.findWhere(p,{name:"key"}).value},type:"POST",success:function(e){T(e)},error:function(){y.trigger("ksr_file_upload:reset"),A(!1),(0,r.default)({error:a.default.t("library.ksr_uploader.Could_not_upload_this_file")}),v.removeClass("uploading"),void 0!==l.default&&0===l.default.get("launched_at")&&S("Errored Project Asset Upload",t,i)}})}(i):T(i.result)},progress:function(e,t){var i=parseInt(t.loaded/t.total*100,10);g.find(".bar").css("width",i+"%"),g.find(".percentage").text(i+"%"),c(".js-subs-percentage").text(i+"%"),100===i&&(g.addClass("finished"),g.find(".percentage").text(a.default.t("library.ksr_uploader.Processing")),b.val(a.default.t("library.ksr_uploader.Processing_please_wait")),c(".js-subs-percentage").text("Processing..."))},fail:function(e,t){d.trigger("error"),y.trigger("ksr_file_upload:reset"),A(!1),(0,r.default)({error:a.default.t("library.ksr_uploader.There_was_an_error_with_this_file_Please_try_a_different")}),b.val(function(e){return w[e]}),v.removeClass("uploading"),void 0!==l.default&&0===l.default.get("launched_at")&&S("Failed Project Asset Upload",t,t.files[0])}}),_.data("status_url")&&(i=t(_.data("status_url"),v,d),_.removeAttr("status_url")),m.on("pollster:stop",function(){i&&i.stop()}),m.on("ksr_file_upload:cancel cancel",function(){u&&u.abort(),y.trigger("ksr_file_upload:reset"),d.trigger("error"),A(!1)}),m.on("destroy",function(){m.trigger("ksr_file_upload:cancel")}),m.on("resize",function(){m.find("object").attr("width",m.outerWidth()).attr("height",m.outerHeight())})})}},lRBY:function(e,t,i){"use strict";i("l/Rs");var n=i("l/Rs");n.fn.tabs=function(){return n(this).each(function(){var e=n(this);e.on("activate",function(t,i){var r=n(i),a=n("#"+r.data("pane"));e.data("pane")&&e.data("pane").trigger("deactivated"),e.data("pane",a.trigger("activated"))}),e.children().on("click",function(){n(this).parent().trigger("activate",n(this))})})},n.fn.panes=function(){var e=n(this);return e.each(function(){e.children().on("activated",function(){n(this).show()}).on("deactivated",function(){n(this).hide()})})}},lX5T:function(e,t,i){i("l/Rs"),i("l/Rs");var n=function(){var e,t,i,r,a,s,o="undefined",l="object",u="application/x-shockwave-flash",c="SWFObjectExprInst",d=window,h=document,f=navigator,p=!1,g=[],m=[],v=[],y=[],_=!1,b=!1,w=!0,E=!1,A=function(){var e=typeof h.getElementById!=o&&typeof h.getElementsByTagName!=o&&typeof h.createElement!=o,t=f.userAgent.toLowerCase(),i=f.platform.toLowerCase(),n=/win/.test(i||t),r=/mac/.test(i||t),a=!!/webkit/.test(t)&&parseFloat(t.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")),s="Microsoft Internet Explorer"===f.appName,c=[0,0,0],g=null;if(typeof f.plugins!=o&&typeof f.plugins["Shockwave Flash"]==l)(g=f.plugins["Shockwave Flash"].description)&&typeof f.mimeTypes!=o&&f.mimeTypes[u]&&f.mimeTypes[u].enabledPlugin&&(p=!0,s=!1,g=g.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),c[0]=B(g.replace(/^(.*)\..*$/,"$1")),c[1]=B(g.replace(/^.*\.(.*)\s.*$/,"$1")),c[2]=/[a-zA-Z]/.test(g)?B(g.replace(/^.*[a-zA-Z]+(.*)$/,"$1")):0);else if(typeof d.ActiveXObject!=o)try{var m=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");m&&(g=m.GetVariable("$version"))&&(s=!0,c=[B((g=g.split(" ")[1].split(","))[0]),B(g[1]),B(g[2])])}catch(e){}return{w3:e,pv:c,wk:a,ie:s,win:n,mac:r}}();A.w3&&((typeof h.readyState!=o&&("complete"===h.readyState||"interactive"===h.readyState)||typeof h.readyState==o&&(h.getElementsByTagName("body")[0]||h.body))&&T(),_||(typeof h.addEventListener!=o&&h.addEventListener("DOMContentLoaded",T,!1),A.ie&&(h.attachEvent("onreadystatechange",function e(){"complete"==h.readyState&&(h.detachEvent("onreadystatechange",e),T())}),d==top&&function e(){if(!_){try{h.documentElement.doScroll("left")}catch(t){return void setTimeout(e,0)}T()}}()),A.wk&&function e(){_||(/loaded|complete/.test(h.readyState)?T():setTimeout(e,0))}()));function T(){if(!_&&document.getElementsByTagName("body")[0]){try{var e,t=j("span");t.style.display="none",(e=h.getElementsByTagName("body")[0].appendChild(t)).parentNode.removeChild(e),e=null,t=null}catch(e){return}_=!0;for(var i=g.length,n=0;n<i;n++)g[n]()}}function S(e){_?e():g[g.length]=e}function R(){var e=m.length;if(e>0)for(var t=0;t<e;t++){var i=m[t].id,n=m[t].callbackFn,r={success:!1,id:i};if(A.pv[0]>0){var a=F(i);if(a)if(!U(m[t].swfVersion)||A.wk&&A.wk<312)if(m[t].expressInstall&&x()){var s={};s.data=m[t].expressInstall,s.width=a.getAttribute("width")||"0",s.height=a.getAttribute("height")||"0",a.getAttribute("class")&&(s.styleclass=a.getAttribute("class")),a.getAttribute("align")&&(s.align=a.getAttribute("align"));for(var l={},u=a.getElementsByTagName("param"),c=u.length,d=0;d<c;d++)"movie"!=u[d].getAttribute("name").toLowerCase()&&(l[u[d].getAttribute("name")]=u[d].getAttribute("value"));C(s,l,i,n)}else P(a),n&&n(r);else H(i,!0),n&&(r.success=!0,r.ref=D(i),r.id=i,n(r))}else if(H(i,!0),n){var h=D(i);h&&typeof h.SetVariable!=o&&(r.success=!0,r.ref=h,r.id=h.id),n(r)}}}function D(e){var t=null,i=F(e);return i&&"OBJECT"===i.nodeName.toUpperCase()&&(t=typeof i.SetVariable!==o?i:i.getElementsByTagName(l)[0]||i),t}function x(){return!b&&U("6.0.65")&&(A.win||A.mac)&&!(A.wk&&A.wk<312)}function C(n,a,s,l){var u=F(s);if(s=N(s),b=!0,i=l||null,r={success:!1,id:s},u){"OBJECT"==u.nodeName.toUpperCase()?(e=I(u),t=null):(e=u,t=s),n.id=c,(typeof n.width==o||!/%$/.test(n.width)&&B(n.width)<310)&&(n.width="310"),(typeof n.height==o||!/%$/.test(n.height)&&B(n.height)<137)&&(n.height="137");var f=A.ie?"ActiveX":"PlugIn",p="MMredirectURL="+encodeURIComponent(d.location.toString().replace(/&/g,"%26"))+"&MMplayerType="+f+"&MMdoctitle="+encodeURIComponent(h.title.slice(0,47)+" - Flash Player Installation");if(typeof a.flashvars!=o?a.flashvars+="&"+p:a.flashvars=p,A.ie&&4!=u.readyState){var g=j("div");s+="SWFObjectNew",g.setAttribute("id",s),u.parentNode.insertBefore(g,u),u.style.display="none",O(u)}k(n,a,s)}}function P(e){if(A.ie&&4!=e.readyState){e.style.display="none";var t=j("div");e.parentNode.insertBefore(t,e),t.parentNode.replaceChild(I(e),t),O(e)}else e.parentNode.replaceChild(I(e),e)}function I(e){var t=j("div");if(A.win&&A.ie)t.innerHTML=e.innerHTML;else{var i=e.getElementsByTagName(l)[0];if(i){var n=i.childNodes;if(n)for(var r=n.length,a=0;a<r;a++)1==n[a].nodeType&&"PARAM"==n[a].nodeName||8==n[a].nodeType||t.appendChild(n[a].cloneNode(!0))}}return t}function k(e,t,i){var n,r,a,s,c=F(i);if(i=N(i),A.wk&&A.wk<312)return n;if(c){var d,h,f,p=A.ie?j("div"):j(l);for(f in typeof e.id==o&&(e.id=i),t)t.hasOwnProperty(f)&&"movie"!==f.toLowerCase()&&L(p,f,t[f]);for(d in A.ie&&(r=e.data,a=p.innerHTML,(s=j("div")).innerHTML="<object classid='clsid:D27CDB6E-AE6D-11cf-96B8-444553540000'><param name='movie' value='"+r+"'>"+a+"</object>",p=s.firstChild),e)e.hasOwnProperty(d)&&("styleclass"===(h=d.toLowerCase())?p.setAttribute("class",e[d]):"classid"!==h&&"data"!==h&&p.setAttribute(d,e[d]));A.ie?v[v.length]=e.id:(p.setAttribute("type",u),p.setAttribute("data",e.data)),c.parentNode.replaceChild(p,c),n=p}return n}function L(e,t,i){var n=j("param");n.setAttribute("name",t),n.setAttribute("value",i),e.appendChild(n)}function O(e){var t=F(e);t&&"OBJECT"==t.nodeName.toUpperCase()&&(A.ie?(t.style.display="none",function e(){if(4==t.readyState){for(var i in t)"function"==typeof t[i]&&(t[i]=null);t.parentNode.removeChild(t)}else setTimeout(e,10)}()):t.parentNode.removeChild(t))}function M(e){return e&&e.nodeType&&1===e.nodeType}function N(e){return M(e)?e.id:e}function F(e){if(M(e))return e;var t=null;try{t=h.getElementById(e)}catch(e){}return t}function j(e){return h.createElement(e)}function B(e){return parseInt(e,10)}function U(e){e+="";var t=A.pv,i=e.split(".");return i[0]=B(i[0]),i[1]=B(i[1])||0,i[2]=B(i[2])||0,t[0]>i[0]||t[0]==i[0]&&t[1]>i[1]||t[0]==i[0]&&t[1]==i[1]&&t[2]>=i[2]}function G(e,t,i,n){var r=h.getElementsByTagName("head")[0];if(r){var l="string"==typeof i?i:"screen";if(n&&(a=null,s=null),!a||s!=l){var u=j("style");u.setAttribute("type","text/css"),u.setAttribute("media",l),a=r.appendChild(u),A.ie&&typeof h.styleSheets!=o&&h.styleSheets.length>0&&(a=h.styleSheets[h.styleSheets.length-1]),s=l}a&&(typeof a.addRule!=o?a.addRule(e,t):typeof h.createTextNode!=o&&a.appendChild(h.createTextNode(e+" {"+t+"}")))}}function H(e,t){if(w){var i=t?"visible":"hidden",n=F(e);_&&n?n.style.visibility=i:"string"==typeof e&&G("#"+e,"visibility:"+i)}}function z(e){return null!=/[\\\"<>\.;]/.exec(e)&&typeof encodeURIComponent!=o?encodeURIComponent(e):e}g[0]=function(){p?function(){var e=h.getElementsByTagName("body")[0],t=j(l);t.setAttribute("style","visibility: hidden;"),t.setAttribute("type",u);var i=e.appendChild(t);if(i){var n=0;!function r(){if(typeof i.GetVariable!=o)try{var a=i.GetVariable("$version");a&&(a=a.split(" ")[1].split(","),A.pv=[B(a[0]),B(a[1]),B(a[2])])}catch(e){A.pv=[8,0,0]}else if(n<10)return n++,void setTimeout(r,10);e.removeChild(t),i=null,R()}()}else R()}():R()};A.ie&&window.attachEvent("onunload",function(){for(var e=y.length,t=0;t<e;t++)y[t][0].detachEvent(y[t][1],y[t][2]);for(var i=v.length,r=0;r<i;r++)O(v[r]);for(var a in A)A[a]=null;for(var s in A=null,n)n[s]=null;n=null});return{registerObject:function(e,t,i,n){if(A.w3&&e&&t){var r={};r.id=e,r.swfVersion=t,r.expressInstall=i,r.callbackFn=n,m[m.length]=r,H(e,!1)}else n&&n({success:!1,id:e})},getObjectById:function(e){if(A.w3)return D(e)},embedSWF:function(e,t,i,n,r,a,s,u,c,d){var h=N(t),f={success:!1,id:h};A.w3&&!(A.wk&&A.wk<312)&&e&&t&&i&&n&&r?(H(h,!1),S(function(){i+="",n+="";var p={};if(c&&typeof c===l)for(var g in c)p[g]=c[g];p.data=e,p.width=i,p.height=n;var m={};if(u&&typeof u===l)for(var v in u)m[v]=u[v];if(s&&typeof s===l)for(var y in s)if(s.hasOwnProperty(y)){var _=E?encodeURIComponent(y):y,b=E?encodeURIComponent(s[y]):s[y];typeof m.flashvars!=o?m.flashvars+="&"+_+"="+b:m.flashvars=_+"="+b}if(U(r)){var w=k(p,m,t);p.id==h&&H(h,!0),f.success=!0,f.ref=w,f.id=w.id}else{if(a&&x())return p.data=a,void C(p,m,t,d);H(h,!0)}d&&d(f)})):d&&d(f)},switchOffAutoHideShow:function(){w=!1},enableUriEncoding:function(e){E=typeof e===o||e},ua:A,getFlashPlayerVersion:function(){return{major:A.pv[0],minor:A.pv[1],release:A.pv[2]}},hasFlashPlayerVersion:U,createSWF:function(e,t,i){return A.w3?k(e,t,i):void 0},showExpressInstall:function(e,t,i,n){A.w3&&x()&&C(e,t,i,n)},removeSWF:function(e){A.w3&&O(e)},createCSS:function(e,t,i,n){A.w3&&G(e,t,i,n)},addDomLoadEvent:S,addLoadEvent:function(e){if(typeof d.addEventListener!=o)d.addEventListener("load",e,!1);else if(typeof h.addEventListener!=o)h.addEventListener("load",e,!1);else if(typeof d.attachEvent!=o)!function(e,t,i){e.attachEvent(t,i),y[y.length]=[e,t,i]}(d,"onload",e);else if("function"==typeof d.onload){var t=d.onload;d.onload=function(){t(),e()}}else d.onload=e},getQueryParamValue:function(e){var t=h.location.search||h.location.hash;if(t){if(/\?/.test(t)&&(t=t.split("?")[1]),null==e)return z(t);for(var i=t.split("&"),n=0;n<i.length;n++)if(i[n].substring(0,i[n].indexOf("="))==e)return z(i[n].substring(i[n].indexOf("=")+1))}return""},expressInstallCallback:function(){if(b){var n=F(c);n&&e&&(n.parentNode.replaceChild(e,n),t&&(H(t,!0),A.ie&&(e.style.display="block")),i&&i(r)),b=!1}},version:"2.3"}}()},mZAT:function(e,t,i){"use strict";var n=i("l/Rs");i("l/Rs");!function(e){e.fn.term_form=function(){return this.each(function(){var t=e(this);t.find(".text").on("input keydown paste cut",function(){e.trim(e(this).val())?e("form.term .ss-delete").show():e("form.term .ss-delete").hide()}).trigger("input").on("blur",function(){t.submit()}),t.find(".ss-delete").on("click",function(){e("form.term .text").val("").trigger("input").focus(),t.submit()}),t.find(".text").on("focus",function(){e(this).addClass("focused")}),t.find(".text").on("blur",function(){var t=e(this);t.val()||t.removeClass("focused")})}),this}}(n)},mvPF:function(e,t,i){var n=i("l/Rs");i("l/Rs");!function(e){"use strict";function t(t,i){var n,r,a,s=i.autoHeight;if("container"==s)r=e(i.slides[i.currSlide]).outerHeight(),i.container.height(r);else if(i._autoHeightRatio)i.container.height(i.container.width()/i._autoHeightRatio);else if("calc"===s||"number"==e.type(s)&&s>=0){if((a="calc"===s?function(t,i){var n=0,r=-1;return i.slides.each(function(t){var i=e(this).height();i>r&&(r=i,n=t)}),n}(0,i):s>=i.slides.length?0:s)==i._sentinelIndex)return;i._sentinelIndex=a,i._sentinel&&i._sentinel.remove(),(n=e(i.slides[a].cloneNode(!0))).removeAttr("id name rel").find("[id],[name],[rel]").removeAttr("id name rel"),n.css({position:"static",visibility:"hidden",display:"block"}).prependTo(i.container).addClass("cycle-sentinel cycle-slide").removeClass("cycle-slide-active"),n.find("*").css("visibility","hidden"),i._sentinel=n}}function i(t,i,n,r,a){var s=e(r).outerHeight();i.container.animate({height:s},i.autoHeightSpeed,i.autoHeightEasing)}function n(r,a){a._autoHeightOnResize&&(e(window).off("resize orientationchange",a._autoHeightOnResize),a._autoHeightOnResize=null),a.container.off("cycle-slide-added cycle-slide-removed",t),a.container.off("cycle-destroyed",n),a.container.off("cycle-before",i),a._sentinel&&(a._sentinel.remove(),a._sentinel=null)}e.extend(e.fn.cycle.defaults,{autoHeight:0,autoHeightSpeed:250,autoHeightEasing:null}),e(document).on("cycle-initialized",function(r,a){var s,o=a.autoHeight,l=e.type(o),u=null;function c(){t(r,a)}"string"!==l&&"number"!==l||(a.container.on("cycle-slide-added cycle-slide-removed",t),a.container.on("cycle-destroyed",n),"container"==o?a.container.on("cycle-before",i):"string"===l&&/\d+\:\d+/.test(o)&&(s=(s=o.match(/(\d+)\:(\d+)/))[1]/s[2],a._autoHeightRatio=s),"number"!==l&&(a._autoHeightOnResize=function(){clearTimeout(u),u=setTimeout(c,50)},e(window).on("resize orientationchange",a._autoHeightOnResize)),setTimeout(c,30))})}(n)},oAbu:function(e,t,i){"use strict";var n=i("l/Rs");i("l/Rs");!function(e){function t(t,i){this.$elem=t,this.options=i,this.$target=this.options.target||t,this.options.sprite_orientation&&"horizontal"===this.options.sprite_orientation?this.offset=this.$target.width():this.offset=this.$target.height(),this.index=0,this.playing=!0,this.options.index_control?this.$index_control_children=this.options.index_control.children():this.$index_control_children=e([]),this.options.should_autoadvance_callback||(this.options.should_autoadvance_callback=function(){return!0}),this.number=this.options.number||this.$index_control_children.length,this.update_offset(),this._attach(),i.play_delay&&this.playing_timer()}e.fn.spriteshow=function(i){return i=i||{},e(this).each(function(){var n=e(this).data("spriteshow");n||(n=new t(e(this),i),e(this).data("spriteshow",n))})},e.extend(t.prototype,{_attach:function(){var t=this;this.$index_control_children.click(function(i){i.preventDefault(),t.set_index(e(this).index()),t.pause()}),this.options.controls&&(this.options.controls.children(".left").click(function(e){e.preventDefault(),t.page_left(),t.pause()}),this.options.controls.children(".right").click(function(e){e.preventDefault(),t.page_right(),t.pause()}),this.options.controls.children(".play-pause").click(function(){t.playing?t.pause():t.play()}))},update_offset:function(){var t=e([]);"fade"===this.options.effect&&(t=this.$target.clone(),this.$target.css("position","absolute"),this.$target.after(t),this.$target.fadeOut(function(){e(this).remove()}),this.$target=t),this.current_offset=this.index*this.offset,this.options.sprite_orientation&&"horizontal"===this.options.sprite_orientation?this.$target.css("background-position","-"+this.current_offset.toString()+"px 0"):this.$target.css("background-position","0 -"+this.current_offset.toString()+"px")},set_index:function(e){this.index=e,this.$index_control_children.removeClass("selected"),this.$index_control_children.filter(":eq("+e.toString()+")").addClass("selected"),this.$target.trigger("spriteshow:index",[e]),this.update_offset()},page_left:function(){var e=this.index-1;e<0&&(e=this.number-1),this.set_index(e)},page_right:function(){var e=this.index+1;e>=this.number&&(e=0,this.options.play_once&&this.pause()),this.set_index(e)},playing_timer:function(){var e=this;this.play_timeout=setTimeout(function(){if(e.playing&&e.options.should_autoadvance_callback()&&e.page_right(),e.options.pause_when_behind_by){var t=(new Date).getTime();e.last_play_date&&Math.abs(e.last_play_date-t-e.options.play_delay)>e.options.pause_when_behind_by?(e.slow_strikes?e.slow_strikes+=1:e.slow_strikes=0,e.slow_strikes>3&&e.pause()):e.slow_strikes=0,e.last_play_date=t}e.playing_timer()},this.options.play_delay)},play:function(){this.playing=!0,this.options.controls&&this.options.controls.children(".play-pause").removeClass("spriteshow-play").addClass("spriteshow-pause")},pause:function(){this.playing=!1,this.options.controls&&this.options.controls.children(".play-pause").removeClass("spriteshow-pause").addClass("spriteshow-play")}})}(n)},oTWu:function(e,t,i){"use strict";var n=i("l/Rs");i("l/Rs");!function(e){function t(t,i){this.$elem=t,this.options=e.extend({},{adjust_on:"mobius:loaded_page scroll resize sticky_bar:position load hashchange",parent:t.parent(),attach_to:"top",lock_to_bottom:!0},i),this.paused=!1,this.last_scroll_top=0,this.last_up=!1,this.fixed=!1,this.original_top=t.offset().top,this.original_bottom=this.original_top+t.height(),this.update_window_larger_then_elem(),this.attach_to_top="top"===this.options.attach_to,this.attach_to_bottom=!this.attach_to_top,this.bind_events(),this.reposition()}function i(t,i){this.$elem=t,this.options=e.extend({},{adjust_on:"shifted scroll resize load hashchange"},i),this.original_top=t.offset().top,this.bind_events(),this.reposition()}e.fn.sticky_bar=function(i){return i=i||{},e(this).each(function(){var n=e(this).data("stickybar");n?e(this).trigger("shifted"):(n=new t(e(this),i),e(this).data("stickybar",n))})},e.fn.simple_sticky_bar=function(t){return t=t||{},e(this).each(function(){var n=e(this).data("simple_stickybar");n?e(this).trigger("shifted"):(n=new i(e(this),t),e(this).data("simple_stickybar",n))})},e.extend(i.prototype,{bind_events:function(){var t=this;e(window).on(this.options.adjust_on,function(e){t.reposition(e)})},reposition:function(){e(window).scrollTop()<this.original_top?(this.$elem.css("position","static"),this.$elem.css("top","auto")):(this.$elem.css("position","fixed"),this.$elem.css("top",0))}}),e.extend(t.prototype,{bind_events:function(){var t=this;e(window).resize(function(e){e.target===window&&t.update_window_larger_then_elem()}),e(document).on("shifted",function(){t.fixed=!1,t.$elem.css("position","static"),t.$elem.css("top","auto"),t.$elem.css("bottom","auto"),t.original_top=t.$elem.offset().top,t.original_bottom=t.original_top+t.$elem.height(),t.reposition()}),e(window).on(this.options.adjust_on,function(e){t.paused||t.reposition(e)}),this.$elem.on("sticky_bar:fix_to_bottom",function(){t.fixed=!0,t.$elem.css("position","fixed"),t.$elem.css("top",-(t.$elem.height()-e(window).height()))}),this.$elem.on("sticky_bar:pause",function(){t.paused=!0}),this.$elem.on("sticky_bar:unpause",function(){t.paused=!1})},update_window_larger_then_elem:function(){this.window_larger_then_elem=e(window).height()>this.$elem.height()},lockToBottom:function(e){this.fixed=!1,this.$elem.css("position","absolute"),this.$elem.css("top",e-this.$elem.outerHeight()-this.$elem.offsetParent().offset().top)},reposition:function(t){var i=e(window).scrollTop(),n=i+e(window).height(),r=this.$elem.offset().top,a=r+this.$elem.height(),s=this.options.parent,o=s.offset().top+s.outerHeight(),l=t&&"scroll"===t.type,u=!(i>this.last_scroll_top),c=u!==this.last_up;e("body").width()<640||this.attach_to_top&&i<this.original_top||this.attach_to_bottom&&n>this.original_bottom?(this.fixed=!1,this.$elem.css("position","static"),this.$elem.css("top","auto"),this.$elem.css("bottom","auto")):this.options.lock_to_bottom&&!this.window_larger_then_elem&&n>o?this.lockToBottom(o):this.options.lock_to_bottom&&this.window_larger_then_elem&&i+this.$elem.height()>o?this.lockToBottom(o):c&&l?this.window_larger_then_elem||(this.fixed=!1,this.$elem.css("position","absolute"),this.$elem.css("top",r),this.$elem.css("bottom","auto")):this.fixed||(this.attach_to_top?this.window_larger_then_elem||(!l||u)&&i<r?(this.fixed=!0,this.$elem.css("position","fixed"),this.$elem.css("top",0)):l&&u||!(n>a)||(this.fixed=!0,this.$elem.css("position","fixed"),this.$elem.css("top",-(this.$elem.height()-e(window).height()))):(this.window_larger_then_elem||(!l||!u)&&n>a)&&(this.fixed=!0,this.$elem.css("position","fixed"),this.$elem.css("bottom",0))),this.was_fixed!==this.fixed&&this.$elem.trigger("sticky_bar:fixed_changed",[this.fixed]),this.last_scroll_top=i,this.last_up=u}})}(n)},ofuh:function(e,t,i){"use strict";var n=u(i("l/Rs")),r=u(i("shXp")),a=u(i("8NzR")),s=u(i("L3hI")),o=i("16WZ"),l=u(i("wmCY"));function u(e){return e&&e.__esModule?e:{default:e}}(0,a.default)(".NS_layouts__notifications",function(e){function t(t){var i=(0,n.default)(".js-banner-text",e);if(0!==i.length){var a=r.default.pairs(r.default.countBy((0,n.default)(".js-alert-box",e).map(function(){return(0,n.default)(this).data("category")}).get(),function(e){return e})),o=r.default.reduce(a,function(e,t){return e+t[1]},0),u=(0,n.default)(".js-cta",e),c=(0,n.default)(".js-banner-dismiss",e),d=(0,n.default)(".js-banner-toggle-button",e);if(1===o&&t){i.html((0,n.default)(".js-alert-body",e).html()),i.has("a")&&(0,n.default)(".js-banner-text a").addClass("white text-underline");var h=(0,n.default)(".js-alert-cta")[0];h?(u.html(h),u.show()):(u.html(""),u.hide());var f=(0,n.default)(".js-alert-dismiss",e);f.length?(c[0].setAttribute("href",f.attr("href")),c.show()):c.hide(),d.hide()}else{var p=r.default.map(a,function(e){return e[0]}).sort().map(function(e){return"<span class='bold'>"+l.default.t(e)+"</span>"}),g="<span class='bold'>"+l.default.t("banners.title.alerts",{count:o})+"</span>",m=s.default.to_sentence(p);i.html(l.default.t("banners.title.text",{alerts:g,categories:m})),(0,n.default)(".js-alert-title--urgent",e).text(l.default.t("banners.subtitles.urgent")),(0,n.default)(".js-alert-title--nonurgent",e).text(2===(0,n.default)(".js-alert-section",e).length?l.default.t("banners.subtitles.nonurgent.more"):l.default.t("banners.subtitles.nonurgent.less")),u.hide(),c.hide(),d.show()}(0,n.default)(".js-banner-buttons-container",e).show()}}t(!0),(0,n.default)(".js-alert-body").has("a")&&(0,n.default)(".js-alert-body a").addClass("text-underline"),e.on("click",".js-alert-dismiss, .js-banner-dismiss",function(){function e(e){e.slideUp(200,function(){(0,n.default)(this).remove(),t(!1),(0,o.rebindScroll)()})}var i=(0,n.default)(this),r=i.closest(".js-banner-wrap"),a=i.closest(".js-alert-wrap"),s=".js-alert-box";return 1===r.find(s).length?e(r):1===a.find(s).length?e(a):e(i.closest(s)),n.default.post(i.attr("href"),{_method:"delete"}),!1}),e.on("click",".js-banner-toggle, .js-banner-toggle-button",function(){(0,n.default)(".js-banner-wrap",e).toggleClass("bg-red-400 bg-grey-200",500),(0,n.default)(".js-banner-text",e).toggleClass("o-none",500).toggleClass("click-through",500),(0,n.default)(".alert-container",e).toggleClass("alert-container--open",500),(0,n.default)(".js-banner-toggle-icon",e).toggleClass("rotate-180",500),setTimeout(function(){(0,o.rebindScroll)()},501)})})},orei:function(e,t,i){(function(e){var t,i,n;i=".serialScroll",(n=(t=e).serialScroll=function(e){return t(window).serialScroll(e)}).defaults={duration:1e3,axis:"x",event:"click",start:0,step:1,lock:!0,cycle:!0,constant:!0},t.fn.serialScroll=function(e){return this.each(function(){var r,a=t.extend({},n.defaults,e),s=a.event,o=a.step,l=a.lazy,u=a.target?this:document,c=t(a.target||this,u),d=c[0],h=a.items,f=a.start,p=a.interval,g=a.navigation;function m(e){e.data+=f,v(e,this)}function v(e,i){t.isNumeric(i)||(i=e.data);var n,s=e.type,l=a.exclude?b().slice(0,-a.exclude):b(),u=l.length-1,d=l[i],h=a.duration;if(s&&e.preventDefault(),p&&(_(),r=setTimeout(y,a.interval)),!d){if(f!==(n=i<0?0:u))i=n;else{if(!a.cycle)return;i=u-n}d=l[i]}!d||a.lock&&c.is(":animated")||s&&a.onBefore&&!1===a.onBefore(e,d,c,b(),i)||(a.stop&&c.stop(!0),a.constant&&(h=Math.abs(h/o*(f-i))),c.scrollTo(d,h,a),w("notify",i))}function y(){w("next")}function _(){clearTimeout(r)}function b(){return t(h,d)}function w(e){c.trigger(e+i,[].slice.call(arguments,1))}function E(e){if(t.isNumeric(e))return e;for(var i,n=b();-1===(i=n.index(e))&&e!==d;)e=e.parentNode;return i}delete a.step,delete a.start,d&&(l||(h=b()),(a.force||p)&&v({},f),t(a.prev||[],u).bind(s,-o,m),t(a.next||[],u).bind(s,o,m),d._bound_||c.bind("prev"+i,-o,m).bind("next"+i,o,m).bind("goto"+i,v),p&&c.bind("start"+i,function(e){p||(_(),p=!0,y())}).bind("stop"+i,function(){_(),p=!1}),c.bind("notify"+i,function(e,t){var i=E(t);i>-1&&(f=i)}),d._bound_=!0,a.jump&&(l?c:b()).bind(s,function(e){v(e,E(e.target))}),g&&(g=t(g,u).bind(s,function(e){e.data=Math.round(b().length/g.length)*g.index(this),v(e,this)})))})}}).call(t,i("l/Rs"))},p44K:function(e,t,i){"use strict";var n,r=i("shXp"),a=(n=r)&&n.__esModule?n:{default:n};var s=i("l/Rs"),o=i("l/Rs");o.fn.validate=function(){var e=!0;return!this.length||(this.is(":input")?(this.each(function(){var t,i=o(this),n=!1,r=i.data("validations");r&&r.length&&(a.default.each(r,function(r){var a=r[0],s=r[1]||{};if("function"!=typeof s.when||s.when.call(i))return a.call(i,i.val())?void 0:(e=!1,n=!0,"string"==typeof s.error&&(t=s.error),!1)}),n?o.each(o.fn.validate.defaults.on_invalid,function(e,n){n(i,t)}):o.each(o.fn.validate.defaults.on_valid,function(e,t){t(i)}))}),e):this.find(":input").validate())},o.fn.validate.defaults={on_valid:[function(e){o(e).trigger("validate:valid")}],on_invalid:[function(e,t){o(e).trigger("validate:invalid",[t])}]},function(e){function t(t,i){var n=e(this);n.data("validations")||n.data("validations",[]),n.data("validations").push([t,i])}function i(e){return function(i){return this.each(function(){t.call(this,e,i)}),this}}e.fn.validates_custom=function(e,i){return this.each(function(){t.call(this,e,i)}),this},e.fn.validates_format=i(function(t){return t.match(new RegExp(e(this).data("format")))}),e.fn.validates_min_length=i(function(t){return t.length>=parseInt(e(this).data("minlength"),10)}),e.fn.validates_max_length=i(function(t){return t.length<=parseInt(e(this).data("maxlength"),10)}),e.fn.validates_presence=i(function(t){return!!e.trim(t)}),e.fn.validates_email=i(function(e){return e.match(/^.+@.+\..{2,}$/)}),e.fn.validates_luhn_check=i(function(e){var t,i,n,r=String(e).replace(/[^\d]/g,""),a=0;for(i=r.length-1;i>=0;i-=1)n=i%2+1,a+=(t=parseInt(r[i],10))>4&&2===n?t*n%10+1:t*n;return a%10==0}),e.fn.validates_routing_number=i(function(t){var i,n,r,a=String(t).replace(/[^\d]/g,""),s=e(this).closest("form").attr("data-country"),o=(a+"").split(""),l=0,u=[0,3,6];switch(s){case"US":for(n=0,r=u.length;n<r;n+=1)i=u[n],l+=3*parseInt(o[i],10),l+=7*parseInt(o[i+1],10),l+=parseInt(o[i+2],10);return 0!==l&&l%10==0;case"CA":return 8===a.length;case"AU":case"NZ":return 6===a.length;default:return!0}}),e.fn.validates_vat_format=i(function(e){var t=String(e).toUpperCase();switch(t.substr(0,2)){case"NL":return/^\w{2}\d{9}B\d{2}$/.test(t);default:return/^\w{2}[\w\d]{6}/.test(t)}}),e.fn.validates_postal_code=i(function(t){var i=e(this).closest("form").data("country"),n=!1,r={US:[/(^\d{5}$)|(^\d{5}-\d{4}$)/]};return void 0===r[i]||(e.each(r[i],function(e,i){i.test(t)&&(n=!0)}),n)}),e.fn.validates_business_id=i(function(t){var i=String(t).toUpperCase().replace(/\s+/g,""),n=e(this).closest("form").attr("data-country"),r=!1,a={AU:[/^\d{9}$/,/^\d{11}$/],BE:[/^(BE)?[A-Z0-9]{12}$/],CA:[/^\d{9,10}$/],CH:[/^(CHE-?)?[0-9]{3}\.?[0-9]{3}(\.?[0-9]{3})?(TVA|MWST|IVA|VAT)?$/],ES:[/^[ABCDEFGHJNPQRSUVW][0-9]{7}[A-Z0-9]$/],FI:[/^\d{7}\-\d$/],FR:[/^\d{14}$/],GB:[/^\d{7,8}$/,/^(AC|E[NS]|FC|G[ENS]|I[CP]|LP|N[ACFILOPRVZ]|OC|R[0C]|S[ACEFILOPRZ]|ZC)\d{5,6}[A-Z]?$/i],IE:[/^\d{5,6}$/,/^[A-Z]{2}\d{5,6}$/i,/^R\d{3}$/i,/^\d{2,4}(?:SAL|F|R|T|SA)$/],LU:[/^\d{4,8}$/,/^B\d{4,8}$/i,/^F\d{3,8}$/i],NL:[/^\d{8}$/],US:[/^\d{2}-?\d{7}$/]};return""===i||(void 0===a[n]||(e.each(a[n],function(e,t){t.test(i)&&(r=!0)}),r))})}(s)},pD7l:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=y(i("fbTF")),r=y(i("iDDm")),a=y(i("0SSf")),s=y(i("WoYN")),o=y(i("Eaq5")),l=y(i("sZX6")),u=y(i("X6aU")),c=y(i("5GF7")),d=y(i("stBO")),h=y(i("HSFe")),f=y(i("R4hA")),p=y(i("CcZ3")),g=y(i("5RPx")),m=y(i("SNFf")),v=y(i("TXOG"));function y(e){return e&&e.__esModule?e:{default:e}}var _={"assets/_uploaded_item":n.default,"backer_report/_index":r.default,"backer_report/_row":a.default,"backings/_row":s.default,"backings/_table":o.default,"discover/_location_li":l.default,"discover/_location_refresh_li":u.default,"discover/_location_options":c.default,"discover/_project_baseball_card_li":d.default,"discover/_search_location_li":h.default,"discover/_search_location_refresh_li":f.default,"message_threads/_show":p.default,"messages/_show":g.default,"projects/_baseball_card_grid":m.default,"projects/_baseball_card_tall":v.default};t.default=_},rXeC:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,r=i("l/Rs"),a=(n=r)&&n.__esModule?n:{default:n};i("Vh6Q"),i("CCL3"),i("v4vi"),i("A/M2"),i("IhN0"),i("RIos"),i("UBnO"),i("+V2Z"),i("FPSz"),i("CuRd"),i("HW66"),i("BQ76"),i("kUTX"),i("SzcX"),i("vf3z"),i("k7Hi"),i("iUX3"),i("6TZa"),i("l8Wg"),i("E7OR"),i("Y0+b"),i("ybIR"),i("RORv"),i("h1HY"),i("sWK4"),i("0JET"),i("DXZ8"),i("c1YT"),i("LOOJ"),i("6CtT"),i("Tqsz"),i("oAbu"),i("oTWu"),i("zx33"),i("lRBY"),i("mZAT"),i("98MR"),i("thKT"),i("M99n"),i("p44K"),i("h8C7"),i("GCDY"),i("iptH"),i("91We"),i("MfwZ"),i("7HQH"),i("EZtX"),i("mvPF"),i("45vE"),i("grXb"),i("5Sqs"),i("LNuh"),i("jN36"),i("jAPW"),i("orei");var s=a.default;t.default=s},s94J:function(e,t,i){var n=i("l/Rs");i("l/Rs");!function(e){e.jGrowl=function(t,i){0===e("#jGrowl").length&&e('<div id="jGrowl"></div>').addClass(i&&i.position?i.position:e.jGrowl.defaults.position).appendTo(i&&i.appendTo?i.appendTo:e.jGrowl.defaults.appendTo),e("#jGrowl").jGrowl(t,i)},e.fn.jGrowl=function(t,i){if(void 0===i&&e.isPlainObject(t)&&(t=(i=t).message),e.isFunction(this.each)){var n=arguments;return this.each(function(){void 0===e(this).data("jGrowl.instance")&&(e(this).data("jGrowl.instance",e.extend(new e.fn.jGrowl,{notifications:[],element:null,interval:null})),e(this).data("jGrowl.instance").startup(this)),e.isFunction(e(this).data("jGrowl.instance")[t])?e(this).data("jGrowl.instance")[t].apply(e(this).data("jGrowl.instance"),e.makeArray(n).slice(1)):e(this).data("jGrowl.instance").create(t,i)})}},e.extend(e.fn.jGrowl.prototype,{defaults:{pool:0,header:"",group:"",sticky:!1,position:"top-right",appendTo:"body",glue:"after",theme:"default",themeState:"highlight",corners:"10px",check:250,life:3e3,closeDuration:"normal",openDuration:"normal",easing:"swing",closer:!0,closeTemplate:"&times;",closerTemplate:"<div>[ close all ]</div>",log:function(){},beforeOpen:function(){},afterOpen:function(){},open:function(){},beforeClose:function(){},close:function(){},click:function(){},animateOpen:{opacity:"show"},animateClose:{opacity:"hide"}},notifications:[],element:null,interval:null,create:function(t,i){var n=e.extend({},this.defaults,i);void 0!==n.speed&&(n.openDuration=n.speed,n.closeDuration=n.speed),this.notifications.push({message:t,options:n}),n.log.apply(this.element,[this.element,t,n])},render:function(t){var i=this,n=t.message,r=t.options;r.themeState=""===r.themeState?"":"ui-state-"+r.themeState;var a=e("<div/>").addClass("jGrowl-notification alert "+r.themeState+" ui-corner-all"+(void 0!==r.group&&""!==r.group?" "+r.group:"")).append(e("<button/>").addClass("jGrowl-close").html(r.closeTemplate)).append(e("<div/>").addClass("jGrowl-header").html(r.header)).append(e("<div/>").addClass("jGrowl-message").html(n)).data("jGrowl",r).addClass(r.theme).children(".jGrowl-close").bind("click.jGrowl",function(){return e(this).parent().trigger("jGrowl.beforeClose"),!1}).parent();e(a).bind("mouseover.jGrowl",function(){e(".jGrowl-notification",i.element).data("jGrowl.pause",!0)}).bind("mouseout.jGrowl",function(){e(".jGrowl-notification",i.element).data("jGrowl.pause",!1)}).bind("jGrowl.beforeOpen",function(){!1!==r.beforeOpen.apply(a,[a,n,r,i.element])&&e(this).trigger("jGrowl.open")}).bind("jGrowl.open",function(){!1!==r.open.apply(a,[a,n,r,i.element])&&("after"==r.glue?e(".jGrowl-notification:last",i.element).after(a):e(".jGrowl-notification:first",i.element).before(a),e(this).animate(r.animateOpen,r.openDuration,r.easing,function(){!1===e.support.opacity&&this.style.removeAttribute("filter"),null!==e(this).data("jGrowl")&&void 0!==e(this).data("jGrowl")&&(e(this).data("jGrowl").created=new Date),e(this).trigger("jGrowl.afterOpen")}))}).bind("jGrowl.afterOpen",function(){r.afterOpen.apply(a,[a,n,r,i.element])}).bind("click",function(){r.click.apply(a,[a,n,r,i.element])}).bind("jGrowl.beforeClose",function(){!1!==r.beforeClose.apply(a,[a,n,r,i.element])&&e(this).trigger("jGrowl.close")}).bind("jGrowl.close",function(){e(this).data("jGrowl.pause",!0),e(this).animate(r.animateClose,r.closeDuration,r.easing,function(){e.isFunction(r.close)?!1!==r.close.apply(a,[a,n,r,i.element])&&e(this).remove():e(this).remove()})}).trigger("jGrowl.beforeOpen"),""!==r.corners&&void 0!==e.fn.corner&&e(a).corner(r.corners),e(".jGrowl-notification:parent",i.element).length>1&&0===e(".jGrowl-closer",i.element).length&&!1!==this.defaults.closer&&e(this.defaults.closerTemplate).addClass("jGrowl-closer "+this.defaults.themeState+" ui-corner-all").addClass(this.defaults.theme).appendTo(i.element).animate(this.defaults.animateOpen,this.defaults.speed,this.defaults.easing).bind("click.jGrowl",function(){e(this).siblings().trigger("jGrowl.beforeClose"),e.isFunction(i.defaults.closer)&&i.defaults.closer.apply(e(this).parent()[0],[e(this).parent()[0]])})},update:function(){e(this.element).find(".jGrowl-notification:parent").each(function(){void 0!==e(this).data("jGrowl")&&void 0!==e(this).data("jGrowl").created&&e(this).data("jGrowl").created.getTime()+parseInt(e(this).data("jGrowl").life,10)<(new Date).getTime()&&!0!==e(this).data("jGrowl").sticky&&(void 0===e(this).data("jGrowl.pause")||!0!==e(this).data("jGrowl.pause"))&&e(this).trigger("jGrowl.beforeClose")}),this.notifications.length>0&&(0===this.defaults.pool||e(this.element).find(".jGrowl-notification:parent").length<this.defaults.pool)&&this.render(this.notifications.shift()),e(this.element).find(".jGrowl-notification:parent").length<2&&e(this.element).find(".jGrowl-closer").animate(this.defaults.animateClose,this.defaults.speed,this.defaults.easing,function(){e(this).remove()})},startup:function(t){this.element=e(t).addClass("jGrowl").append('<div class="jGrowl-notification"></div>'),this.interval=setInterval(function(){var i=e(t).data("jGrowl.instance");void 0!==i&&i.update()},parseInt(this.defaults.check,10))},shutdown:function(){e(this.element).removeClass("jGrowl").find(".jGrowl-notification").trigger("jGrowl.close").parent().empty(),clearInterval(this.interval)},close:function(){e(this.element).find(".jGrowl-notification").each(function(){e(this).trigger("jGrowl.beforeClose")})}}),e.jGrowl.defaults=e.fn.jGrowl.prototype.defaults}(n)},sWK4:function(e,t,i){"use strict";var n=o(i("DkOX")),r=o(i("I1z3")),a=o(i("wmCY")),s=i("4RZc");function o(e){return e&&e.__esModule?e:{default:e}}var l=i("l/Rs");i("l/Rs");!function(e){function t(t,i){this.$elem=t,this.$close_a=t.find("a.modal_dialog_close");var n=t.children(),r=n.children(),a=r.children(),s=t.add(n).add(r).add(a).add(this.$close_a);this.options=e.extend({close_link:s,scroll_margin:20,ignore_parent:!1,prevent_close:!1},i),this.prevent_close=this.options.prevent_close,this.prevent_close&&this.$close_a.hide(),this.options.ignore_parent||this._bind_parent_modal(),this._remember_original_css(),this._attach()}e.fn.modal_dialog=function(i){return i=i||{},e(this).each(function(){var n=e(this).data("modal_dialog");n||(n=new t(e(this),i),e(this).data("modal_dialog",n)),n.open()})};var i={};e.create_modal_dialog=function(i,n,r){r=r||{},i.length&&(i="<h4>"+i+"</h4>");var a,s=e('<div class="modal_dialog '+(void 0!==r.theme?r.theme:"dark")+(void 0!==r.class_name?" "+r.class_name:"")+'"'+(void 0!==r.id?' id="'+r.id+'" ':" ")+'style="display: none;"><div class="modal_dialog_outer"><div class="modal_dialog_sizer"><div class="modal_dialog_inner"><div class="modal_dialog_content"><div class="modal_dialog_head">'+i+'<a class="modal_dialog_close" href="#"><span class="ss-icon ss-delete"></span></a></div><div class="modal_dialog_body">'+n+'</div></div></div><span class="modal_dialog_ie_hack"></span></div></div></div>');return e("body").append(s),a=new t(s,r),s.data("modal_dialog",a),s},e.create_login_modal=function(t,i){(0,s.track)("Application Login or Signup",{context:"Login",type:"modal",intent:i});var n=e.create_modal_dialog("",t);n.data("modal_dialog").open(),"undefined"!=typeof FB&&FB.XFBML.parse(n.find(".modal_dialog_body")[0])},e.open_remote_modal_dialog=function(t,r){var a=e(".modal_dialog:visible");if(!a.data("modal_dialog")||a.data("modal_dialog").remote_url!==t){var s=function(t,r){var a,s=e([]);return e.each(i,function(e){(0,n.default)(t,e,{include_query:!0})&&(a=this)}),a||((s=e.create_modal_dialog(r.title||"","spinner",r)).addClass("spinning"),(a=s.data("modal_dialog")).remote_url=t,a.remote_xhr=e.ajax({url:t,type:"get",dataType:r.dataType,beforeSend:r.beforeSend,success:function(i){var n=e(i);r.remote_modal_dialog_contents_loaded&&r.remote_modal_dialog_contents_loaded.apply(this,[n,r,t]),s.find(".modal_dialog_body").html(n),s.removeClass("spinning"),s.trigger("size_change"),s.trigger("modal_dialog:remote_dialog_loaded")},error:function(){s.trigger("modal_dialog:errored",arguments),s.remove(),delete i[t]}}),r.do_not_cache||(i[t]=a)),a}(t,r=r||{});return s.open(),s}},e.extend(t.prototype,{_attach:function(){if(!this._attached){var t=this,i=e(this.options.close_link);this._attached=!0,this.overflow_scroll="scroll"===this.$elem.css("overflow"),this.$elem.on("close.modal_dialog",function(){t.close()}),this.$elem.on("size_change.modal_dialog",function(){t._on_size_changed()}),this.$elem.on("prevent_close.modal_dialog",function(){t._set_prevent_close(!0)}),this.$elem.on("allow_close.modal_dialog",function(){t._set_prevent_close(!1)}),e(window).on("resize.modal_dialog",function(){t._on_size_changed()}),i.on("click.modal_dialog",function(e){-1!==i.index(e.target)&&(t.close(e),e.preventDefault())}),this.$elem.keydown(function(e){27===e.keyCode&&(t.close(e),e.preventDefault())})}},_detach:function(){this._attached=!1,e(this.options.close_link).off("click.modal_dialog"),this.$elem.off("size_change.modal_dialog"),e(window).off("resize.modal_dialog")},_bind_parent_modal:function(){this.$parent_modal=e([]),this.$elem.on("before_close.modal_dialog",function(){var t=e(this).data("modal_dialog").$parent_modal;t.show(),t=e([])})},_on_size_changed:function(e){var t=this.$elem.find("div.modal_dialog_inner");!this.overflow_scroll&&t.height()>this._get_viewport_height()?this._resize_to_position_absolute(e):this._resize_to_position_fixed()},_resize_to_position_fixed:function(){this._apply_original_css()},_resize_to_position_absolute:function(t){var i=e(document).height(),n=document.documentElement&&document.documentElement.scrollTop||e("body")[0].scrollTop+e("html")[0].scrollTop,r=this.$elem.find("div.modal_dialog_inner"),a=r.height(),s=this.options.scroll_margin,o=n+a+2*s,l=(o>i?o:i)-n-a-2*s,u="absolute"===this.$elem.css("position");this.$elem.css("position","absolute"),this.$elem.css("top","0"),this.$elem.css("height",i),u&&!t||(r.css("margin-top",n+s),r.css("margin-bottom",l))},_remember_original_css:function(){this._elem_original_css={},this._inner_original_css={};var t=this.$elem.find("div.modal_dialog_inner"),i=["position","top"],n=["margin-top","margin-bottom"],r=this;e.each(i,function(e){var t=i[e];r._elem_original_css[t]=r.$elem.css(t)}),e.each(n,function(e){var i=n[e];r._inner_original_css[i]=t.css(i)})},_get_viewport_height:function(){return r.default.msie?window.document.documentElement.clientHeight:window.innerHeight},_apply_original_css:function(){var e,t,i=this.$elem.find("div.modal_dialog_inner");for(e in this._elem_original_css)this._elem_original_css.hasOwnProperty(e)&&(t=this._elem_original_css[e],this.$elem.css(e,t));for(e in this._inner_original_css)this._inner_original_css.hasOwnProperty(e)&&(t=this._inner_original_css[e],i.css(e,t));this.$elem.css("height","100%")},_set_prevent_close:function(e){this.prevent_close=e,e?this.$close_a.hide():this.$close_a.show()},open:function(){var t=this.$elem.parents("body");t.length&&t.append(this.$elem),this.options.ignore_parent||(this.$parent_modal=e(".modal_dialog:visible"),this.$parent_modal.hide()),this.$elem.show(),this._on_size_changed(!0),this.overflow_scroll&&e("html").css("overflow","hidden"),this.$elem.trigger("modal_dialog:opened",[this]),this._attach()},close:function(t){this.prevent_close||(this.$elem.trigger("before_close.modal_dialog",[t]),t&&t.isDefaultPrevented()||(this._detach(),this.options.do_not_cache?this.$elem.remove():this.$elem.hide(),this.overflow_scroll&&e("html").css("overflow","scroll"),this.$elem.trigger("closed.modal_dialog",[t])))}}),e.modal_confirm=function(t,i){var n,r,s,o={message:a.default.t("library.modal_dialog.Do_you_really_want_to_do_this"),confirm_text:a.default.t("library.modal_dialog.Confirm"),cancel_text:a.default.t("library.modal_dialog.Cancel"),title:a.default.t("library.modal_dialog.Are_you_sure")};n='<div style="max-width:600px;">'+(i=e.extend({},o,i)).message+'<p class="clearfix"><a class="confirm btn btn--blue left" href="#">'+i.confirm_text+'</a><a class="cancel button-space left ml1 lh40 grey-dark" href="#">'+i.cancel_text+"</a></p></div>",r=e.create_modal_dialog(i.title,n),s=r.data("modal_dialog"),r.find(".cancel").click(function(e){e.preventDefault(),s.close()}),r.find(".confirm").click(function(e){e.preventDefault(),t.call(r),s.close()}),s.open()}}(l)},sZX6:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.json=JSON.stringify(e),e}},stBO:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,a.default)(e)};var n,r=i("TXOG"),a=(n=r)&&n.__esModule?n:{default:n}},thKT:function(e,t,i){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};i("l/Rs");!function(e){function t(t,i){this.$field=t,this.options=e.extend({on_invalid:null,format:"%H:%M %z",am:"am",pm:"pm"},i),this._value=this._current_time_from_field(),this._attach()}e.fn.time_field=function(i){return e(this).each(function(){new t(e(this),i)})},e.extend(t.prototype,{_attach:function(){var e=this;e.$field.bind("blur",function(){e._handle_edit()}),this.$field.bind("time_field:set_time",function(t,i){e.set_time(i)})},_s_to_time:function(e){if("object"===n(Date.Parsing)){var t=Date.parse(e);return t?t.toString("HH:mm"):this.options.on_invalid}var i,r=e.match(/^\s*(\d\d?)(:(\d\d))?\s*([ap]m?)?\s*$/i),a=!r;if(!a){var s=+r[1]%12,o=+r[3]||0,l=(r[4]||"").match(/p/i);r[4]||(l=+r[1]>=12),+r[1]>23&&(a=!0),+r[1]>12&&r[4]&&(a=!0),o>59&&(a=!0),+r[1]<1&&r[4]&&(a=!0);var u=""+(s+(l?12:0));1===u.length&&(u="0"+u);var c=""+o;1===c.length&&(c="0"+c),i=u+":"+c}return a?this.options.on_invalid:i},_time_to_s:function(t){if("object"===n(Date.Parsing)){var i=Date.parse(t);return i?i.toString("h:mm tt"):this.options.on_invalid}var r=t&&t.match(/(\d\d):(\d\d)/);if(r){var a=this.options.format,s=+r[1],o=+r[2],l=s>=12?this.options.pm:this.options.am,u=""+(s%12?s%12:12),c=""+o;return 1===c.length&&(c="0"+c),e([["%Hh",s],["%H",u],["%M",c],["%z",l]]).each(function(e,t){a=a.replace(t[0],t[1])}),a}return""},_current_time_from_field:function(){return this._s_to_time(this.$field.val())},_reset_field_value:function(){this._value!==this._current_time_from_field()&&this.$field.val(this._time_to_s(this._value))},set_time:function(e){e!==this._value&&(this._value=e,this.$field.trigger("time_field:time_changed",this._value)),this._reset_field_value()},_handle_edit:function(){var e=this._current_time_from_field();this.set_time(e)}})}(i("l/Rs"))},uVjx:function(e,t,i){i("l/Rs"),i("l/Rs");(function(e){var t,i=0,n=Array.prototype.slice;e.cleanData=(t=e.cleanData,function(i){var n,r,a;for(a=0;null!=(r=i[a]);a++)try{(n=e._data(r,"events"))&&n.remove&&e(r).triggerHandler("remove")}catch(e){}t(i)}),e.widget=function(t,i,n){var r,a,s,o,l={},u=t.split(".")[0];return t=t.split(".")[1],r=u+"-"+t,n||(n=i,i=e.Widget),e.expr[":"][r.toLowerCase()]=function(t){return!!e.data(t,r)},e[u]=e[u]||{},a=e[u][t],s=e[u][t]=function(e,t){if(!this._createWidget)return new s(e,t);arguments.length&&this._createWidget(e,t)},e.extend(s,a,{version:n.version,_proto:e.extend({},n),_childConstructors:[]}),(o=new i).options=e.widget.extend({},o.options),e.each(n,function(t,n){var r,a;e.isFunction(n)?l[t]=(r=function(){return i.prototype[t].apply(this,arguments)},a=function(e){return i.prototype[t].apply(this,e)},function(){var e,t=this._super,i=this._superApply;return this._super=r,this._superApply=a,e=n.apply(this,arguments),this._super=t,this._superApply=i,e}):l[t]=n}),s.prototype=e.widget.extend(o,{widgetEventPrefix:a&&o.widgetEventPrefix||t},l,{constructor:s,namespace:u,widgetName:t,widgetFullName:r}),a?(e.each(a._childConstructors,function(t,i){var n=i.prototype;e.widget(n.namespace+"."+n.widgetName,s,i._proto)}),delete a._childConstructors):i._childConstructors.push(s),e.widget.bridge(t,s),s},e.widget.extend=function(t){for(var i,r,a=n.call(arguments,1),s=0,o=a.length;s<o;s++)for(i in a[s])r=a[s][i],a[s].hasOwnProperty(i)&&void 0!==r&&(e.isPlainObject(r)?t[i]=e.isPlainObject(t[i])?e.widget.extend({},t[i],r):e.widget.extend({},r):t[i]=r);return t},e.widget.bridge=function(t,i){var r=i.prototype.widgetFullName||t;e.fn[t]=function(a){var s="string"==typeof a,o=n.call(arguments,1),l=this;return s?this.each(function(){var i,n=e.data(this,r);return"instance"===a?(l=n,!1):n?e.isFunction(n[a])&&"_"!==a.charAt(0)?(i=n[a].apply(n,o))!==n&&void 0!==i?(l=i&&i.jquery?l.pushStack(i.get()):i,!1):void 0:e.error("no such method '"+a+"' for "+t+" widget instance"):e.error("cannot call methods on "+t+" prior to initialization; attempted to call method '"+a+"'")}):(o.length&&(a=e.widget.extend.apply(null,[a].concat(o))),this.each(function(){var t=e.data(this,r);t?(t.option(a||{}),t._init&&t._init()):e.data(this,r,new i(a,this))})),l}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,n){n=e(n||this.defaultElement||this)[0],this.element=e(n),this.uuid=i++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=e(),this.hoverable=e(),this.focusable=e(),n!==this&&(e.data(n,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===n&&this.destroy()}}),this.document=e(n.style?n.ownerDocument:n.document||n),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(t,i){var n,r,a,s=t;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof t)if(s={},t=(n=t.split(".")).shift(),n.length){for(r=s[t]=e.widget.extend({},this.options[t]),a=0;a<n.length-1;a++)r[n[a]]=r[n[a]]||{},r=r[n[a]];if(t=n.pop(),1===arguments.length)return void 0===r[t]?null:r[t];r[t]=i}else{if(1===arguments.length)return void 0===this.options[t]?null:this.options[t];s[t]=i}return this._setOptions(s),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!t),t&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(t,i,n){var r,a=this;"boolean"!=typeof t&&(n=i,i=t,t=!1),n?(i=r=e(i),this.bindings=this.bindings.add(i)):(n=i,i=this.element,r=this.widget()),e.each(n,function(n,s){function o(){if(t||!0!==a.options.disabled&&!e(this).hasClass("ui-state-disabled"))return("string"==typeof s?a[s]:s).apply(a,arguments)}"string"!=typeof s&&(o.guid=s.guid=s.guid||o.guid||e.guid++);var l=n.match(/^([\w:-]*)\s*(.*)$/),u=l[1]+a.eventNamespace,c=l[2];c?r.delegate(c,u,o):i.bind(u,o)})},_off:function(t,i){i=(i||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.unbind(i).undelegate(i),this.bindings=e(this.bindings.not(t).get()),this.focusable=e(this.focusable.not(t).get()),this.hoverable=e(this.hoverable.not(t).get())},_delay:function(e,t){var i=this;return setTimeout(function(){return("string"==typeof e?i[e]:e).apply(i,arguments)},t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,i,n){var r,a,s=this.options[t];if(n=n||{},(i=e.Event(i)).type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),i.target=this.element[0],a=i.originalEvent)for(r in a)r in i||(i[r]=a[r]);return this.element.trigger(i,n),!(e.isFunction(s)&&!1===s.apply(this.element[0],[i].concat(n))||i.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,i){e.Widget.prototype["_"+t]=function(n,r,a){"string"==typeof r&&(r={effect:r});var s,o=r?!0===r||"number"==typeof r?i:r.effect||i:t;"number"==typeof(r=r||{})&&(r={duration:r}),s=!e.isEmptyObject(r),r.complete=a,r.delay&&n.delay(r.delay),s&&e.effects&&e.effects.effect[o]?n[t](r):o!==t&&n[o]?n[o](r.duration,r.easing,a):n.queue(function(i){e(this)[t](),a&&a.call(n[0]),i()})}});e.widget})(i("l/Rs"))},v4vi:function(e,t,i){var n=i("l/Rs");i("l/Rs");!function(e,t){var i=0,n=Array.prototype.slice,r=e.cleanData;e.cleanData=function(t){for(var i,n=0;null!=(i=t[n]);n++)try{e(i).triggerHandler("remove")}catch(e){}r(t)},e.widget=function(t,i,n){var r,a,s,o,l={},u=t.split(".")[0];t=t.split(".")[1],r=u+"-"+t,n||(n=i,i=e.Widget),e.expr[":"][r.toLowerCase()]=function(t){return!!e.data(t,r)},e[u]=e[u]||{},a=e[u][t],s=e[u][t]=function(e,t){if(!this._createWidget)return new s(e,t);arguments.length&&this._createWidget(e,t)},e.extend(s,a,{version:n.version,_proto:e.extend({},n),_childConstructors:[]}),(o=new i).options=e.widget.extend({},o.options),e.each(n,function(t,n){var r,a;e.isFunction(n)?l[t]=(r=function(){return i.prototype[t].apply(this,arguments)},a=function(e){return i.prototype[t].apply(this,e)},function(){var e,t=this._super,i=this._superApply;return this._super=r,this._superApply=a,e=n.apply(this,arguments),this._super=t,this._superApply=i,e}):l[t]=n}),s.prototype=e.widget.extend(o,{widgetEventPrefix:a?o.widgetEventPrefix:t},l,{constructor:s,namespace:u,widgetName:t,widgetFullName:r}),a?(e.each(a._childConstructors,function(t,i){var n=i.prototype;e.widget(n.namespace+"."+n.widgetName,s,i._proto)}),delete a._childConstructors):i._childConstructors.push(s),e.widget.bridge(t,s)},e.widget.extend=function(t){for(var i,r,a=n.call(arguments,1),s=0,o=a.length;s<o;s++)for(i in a[s])r=a[s][i],a[s].hasOwnProperty(i)&&void 0!==r&&(e.isPlainObject(r)?t[i]=e.isPlainObject(t[i])?e.widget.extend({},t[i],r):e.widget.extend({},r):t[i]=r);return t},e.widget.bridge=function(t,i){var r=i.prototype.widgetFullName||t;e.fn[t]=function(a){var s="string"==typeof a,o=n.call(arguments,1),l=this;return a=!s&&o.length?e.widget.extend.apply(null,[a].concat(o)):a,s?this.each(function(){var i,n=e.data(this,r);return n?e.isFunction(n[a])&&"_"!==a.charAt(0)?(i=n[a].apply(n,o))!==n&&void 0!==i?(l=i&&i.jquery?l.pushStack(i.get()):i,!1):void 0:e.error("no such method '"+a+"' for "+t+" widget instance"):e.error("cannot call methods on "+t+" prior to initialization; attempted to call method '"+a+"'")}):this.each(function(){var t=e.data(this,r);t?t.option(a||{})._init():e.data(this,r,new i(a,this))}),l}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,n){n=e(n||this.defaultElement||this)[0],this.element=e(n),this.uuid=i++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),n!==this&&(e.data(n,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===n&&this.destroy()}}),this.document=e(n.style?n.ownerDocument:n.document||n),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(t,i){var n,r,a,s=t;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof t)if(s={},t=(n=t.split(".")).shift(),n.length){for(r=s[t]=e.widget.extend({},this.options[t]),a=0;a<n.length-1;a++)r[n[a]]=r[n[a]]||{},r=r[n[a]];if(t=n.pop(),void 0===i)return void 0===r[t]?null:r[t];r[t]=i}else{if(void 0===i)return void 0===this.options[t]?null:this.options[t];s[t]=i}return this._setOptions(s),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(t,i,n){var r,a=this;"boolean"!=typeof t&&(n=i,i=t,t=!1),n?(i=r=e(i),this.bindings=this.bindings.add(i)):(n=i,i=this.element,r=this.widget()),e.each(n,function(n,s){function o(){if(t||!0!==a.options.disabled&&!e(this).hasClass("ui-state-disabled"))return("string"==typeof s?a[s]:s).apply(a,arguments)}"string"!=typeof s&&(o.guid=s.guid=s.guid||o.guid||e.guid++);var l=n.match(/^(\w+)\s*(.*)$/),u=l[1]+a.eventNamespace,c=l[2];c?r.delegate(c,u,o):i.bind(u,o)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){var i=this;return setTimeout(function(){return("string"==typeof e?i[e]:e).apply(i,arguments)},t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,i,n){var r,a,s=this.options[t];if(n=n||{},(i=e.Event(i)).type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),i.target=this.element[0],a=i.originalEvent)for(r in a)r in i||(i[r]=a[r]);return this.element.trigger(i,n),!(e.isFunction(s)&&!1===s.apply(this.element[0],[i].concat(n))||i.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,i){e.Widget.prototype["_"+t]=function(n,r,a){"string"==typeof r&&(r={effect:r});var s,o=r?!0===r||"number"==typeof r?i:r.effect||i:t;"number"==typeof(r=r||{})&&(r={duration:r}),s=!e.isEmptyObject(r),r.complete=a,r.delay&&n.delay(r.delay),s&&e.effects&&e.effects.effect[o]?n[t](r):o!==t&&n[o]?n[o](r.duration,r.easing,a):n.queue(function(i){e(this)[t](),a&&a.call(n[0]),i()})}})}(n)},vf3z:function(e,t,i){"use strict";var n=i("l/Rs");i("l/Rs");!function(e){var t=e("meta[name=csrf-token]").attr("content"),i=e("meta[name=csrf-param]").attr("content");e(document).on("click","a[data-method]",function(n){var r=e(this),a=r.prop("href"),s=r.data("method"),o=r.prop("target"),l=e('<form method="post" action="'+a+'"></form>'),u='<input name="_method" value="'+s+'" type="hidden" />';void 0!==i&&void 0!==t&&(u+='<input name="'+i+'" value="'+t+'" type="hidden" />'),o&&l.prop("target",o),l.hide().append(u).appendTo("body"),l[0].submit(),n.preventDefault()}),t&&e.ajaxPrefilter(function(e,i,n){e.crossDomain||n.setRequestHeader("X-CSRF-Token",t)})}(n)},wgDV:function(e,t,i){i("l/Rs"),i("l/Rs");!function(){var e={version:"0.9.0",name:"PluginDetect",addPlugin:function(t,i){t&&e.isString(t)&&i&&e.isFunc(i.getVersion)&&(t=t.replace(/\s/g,"").toLowerCase(),e.Plugins[t]=i,e.isDefined(i.getVersionDone)||(i.installed=null,i.version=null,i.version0=null,i.getVersionDone=null,i.pluginName=t))},uniqueName:function(){return e.name+"998"},openTag:"<",hasOwnPROP:{}.constructor.prototype.hasOwnProperty,hasOwn:function(t,i){var n;try{n=e.hasOwnPROP.call(t,i)}catch(e){}return!!n},rgx:{str:/string/i,num:/number/i,fun:/function/i,arr:/array/i},toString:{}.constructor.prototype.toString,isDefined:function(e){return void 0!==e},isArray:function(t){return e.rgx.arr.test(e.toString.call(t))},isString:function(t){return e.rgx.str.test(e.toString.call(t))},isNum:function(t){return e.rgx.num.test(e.toString.call(t))},isStrNum:function(t){return e.isString(t)&&/\d/.test(t)},isFunc:function(t){return e.rgx.fun.test(e.toString.call(t))},getNumRegx:/[\d][\d\.\_,\-]*/,splitNumRegx:/[\.\_,\-]/g,getNum:function(t,i){var n=e.isStrNum(t)?(e.isDefined(i)?new RegExp(i):e.getNumRegx).exec(t):null;return n?n[0]:null},compareNums:function(t,i,n){var r,a,s,o=parseInt;if(e.isStrNum(t)&&e.isStrNum(i)){if(e.isDefined(n)&&n.compareNums)return n.compareNums(t,i);for(r=t.split(e.splitNumRegx),a=i.split(e.splitNumRegx),s=0;s<Math.min(r.length,a.length);s++){if(o(r[s],10)>o(a[s],10))return 1;if(o(r[s],10)<o(a[s],10))return-1}}return 0},formatNum:function(t,i){var n,r;if(!e.isStrNum(t))return null;for(e.isNum(i)||(i=4),i--,r=t.replace(/\s/g,"").split(e.splitNumRegx).concat(["0","0","0","0"]),n=0;n<4;n++)/^(0+)(.+)$/.test(r[n])&&(r[n]=RegExp.$2),(n>i||!/\d/.test(r[n]))&&(r[n]="0");return r.slice(0,4).join(",")},pd:{getPROP:function(e,t,i){try{e&&(i=e[t])}catch(e){}return i},findNavPlugin:function(t){if(t.dbug)return t.dbug;var i=null;if(window.navigator){var n,r,a,s,o,l,u={Find:e.isString(t.find)?new RegExp(t.find,"i"):t.find,Find2:e.isString(t.find2)?new RegExp(t.find2,"i"):t.find2,Avoid:t.avoid?e.isString(t.avoid)?new RegExp(t.avoid,"i"):t.avoid:0,Num:t.num?/\d/:0},c=navigator.mimeTypes,d=navigator.plugins;if(t.mimes&&c)for(s=e.isArray(t.mimes)?[].concat(t.mimes):e.isString(t.mimes)?[t.mimes]:[],n=0;n<s.length;n++){r=0;try{e.isString(s[n])&&/[^\s]/.test(s[n])&&(r=c[s[n]].enabledPlugin)}catch(e){}if(r&&((a=this.findNavPlugin_(r,u)).obj&&(i=a.obj),i&&!e.dbug))return i}if(t.plugins&&d){for(o=e.isArray(t.plugins)?[].concat(t.plugins):e.isString(t.plugins)?[t.plugins]:[],n=0;n<o.length;n++){r=0;try{o[n]&&e.isString(o[n])&&(r=d[o[n]])}catch(e){}if(r&&((a=this.findNavPlugin_(r,u)).obj&&(i=a.obj),i&&!e.dbug))return i}if(l=d.length,e.isNum(l))for(n=0;n<l;n++){r=0;try{r=d[n]}catch(e){}if(r&&((a=this.findNavPlugin_(r,u)).obj&&(i=a.obj),i&&!e.dbug))return i}}}return i},findNavPlugin_:function(e,t){var i=e.description||"",n=e.name||"",r={};return(!t.Find.test(i)||t.Find2&&!t.Find2.test(n)||t.Num&&!t.Num.test(RegExp.leftContext+RegExp.rightContext))&&(!t.Find.test(n)||t.Find2&&!t.Find2.test(i)||t.Num&&!t.Num.test(RegExp.leftContext+RegExp.rightContext))||t.Avoid&&(t.Avoid.test(i)||t.Avoid.test(n))||(r.obj=e),r},getVersionDelimiter:",",findPlugin:function(t){var i,n={status:-3,plugin:0};return e.isString(t)?1==t.length?(this.getVersionDelimiter=t,n):(t=t.toLowerCase().replace(/\s/g,""),(i=e.Plugins[t])&&i.getVersion?(n.plugin=i,n.status=1,n):n):n}},getPluginFileVersion:function(t,i){var n,r,a,s,o=-1;if(!t)return i;if(t.version&&(n=e.getNum(t.version+"")),!n||!i)return i||n||null;for(r=e.formatNum(i).split(e.splitNumRegx),a=e.formatNum(n).split(e.splitNumRegx),s=0;s<r.length;s++){if(o>-1&&s>o&&"0"!=r[s])return i;if(a[s]!=r[s]&&(-1==o&&(o=s),"0"!=r[s]))return i}return n},AXO:function(){var e;try{e=new window.ActiveXObject}catch(e){}return e?null:window.ActiveXObject}(),getAXO:function(t){var i=null;try{i=new e.AXO(t)}catch(t){e.errObj=t}return i&&(e.browser.ActiveXEnabled=!0),i},browser:{detectPlatform:function(){var t,i=window.navigator&&navigator.platform||"";if(e.OS=100,i){var n=["Win",1,"Mac",2,"Linux",3,"FreeBSD",4,"iPhone",21.1,"iPod",21.2,"iPad",21.3,"Win.*CE",22.1,"Win.*Mobile",22.2,"Pocket\\s*PC",22.3,"",100];for(t=n.length-2;t>=0;t-=2)if(n[t]&&new RegExp(n[t],"i").test(i)){e.OS=n[t+1];break}}},detectIE:function(){var t,i,n,r,a=this,s=document,o=window.navigator&&navigator.userAgent||"";a.ActiveXFilteringEnabled=!1,a.ActiveXEnabled=!1;try{a.ActiveXFilteringEnabled=!!window.external.msActiveXFilteringEnabled()}catch(e){}for(n=["Msxml2.XMLHTTP","Msxml2.DOMDocument","Microsoft.XMLDOM","TDCCtl.TDCCtl","Shell.UIHelper","HtmlDlgSafeHelper.HtmlDlgSafeHelper","Scripting.Dictionary"].concat(r=["WMPlayer.OCX","ShockwaveFlash.ShockwaveFlash","AgControl.AgControl"]),t=0;t<n.length&&(!e.getAXO(n[t])||e.dbug);t++);if(a.ActiveXEnabled&&a.ActiveXFilteringEnabled)for(t=0;t<r.length;t++)if(e.getAXO(r[t])){a.ActiveXFilteringEnabled=!1;break}i=s.documentMode;try{s.documentMode=""}catch(e){}a.isIE=a.ActiveXEnabled,a.isIE=a.isIE||e.isNum(s.documentMode)||new Function("return/*@cc_on!@*/!1")();try{s.documentMode=i}catch(e){}a.verIE=null,a.isIE&&(a.verIE=(e.isNum(s.documentMode)&&s.documentMode>=7?s.documentMode:0)||(/^(?:.*?[^a-zA-Z])??(?:MSIE|rv\s*\:)\s*(\d+\.?\d*)/i.test(o)?parseFloat(RegExp.$1,10):7)),a.betterIE()},betterIE:function(){var t=this,i=document;if(t.verIEtrue=null,t.docModeIE=null,t.isIE){var n,r,a=i.createElement("div"),s=["{45EA75A0-A269-11D1-B5BF-0000F8051515}","{3AF36230-A269-11D1-B5BF-0000F8051515}","{89820200-ECBD-11CF-8B85-00AA005B4383}"];try{a.style.behavior="url(#default#clientcaps)"}catch(e){}for(r=0;r<s.length;r++){try{t.verIEtrue=a.getComponentVersion(s[r],"componentid").replace(/,/g,".")}catch(e){}if(t.verIEtrue&&!e.dbug)break}n=parseFloat(t.verIEtrue||"0",10),t.docModeIE=i.documentMode||(/back/i.test(i.compatMode||"")?5:n)||t.verIE,t.verIE=n||t.docModeIE}},detectNonIE:function(){var t=this,i=window.navigator?navigator:{},n=t.isIE?"":i.userAgent||"",r=i.vendor||"",a=i.product||"";t.isGecko=/Gecko/i.test(a)&&/Gecko\s*\/\s*\d/i.test(n),t.verGecko=t.isGecko?e.formatNum(/rv\s*\:\s*([\.\,\d]+)/i.test(n)?RegExp.$1:"0.9"):null,t.isOpera=/(OPR\s*\/|Opera\s*\/\s*\d.*\s*Version\s*\/|Opera\s*[\/]?)\s*(\d+[\.,\d]*)/i.test(n),t.verOpera=t.isOpera?e.formatNum(RegExp.$2):null,t.isChrome=!t.isOpera&&/(Chrome|CriOS)\s*\/\s*(\d[\d\.]*)/i.test(n),t.verChrome=t.isChrome?e.formatNum(RegExp.$2):null,t.isSafari=!t.isOpera&&!t.isChrome&&(/Apple/i.test(r)||!r)&&/Safari\s*\/\s*(\d[\d\.]*)/i.test(n),t.verSafari=t.isSafari&&/Version\s*\/\s*(\d[\d\.]*)/i.test(n)?e.formatNum(RegExp.$1):null},init:function(){var e=this;e.detectPlatform(),e.detectIE(),e.detectNonIE()}},init:{hasRun:0,library:function(){window[e.name]=e;var t=document;e.win.init(),e.head=t.getElementsByTagName("head")[0]||t.getElementsByTagName("body")[0]||t.body||null,e.browser.init(),this.hasRun=1}},ev:{addEvent:function(e,t,i){e&&t&&i&&(e.addEventListener?e.addEventListener(t,i,!1):e.attachEvent?e.attachEvent("on"+t,i):e["on"+t]=this.concatFn(i,e["on"+t]))},removeEvent:function(e,t,i){e&&t&&i&&(e.removeEventListener?e.removeEventListener(t,i,!1):e.detachEvent&&e.detachEvent("on"+t,i))},concatFn:function(e,t){return function(){e(),"function"==typeof t&&t()}},handler:function(e,t,i,n,r){return function(){e(t,i,n,r)}},handlerOnce:function(t,i,n,r){return function(){var a=e.uniqueName();t[a]||(t[a]=1,t(i,n,r))}},handlerWait:function(e,t,i,n,r){var a=this;return function(){a.setTimeout(a.handler(t,i,n,r),e)}},setTimeout:function(t,i){e.win&&e.win.unload||setTimeout(t,i)},fPush:function(t,i){e.isArray(i)&&(e.isFunc(t)||e.isArray(t)&&t.length>0&&e.isFunc(t[0]))&&i.push(t)},call0:function(t){var i=e.isArray(t)?t.length:-1;i>0&&e.isFunc(t[0])?t[0](e,i>1?t[1]:0,i>2?t[2]:0,i>3?t[3]:0):e.isFunc(t)&&t(e)},callArray0:function(t){var i;if(e.isArray(t))for(;t.length;)i=t[0],t.splice(0,1),e.win&&e.win.unload&&t!==e.win.unloadHndlrs||this.call0(i)},call:function(e){this.call0(e),this.ifDetectDoneCallHndlrs()},callArray:function(e){this.callArray0(e),this.ifDetectDoneCallHndlrs()},allDoneHndlrs:[],ifDetectDoneCallHndlrs:function(){var t,i,n=this;if(n.allDoneHndlrs.length&&(!e.win||e.win.loaded&&!e.win.loadPrvtHndlrs.length&&!e.win.loadPblcHndlrs.length)){if(e.Plugins)for(t in e.Plugins)if(e.hasOwn(e.Plugins,t)&&(i=e.Plugins[t])&&e.isFunc(i.getVersion)&&(3==i.OTF||i.DoneHndlrs&&i.DoneHndlrs.length||i.BIHndlrs&&i.BIHndlrs.length))return;n.callArray0(n.allDoneHndlrs)}}},getVersion:function(t,i,n){var r,a,s=e.pd.findPlugin(t);return s.status<0?null:(1!=(r=s.plugin).getVersionDone&&(r.getVersion(null,i,n),null===r.getVersionDone&&(r.getVersionDone=1)),a=(a=r.version||r.version0)?a.replace(e.splitNumRegx,e.pd.getVersionDelimiter):a)},hasMimeType:function(t){if(t&&window.navigator&&navigator.mimeTypes){var i,n,r,a,s=navigator.mimeTypes,o=e.isArray(t)?[].concat(t):e.isString(t)?[t]:[];for(a=o.length,r=0;r<a;r++){i=0;try{e.isString(o[r])&&/[^\s]/.test(o[r])&&(i=s[o[r]])}catch(e){}if((n=i?i.enabledPlugin:0)&&(n.name||n.description))return i}}return null},getInfo:function(t,i,n){var r,a=null,s=e.pd.findPlugin(t);return s.status<0?a:(r=s.plugin,e.isFunc(r.getInfo)&&(null===r.getVersionDone&&(e.getVersion?e.getVersion(t,i,n):e.isMinVersion(t,"0",i,n)),a=r.getInfo()),a)},onDetectionDone:function(t,i,n,r){var a,s=e.pd.findPlugin(t);return-3==s.status?-1:(a=s.plugin,e.isArray(a.DoneHndlrs)||(a.DoneHndlrs=[]),1!=a.getVersionDone&&(e.getVersion?e.getVersion(t,n,r):e.isMinVersion(t,"0",n,r)),-.5!=a.installed&&.5!=a.installed?(e.ev.call(i),1):(e.ev.fPush(i,a.DoneHndlrs),0))},codebase:{isDisabled:function(){return e.browser.ActiveXEnabled&&e.isDefined(e.pd.getPROP(document.createElement("object"),"object"))?0:1},isMin:function(e,t){return 0},search:function(t){var i,n=this,r=(t.$$,0);if(i=t.searchHasRun||n.isDisabled()?1:0,t.searchHasRun=1,i)return t.version||null;n.init(t);var a,s,o,l,u,c=t.DIGITMAX,d=99999999,h=[0,0,0,0],f=[0,0,0,0],p=function(e,i){var a,s=[].concat(h);return s[e]=i,(a=n.isActiveXObject(t,s.join(",")))?(r=1,h[e]=i):f[e]=i,a};for(a=0;a<f.length;a++){for(h[a]=Math.floor(t.DIGITMIN[a])||0,l=h.join(","),u=h.slice(0,a).concat([d,d,d,d]).slice(0,h.length).join(","),o=0;o<c.length;o++)e.isArray(c[o])&&(c[o].push(0),c[o][a]>f[a]&&e.compareNums(u,t.Lower[o])>=0&&e.compareNums(l,t.Upper[o])<0&&(f[a]=Math.floor(c[o][a])));for(s=0;s<30;s++){if(f[a]-h[a]<=16){for(o=f[a];o>=h[a]+(a?1:0)&&!p(a,o);o--);break}p(a,Math.round((f[a]+h[a])/2))}if(!r)break;f[a]=h[a]}return r&&(t.version=n.convert(t,h.join(",")).v),t.version||null},emptyNode:function(e){try{e.innerHTML=""}catch(e){}},HTML:[],len:0,onUnload:function(e,t){var i,n,r=t.HTML;for(i=0;i<r.length;i++)(n=r[i])&&(r[i]=0,t.emptyNode(n.span()),n.span=0,n.spanObj=0,n=0);t.iframe=0},init:function(t){var i,n,r=this;if(!r.iframe){var a,s=e.DOM;a=s.iframe.insert(0,"$.codebase{ }"),r.iframe=a,s.iframe.write(a," "),s.iframe.close(a)}if(!t.init)for(t.init=1,e.ev.fPush([r.onUnload,r],e.win.unloadHndlrs),t.tagA='<object width="1" height="1" style="display:none;" codebase="#version=',n=t.classID||t.$$.classID||"",t.tagB='" '+(/clsid\s*:/i.test(n)?'classid="':'type="')+n+'">'+e.openTag+"/object>",i=0;i<t.Lower.length;i++)t.Lower[i]=e.formatNum(t.Lower[i]),t.Upper[i]=e.formatNum(t.Upper[i])},isActiveXObject:function(t,i){var n=this,r=0,a=(t.$$,(e.DOM.iframe.doc(n.iframe)||document).createElement("span"));return t.min&&e.compareNums(i,t.min)<=0?1:t.max&&e.compareNums(i,t.max)>=0?0:(a.innerHTML=t.tagA+i+t.tagB,e.pd.getPROP(a.firstChild,"object")&&(r=1),r?(t.min=i,n.HTML.push({spanObj:a,span:n.span})):(t.max=i,a.innerHTML=""),r)},span:function(){return this.spanObj},convert_:function(t,i,n,r){var a=t.convert[i];return a?e.isFunc(a)?e.formatNum(a(n.split(e.splitNumRegx),r).join(",")):n:a},convert:function(t,i,n){var r,a,s,o=this;if(a={v:i=e.formatNum(i),x:-1},i)for(r=0;r<t.Lower.length;r++)if((s=o.convert_(t,r,t.Lower[r]))&&e.compareNums(i,n?s:t.Lower[r])>=0&&(!r||e.compareNums(i,n?o.convert_(t,r,t.Upper[r]):t.Upper[r])<0)){a.v=o.convert_(t,r,i,n),a.x=r;break}return a},z:0},win:{disable:function(){this.cancel=!0},cancel:!1,loaded:!1,unload:!1,hasRun:0,init:function(){var t=this;t.hasRun||(t.hasRun=1,/complete/i.test(document.readyState||"")?t.loaded=!0:e.ev.addEvent(window,"load",t.onLoad),e.ev.addEvent(window,"unload",t.onUnload))},loadPrvtHndlrs:[],loadPblcHndlrs:[],unloadHndlrs:[],onUnload:function(){var t=e.win;t.unload||(t.unload=!0,e.ev.removeEvent(window,"load",t.onLoad),e.ev.removeEvent(window,"unload",t.onUnload),e.ev.callArray(t.unloadHndlrs))},onLoad:function(){var t=e.win;t.loaded||t.unload||t.cancel||(t.loaded=!0,e.ev.callArray(t.loadPrvtHndlrs),e.ev.callArray(t.loadPblcHndlrs))}},DOM:{isEnabled:{objectTag:function(){var t=e.browser,i=t.isIE?0:1;return t.ActiveXEnabled&&(i=1),!!i},objectTagUsingActiveX:function(){var t=0;return e.browser.ActiveXEnabled&&(t=1),!!t},objectProperty:function(t){return t&&t.tagName&&e.browser.isIE?/applet/i.test(t.tagName)?!this.objectTag()||e.isDefined(e.pd.getPROP(document.createElement("object"),"object"))?1:0:e.isDefined(e.pd.getPROP(document.createElement(t.tagName),"object"))?1:0:0}},HTML:[],div:null,divID:"plugindetect",divWidth:500,getDiv:function(){return this.div||document.getElementById(this.divID)||null},initDiv:function(){var t,i=this;i.div||((t=i.getDiv())?i.div=t:(i.div=document.createElement("div"),i.div.id=i.divID,i.setStyle(i.div,i.getStyle.div()),i.insertDivInBody(i.div)),e.ev.fPush([i.onUnload,i],e.win.unloadHndlrs)),t=0},pluginSize:1,iframeWidth:40,iframeHeight:10,altHTML:"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;",emptyNode:function(t){if(t&&/div|span/i.test(t.tagName||"")){e.browser.isIE&&this.setStyle(t,["display","none"]);try{t.innerHTML=""}catch(e){}}},removeNode:function(e){try{e&&e.parentNode&&e.parentNode.removeChild(e)}catch(e){}},onUnload:function(e,t){var i,n,r,a=t.HTML,s=a.length;if(s)for(n=s-1;n>=0;n--)(r=a[n])&&(a[n]=0,t.emptyNode(r.span()),t.removeNode(r.span()),r.span=0,r.spanObj=0,r.doc=0,r.objectProperty=0);i=t.getDiv(),t.emptyNode(i),t.removeNode(i),r=0,i=0,t.div=0},span:function(){var e=this;return e.spanObj||(e.spanObj=e.doc.getElementById(e.spanId)),e.spanObj||null},width:function(){var t,i,n=this.span();return t=n&&e.isNum(n.scrollWidth)?n.scrollWidth:-1,i=n&&e.isNum(n.offsetWidth)?n.offsetWidth:-1,n=0,i>0?i:t>0?t:Math.max(i,t)},obj:function(){var e=this.span();return e&&e.firstChild||null},readyState:function(){return e.browser.isIE&&e.isDefined(e.pd.getPROP(this.span(),"readyState"))?e.pd.getPROP(this.obj(),"readyState"):e.UNDEFINED},objectProperty:function(){var t,i=this;return i.DOM.isEnabled.objectProperty(i)&&(t=e.pd.getPROP(i.obj(),"object")),t},onLoadHdlr:function(e,t){t.loaded=1},getTagStatus:function(t,i,n,r,a,s,o){if(!t||!t.span())return-2;var l=t.width(),u=t.obj()?1:0,c=t.readyState(),d=t.objectProperty();if(d)return 1.5;var h=/clsid\s*\:/i,f=n&&h.test(n.outerHTML||"")?n:r&&h.test(r.outerHTML||"")?r:0,p=n&&!h.test(n.outerHTML||"")?n:r&&!h.test(r.outerHTML||"")?r:0,g=t&&h.test(t.outerHTML||"")?f:p;if(!(i&&i.span()&&g&&g.span()))return-2;var m=g.width(),v=i.width(),y=g.readyState();return l<0||m<0||v<=this.pluginSize?0:(o&&!t.pi&&e.isDefined(d)&&e.browser.isIE&&t.tagName==g.tagName&&t.time<=g.time&&l===m&&0===c&&0!==y&&(t.pi=1),m<v||!t.loaded||!i.loaded||!g.loaded?t.pi?-.1:0:l!=v&&u?l!=this.pluginSize||!u||e.isNum(c)&&4!==c?t.pi?-.5:-1:1:t.pi?-.5:-1)},setStyle:function(e,t){var i,n=e.style;if(n&&t)for(i=0;i<t.length;i+=2)try{n[t[i]]=t[i+1]}catch(e){}e=0,n=0},getStyle:{iframe:function(){return this.span()},span:function(t){var i=e.DOM;return t?this.plugin():[].concat(this.Default).concat(["display","inline","fontSize",i.pluginSize+3+"px","lineHeight",i.pluginSize+3+"px"])},div:function(){var t=e.DOM;return[].concat(this.Default).concat(["display","block","width",t.divWidth+"px","height",t.pluginSize+3+"px","fontSize",t.pluginSize+3+"px","lineHeight",t.pluginSize+3+"px","position","absolute","right","9999px","top","-9999px"])},plugin:function(t){var i=e.DOM;return"background-color:transparent;background-image:none;vertical-align:baseline;outline-style:none;border-style:none;padding:0px;margin:0px;visibility:"+(t?"hidden;":"visible;")+"display:inline;font-size:"+(i.pluginSize+3)+"px;line-height:"+(i.pluginSize+3)+"px;"},Default:["backgroundColor","transparent","backgroundImage","none","verticalAlign","baseline","outlineStyle","none","borderStyle","none","padding","0px","margin","0px","visibility","visible"]},insertDivInBody:function(t,i){var n="pd33993399",r=null,a=i?window.top.document:window.document,s=a.getElementsByTagName("body")[0]||a.body;if(!s)try{a.write('<div id="'+n+'">.'+e.openTag+"/div>"),r=a.getElementById(n)}catch(e){}(s=a.getElementsByTagName("body")[0]||a.body)&&(s.insertBefore(t,s.firstChild),r&&s.removeChild(r)),t=0},iframe:{onLoad:function(t,i){e.ev.callArray(t)},insert:function(t,i){var n,r=this,a=e.DOM,s=document.createElement("iframe");a.setStyle(s,a.getStyle.iframe()),s.width=a.iframeWidth,s.height=a.iframeHeight,a.initDiv(),a.getDiv().appendChild(s);try{r.doc(s).open()}catch(e){}return s[e.uniqueName()]=[],n=e.ev.handlerOnce(e.isNum(t)&&t>0?e.ev.handlerWait(t,r.onLoad,s[e.uniqueName()],i):e.ev.handler(r.onLoad,s[e.uniqueName()],i)),e.ev.addEvent(s,"load",n),s.onload||(s.onload=n),e.ev.addEvent(r.win(s),"load",n),s},addHandler:function(t,i){t&&e.ev.fPush(i,t[e.uniqueName()])},close:function(e){try{this.doc(e).close()}catch(e){}},write:function(e,t){try{this.doc(e).write(t)}catch(e){}},win:function(e){try{return e.contentWindow}catch(e){}return null},doc:function(e){var t;try{t=e.contentWindow.document}catch(e){}try{t||(t=e.contentDocument)}catch(e){}return t||null}},insert:function(t,i,n,r,a,s,o){var l,u,c,d,h,f=this;if(o||(f.initDiv(),o=f.getDiv()),o&&(/div/i.test(o.tagName)&&(d=o.ownerDocument),/iframe/i.test(o.tagName)&&(d=f.iframe.doc(o))),d&&d.createElement||(d=document),e.isDefined(r)||(r=""),e.isString(t)&&/[^\s]/.test(t)){t=t.toLowerCase().replace(/\s/g,""),l=e.openTag+t+" ",l+='style="'+f.getStyle.plugin(s)+'" ';var p=1,g=1;for(h=0;h<i.length;h+=2)/[^\s]/.test(i[h+1])&&(l+=i[h]+'="'+i[h+1]+'" '),/width/i.test(i[h])&&(p=0),/height/i.test(i[h])&&(g=0);if(l+=(p?'width="'+f.pluginSize+'" ':"")+(g?'height="'+f.pluginSize+'" ':""),"embed"==t||"img"==t)l+=" />";else{for(l+=">",h=0;h<n.length;h+=2)/[^\s]/.test(n[h+1])&&(l+=e.openTag+'param name="'+n[h]+'" value="'+n[h+1]+'" />');l+=r+e.openTag+"/"+t+">"}}else t="",l=r;if(u={spanId:"",spanObj:null,span:f.span,loaded:null,tagName:t,outerHTML:l,DOM:f,time:(new Date).getTime(),width:f.width,obj:f.obj,readyState:f.readyState,objectProperty:f.objectProperty,doc:d},o&&o.parentNode)if(/iframe/i.test(o.tagName))f.iframe.addHandler(o,[f.onLoadHdlr,u]),u.loaded=0,u.spanId=e.name+"Span"+f.HTML.length,c='<span id="'+u.spanId+'" style="'+f.getStyle.span(1)+'">'+l+"</span>",f.iframe.write(o,c);else if(/div/i.test(o.tagName)){c=d.createElement("span"),f.setStyle(c,f.getStyle.span()),o.appendChild(c);try{c.innerHTML=l}catch(e){}u.spanObj=c}return c=0,o=0,f.HTML.push(u),u}},file:{any:"fileStorageAny999",valid:"fileStorageValid999",save:function(t,i,n){var r,a=this;t&&e.isDefined(n)&&(t[a.any]||(t[a.any]=[]),t[a.valid]||(t[a.valid]=[]),t[a.any].push(n),(r=a.split(i,n))&&t[a.valid].push(r))},getValidLength:function(e){return e&&e[this.valid]?e[this.valid].length:0},getAnyLength:function(e){return e&&e[this.any]?e[this.any].length:0},getValid:function(e,t){var i=this;return e&&e[i.valid]?i.get(e[i.valid],t):null},getAny:function(e,t){var i=this;return e&&e[i.any]?i.get(e[i.any],t):null},get:function(t,i){var n=t.length-1,r=e.isNum(i)?i:n;return r<0||r>n?null:t[r]},split:function(t,i){var n,r,a=null;return t=t?t.replace(".","\\."):"",r=new RegExp("^(.*[^\\/])("+t+"\\s*)$"),e.isString(i)&&r.test(i)&&(a={name:(n=RegExp.$1.split("/"))[n.length-1],ext:RegExp.$2,full:i},n[n.length-1]="",a.path=n.join("/")),a}},Plugins:{}};e.init.library();var t={setPluginStatus:function(t,i,n){var r=this;r.version=i?e.formatNum(i,3):null,r.installed=r.version?1:n?n>0?.7:-.1:t?0:-1,r.getVersionDone=.7==r.installed||-.1==r.installed||0===r.nav.done?0:1},getVersion:function(t,i){var n,r=this,a=null,s=0;i=e.browser.isIE?0:i,s&&!e.dbug||!r.nav.query(i).installed||(s=1),a&&!e.dbug||!r.nav.query(i).version||(a=r.nav.version),(n=a?0:r.codebase.isMin(t))?r.setPluginStatus(0,0,n):(a&&!e.dbug||(n=r.codebase.search())&&(s=1,a=n),s&&!e.dbug||!r.axo.query().installed||(s=1),a&&!e.dbug||!r.axo.query().version||(a=r.axo.version),r.setPluginStatus(s,a))},nav:{done:null,installed:0,version:null,result:[0,0],mimeType:["video/quicktime","application/x-quicktimeplayer","image/x-macpaint","image/x-quicktime","application/x-rtsp","application/x-sdp","application/sdp","audio/vnd.qcelp","video/sd-video","audio/mpeg","video/mp4","video/3gpp2","application/x-mpeg","audio/x-m4b","audio/x-aac","video/flc"],find:"QuickTime.*Plug-?in",find2:"QuickTime.*Plug-?in",find3filename:"QuickTime|QT",avoid:"Totem|VLC|RealPlayer|Helix|MPlayer|Windows\\s*Media\\s*Player",plugins:"QuickTime Plug-in",detect:function(t){var i,n,r=this,a={installed:0,version:null,plugin:null};return(i=e.pd.findNavPlugin({find:r.find,find2:t?0:r.find2,avoid:t?0:r.avoid,mimes:r.mimeType,plugins:r.plugins}))&&(a.plugin=i,a.installed=1,n=new RegExp(r.find,"i"),i.name&&n.test(i.name+"")&&(a.version=e.getNum(i.name+""))),a},query:function(t){var i,n,r=this;if(t=t?1:0,null===r.done){if(e.hasMimeType(r.mimeType)){(n=r.detect(1)).installed&&(i=r.detect(0),r.result=[i,i.installed?i:n]);var a,s=r.result[0],o=r.result[1],l=new RegExp(r.avoid,"i"),u=new RegExp(r.find3filename,"i");s=s?s.plugin:0,o=o?o.plugin:0,s||!o||!o.name||o.description&&!/^[\s]*$/.test(o.description+"")||l.test(o.name+"")||(a=(o.filename||"")+"",/^.*[\\\/]([^\\\/]*)$/.test(a)&&(a=RegExp.$1),a&&u.test(a)&&!l.test(a)&&(r.result[0]=r.result[1]))}r.done=r.result[0]===r.result[1]?1:0}return r.result[t]&&(r.installed=r.result[t].installed,r.version=r.result[t].version),r}},codebase:{classID:"clsid:02BF25D5-8C17-4B23-BC80-D3488ABDDC6B",isMin:function(i){var n,r=0;return this.$$=t,e.isStrNum(i)&&((n=i.split(e.splitNumRegx)).length>3&&parseInt(n[3],10)>0&&(n[3]="9999"),i=n.join(","),r=e.codebase.isMin(this,i)),r},search:function(){return this.$$=t,e.codebase.search(this)},DIGITMAX:[[12,11,11],[7,60],[7,11,11],0,[7,11,11]],DIGITMIN:[5,0,0,0],Upper:["999","7,60","7,50","7,6","7,5"],Lower:["7,60","7,50","7,6","7,5","0"],convert:[1,function(e,t){return t?[e[0],e[1]+e[2],e[3],"0"]:[e[0],e[1].charAt(0),e[1].charAt(1),e[2]]},1,0,1]},axo:{hasRun:0,installed:0,version:null,progID:["QuickTimeCheckObject.QuickTimeCheck","QuickTimeCheckObject.QuickTimeCheck.1"],progID0:"QuickTime.QuickTime",query:function(){var t,i,n,r=this,a=r.hasRun||!e.browser.ActiveXEnabled;if(r.hasRun=1,a)return r;for(i=0;i<r.progID.length&&(!(t=e.getAXO(r.progID[i]))||(r.installed=1,!(n=e.pd.getPROP(t,"QuickTimeVersion"))||!n.toString||(n=n.toString(16),r.version=parseInt(n.charAt(0)||"0",16)+"."+parseInt(n.charAt(1)||"0",16)+"."+parseInt(n.charAt(2)||"0",16),e.dbug)));i++);return r}}};e.addPlugin("quicktime",t);var i={mimeType:["application/x-java-applet","application/x-java-vm","application/x-java-bean"],mimeType_dummy:"application/dummymimejavaapplet",classID:"clsid:8AD9C840-044E-11D1-B3E9-00805F499D93",classID_dummy:"clsid:8AD9C840-044E-11D1-B3E9-BA9876543210",navigator:{init:function(){var t=this,n=i;t.mimeObj=e.hasMimeType(n.mimeType),t.mimeObj&&(t.pluginObj=t.mimeObj.enabledPlugin)},a:function(){try{return window.navigator.javaEnabled()}catch(e){}return 1}(),javaEnabled:function(){return!!this.a},mimeObj:0,pluginObj:0},OTF:null,info:{pluginObj:null,getPluginObj:function(){var e=this;return null===e.pluginObj&&(e.pluginObj=i.navMime.pluginObj||i.navigator.pluginObj||0),e.pluginObj},getNavPluginName:function(){var e=this.getPluginObj();return e&&e.name||""},getNavPluginDescription:function(){var e=this.getPluginObj();return e&&e.description||""},Plugin2Status:0,setPlugin2Status:function(t){e.isNum(t)&&(this.Plugin2Status=t)},getPlugin2Status:function(){var t,i,n,r,a,s=this;return 0===s.Plugin2Status&&(i=/Next.*Generation.*Java.*Plug-?in|Java.*Plug-?in\s*2\s/i,n=/Classic.*Java.*Plug-?in/i,r=s.getNavPluginDescription(),a=s.getNavPluginName(),i.test(r)||i.test(a)?s.setPlugin2Status(1):n.test(r)||n.test(a)?s.setPlugin2Status(-1):e.browser.isIE&&/Sun|Oracle/i.test(s.getVendor())&&((t=s.isMinJre4Plugin2())>0?s.setPlugin2Status(1):t<0&&s.setPlugin2Status(-1))),s.Plugin2Status},isMinJre4Plugin2:function(t){var n,r=i,a="",s=r.applet.getResult()[0];return a=1==e.OS?"1,6,0,10":2==e.OS?"1,6,0,12":(e.OS,"1,6,0,10"),t||(t=(s&&!r.applet.isRange(s)?s:0)||r.version,n=r.applet.codebase,t=t||(n.min&&a?n.isMin(a)>0?a:"0,0,0,0":0)),(t=e.formatNum(e.getNum(t)))?e.compareNums(t,a)>=0?1:-1:0},BrowserForbidsPlugin2:function(){var t=e.browser;return e.OS>=20?0:t.isGecko&&e.compareNums(t.verGecko,"1,9,0,0")<0||t.isOpera&&e.compareNums(t.verOpera,"10,50,0,0")<0?1:0},BrowserRequiresPlugin2:function(){var t=e.browser;return e.OS>=20?0:t.isGecko&&e.compareNums(t.verGecko,"1,9,2,0")>=0||t.isChrome||1==e.OS&&t.isOpera&&e.compareNums(t.verOpera,"10,60,0,0")>=0?1:0},VENDORS:["Sun Microsystems Inc.","Apple Computer, Inc.","Oracle Corporation","IBM Corporation"],VENDORS_reg:[/Sun/i,/Apple/i,/Oracle/i,/IBM/i],getNavVendor:function(){var e,t=this,i=t.getNavPluginName(),n=t.getNavPluginDescription(),r="";if(i||n)for(e=0;e<t.VENDORS.length;e++)if(t.VENDORS_reg[e].test(i)||t.VENDORS_reg[e].test(n)){r=t.VENDORS[e];break}return r},OracleMin:"1,7,0,0",OracleOrSun:function(t){return this.VENDORS[e.compareNums(e.formatNum(t),this.OracleMin)<0?0:2]},OracleOrApple:function(t){return this.VENDORS[e.compareNums(e.formatNum(t),this.OracleMin)<0?1:2]},getVendor:function(){var t,n,r=this,a=i,s=a.vendor||a.applet.getResult()[1]||"";return s||(n=a.DTK.version,t=a.applet.codebase,(n=n||t.version||(t.min?t.isMin(r.OracleMin)>0?r.OracleMin:"0,0,0,0":0))?s=r.OracleOrSun(n):(s=r.getNavVendor()||"")||a.version&&(2==e.OS?s=r.OracleOrApple(a.version):1!=e.OS&&3!=e.OS||(s=r.OracleOrSun(a.version)))),s},isPlugin2InstalledEnabled:function(){var e=this,t=-1,n=i.installed,r=e.getPlugin2Status(),a=e.BrowserRequiresPlugin2(),s=e.BrowserForbidsPlugin2(),o=e.isMinJre4Plugin2();return null!==n&&n>=-.1&&(r>=3?t=1:r<=-3||(2==r?t=1:-2==r||(a&&r>=0&&o>0?t=1:s&&r<=0&&o<0||(a?t=1:s||(r>0?t=1:r<0||o<0||(t=0)))))),t},result:{getDeploymentToolkitObj:function(){var e=i,t=e.info,n=e.DTK;return n.query(1),t.updateResult(),n.status&&n.HTML?n.HTML.obj():n.status}},updateResult:function(){var t,n=this,r=i,a=r.applet,s=r.installed,o=r.DTK,l=a.results,u=n.result;for(u.DeployTK_versions=[].concat(e.isArray(o.VERSIONS)?o.VERSIONS:[]),u.vendor=n.getVendor(),u.isPlugin2=n.isPlugin2InstalledEnabled(),u.OTF=r.OTF<3?0:3==r.OTF?1:2,u.JavaAppletObj=null,t=0;t<l.length;t++)if(l[t][0]&&a.HTML[t]&&a.HTML[t].obj()){u.JavaAppletObj=a.HTML[t].obj();break}var c=[null,null,null,null];for(t=0;t<l.length;t++)l[t][0]?c[t]=1:null!==l[t][0]?(r.NOTF&&r.NOTF.isAppletActive(t),a.active[t]>0?c[t]=0:a.allowed[t]>=1&&3!=r.OTF&&(a.isDisabled.single(t)||-.2==s||-1==s||a.active[t]<0||3==t&&/Microsoft/i.test(u.vendor))&&(c[t]=-1)):3==t&&l[0][0]?c[t]=0:a.isDisabled.single(t)&&(c[t]=-1);u.objectTag=c[1],u.appletTag=c[2],u.objectTagActiveX=c[3],u.name=n.getNavPluginName(),u.description=n.getNavPluginDescription(),u.All_versions=[].concat(u.DeployTK_versions.length?u.DeployTK_versions:e.isString(r.version)?[r.version]:[]);var d=u.All_versions;for(t=0;t<d.length;t++)d[t]=e.formatNum(e.getNum(d[t]));return u}},getInfo:function(){var e=this.info;return e.updateResult(),e.result},getVerifyTagsDefault:function(){return[1,this.applet.isDisabled.VerifyTagsDefault_1()?0:1,1]},getVersion:function(t,i,n){var r,a=this,s=a.applet,o=a.verify,l=a.navigator,u=null,c=null,d=null;null===a.getVersionDone&&(a.OTF=0,l.init(),o&&o.init()),s.setVerifyTagsArray(n),e.file.save(a,".jar",i),0!==a.getVersionDone?(u&&!e.dbug||!a.navMime.query().version||(u=a.navMime.version),u&&!e.dbug||!a.navPlugin.query().version||(u=a.navPlugin.version),u&&!e.dbug||!a.DTK.query().version||(u=a.DTK.version),a.nonAppletDetectionOk(u)&&(d=u),a.setPluginStatus(d,c,u,t),s.should_Insert_Query_Any()&&(r=s.insert_Query_Any(t))[0]&&(d=r[0],c=r[1]),a.setPluginStatus(d,c,u,t)):s.should_Insert_Query_Any()&&(r=s.insert_Query_Any(t),a.setPluginStatus(r[0],r[1],u,t))},nonAppletDetectionOk:function(t){var i=this.navigator,n=e.browser,r=1;return t&&i.javaEnabled()&&(n.isIE||i.mimeObj)||(r=0),r},setPluginStatus:function(t,i,n,r){var a,s=this,o=0,l=s.applet;n=n||s.version0,(a=l.isRange(t))&&(l.setRange(a,r)==t&&(o=a),t=0),s.OTF<3&&(s.installed=o?o>0?.7:-.1:t?1:n?-.2:-1),2==s.OTF&&s.NOTF&&!s.applet.getResult()[0]&&(s.installed=n?-.2:-1),3==s.OTF&&-.5!=s.installed&&.5!=s.installed&&(s.installed=s.NOTF.isJavaActive(1)>=1?.5:-.5),4!=s.OTF||-.5!=s.installed&&.5!=s.installed||(t?s.installed=1:o?s.installed=o>0?.7:-.1:s.NOTF.isJavaActive(1)>=1?n?(s.installed=1,t=n):s.installed=0:s.installed=n?-.2:-1),n&&(s.version0=e.formatNum(e.getNum(n))),t&&!o&&(s.version=e.formatNum(e.getNum(t))),i&&e.isString(i)&&(s.vendor=i),s.vendor||(s.vendor=""),s.verify&&s.verify.isEnabled()?s.getVersionDone=0:1!=s.getVersionDone&&(s.OTF<2?s.getVersionDone=0:s.getVersionDone=s.applet.can_Insert_Query_Any()?0:1)},DTK:{hasRun:0,status:null,VERSIONS:[],version:"",HTML:null,Plugin2Status:null,classID:["clsid:CAFEEFAC-DEC7-0000-0001-ABCDEFFEDCBA","clsid:CAFEEFAC-DEC7-0000-0000-ABCDEFFEDCBA"],mimeType:["application/java-deployment-toolkit","application/npruntime-scriptable-plugin;DeploymentToolkit"],isDisabled:function(t){return this.HTML?1:t||e.dbug?0:this.hasRun||!e.DOM.isEnabled.objectTagUsingActiveX()?1:0},query:function(t){var n,r,a,s=this,o=i,l=e.DOM.altHTML,u={},c=null,d=null,h=s.isDisabled(t);if(s.hasRun=1,h)return s;if(s.status=0,e.DOM.isEnabled.objectTagUsingActiveX())for(n=0;n<s.classID.length&&(s.HTML=e.DOM.insert("object",["classid",s.classID[n]],[],l),c=s.HTML.obj(),!e.pd.getPROP(c,"jvms"));n++);else(r=e.hasMimeType(s.mimeType))&&r.type&&(s.HTML=e.DOM.insert("object",["type",r.type],[],l),c=s.HTML.obj());if(c){try{Math.abs(o.info.getPlugin2Status())<2&&(s.Plugin2Status=c.isPlugin2())}catch(e){}null!==s.Plugin2Status&&(s.Plugin2Status?o.info.setPlugin2Status(2):(e.DOM.isEnabled.objectTagUsingActiveX()||o.info.getPlugin2Status()<=0)&&o.info.setPlugin2Status(-2));try{if((a=e.pd.getPROP(c,"jvms"))&&(d=a.getLength(),e.isNum(d)))for(s.status=d>0?1:-1,n=0;n<d;n++)(r=e.getNum(a.get(d-1-n).version))&&(s.VERSIONS.push(r),u["a"+e.formatNum(r)]=1)}catch(e){}s.VERSIONS.length&&(s.version=e.formatNum(s.VERSIONS[0]))}return s}},navMime:{hasRun:0,mimetype:"",version:"",mimeObj:0,pluginObj:0,regexJPI:/^\s*application\/x-java-applet;jpi-version\s*=\s*(\d.*)$/i,isDisabled:function(){var e=i;return this.hasRun||!e.navigator.mimeObj?1:0},update:function(t){var i=this,n=t?t.enabledPlugin:0,r=t&&i.regexJPI.test(t.type||"")?e.formatNum(e.getNum(RegExp.$1)):0;r&&n&&(n.description||n.name)&&e.compareNums(r,i.version||e.formatNum("0"))>0&&(i.version=r,i.mimeObj=t,i.pluginObj=n,i.mimetype=t.type)},query:function(){var t,n,r,a,s,o,l=this,u=i,c=navigator.mimeTypes,d=l.isDisabled();if(l.hasRun=1,d)return l;if(o=c.length,e.isNum(o))for(t=0;t<o;t++){r=0;try{r=c[t]}catch(e){}l.update(r)}if(!l.version||e.dbug)for(s=e.isArray(u.mimeType)?u.mimeType:[u.mimeType],t=0;t<s.length;t++){r=0;try{r=c[s[t]]}catch(e){}if(o=(a=r?r.enabledPlugin:0)?a.length:null,e.isNum(o))for(n=0;n<o;n++){r=0;try{r=a[n]}catch(e){}l.update(r)}}return l}},navPlugin:{hasRun:0,version:"",getPlatformNum:function(){var t=i,n=0,r=/Java.*TM.*Platform[^\d]*(\d+)[\.,_]?(\d*)\s*U?(?:pdate)?\s*(\d*)/i,a=e.pd.findNavPlugin({find:r,mimes:t.mimeType,plugins:1});return a&&(r.test(a.name||"")||r.test(a.description||""))&&parseInt(RegExp.$1,10)>=5&&(n="1,"+RegExp.$1+","+(RegExp.$2?RegExp.$2:"0")+","+(RegExp.$3?RegExp.$3:"0")),n},getPluginNum:function(){var t,n,r,a,s=this,o=i,l=0;return r=/Java[^\d]*Plug-in/i,(a=e.pd.findNavPlugin({find:r,num:1,mimes:o.mimeType,plugins:1,dbug:0}))&&(t=s.checkPluginNum(a.description,r),n=s.checkPluginNum(a.name,r),l=t&&n?e.compareNums(t,n)>0?t:n:t||n),l||(r=/Java.*\d.*Plug-in/i,(a=e.pd.findNavPlugin({find:r,mimes:o.mimeType,plugins:1,dbug:0}))&&(t=s.checkPluginNum(a.description,r),n=s.checkPluginNum(a.name,r),l=t&&n?e.compareNums(t,n)>0?t:n:t||n)),l},checkPluginNum:function(t,i){var n,r;return(n=i.test(t)?e.formatNum(e.getNum(t)):0)&&e.compareNums(n,e.formatNum("10"))>=0&&(r=n.split(e.splitNumRegx),n=e.formatNum("1,"+(parseInt(r[0],10)-3)+",0,"+r[1])),n&&(e.compareNums(n,e.formatNum("1,3"))<0||e.compareNums(n,e.formatNum("2"))>=0)&&(n=0),n},query:function(){var t,n=this,r=i,a=0,s=n.hasRun||!r.navigator.mimeObj;return n.hasRun=1,s?n:(a&&!e.dbug||(t=n.getPlatformNum())&&(a=t),a&&!e.dbug||(t=n.getPluginNum())&&(a=t),a&&(n.version=e.formatNum(a)),n)}},applet:{codebase:{isMin:function(t){return this.$$=i,e.codebase.isMin(this,t)},search:function(){return this.$$=i,e.codebase.search(this)},DIGITMAX:[[15,128],[6,0,512],0,[1,5,2,256],0,[1,4,1,1],[1,4,0,64],[1,3,2,32]],DIGITMIN:[1,0,0,0],Upper:["999","10","5,0,20","1,5,0,20","1,4,1,20","1,4,1,2","1,4,1","1,4"],Lower:["10","5,0,20","1,5,0,20","1,4,1,20","1,4,1,2","1,4,1","1,4","0"],convert:[function(e,t){return t?[parseInt(e[0],10)>1?"99":parseInt(e[1],10)+3+"",e[3],"0","0"]:["1",parseInt(e[0],10)-3+"","0",e[1]]},function(e,t){return t?[e[1],e[2],e[3]+"0","0"]:["1",e[0],e[1],e[2].substring(0,e[2].length-1||1)]},0,function(e,t){return t?[e[0],e[1],e[2],e[3]+"0"]:[e[0],e[1],e[2],e[3].substring(0,e[3].length-1||1)]},0,1,function(e,t){return t?[e[0],e[1],e[2],e[3]+"0"]:[e[0],e[1],e[2],e[3].substring(0,e[3].length-1||1)]},1]},results:[[null,null],[null,null],[null,null],[null,null]],getResult:function(){var e,t=this.results,i=[];for(e=t.length-1;e>=0&&!(i=t[e])[0];e--);return i=[].concat(i)},DummySpanTagHTML:0,HTML:[0,0,0,0],active:[0,0,0,0],DummyObjTagHTML:0,DummyObjTagHTML2:0,allowed:[1,1,1,1],VerifyTagsHas:function(e){var t;for(t=0;t<this.allowed.length;t++)if(this.allowed[t]===e)return 1;return 0},saveAsVerifyTagsArray:function(t){var i,n=this;if(e.isArray(t)){for(i=1;i<n.allowed.length;i++)t.length>i-1&&e.isNum(t[i-1])&&(t[i-1]<0&&(t[i-1]=0),t[i-1]>3&&(t[i-1]=3),n.allowed[i]=t[i-1]);n.allowed[0]=n.allowed[3]}},setVerifyTagsArray:function(t){var n=this,r=i;null===r.getVersionDone&&n.saveAsVerifyTagsArray(r.getVerifyTagsDefault()),e.dbug?n.saveAsVerifyTagsArray([3,3,3]):t&&n.saveAsVerifyTagsArray(t)},isDisabled:{single:function(t){return this.all()?1:1==t?!e.DOM.isEnabled.objectTag():2==t?this.AppletTag():0===t?e.codebase.isDisabled():3==t?!e.DOM.isEnabled.objectTagUsingActiveX():1},all_:null,all:function(){var t,n=this,r=i.navigator,a=e.browser;return null===n.all_&&(t=a.isOpera&&e.compareNums(a.verOpera,"13,0,0,0")<0&&!r.javaEnabled()||n.AppletTag()&&!e.DOM.isEnabled.objectTag()||!r.mimeObj&&!a.isIE?1:0,n.all_=t),n.all_},AppletTag:function(){var t=i.navigator;return e.browser.isIE?!t.javaEnabled():0},VerifyTagsDefault_1:function(){var t=e.browser,i=1;return t.isIE&&!t.ActiveXEnabled&&(i=0),(t.isIE&&t.verIE<9||t.verGecko&&e.compareNums(t.verGecko,e.formatNum("2"))<0||t.isSafari&&(!t.verSafari||e.compareNums(t.verSafari,e.formatNum("4"))<0)||t.isOpera&&e.compareNums(t.verOpera,e.formatNum("11"))<0)&&(i=0),i}},can_Insert_Query:function(e){var t=this,i=t.results[0][0],n=t.getResult()[0];return t.HTML[e]||0===e&&null!==i&&!t.isRange(i)||0===e&&n&&!t.isRange(n)?0:!t.isDisabled.single(e)},can_Insert_Query_Any:function(){var e;for(e=0;e<this.results.length;e++)if(this.can_Insert_Query(e))return 1;return 0},should_Insert_Query:function(e){var t=this,n=t.allowed,r=i,a=t.getResult()[0];return a=a&&(e>0||!t.isRange(a)),t.can_Insert_Query(e)&&0!==n[e]?3==n[e]||2.8==n[e]&&!a?1:r.nonAppletDetectionOk(r.version0)||2!=n[e]&&(1!=n[e]||a)?0:1:0},should_Insert_Query_Any:function(){var e;for(e=0;e<this.allowed.length;e++)if(this.should_Insert_Query(e))return 1;return 0},query:function(t){var n,r,a=this,s=i,o=null,l=null,u=a.results,c=a.HTML[t];if(c&&c.obj()&&!u[t][0]&&!s.bridgeDisabled&&(n=c.obj(),r=c.readyState(),!e.isNum(r)||4==r)){try{o=e.getNum(n.getVersion()+""),l=n.getVendor()+"",n.statusbar((e.win.loaded," "))}catch(e){}!o||!e.isStrNum(o)||e.dbug&&s.OTF<3||(u[t]=[o,l],a.active[t]=2)}},isRange:function(e){return/^[<>]/.test(e||"")?">"==e.charAt(0)?1:-1:0},setRange:function(t,i){return(t?t>0?">":"<":"")+(e.isString(i)?i:"")},insertJavaTag:function(t,n,r,a,s){var o=i,l=e.file.getValid(o),u=l.name+l.ext,c=l.path,d=["archive",u,"code","A.class"],h=(a?["width",a]:[]).concat(s?["height",s]:[]),f=["mayscript","true"],p=["scriptable","true","codebase_lookup","false"].concat(f),g=o.navigator,m=!e.browser.isIE&&g.mimeObj&&g.mimeObj.type?g.mimeObj.type:o.mimeType[0];return 1==t?(e.browser.isIE,e.DOM.insert("object",["type",m].concat(h),["codebase",c].concat(d).concat(p),r,o,0,n)):2==t?e.browser.isIE?e.DOM.insert("applet",["alt",r].concat(f).concat(d).concat(h),["codebase",c].concat(p),r,o,0,n):e.DOM.insert("applet",["codebase",c,"alt",r].concat(f).concat(d).concat(h),[].concat(p),r,o,0,n):3==t?e.browser.isIE?e.DOM.insert("object",["classid",o.classID].concat(h),["codebase",c].concat(d).concat(p),r,o,0,n):e.DOM.insert():4==t?e.DOM.insert("embed",["codebase",c].concat(d).concat(["type",m]).concat(p).concat(h),[],r,o,0,n):e.DOM.insert()},insertIframe:function(t){return e.DOM.iframe.insert(99,t)},insert_Query_Any:function(t){var n,r,a=this,s=i,o=e.DOM,l=a.results,u=a.HTML,c=o.altHTML,d=e.file.getValid(s);return a.should_Insert_Query(0)&&(s.OTF<2&&(s.OTF=2),l[0]=[0,0],(n=t?a.codebase.isMin(t):a.codebase.search())&&(l[0][0]=t?a.setRange(n,t):n),a.active[0]=n?1.5:-1),d?(a.DummySpanTagHTML||(r=a.insertIframe("applet.DummySpanTagHTML"),a.DummySpanTagHTML=o.insert("",[],[],c,0,0,r),o.iframe.close(r)),a.should_Insert_Query(1)&&(s.OTF<2&&(s.OTF=2),r=a.insertIframe("applet.HTML[1]"),u[1]=a.insertJavaTag(1,r,c),o.iframe.close(r),l[1]=[0,0],a.query(1)),a.should_Insert_Query(2)&&(s.OTF<2&&(s.OTF=2),r=a.insertIframe("applet.HTML[2]"),u[2]=a.insertJavaTag(2,r,c),o.iframe.close(r),l[2]=[0,0],a.query(2)),a.should_Insert_Query(3)&&(s.OTF<2&&(s.OTF=2),r=a.insertIframe("applet.HTML[3]"),u[3]=a.insertJavaTag(3,r,c),o.iframe.close(r),l[3]=[0,0],a.query(3)),o.isEnabled.objectTag()&&(a.DummyObjTagHTML||!u[1]&&!u[2]||(r=a.insertIframe("applet.DummyObjTagHTML"),a.DummyObjTagHTML=o.insert("object",["type",s.mimeType_dummy],[],c,0,0,r),o.iframe.close(r)),!a.DummyObjTagHTML2&&u[3]&&(r=a.insertIframe("applet.DummyObjTagHTML2"),a.DummyObjTagHTML2=o.insert("object",["classid",s.classID_dummy],[],c,0,0,r),o.iframe.close(r))),s.NOTF.init(),a.getResult()):a.getResult()}},NOTF:{count:0,count2:0,countMax:25,intervalLength:250,init:function(){var t=this,n=i;n.OTF<3&&t.shouldContinueQuery()&&(n.OTF=3,e.ev.setTimeout(t.onIntervalQuery,t.intervalLength))},allHTMLloaded:function(){var e,t=i.applet,n=[t.DummySpanTagHTML,t.DummyObjTagHTML,t.DummyObjTagHTML2].concat(t.HTML);for(e=0;e<n.length;e++)if(n[e]&&null!==n[e].loaded&&!n[e].loaded)return 0;return 1},shouldContinueQuery:function(){var e,t=this,n=i.applet,r=0;if(t.allHTMLloaded()){if(t.count-t.count2>2)return r}else t.count2=t.count;for(e=0;e<n.results.length;e++)n.HTML[e]&&!n.results[e][0]&&(n.allowed[e]>=2||1==n.allowed[e]&&!n.getResult()[0])&&(!t.count||t.isAppletActive(e)>=0)&&(r=1);return r},isJavaActive:function(e){var t,n,r=i,a=-9;for(t=0;t<r.applet.HTML.length;t++)(n=this.isAppletActive(t,e))>a&&(a=n);return a},isAppletActive:function(t,n){var r,a,s=i,o=s.navigator,l=s.applet,u=l.HTML[t],c=l.active,d=0,h=c[t];if(n||h>=1.5||!u||!u.span())return h;for(a=e.DOM.getTagStatus(u,l.DummySpanTagHTML,l.DummyObjTagHTML,l.DummyObjTagHTML2,this.count),r=0;r<c.length;r++)c[r]>0&&(d=1);return h=1!=a?a:e.browser.isIE||s.version0&&o.javaEnabled()&&o.mimeObj&&("object"==u.tagName||d)?1:0,c[t]=h,h},onIntervalQuery:function(){var t,n=i.NOTF;n.count++,3==i.OTF&&(t=n.queryAllApplets(),n.shouldContinueQuery()||n.queryCompleted(t)),3==i.OTF&&e.ev.setTimeout(n.onIntervalQuery,n.intervalLength)},queryAllApplets:function(){var e,t=i.applet;for(e=0;e<t.results.length;e++)t.query(e);return t.getResult()},queryCompleted:function(t){var n=i;n.OTF>=4||(n.OTF=4,this.isJavaActive(),n.setPluginStatus(t[0],t[1],0),e.ev.callArray(n.DoneHndlrs))}}};e.addPlugin("java",i);var n={mimeType:"application/x-shockwave-flash",setPluginStatus:function(t,i){var n,r=this;r.installed=i?1:t?0:-1,r.version=e.formatNum(i),n=(n=-1==r.installed||r.instance.version)||r.axo.version,r.getVersionDone=n?1:0},getVersion:function(t,i){var n=this,r=null,a=0;a&&!e.dbug||!n.navPlugin.query().installed||(a=1),r&&!e.dbug||!n.navPlugin.query().version||(r=n.navPlugin.version),a&&!e.dbug||!n.axo.query().installed||(a=1),r&&!e.dbug||!n.axo.query().version||(r=n.axo.version),(!a&&!r||i||e.dbug)&&n.instance.query().version&&(a=1,r=n.instance.version),n.setPluginStatus(a,r)},navPlugin:{hasRun:0,installed:0,version:null,getNum:function(e){if(!e)return null;var t=/[\d][\d\,\.\s]*[rRdD]{0,1}[\d\,]*/.exec(e);return t?t[0].replace(/[rRdD\.]/g,",").replace(/\s/g,""):null},query:function(){var t,i,r=this,a=n,s=r.hasRun||!e.hasMimeType(a.mimeType);return r.hasRun=1,s?r:((i=e.pd.findNavPlugin({find:"Shockwave.*Flash",mimes:a.mimeType,plugins:["Shockwave Flash"]}))&&(r.installed=1,i.description&&(t=r.getNum(i.description))),t&&(t=e.getPluginFileVersion(i,t)),t&&(r.version=t),r)}},axo:{hasRun:0,installed:0,version:null,progID:"ShockwaveFlash.ShockwaveFlash",classID:"clsid:D27CDB6E-AE6D-11CF-96B8-444553540000",query:function(){var t,i,n,r=this,a=r.hasRun;if(r.hasRun=1,a)return r;for(i=0;i<10;i++)if(n=e.getAXO(r.progID+(i?"."+i:""))){r.installed=1,t=0;try{t=e.getNum(n.GetVariable("$version")+"")}catch(e){}if(t&&(r.version=t,!e.dbug))break}return r}},instance:{hasRun:0,version:null,HTML:null,isEnabled:function(){var t=n,i=1;return!this.hasRun&&!e.DOM.isEnabled.objectTagUsingActiveX()&&e.DOM.isEnabled.objectTag()&&e.hasMimeType(t.mimeType)||(i=0),i},query:function(){var t=this,i=n,r=t.isEnabled();if(t.hasRun=1,r){t.HTML=e.DOM.insert("object",["type",i.mimeType],["play","false","menu","false"],"",i);try{t.version=e.getNum(t.HTML.obj().GetVariable("$version")+"")}catch(e){}}return t}}};e.addPlugin("flash",n);var r={getVersion:function(){var t,i=this,n=null;t&&!e.dbug||!i.nav.query().installed||(t=1),n&&!e.dbug||!i.nav.query().version||(n=i.nav.version),t&&!e.dbug||!i.axo.query().installed||(t=1),n&&!e.dbug||!i.axo.query().version||(n=i.axo.version),i.installed=n?1:t?0:-1,i.version=e.formatNum(n)},nav:{hasRun:0,installed:0,version:null,mimeType:"application/x-director",query:function(){var t,i,n=this,r=n.hasRun||!e.hasMimeType(n.mimeType);return n.hasRun=1,r?n:((i=e.pd.findNavPlugin({find:"Shockwave\\s*for\\s*Director",mimes:n.mimeType,plugins:"Shockwave for Director"}))&&i.description&&(t=e.getNum(i.description+"")),t&&(t=e.getPluginFileVersion(i,t)),i&&(n.installed=1),t&&(n.version=t),n)}},axo:{hasRun:0,installed:null,version:null,progID:["SWCtl.SWCtl","SWCtl.SWCtl.1","SWCtl.SWCtl.7","SWCtl.SWCtl.8","SWCtl.SWCtl.11","SWCtl.SWCtl.12"],classID:"clsid:166B1BCA-3F9C-11CF-8075-444553540000",query:function(){var t,i,n,r,a,s=this,o=!s.hasRun;if(s.hasRun=1,o)for(i=0;i<s.progID.length;i++)if(t=e.getAXO(s.progID[i])){s.installed=1,r="";try{r=t.ShockwaveVersion("")+""}catch(e){}if(/(\d[\d\.\,]*)(?:\s*r\s*(\d+))?/i.test(r)&&(a=RegExp.$2,n=e.formatNum(RegExp.$1),a&&((n=n.split(e.splitNumRegx))[3]=a,n=n.join(","))),n&&(s.version=n,!e.dbug))break}return s}}};e.addPlugin("shockwave",r);var a={setPluginStatus:function(t,i){var n=this;t&&(n.version=e.formatNum(t)),n.installed=n.version?1:i?0:-1,n.getVersionDone=0===n.installed?0:1},getVersion:function(t,i){var n,r=this,a=null;n&&!e.dbug||!r.nav.query().installed||(n=1),n&&!e.dbug||!r.axo.query().installed||(n=1),a&&!e.dbug||!r.axo.query().version||(a=r.axo.version),(!n&&!a||i||e.dbug)&&r.FirefoxPlugin.query().version&&(n=1,a=r.FirefoxPlugin.version),r.setPluginStatus(a,n)},mimeType:["application/x-ms-wmp","application/asx","application/x-mplayer2","video/x-ms-asf","video/x-ms-wm","video/x-ms-asf-plugin"],find:["Microsoft.*Windows\\s*Media\\s*Player.*Firefox.*Plug-?in","Windows\\s*Media\\s*Player\\s*Plug-?in\\s*Dynamic\\s*Link\\s*Library","Flip4Mac.*Windows\\s*Media.*Plug-?in|Flip4Mac.*WMV.*Plug-?in"],avoid:"Totem|VLC|RealPlayer|Helix",plugins:["Microsoft"+String.fromCharCode(174)+" Windows Media Player Firefox Plugin","Windows Media Player Plug-in Dynamic Link Library"],nav:{hasRun:0,installed:0,query:function(){var t=this,i=a,n=t.hasRun||!e.hasMimeType(i.mimeType);return t.hasRun=1,n?t:(e.pd.findNavPlugin({find:i.find.join("|"),avoid:i.avoid,mimes:i.mimeType,plugins:i.plugins})&&(t.installed=1),t)}},FirefoxPlugin:{hasRun:0,version:null,isDisabled:function(){var t=a,i=e.browser;return this.hasRun||i.isGecko&&e.compareNums(i.verGecko,e.formatNum("1.8"))<0||i.isOpera&&e.compareNums(i.verOpera,e.formatNum("10"))<0||e.DOM.isEnabled.objectTagUsingActiveX()||!e.hasMimeType(t.mimeType)||!e.pd.findNavPlugin({find:t.find[0],avoid:t.avoid,mimes:t.mimeType,plugins:t.plugins[0]})?1:0},query:function(){var t,i=this,n=a,r=i.isDisabled();return i.hasRun=1,r?i:((t=e.pd.getPROP(e.DOM.insert("object",["type",e.hasMimeType(n.mimeType).type,"data",""],["src",""],"",n).obj(),"versionInfo"))&&(i.version=e.getNum(t)),i)}},axo:{hasRun:0,installed:null,version:null,progID:["WMPlayer.OCX","WMPlayer.OCX.7"],classID:"clsid:6BF52A52-394A-11D3-B153-00C04F79FAA6",query:function(){var t,i,n,r=this,a=!r.hasRun;if(r.hasRun=1,a)for(i=0;i<r.progID.length&&(!(t=e.getAXO(r.progID[i]))||(r.installed=1,(n=e.pd.getPROP(t,"versionInfo",0))&&(n=e.getNum(n)),!n||(r.version=n,e.dbug)));i++);return r}},result:0,getInfo:function(){var t=this,i=t.installed;return t.result||(t.result={ActiveXPlugin:!!t.axo.version,FirefoxPlugin:!(0!==i&&1!=i||!e.pd.findNavPlugin({find:t.find[0],avoid:t.avoid,mimes:t.mimeType,plugins:t.plugins[0]})),DllPlugin:!(0!==i&&1!=i||!e.pd.findNavPlugin({find:t.find[1],avoid:t.avoid,mimes:t.mimeType,plugins:t.plugins[1]})),Flip4macPlugin:!(0!==i&&1!=i||!e.pd.findNavPlugin({find:t.find[2],avoid:t.avoid,mimes:t.mimeType,plugins:1}))},t.result.Scriptable=!(1!=i&&!t.result.FirefoxPlugin)),t.result}};e.addPlugin("windowsmediaplayer",a);var s={getVersion:function(){var t=this,i=null,n=0;n&&!e.dbug||!t.nav.query().installed||(n=1),i&&!e.dbug||!t.nav.query().version||(i=t.nav.version),n&&!e.dbug||!t.axo.query().installed||(n=1),i&&!e.dbug||!t.axo.query().version||(i=t.axo.version),t.version=e.formatNum(i),t.installed=i?1:n?0:-1},nav:{hasRun:0,installed:0,version:null,mimeType:["application/x-silverlight","application/x-silverlight-2"],query:function(){var t,i,n,r=this,a=r.hasRun||!e.hasMimeType(r.mimeType);return r.hasRun=1,a?r:((n=e.pd.findNavPlugin({find:"Silverlight.*Plug-?in",mimes:r.mimeType,plugins:"Silverlight Plug-In"}))&&(r.installed=1),n&&n.description&&(i=e.formatNum(e.getNum(n.description+""))),i&&(t=i.split(e.splitNumRegx),parseInt(t[0],10)<2&&parseInt(t[2],10)>=30226&&(t[0]="2"),i=t.join(",")),i&&(r.version=i),r)}},axo:{hasRun:0,installed:0,version:null,progID:"AgControl.AgControl",maxdigit:[20,10,10,100,100,10],mindigit:[0,0,0,0,0,0],IsVersionSupported:function(t,i){var n=this;try{return n.testVersion?e.compareNums(e.formatNum(n.testVersion.join(",")),e.formatNum(i.join(",")))>=0:t.IsVersionSupported(n.format(i))}catch(e){}return 0},format:function(e){return e[0]+"."+e[1]+"."+e[2]+this.make2digits(e[3])+this.make2digits(e[4])+"."+e[5]},make2digits:function(e){return(e<10?"0":"")+e},query:function(){var t,i,n=this,r=n.hasRun;if(n.hasRun=1,r)return n;if((i=e.getAXO(n.progID))&&(n.installed=1),i&&n.IsVersionSupported(i,n.mindigit)){var a,s=[].concat(n.mindigit);for(t=0;t<n.maxdigit.length;t++){for(a=0;n.maxdigit[t]-n.mindigit[t]>1&&a<20;)a++,0,s[t]=Math.round((n.maxdigit[t]+n.mindigit[t])/2),n.IsVersionSupported(i,s)?n.mindigit[t]=s[t]:n.maxdigit[t]=s[t];s[t]=n.mindigit[t]}n.version=n.format(s)}return n}}};e.addPlugin("silverlight",s);var o={compareNums:function(t,i){var n,r,a,s,o,l=t.split(e.splitNumRegx),u=i.split(e.splitNumRegx);for(n=0;n<Math.min(l.length,u.length);n++){if(/([\d]+)([a-z]?)/.test(l[n]),r=parseInt(RegExp.$1,10),s=2==n&&RegExp.$2.length>0?RegExp.$2.charCodeAt(0):-1,/([\d]+)([a-z]?)/.test(u[n]),a=parseInt(RegExp.$1,10),o=2==n&&RegExp.$2.length>0?RegExp.$2.charCodeAt(0):-1,r!=a)return r>a?1:-1;if(2==n&&s!=o)return s>o?1:-1}return 0},setPluginStatus:function(t,i,n){var r=this;r.installed=i?1:n?n>0?.7:-.1:t?0:-1,i&&(r.version=e.formatNum(i)),r.getVersionDone=.7==r.installed||-.1==r.installed?0:1},getVersion:function(t){var i,n,r=this,a=null;i&&!e.dbug||!r.nav.query().installed||(i=1),a&&!e.dbug||!r.nav.query().version||(a=r.nav.version),i&&!e.dbug||!r.axo.query().installed||(i=1),a&&!e.dbug||!r.axo.query().version||(a=r.axo.version),a&&!e.dbug||!(n=r.codebase.isMin(t))?(a&&!e.dbug||(n=r.codebase.search())&&(i=1,a=n),r.setPluginStatus(i,a,0)):r.setPluginStatus(0,0,n)},nav:{hasRun:0,installed:0,version:null,mimeType:["application/x-vlc-plugin","application/x-google-vlc-plugin","application/mpeg4-muxcodetable","application/x-matroska","application/xspf+xml","video/divx","video/webm","video/x-mpeg","video/x-msvideo","video/ogg","audio/x-flac","audio/amr","audio/amr"],find:"VLC.*Plug-?in",find2:"VLC|VideoLAN",avoid:"Totem|Helix",plugins:["VLC Web Plugin","VLC Multimedia Plug-in","VLC Multimedia Plugin","VLC multimedia plugin"],query:function(){var t,i,n=this,r=n.hasRun||!e.hasMimeType(n.mimeType);return n.hasRun=1,r?n:((i=e.pd.findNavPlugin({find:n.find,avoid:n.avoid,mimes:n.mimeType,plugins:n.plugins}))&&(n.installed=1,i.description&&(t=e.getNum(i.description+"","[\\d][\\d\\.]*[a-z]*")),t&&(n.version=t)),n)}},axo:{hasRun:0,installed:0,version:null,progID:"VideoLAN.VLCPlugin",query:function(){var t,i,n=this,r=n.hasRun;return n.hasRun=1,r?n:((t=e.getAXO(n.progID))&&(n.installed=1,(i=e.getNum(e.pd.getPROP(t,"VersionInfo"),"[\\d][\\d\\.]*[a-z]*"))&&(n.version=i)),n)}},codebase:{classID:"clsid:9BE31822-FDAD-461B-AD51-BE1D1C159921",isMin:function(t){return this.$$=o,e.codebase.isMin(this,t)},search:function(){return this.$$=o,e.codebase.search(this)},DIGITMAX:[[11,11,16]],DIGITMIN:[0,0,0,0],Upper:["999"],Lower:["0"],convert:[1]}};e.addPlugin("vlc",o);var l={OTF:null,setPluginStatus:function(){var t=this,i=t.OTF,n=t.nav.detected,r=t.nav.version,a=t.nav.precision,s=r,o=n>0,l=t.axo.detected,u=t.axo.version,c=t.axo.precision,d=t.doc.detected,h=t.doc.version,f=t.doc.precision,p=t.doc2.detected,g=t.doc2.version,m=t.doc2.precision;s=g||s||u||h,a=m||a||c||f,o=p>0||o||l>0||d>0,s=s||null,t.version=e.formatNum(s),t.precision=a;var v=-1;if(3==i?v=t.version?.5:-.5:s?v=1:o?v=0:-.5==l||-.5==d?v=-.15:!e.browser.isIE||e.browser.ActiveXEnabled&&!e.browser.ActiveXFilteringEnabled||(v=-1.5),t.installed=v,1!=t.getVersionDone){var y=1;t.verify&&t.verify.isEnabled()||.5==t.installed||-.5==t.installed?y=0:1==t.doc2.isDisabled()&&(y=0),t.getVersionDone=y}},getVersion:function(t,i){var n=this,r=0,a=n.verify;if(null===n.getVersionDone&&(n.OTF=0,a&&a.init()),e.file.save(n,".pdf",i),0===n.getVersionDone)return n.doc2.insertHTMLQuery(),void n.setPluginStatus();r&&!e.dbug||!n.nav.query().version||(r=1),r&&!e.dbug||!n.axo.query().version||(r=1),r&&!e.dbug||!n.doc.query().version||(r=1),n.doc2.insertHTMLQuery(),n.setPluginStatus()},getPrecision:function(t,i,n){if(e.isString(t)){i=i||"",n=n||"";var r,a="\\d+",s=[a,a,a,a];for(r=4;r>0;r--)if(new RegExp(i+s.slice(0,r).join("[\\.]")+n).test(t))return r}return 0},nav:{detected:0,version:null,precision:0,mimeType:["application/pdf","application/vnd.adobe.pdfxml"],find:"Adobe.*PDF.*Plug-?in|Adobe.*Acrobat.*Plug-?in|Adobe.*Reader.*Plug-?in",plugins:["Adobe Acrobat","Adobe Acrobat and Reader Plug-in","Adobe Reader Plugin"],query:function(){var t,i=this,n=null;return i.detected||!e.hasMimeType(i.mimeType)?i:(t=e.pd.findNavPlugin({find:i.find,mimes:i.mimeType,plugins:i.plugins}),i.detected=t?1:-1,t&&(n=e.getNum(t.description)||e.getNum(t.name),(n=e.getPluginFileVersion(t,n))||(n=i.attempt3()),n&&(i.version=n,i.precision=l.getPrecision(n))),i)},attempt3:function(){var t=null;return 1==e.OS&&(e.hasMimeType("application/vnd.adobe.pdfxml")?t="9":e.hasMimeType("application/vnd.adobe.x-mars")?t="8":e.hasMimeType("application/vnd.adobe.xfdf")&&(t="6")),t}},activexQuery:function(t){var i,n,r,a,s="",o={precision:0,version:null};try{t&&(s=t.GetVersions()+"")}catch(e){}if(s&&e.isString(s)&&(i=/\=\s*[\d\.]+/g,a=s.match(i))){for(n=0;n<a.length;n++)(r=e.formatNum(e.getNum(a[n])))&&(!o.version||e.compareNums(r,o.version)>0)&&(o.version=r);o.precision=l.getPrecision(s,"\\=\\s*")}return o},axo:{detected:0,version:null,precision:0,progID:["AcroPDF.PDF","AcroPDF.PDF.1","PDF.PdfCtrl","PDF.PdfCtrl.5","PDF.PdfCtrl.1"],progID_dummy:"AcroDUMMY.DUMMY",query:function(){var t,i,n,r,a,s,o=this,u=l;if(o.detected)return o;for(o.detected=-1,(i=e.getAXO(o.progID_dummy))||(s=e.errObj),a=0;a<o.progID.length;a++)if(i=e.getAXO(o.progID[a])){if(o.detected=1,n=(t=u.activexQuery(i)).version,r=t.precision,!e.dbug&&n)break}else s&&e.errObj&&s!==e.errObj&&s.message!==e.errObj.message&&(o.detected=-.5);return n&&(o.version=n),r&&(o.precision=r),o}},doc:{detected:0,version:null,precision:0,classID:"clsid:CA8A9780-280D-11CF-A24D-444553540000",classID_dummy:"clsid:CA8A9780-280D-11CF-A24D-BA9876543210",DummySpanTagHTML:0,HTML:0,DummyObjTagHTML1:0,DummyObjTagHTML2:0,isDisabled:function(){var t=0;return this.HTML?t=1:e.dbug||e.DOM.isEnabled.objectTagUsingActiveX()||(t=1),t},query:function(){var t,i,n,r,a,s=this,o=l,u=e.DOM.altHTML;return s.isDisabled()?s:(t=e.DOM.iframe.insert(99,"Adobe Reader"),s.DummySpanTagHTML=e.DOM.insert("",[],[],u,o,1,t),s.HTML=e.DOM.insert("object",["classid",s.classID],[],u,o,1,t),s.DummyObjTagHTML2=e.DOM.insert("object",["classid",s.classID_dummy],[],u,o,1,t),e.DOM.iframe.close(t),a=e.DOM.getTagStatus(s.HTML,s.DummySpanTagHTML,s.DummyObjTagHTML1,s.DummyObjTagHTML2,0,0,1),n=(i=o.activexQuery(s.HTML.obj())).version,r=i.precision,s.detected=a>0||n?1:-.1==a||-.5==a?-.5:-1,n&&(s.version=n),r&&(s.precision=r),s)}},doc2:{detected:0,version:null,precision:0,classID:"clsid:CA8A9780-280D-11CF-A24D-444553540000",mimeType:"application/pdf",HTML:0,count:0,count2:0,time2:0,intervalLength:50,maxCount:150,isDisabled:function(){var t,i,n,r=l,a=r.axo,s=r.nav,o=r.doc,u=0;return this.HTML?u=2:e.dbug||(e.DOM.isEnabled.objectTagUsingActiveX()?(t=(s?s.version:0)||(a?a.version:0)||(o?o.version:0)||0,i=(s?s.precision:0)||(a?a.precision:0)||(o?o.precision:0)||0,(!t||!i||i>2||e.compareNums(e.formatNum(t),e.formatNum("11"))<0)&&(u=2)):u=2),u<2&&((n=e.file.getValid(r))&&n.full||(u=1)),u},handlerSet:0,onMessage:function(){var t=this;return function(i){t.version||(t.detected=1,e.isArray(i)&&(i=i[0]),(i=e.getNum(i+""))&&(/[.,_]/.test(i)||(i+="."),/^(\d+)[.,_](\d)(\d\d)(\d\d)/.test(i+="00000")&&(i=RegExp.$1+","+RegExp.$2+","+RegExp.$3+","+RegExp.$4),t.version=e.formatNum(i),t.precision=3,l.setPluginStatus()))}},isDefinedMsgHandler:function(e,t){try{return e?e.messageHandler!==t:0}catch(e){}return 1},queryObject:function(){var e=this,t=e.HTML,i=t?t.obj():0;if(i){if(!e.handlerSet&&e.isDefinedMsgHandler(i)){try{i.messageHandler={onMessage:e.onMessage()}}catch(e){}e.handlerSet=1,e.count2=e.count,e.time2=(new Date).getTime()}e.detected||(e.count>3&&!e.handlerSet?e.detected=-1:e.time2&&e.count-e.count2>=e.maxCount&&(new Date).getTime()-e.time2>=e.intervalLength*e.maxCount&&(e.detected=-.5)),e.detected&&e.detected}},insertHTMLQuery:function(){var t,i,n=this,r=l,a=e.DOM.altHTML;return n.isDisabled()?n:(r.OTF<2&&(r.OTF=2),t=e.file.getValid(r).full,i=e.DOM.iframe.insert(0,"Adobe Reader"),e.DOM.iframe.write(i,'<script type="text/javascript"><\/script>'),n.HTML=e.DOM.insert("object",["data",t].concat(e.browser.isIE?["classid",n.classID]:["type",n.mimeType]),["src",t],a,r,0,i),e.DOM.iframe.addHandler(i,n.onIntervalQuery),r.OTF<3&&n.HTML&&(r.OTF=3),e.DOM.iframe.close(i),n)},onIntervalQuery:function(){var t=l,i=t.doc2;i.count++,3==t.OTF&&(i.queryObject(),i.detected&&i.queryCompleted()),3==t.OTF&&e.ev.setTimeout(i.onIntervalQuery,i.intervalLength)},queryCompleted:function(){var t=l;4!=t.OTF&&(t.OTF=4,t.setPluginStatus(),e.ev.callArray(t.DoneHndlrs))},z:0},getInfo:function(){var e=this;e.setPluginStatus();var t={OTF:e.OTF<3?0:3==e.OTF?1:2,DummyPDFused:!1,version:e.version,precision:e.precision};return 1!=e.doc2.detected&&-.5!=e.doc2.detected||(t.DummyPDFused=!0),t}};e.addPlugin("adobereader",l);var u={mimeType:["audio/x-pn-realaudio-plugin","audio/x-pn-realaudio"],classID:"clsid:CFCDAA03-8BE4-11cf-B84B-0020AFBBCCFA",setPluginStatus:function(t,i){var n,r=this;i&&(r.version=e.formatNum(e.getNum(i))),r.installed=r.version?1:t?0:-1,n=(n=-1==r.installed||r.instance.version)||r.axo.version,r.getVersionDone=n?1:0},navObj:{hasRun:0,installed:null,version:null,find:"RealPlayer.*Plug-?in",avoid:"Totem|QuickTime|Helix|VLC|Download",plugins:["RealPlayer(tm) G2 LiveConnect-Enabled Plug-In (32-bit) ","RealPlayer(tm) G2 LiveConnect-Enabled Plug-In (64-bit) ","RealPlayer Plugin"],query:function(){var t,i=this,n=u,r=!i.hasRun&&e.hasMimeType(n.mimeType);return i.hasRun=1,r&&(t=e.pd.findNavPlugin({find:i.find,avoid:i.avoid,mimes:n.mimeType,plugins:i.plugins}),i.installed=t?1:0,(t=e.getPluginFileVersion(t))&&e.compareNums(e.formatNum(t),e.formatNum("15"))>=0&&(i.version=t)),i}},JS:{hasRun:0,version:null,regStr:"RealPlayer.*Version.*Plug-?in",mimetype:"application/vnd.rn-realplayer-javascript",q1:[[11,0,0],[999],[663],[663],[663],[660],[468],[468],[468],[468],[468],[468],[431],[431],[431],[372],[180],[180],[172],[172],[167],[114],[0]],q3:[[6,0],[12,99],[12,69],[12,69],[12,69],[12,69],[12,69],[12,69],[12,69],[12,69],[12,69],[12,69],[12,46],[12,46],[12,46],[11,3006],[11,2806],[11,2806],[11,2804],[11,2804],[11,2799],[11,2749],[11,2700]],compare:function(e,t){var i,n,r,a=e.length,s=t.length;for(i=0;i<Math.max(a,s);i++){if((n=i<a?e[i]:0)>(r=i<s?t[i]:0))return 1;if(n<r)return-1}return 0},convertNum:function(t,i,n){var r,a,s,o=this,l=null;if(!t||!(r=e.formatNum(t)))return l;for(r=r.split(e.splitNumRegx),s=0;s<r.length;s++)r[s]=parseInt(r[s],10);if(0!==o.compare(r.slice(0,Math.min(i[0].length,r.length)),i[0]))return l;if(a=r.length>i[0].length?r.slice(i[0].length):[],o.compare(a,i[1])>0||o.compare(a,i[i.length-1])<0)return l;for(s=i.length-1;s>=1&&1!=s&&(0!==o.compare(i[s],a)||0!==o.compare(i[s],i[s-1]))&&!(o.compare(a,i[s])>=0&&o.compare(a,i[s-1])<0);s--);return n[0].join(".")+"."+n[s].join(".")},isEnabled:function(){return!this.hasRun&&1==e.OS&&e.hasMimeType(this.mimetype)?1:0},query:function(){var t,i,n,r=this,a=r.isEnabled();if(r.hasRun=1,a&&((i=e.pd.findNavPlugin({find:r.regStr,mimes:r.mimetype}))&&(t=e.formatNum(e.getNum(i.description))),t)){var s=t.split(e.splitNumRegx);n=1,r.compare(s,[6,0,12,200])<0?n=-1:r.compare(s,[6,0,12,1739])<=0&&r.compare(s,[6,0,12,857])>=0&&(n=-1),n<0&&(i=r.convertNum(t,r.q3,r.q1),r.version=i||t)}return r}},instance:{hasRun:0,version:null,HTML:null,isEnabled:function(){var t=u,i=1;return e.DOM.isEnabled.objectTag()?e.dbug||(this.hasRun||e.DOM.isEnabled.objectTagUsingActiveX()||!e.hasMimeType(t.mimeType)||e.browser.isGecko&&e.compareNums(e.browser.verGecko,e.formatNum("1,8"))<0||e.browser.isOpera&&e.compareNums(e.browser.verOpera,e.formatNum("10"))<0)&&(i=0):i=0,i},query:function(){var t,i=this,n=u,r=i.isEnabled();if(i.hasRun=1,r){i.HTML=e.DOM.insert("object",["type",n.mimeType[0]],["src","","autostart","false","imagestatus","false","controls","stopbutton"],"",n),t=i.HTML.obj();try{i.version=e.getNum(t.GetVersionInfo())}catch(e){}e.DOM.setStyle(t,["display","none"])}return i}},axo:{hasRun:0,installed:null,version:null,progID:["rmocx.RealPlayer G2 Control","rmocx.RealPlayer G2 Control.1","RealPlayer.RealPlayer(tm) ActiveX Control (32-bit)","RealVideo.RealVideo(tm) ActiveX Control (32-bit)","RealPlayer"],query:function(){var t,i,n,r=this;if(!r.hasRun)for(r.hasRun=1,i=0;i<r.progID.length;i++)if(t=e.getAXO(r.progID[i])){r.installed=1,n=0;try{n=t.GetVersionInfo()+""}catch(e){}if(n&&(r.version=n,!e.dbug))break}return r}},getVersion:function(t,i){var n=this,r=null,a=0;a&&!e.dbug||!n.axo.query().installed||(a=1),r&&!e.dbug||!n.axo.query().version||(r=n.axo.version),a&&!e.dbug||!n.navObj.query().installed||(a=1),r&&!e.dbug||!n.navObj.query().version||(r=n.navObj.version),r&&!e.dbug||!n.JS.query().version||(a=1,r=n.JS.version),(!a&&!r||i||e.dbug)&&n.instance.query().version&&(a=1,r=n.instance.version),n.setPluginStatus(a,r)}};e.addPlugin("realplayer",u);var c={storage:{},codebase:{isMin:function(t){return this.$$=c,e.codebase.isMin(this,t)},search:function(){return this.$$=c,e.codebase.search(this)},classID:"",DIGITMAX:[[100,100,100,0]],DIGITMIN:[0,0,0,0],Upper:["99999"],Lower:["0"],convert:[1]},clone:function(t,i){var n,r;if(e.isNum(t)||e.isString(t)||null===t||e.isFunc(t)||t===e||t===e.Plugins||t===this)return t;if(t.window||t.firstChild||t.appendChild)return t;for(n in e.isArray(t)?r=[]:t&&(r={}),t)e.hasOwn(t,n)&&(0,r[n]=this.clone(t[n],n));return r},setPluginStatus:function(t,i,n){var r=this;r.getVersionDone=0,r.version=e.formatNum(i),r.installed=i?1:t?t>0?.7:-.1:n?-3:-1},getVersion:function(t,i,n){var r,a,s,o=this,l=null,u=null,c="";if(e.codebase.isDisabled())o.setPluginStatus(0,0);else if(i&&e.isString(i)&&/[^\s]+/.test(i)){if(c=(i=i.replace(/\s/g,"")).replace(/[\:\-\/]/g,"$"),e.isArray(n)){for(n.length||n.push(0),r=0;r<n.length;r++)if(e.isDefined(n[r])||(n[r]=0),!e.isNum(n[r])||n[r]<0||n[r]>99999999)return void o.setPluginStatus(0,0,1);if(c&&o.storage[c]){for(a=o.storage[c].codebase,s=0,r=0;r<Math.max(n.length,a.DIGITMAX[0].length);r++)if((r<n.length?n[r]:0)>(r<a.DIGITMAX[0].length?a.DIGITMAX[0][r]:0)){s=1;break}if(s&&a.version)for(s=a.version.split(e.splitNumRegx),r=0;r<Math.max(s.length,a.DIGITMAX[0].length);r++)if((r<s.length?s[r]:0)===(r<a.DIGITMAX[0].length?a.DIGITMAX[0][r]:0)){o.storage[c]=null;break}}}else n=[0];c&&!o.storage[c]&&(o.storage[c]={codebase:o.clone(o.codebase)},o.storage[c].codebase.classID=i,e.isArray(n)&&n.length&&(o.storage[c].codebase.DIGITMAX=[[].concat(n)])),t?(l=o.storage[c].codebase.isMin(t),u=o.storage[c].codebase.version):(l=0,u=o.storage[c].codebase.search()),o.setPluginStatus(l,u)}else o.setPluginStatus(0,0,1)}};e.addPlugin("activex",c)}()},yYdC:function(e,t,i){"use strict";var n,r=i("l/Rs"),a=(n=r)&&n.__esModule?n:{default:n};i("6TZa"),(0,a.default)(function(){(0,a.default)(document).ksrSelect()})},ybIR:function(e,t,i){"use strict";var n,r=i("wmCY"),a=(n=r)&&n.__esModule?n:{default:n};i("l/Rs");var s=i("l/Rs");!function(){function e(e){return e.html}s.fn.loadMore=function(t){s(this).each(function(){var i=s(this),n=i.find(".js-load-more--appendable"),r=i.find(".js-load-more--removable"),o=i.find(".js-load-more--button");r.length||(r=o),function(t,i,n,r,o){var l=t.mobius(s.extend({url:function(e){return e.data("href")||e.prop("href")}(i),dataType:"json",trigger_next:i,load_next_after:n},o)).data("mobius");t.on("mobius:loading_page",function(){var e=t.attr("data-exclude-ids"),n=l.options.perPage||6;e&&l.add_param("exclude_ids[]",e.split(",")),n&&l.add_param("per_page",n),i.prop("disabled",!0),i.data("previousHTML",i.html()),i.html(a.default.t("library.load_more.Loading"))}),t.on("mobius:loaded_page",function(t,a,o){var u=(l.options.responseToHTML||e)(o),c=s(u).hide();n.append(c),c.slideDown(),i.html(i.data("previousHTML")),i.prop("disabled",!1),"has_more"in o&&!o.has_more&&r.remove()})}(i,o,n,r,t)})}}()},yqLu:function(e,t,i){"use strict";var n=l(i("l/Rs"));i("LNuh");var r,a,s=l(i("YC2V")),o=l(i("c5nH"));function l(e){return e&&e.__esModule?e:{default:e}}(0,n.default)(document).on("livesearch:results",function(e,t){var i,a=(0,n.default)(e.target).val();i=t.projects?t.projects.length:t.length,r=(0,n.default)(e.target).attr("data-tracker-name"),"undefined"!=typeof ga&&ga("send","event",r,"Term",a,parseInt(i,10))}),(0,n.default)(document).on("livesearch:searching",function(){a=!0}),(0,n.default)(document).on("livesearch:cancel",function(){a&&("undefined"!=typeof ga&&ga("send","event",r,"Cancels"),a=!1)}),(0,n.default)(document).ready(function(){(0,n.default)(".home-editorial-title").on("click",function(){var e=(0,n.default)(this).html();"undefined"!=typeof ga&&ga("send","event","Faux-Category on Homepage Clicks",e)})}),(0,n.default)(document).ready(function(){(0,n.default)(".export").find("a").on("click",function(){"undefined"!=typeof ga&&ga("send","event","Export Reward Report","Download Click")})}),(0,n.default)(document).ready(function(){(0,n.default)("#results_properties").livequery(function(){var e=(0,n.default)(this).children("#number_of_results").text(),t=(0,n.default)(this).children("#term").text();"undefined"!=typeof ga&&ga("send","event","Search Results","Term",t,parseInt(e,10))})}),(0,n.default)(document).ready(function(){(0,n.default)("#pledges_login_or_signup #growl_section .error").livequery(function(){var e=(0,n.default)(this).children(".message").html(),t=(0,n.default)(document).attr("URL");"undefined"!=typeof ga&&ga("send","event","Checkout Login Errors",e,t)}),(0,n.default)("#checkout-signup .fieldset-errors").livequery(function(){var e=(0,n.default)(this).children("ul").children(),t=(0,n.default)(document).attr("URL");n.default.each(e,function(e,i){i=i.innerHTML,"undefined"!=typeof ga&&ga("send","event","Checkout Signup Errors",i,t)})}),(0,n.default)("#sessions_new #growl_section .error").livequery(function(){var e=(0,n.default)(this).children(".message").html(),t=(0,n.default)(document).attr("URL");"undefined"!=typeof ga&&ga("send","event","Regular Login Errors",e,t)}),(0,n.default)("#new_user .fieldset-errors").livequery(function(){var e=(0,n.default)(this).children("ul").children(),t=(0,n.default)(document).attr("URL");n.default.each(e,function(e,i){i=i.innerHTML,"undefined"!=typeof ga&&ga("send","event","Regular Signup Errors",i,t)})})}),(0,n.default)(document).ready(function(){(0,n.default)(".share-box").on("click","a",function(){var e=(0,n.default)(this).attr("data-tracker-name");"undefined"!=typeof ga&&ga("send","event","Sharing",e)}),(0,n.default)("#checkout-project-share").on("click","a",function(){var e=(0,n.default)(this).attr("data-tracker-name");"undefined"!=typeof ga&&ga("send","event","Sharing",e)}),(0,n.default)(document).on("click",".clipster",function(){"undefined"!=typeof ga&&ga("send","event","Sharing","Copied Link")}),(0,n.default)(document).on("fb:loaded",function(){FB.Event.subscribe("edge.create",function(){"undefined"!=typeof ga&&ga("send","event","Sharing","Facebook Like")})})}),(0,n.default)(function(){var e;(0,n.default)("#video-section object").livequery(function(){e=(0,n.default)(this)[0],(0,n.default)(document).attr("URL")}),(0,n.default)(document).on("click","#video-section",function(){(0,n.default)(document).attr("URL"),e&&("Project Page Video",function(e){e.addModelListener("TIME","timeStats"),e.addModelListener("STATE","getState")}(e))}),(0,n.default)(window).on("beforeunload",function(){0})}),(0,n.default)(document).on("modal_dialog:opened",function(e){var t=(0,n.default)(e.target).find(".modal_dialog_head h4").text();"undefined"!=typeof ga&&ga("send","event","Modal Dialog","Opened",t)}),(0,n.default)(document).ready(function(){(0,n.default)(".faq-question a").click(function(){var e=(0,n.default)("body[id]").length?(0,n.default)("body").attr("id"):"No ID",t=(0,n.default)(this).closest(".faq"),i=(0,n.default)(this).find(".question").text();"undefined"==typeof ga||t.hasClass("expanded")||ga("send","event","FAQ","Expanded - "+e,i)})}),(0,n.default)(document).ready(function(){(0,n.default)(document).on("click","a#edit_survey_response",function(){"undefined"!=typeof ga&&ga("send","event","Surveys","Click","Edit Survey Response")})}),(0,n.default)(document).ready(function(){(0,n.default)(document).on("click","ul#admin-menu > li > a",function(){"undefined"!=typeof ga&&ga("send","event","Admin","Nav Click",(0,n.default)(this).text())})}),(0,n.default)(document).ready(function(){var e=0;(0,n.default)(".scissors").on("click",function(){e<2?("undefined"!=typeof ga&&ga("send","event","Scissors","Clicks"),e+=1):"undefined"!=typeof ga&&ga("send","event","Scissors","Chops")})}),(0,n.default)(document).ready(function(){if((0,n.default)("#checkouts_thanks").length&&"undefined"!=typeof ga&&s.default&&o.default){ga("require","ecommerce"),ga("ecommerce:addTransaction",{id:s.default.get("id"),affiliation:o.default.get("slug"),revenue:s.default.get("net_amount"),shipping:s.default.get("shipping"),currency:o.default.get("currency")});var e=[o.default.get("name"),s.default.get("reward").title_for_backing_tier||"No Reward"].join("-");ga("ecommerce:addItem",{id:s.default.get("id"),name:e,sku:s.default.get("reward").id,category:o.default.get("category").name,price:s.default.get("reward").minimum,quantity:"1",currency:o.default.get("currency")}),ga("ecommerce:send")}}),(0,n.default)(document).ready(function(){var e=1;(0,n.default)(document).on("infinite_scroll:scrolled_to",function(t,i){if(i>e){var n=window.location.pathname+window.location.search+window.location.hash;"undefined"!=typeof ga&&ga("send","pageview",n),e=i}})})},zcvo:function(e,t,i){var n=i("l/Rs");i("l/Rs");!function(e){e.fn.livesearch_selector=function(t){return t=e.extend({url:!1,cancel_copy:"Cancel",target_input:!1},t),e(this).each(function(){var i,n=e(this),r=n.find('input[type="text"]'),a=t.target_input||n.find('input[type="hidden"]'),s=r.siblings(".ss-search");function o(){r.hide(),r.attr("disabled","disabled"),r.siblings(".ss-delete, .ss-search").hide();var i=e('<div class="field-selected"><span class="value">'+r.val()+'</span><a class="ss-icon ss-delete cancel-link" href="#">'+t.cancel_copy+"</a></div>");r.siblings("div.field-selected").remove(),r.after(i),r.siblings(".results").slideUp(),r.trigger("livesearch_selector:select",[r.val()]),i.find("a.cancel-link").click(function(e){e.preventDefault(),r.val(""),i.remove(),r.removeAttr("disabled"),r.siblings(".ss-delete, .ss-search").show(),r.show(),r.focus(),a.val(""),r.trigger("dirty"),r.trigger("livesearch_selector:unselect")})}n.addClass("search"),a.val()&&r.val()&&o(),t.url=t.url||n.closest("form").attr("action"),n.livesearch_pretty_input_dropdown(t),i=r.data("livesearch.input_dropdown"),r.on("livesearch:searching",function(){s.removeClass("ss-search").addClass("icon-loading-small")}),r.on("livesearch:results livesearch:ajax_error",function(){s.removeClass("icon-loading-small").addClass("ss-search")}),r.on("livesearch:results",function(){var e=r.siblings(".results");i.select(e.find("li:first"))}),n.on("livesearch:selected",function(e,t){t&&(r.val(t[0]),a.val(t[1]),o())})})}}(n)},zx33:function(e,t,i){"use strict";i("l/Rs");var n=i("l/Rs");n(function(){n.fn.sync_form=function(e){var t=n(this),i=function(){};e=e||{},t.data("updating")?t.data("dirty",(t.data("dirty")||[]).concat(e)):(t.data("updating",!0),n.ajax({type:e.type||t.attr("method"),url:e.url||t.attr("action"),data:e.data||t.serialize(),dataType:"json",global:!1,context:t,beforeSend:e.beforeSend,success:function(r){(e.success||i).apply(this,arguments),t.trigger("form_synced",[r]),t.data("dirty")&&t.data("dirty").length&&setTimeout(function(){for(var e={};n.isEmptyObject(e)&&t.data("dirty").length;)e=t.data("dirty").shift();t.sync_form(e)},100),r.url&&t.attr("action",r.url)},error:e.error,complete:function(){(e.complete||i).apply(this,arguments),t.data("updating",!1)}}))}})}},[18]);